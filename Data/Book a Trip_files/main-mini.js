function LoyaltyGuestDisplayTotal(){}this.JSON||(this.JSON={}),function(){function i(n){return n<10?"0"+n:n}function o(n){return e.lastIndex=0,e.test(n)?'"'+n.replace(e,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function u(i,f){var c,l,s,a,v=n,h,e=f[i];e&&typeof e=="object"&&typeof e.toJSON=="function"&&(e=e.toJSON(i)),typeof t=="function"&&(e=t.call(f,i,e));switch(typeof e){case"string":return o(e);case"number":return isFinite(e)?String(e):"null";case"boolean":case"null":return String(e);case"object":if(!e)return"null";if(n+=r,h=[],Object.prototype.toString.apply(e)==="[object Array]"){for(a=e.length,c=0;c<a;c+=1)h[c]=u(c,e)||"null";return s=h.length===0?"[]":n?"[\n"+n+h.join(",\n"+n)+"\n"+v+"]":"["+h.join(",")+"]",n=v,s}if(t&&typeof t=="object")for(a=t.length,c=0;c<a;c+=1)l=t[c],typeof l=="string"&&(s=u(l,e),s&&h.push(o(l)+(n?": ":":")+s));else for(l in e)Object.hasOwnProperty.call(e,l)&&(s=u(l,e),s&&h.push(o(l)+(n?": ":":")+s));return s=h.length===0?"{}":n?"{\n"+n+h.join(",\n"+n)+"\n"+v+"}":"{"+h.join(",")+"}",n=v,s}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,r,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",r="",typeof e=="number")for(o=0;o<e;o+=1)r+=" ";else typeof e=="string"&&(r=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return u("",{"":i})}),typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(f.lastIndex=0,f.test(n)&&(n=n.replace(f,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
/*!
* jQuery JavaScript Library v1.3.2
* http://jquery.com/
*
* Copyright (c) 2009 John Resig
* Dual licensed under the MIT and GPL licenses.
* http://docs.jquery.com/License
*
* Date: 2009-02-19 17:34:21 -0500 (Thu, 19 Feb 2009)
* Revision: 6246
*/
(function(n,t){function pt(n){return i.isWindow(n)?n:n.nodeType===9?n.defaultView||n.parentWindow:!1}function wt(n){if(!at[n]){var e=r.body,t=i("<"+n+">").appendTo(e),u=t.css("display");t.remove(),(u==="none"||u==="")&&(f||(f=r.createElement("iframe"),f.frameBorder=f.width=f.height=0),e.appendChild(f),y&&f.createElement||(y=(f.contentWindow||f.contentDocument).document,y.write((i.support.boxModel?"<!doctype html>":"")+"<html><body>"),y.close()),t=y.createElement(n),y.body.appendChild(t),u=i.css(t,"display"),e.removeChild(f)),at[n]=u}return at[n]}function c(n,t){var r={};return i.each(it.concat.apply([],it.slice(0,t)),function(){r[this]=n}),r}function dr(){rt=t}function bt(){return setTimeout(dr,0),rt=i.now()}function gr(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function kt(){try{return new n.XMLHttpRequest}catch(t){}}function nu(n,r){n.dataFilter&&(r=n.dataFilter(r,n.dataType));for(var v=n.dataTypes,s={},l,p=v.length,a,u=v[0],h,y,f,e,o,c=1;c<p;c++){if(c===1)for(l in n.converters)typeof l=="string"&&(s[l.toLowerCase()]=n.converters[l]);if(h=u,u=v[c],u==="*")u=h;else if(h!=="*"&&h!==u){if(y=h+" "+u,f=s[y]||s["* "+u],!f){o=t;for(e in s)if(a=e.split(" "),(a[0]===h||a[0]==="*")&&(o=s[a[1]+" "+u],o)){e=s[e],e===!0?f=o:o===!0&&(f=e);break}}f||o||i.error("No conversion from "+y.replace(" "," to ")),f!==!0&&(r=f?f(r):o(e(r)))}}return r}function tu(n,i,r){var s=n.contents,f=n.dataTypes,c=n.responseFields,o,u,e,h;for(u in c)u in r&&(i[c[u]]=r[u]);while(f[0]==="*")f.shift(),o===t&&(o=n.mimeType||i.getResponseHeader("content-type"));if(o)for(u in s)if(s[u]&&s[u].test(o)){f.unshift(u);break}if(f[0]in r)e=f[0];else{for(u in r){if(!f[0]||n.converters[u+" "+f[0]]){e=u;break}h||(h=u)}e=e||h}if(e)return e!==f[0]&&f.unshift(e),r[e]}function ut(n,t,r,u){if(i.isArray(t))i.each(t,function(t,i){r||wf.test(n)?u(n,i):ut(n+"["+(typeof i=="object"?t:"")+"]",i,r,u)});else if(r||i.type(t)!=="object")u(n,t);else for(var f in t)ut(n+"["+f+"]",t[f],r,u)}function dt(n,r){var u,f,e=i.ajaxSettings.flatOptions||{};for(u in r)r[u]!==t&&((e[u]?n:f||(f={}))[u]=r[u]);f&&i.extend(!0,n,f)}function w(n,i,r,u,f,e){f=f||i.dataTypes[0],e=e||{},e[f]=!0;for(var s=n[f],h=0,l=s?s.length:0,c=n===lt,o;h<l&&(c||!o);h++)o=s[h](i,r,u),typeof o=="string"&&(!c||e[o]?o=t:(i.dataTypes.unshift(o),o=w(n,i,r,u,o,e)));return!c&&o||e["*"]||(o=w(n,i,r,u,"*",e)),o}function gt(n){return function(t,r){if(typeof t!="string"&&(r=t,t="*"),i.isFunction(r))for(var o=t.toLowerCase().split(lr),f=0,h=o.length,u,s,e;f<h;f++)u=o[f],e=/^\+/.test(u),e&&(u=u.substr(1)||"*"),s=n[u]=n[u]||[],s[e?"unshift":"push"](r)}}function ni(n,t,r){var u=t==="width"?n.offsetWidth:n.offsetHeight,f=t==="width"?1:0,e=4;if(u>0){if(r!=="border")for(;f<e;f+=2)r||(u-=parseFloat(i.css(n,"padding"+o[f]))||0),r==="margin"?u+=parseFloat(i.css(n,r+o[f]))||0:u-=parseFloat(i.css(n,"border"+o[f]+"Width"))||0;return u+"px"}if(u=a(n,t),(u<0||u==null)&&(u=n.style[t]),ct.test(u))return u;if(u=parseFloat(u)||0,r)for(;f<e;f+=2)u+=parseFloat(i.css(n,"padding"+o[f]))||0,r!=="padding"&&(u+=parseFloat(i.css(n,"border"+o[f]+"Width"))||0),r==="margin"&&(u+=parseFloat(i.css(n,r+o[f]))||0);return u+"px"}function iu(n){var t=r.createElement("div");return st.appendChild(t),t.innerHTML=n.outerHTML,t.firstChild}function ti(n){var t=(n.nodeName||"").toLowerCase();t==="input"?ii(n):t!=="script"&&typeof n.getElementsByTagName!="undefined"&&i.grep(n.getElementsByTagName("input"),ii)}function ii(n){(n.type==="checkbox"||n.type==="radio")&&(n.defaultChecked=n.checked)}function b(n){return typeof n.getElementsByTagName!="undefined"?n.getElementsByTagName("*"):typeof n.querySelectorAll!="undefined"?n.querySelectorAll("*"):[]}function ri(n,t){var r;t.nodeType===1&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(n),r=t.nodeName.toLowerCase(),r==="object"?t.outerHTML=n.outerHTML:r!=="input"||n.type!=="checkbox"&&n.type!=="radio"?r==="option"?t.selected=n.defaultSelected:r==="input"||r==="textarea"?t.defaultValue=n.defaultValue:r==="script"&&t.text!==n.text&&(t.text=n.text):(n.checked&&(t.defaultChecked=t.checked=n.checked),t.value!==n.value&&(t.value=n.value)),t.removeAttribute(i.expando),t.removeAttribute("_submit_attached"),t.removeAttribute("_change_attached"))}function ui(n,t){if(t.nodeType===1&&!!i.hasData(n)){var u,f,o,s=i._data(n),r=i._data(t,s),e=s.events;if(e){delete r.handle,r.events={};for(u in e)for(f=0,o=e[u].length;f<o;f++)i.event.add(t,u,e[u][f])}r.data&&(r.data=i.extend({},r.data))}}function ru(n){return i.nodeName(n,"table")?n.getElementsByTagName("tbody")[0]||n.appendChild(n.ownerDocument.createElement("tbody")):n}function fi(n){var i=tr.split("|"),t=n.createDocumentFragment();if(t.createElement)while(i.length)t.createElement(i.pop());return t}function ei(n,t,r){if(t=t||0,i.isFunction(t))return i.grep(n,function(n,i){var u=!!t.call(n,i,n);return u===r});if(t.nodeType)return i.grep(n,function(n){return n===t===r});if(typeof t=="string"){var u=i.grep(n,function(n){return n.nodeType===1});if(gu.test(t))return i.filter(t,u,!r);t=i.filter(t,u)}return i.grep(n,function(n){return i.inArray(n,t)>=0===r})}function oi(n){return!n||!n.parentNode||n.parentNode.nodeType===11}function k(){return!0}function l(){return!1}function si(n,t,r){var u=t+"defer",f=t+"queue",e=t+"mark",o=i._data(n,u);!o||r!=="queue"&&i._data(n,f)||r!=="mark"&&i._data(n,e)||setTimeout(function(){i._data(n,f)||i._data(n,e)||(i.removeData(n,u,!0),o.fire())},0)}function ft(n){for(var t in n)if((t!=="data"||!i.isEmptyObject(n[t]))&&t!=="toJSON")return!1;return!0}function hi(n,r,u){if(u===t&&n.nodeType===1){var f="data-"+r.replace(ai,"-$1").toLowerCase();if(u=n.getAttribute(f),typeof u=="string"){try{u=u==="true"?!0:u==="false"?!1:u==="null"?null:i.isNumeric(u)?+u:li.test(u)?i.parseJSON(u):u}catch(e){}i.data(n,r,u)}else u=t}return u}function uu(n){var i=ci[n]={},t,r;for(n=n.split(/\s+/),t=0,r=n.length;t<r;t++)i[n[t]]=!0;return i}var r=n.document,fu=n.navigator,eu=n.location,i=function(){function c(){if(!i.isReady){try{r.documentElement.doScroll("left")}catch(n){setTimeout(c,1);return}i.ready()}}var i=function(n,t){return new i.fn.init(n,t,l)},k=n.jQuery,d=n.$,l,g=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,a=/\S/,v=/^\s+/,y=/\s+$/,nt=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,tt=/^[\],:{}\s]*$/,it=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rt=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ut=/(?:^|:|,)(?:\s*\[)+/g,ft=/(webkit)[ \/]([\w.]+)/,et=/(opera)(?:.*version)?[ \/]([\w.]+)/,ot=/(msie) ([\w.]+)/,st=/(mozilla)(?:.*? rv:([\w.]+))?/,ht=/-([a-z]|[0-9])/ig,ct=/^-ms-/,lt=function(n,t){return(t+"").toUpperCase()},at=fu.userAgent,e,o,u,vt=Object.prototype.toString,s=Object.prototype.hasOwnProperty,h=Array.prototype.push,f=Array.prototype.slice,p=String.prototype.trim,w=Array.prototype.indexOf,b={};return i.fn=i.prototype={constructor:i,init:function(n,u,f){var e,s,o,h;if(!n)return this;if(n.nodeType)return this.context=this[0]=n,this.length=1,this;if(n==="body"&&!u&&r.body)return this.context=r,this[0]=r.body,this.selector=n,this.length=1,this;if(typeof n=="string"){if(e=n.charAt(0)!=="<"||n.charAt(n.length-1)!==">"||n.length<3?g.exec(n):[null,n,null],e&&(e[1]||!u)){if(e[1])return u=u instanceof i?u[0]:u,h=u?u.ownerDocument||u:r,o=nt.exec(n),o?i.isPlainObject(u)?(n=[r.createElement(o[1])],i.fn.attr.call(n,u,!0)):n=[h.createElement(o[1])]:(o=i.buildFragment([e[1]],[h]),n=(o.cacheable?i.clone(o.fragment):o.fragment).childNodes),i.merge(this,n);if(s=r.getElementById(e[2]),s&&s.parentNode){if(s.id!==e[2])return f.find(n);this.length=1,this[0]=s}return this.context=r,this.selector=n,this}return!u||u.jquery?(u||f).find(n):this.constructor(u).find(n)}return i.isFunction(n)?f.ready(n):(n.selector!==t&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return f.call(this,0)},get:function(n){return n==null?this.toArray():n<0?this[this.length+n]:this[n]},pushStack:function(n,t,r){var u=this.constructor();return i.isArray(n)?h.apply(u,n):i.merge(u,n),u.prevObject=this,u.context=this.context,t==="find"?u.selector=this.selector+(this.selector?" ":"")+r:t&&(u.selector=this.selector+"."+t+"("+r+")"),u},each:function(n,t){return i.each(this,n,t)},ready:function(n){return i.bindReady(),o.add(n),this},eq:function(n){return n=+n,n===-1?this.slice(n):this.slice(n,n+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(f.apply(this,arguments),"slice",f.call(arguments).join(","))},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},i.fn.init.prototype=i.fn,i.extend=i.fn.extend=function(){var o,e,u,r,s,h,n=arguments[0]||{},f=1,l=arguments.length,c=!1;for(typeof n=="boolean"&&(c=n,n=arguments[1]||{},f=2),typeof n!="object"&&!i.isFunction(n)&&(n={}),l===f&&(n=this,--f);f<l;f++)if((o=arguments[f])!=null)for(e in o)(u=n[e],r=o[e],n!==r)&&(c&&r&&(i.isPlainObject(r)||(s=i.isArray(r)))?(s?(s=!1,h=u&&i.isArray(u)?u:[]):h=u&&i.isPlainObject(u)?u:{},n[e]=i.extend(c,h,r)):r!==t&&(n[e]=r));return n},i.extend({noConflict:function(t){return n.$===i&&(n.$=d),t&&n.jQuery===i&&(n.jQuery=k),i},isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){if(n===!0&&!--i.readyWait||n!==!0&&!i.isReady){if(!r.body)return setTimeout(i.ready,1);if(i.isReady=!0,n!==!0&&--i.readyWait>0)return;o.fireWith(r,[i]),i.fn.trigger&&i(r).trigger("ready").off("ready")}},bindReady:function(){if(!o){if(o=i.Callbacks("once memory"),r.readyState==="complete")return setTimeout(i.ready,1);if(r.addEventListener)r.addEventListener("DOMContentLoaded",u,!1),n.addEventListener("load",i.ready,!1);else if(r.attachEvent){r.attachEvent("onreadystatechange",u),n.attachEvent("onload",i.ready);var t=!1;try{t=n.frameElement==null}catch(f){}r.documentElement.doScroll&&t&&c()}}},isFunction:function(n){return i.type(n)==="function"},isArray:Array.isArray||function(n){return i.type(n)==="array"},isWindow:function(n){return n!=null&&n==n.window},isNumeric:function(n){return!isNaN(parseFloat(n))&&isFinite(n)},type:function(n){return n==null?String(n):b[vt.call(n)]||"object"},isPlainObject:function(n){if(!n||i.type(n)!=="object"||n.nodeType||i.isWindow(n))return!1;try{if(n.constructor&&!s.call(n,"constructor")&&!s.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(u){return!1}var r;for(r in n);return r===t||s.call(n,r)},isEmptyObject:function(n){for(var t in n)return!1;return!0},error:function(n){throw new Error(n);},parseJSON:function(t){if(typeof t!="string"||!t)return null;if(t=i.trim(t),n.JSON&&n.JSON.parse)return n.JSON.parse(t);if(tt.test(t.replace(it,"@").replace(rt,"]").replace(ut,"")))return new Function("return "+t)();i.error("Invalid JSON: "+t)},parseXML:function(r){if(typeof r!="string"||!r)return null;var u,f;try{n.DOMParser?(f=new DOMParser,u=f.parseFromString(r,"text/xml")):(u=new ActiveXObject("Microsoft.XMLDOM"),u.async="false",u.loadXML(r))}catch(e){u=t}return u&&u.documentElement&&!u.getElementsByTagName("parsererror").length||i.error("Invalid XML: "+r),u},noop:function(){},globalEval:function(t){t&&a.test(t)&&(n.execScript||function(t){n.eval.call(n,t)})(t)},camelCase:function(n){return n.replace(ct,"ms-").replace(ht,lt)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toUpperCase()===t.toUpperCase()},each:function(n,r,u){var f,e=0,o=n.length,s=o===t||i.isFunction(n);if(u){if(s){for(f in n)if(r.apply(n[f],u)===!1)break}else for(;e<o;)if(r.apply(n[e++],u)===!1)break}else if(s){for(f in n)if(r.call(n[f],f,n[f])===!1)break}else for(;e<o;)if(r.call(n[e],e,n[e++])===!1)break;return n},trim:p?function(n){return n==null?"":p.call(n)}:function(n){return n==null?"":(n+"").replace(v,"").replace(y,"")},makeArray:function(n,t){var u=t||[],r;return n!=null&&(r=i.type(n),n.length==null||r==="string"||r==="function"||r==="regexp"||i.isWindow(n)?h.call(u,n):i.merge(u,n)),u},inArray:function(n,t,i){var r;if(t){if(w)return w.call(t,n,i);for(r=t.length,i=i?i<0?Math.max(0,r+i):i:0;i<r;i++)if(i in t&&t[i]===n)return i}return-1},merge:function(n,i){var u=n.length,r=0,f;if(typeof i.length=="number")for(f=i.length;r<f;r++)n[u++]=i[r];else while(i[r]!==t)n[u++]=i[r++];return n.length=u,n},grep:function(n,t,i){var u=[],f,r,e;for(i=!!i,r=0,e=n.length;r<e;r++)f=!!t(n[r],r),i!==f&&u.push(n[r]);return u},map:function(n,r,u){var f,h,e=[],s=0,o=n.length,c=n instanceof i||o!==t&&typeof o=="number"&&(o>0&&n[0]&&n[o-1]||o===0||i.isArray(n));if(c)for(;s<o;s++)f=r(n[s],s,u),f!=null&&(e[e.length]=f);else for(h in n)f=r(n[h],h,u),f!=null&&(e[e.length]=f);return e.concat.apply([],e)},guid:1,proxy:function(n,r){var e,o,u;return(typeof r=="string"&&(e=n[r],r=n,n=e),!i.isFunction(n))?t:(o=f.call(arguments,2),u=function(){return n.apply(r,o.concat(f.call(arguments)))},u.guid=n.guid=n.guid||u.guid||i.guid++,u)},access:function(n,r,u,f,e,o,s){var c,l=u==null,h=0,a=n.length;if(u&&typeof u=="object"){for(h in u)i.access(n,r,h,u[h],1,o,f);e=1}else if(f!==t){if(c=s===t&&i.isFunction(f),l&&(c?(c=r,r=function(n,t,r){return c.call(i(n),r)}):(r.call(n,f),r=null)),r)for(;h<a;h++)r(n[h],u,c?f.call(n[h],h,r(n[h],u)):f,s);e=1}return e?n:l?r.call(n):a?r(n[0],u):o},now:function(){return+new Date},uaMatch:function(n){n=n.toLowerCase();var t=ft.exec(n)||et.exec(n)||ot.exec(n)||n.indexOf("compatible")<0&&st.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function n(t,i){return new n.fn.init(t,i)}i.extend(!0,n,this),n.superclass=this,n.fn=n.prototype=this(),n.fn.constructor=n,n.sub=this.sub,n.fn.init=function(r,u){return u&&u instanceof i&&!(u instanceof n)&&(u=n(u)),i.fn.init.call(this,r,u,t)},n.fn.init.prototype=n.fn;var t=n(r);return n},browser:{}}),i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(n,t){b["[object "+t+"]"]=t.toLowerCase()}),e=i.uaMatch(at),e.browser&&(i.browser[e.browser]=!0,i.browser.version=e.version),i.browser.webkit&&(i.browser.safari=!0),a.test(" ")&&(v=/^[\s\xA0]+/,y=/[\s\xA0]+$/),l=i(r),r.addEventListener?u=function(){r.removeEventListener("DOMContentLoaded",u,!1),i.ready()}:r.attachEvent&&(u=function(){r.readyState==="complete"&&(r.detachEvent("onreadystatechange",u),i.ready())}),i}(),ci={},d,li,ai,wr,p,nt,br,v,vt,kr,yt;i.Callbacks=function(n){n=n?ci[n]||uu(n):{};var r=[],f=[],u,l,s,c,h,e,a=function(t){for(var u,e,h,f=0,s=t.length;f<s;f++)u=t[f],e=i.type(u),e==="array"?a(u):e==="function"&&(!n.unique||!o.has(u))&&r.push(u)},v=function(t,i){for(i=i||[],u=!n.memory||[t,i],l=!0,s=!0,e=c||0,c=0,h=r.length;r&&e<h;e++)if(r[e].apply(t,i)===!1&&n.stopOnFalse){u=!0;break}s=!1,r&&(n.once?u===!0?o.disable():r=[]:f&&f.length&&(u=f.shift(),o.fireWith(u[0],u[1])))},o={add:function(){if(r){var n=r.length;a(arguments),s?h=r.length:u&&u!==!0&&(c=n,v(u[0],u[1]))}return this},remove:function(){var t;if(r)for(var u=arguments,i=0,f=u.length;i<f;i++)for(t=0;t<r.length;t++)if(u[i]===r[t]&&(s&&t<=h&&(h--,t<=e&&e--),r.splice(t--,1),n.unique))break;return this},has:function(n){if(r)for(var t=0,i=r.length;t<i;t++)if(n===r[t])return!0;return!1},empty:function(){return r=[],this},disable:function(){return r=f=u=t,this},disabled:function(){return!r},lock:function(){return f=t,u&&u!==!0||o.disable(),this},locked:function(){return!f},fireWith:function(t,i){return f&&(s?n.once||f.push([t,i]):(!n.once||!u)&&v(t,i)),this},fire:function(){return o.fireWith(this,arguments),this},fired:function(){return!!l}};return o},d=[].slice,i.extend({Deferred:function(n){var u=i.Callbacks("once memory"),f=i.Callbacks("once memory"),e=i.Callbacks("memory"),s="pending",h={resolve:u,reject:f,notify:e},o={done:u.add,fail:f.add,progress:e.add,state:function(){return s},isResolved:u.fired,isRejected:f.fired,then:function(n,i,r){return t.done(n).fail(i).progress(r),this},always:function(){return t.done.apply(t,arguments).fail.apply(t,arguments),this},pipe:function(n,r,u){return i.Deferred(function(f){i.each({done:[n,"resolve"],fail:[r,"reject"],progress:[u,"notify"]},function(n,r){var e=r[0],o=r[1],u;i.isFunction(e)?t[n](function(){u=e.apply(this,arguments),u&&i.isFunction(u.promise)?u.promise().then(f.resolve,f.reject,f.notify):f[o+"With"](this===t?f:this,[u])}):t[n](f[o])})}).promise()},promise:function(n){if(n==null)n=o;else for(var t in o)n[t]=o[t];return n}},t=o.promise({}),r;for(r in h)t[r]=h[r].fire,t[r+"With"]=h[r].fireWith;return t.done(function(){s="resolved"},f.disable,e.lock).fail(function(){s="rejected"},u.disable,e.lock),n&&n.call(t,t),t},when:function(n){function h(n){return function(i){o[n]=arguments.length>1?d.call(arguments,0):i,t.notifyWith(s,o)}}function c(n){return function(i){r[n]=arguments.length>1?d.call(arguments,0):i,--e||t.resolveWith(t,r)}}var r=d.call(arguments,0),u=0,f=r.length,o=Array(f),e=f,l=f,t=f<=1&&n&&i.isFunction(n.promise)?n:i.Deferred(),s=t.promise();if(f>1){for(;u<f;u++)r[u]&&r[u].promise&&i.isFunction(r[u].promise)?r[u].promise().then(c(u),t.reject,h(u)):--e;e||t.resolveWith(t,r)}else t!==n&&t.resolveWith(t,f?[n]:[]);return s}}),i.support=function(){var u,v,o,c,l,f,e,h,p,a,y,s,t=r.createElement("div"),w=r.documentElement;if(t.setAttribute("className","t"),t.innerHTML="   <link/><table><\/table><a href='/a' style='top:1px;float:left;opacity:.55;'>a<\/a><input type='checkbox'/>",v=t.getElementsByTagName("*"),o=t.getElementsByTagName("a")[0],!v||!v.length||!o)return{};c=r.createElement("select"),l=c.appendChild(r.createElement("option")),f=t.getElementsByTagName("input")[0],u={leadingWhitespace:t.firstChild.nodeType===3,tbody:!t.getElementsByTagName("tbody").length,htmlSerialize:!!t.getElementsByTagName("link").length,style:/top/.test(o.getAttribute("style")),hrefNormalized:o.getAttribute("href")==="/a",opacity:/^0.55/.test(o.style.opacity),cssFloat:!!o.style.cssFloat,checkOn:f.value==="on",optSelected:l.selected,getSetAttribute:t.className!=="t",enctype:!!r.createElement("form").enctype,html5Clone:r.createElement("nav").cloneNode(!0).outerHTML!=="<:nav><\/:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},i.boxModel=u.boxModel=r.compatMode==="CSS1Compat",f.checked=!0,u.noCloneChecked=f.cloneNode(!0).checked,c.disabled=!0,u.optDisabled=!l.disabled;try{delete t.test}catch(b){u.deleteExpando=!1}if(!t.addEventListener&&t.attachEvent&&t.fireEvent&&(t.attachEvent("onclick",function(){u.noCloneEvent=!1}),t.cloneNode(!0).fireEvent("onclick")),f=r.createElement("input"),f.value="t",f.setAttribute("type","radio"),u.radioValue=f.value==="t",f.setAttribute("checked","checked"),f.setAttribute("name","t"),t.appendChild(f),e=r.createDocumentFragment(),e.appendChild(t.lastChild),u.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,u.appendChecked=f.checked,e.removeChild(f),e.appendChild(t),t.attachEvent)for(y in{submit:1,change:1,focusin:1})a="on"+y,s=a in t,s||(t.setAttribute(a,"return;"),s=typeof t[a]=="function"),u[y+"Bubbles"]=s;return e.removeChild(t),e=c=l=t=f=null,i(function(){var e,c,f,g,k,l,o,y,p,d,w,b,a,v=r.getElementsByTagName("body")[0];v&&(y=1,a="padding:0;margin:0;border:",w="position:absolute;top:0;left:0;width:1px;height:1px;",b=a+"0;visibility:hidden;",p="style='"+w+a+"5px solid #000;",d="<div "+p+"display:block;'><div style='"+a+"0;display:block;overflow:hidden;'><\/div><\/div><table "+p+"' cellpadding='0' cellspacing='0'><tr><td><\/td><\/tr><\/table>",e=r.createElement("div"),e.style.cssText=b+"width:0;height:0;position:static;top:0;margin-top:"+y+"px",v.insertBefore(e,v.firstChild),t=r.createElement("div"),e.appendChild(t),t.innerHTML="<table><tr><td style='"+a+"0;display:none'><\/td><td>t<\/td><\/tr><\/table>",h=t.getElementsByTagName("td"),s=h[0].offsetHeight===0,h[0].style.display="",h[1].style.display="none",u.reliableHiddenOffsets=s&&h[0].offsetHeight===0,n.getComputedStyle&&(t.innerHTML="",o=r.createElement("div"),o.style.width="0",o.style.marginRight="0",t.style.width="2px",t.appendChild(o),u.reliableMarginRight=(parseInt((n.getComputedStyle(o,null)||{marginRight:0}).marginRight,10)||0)===0),typeof t.style.zoom!="undefined"&&(t.innerHTML="",t.style.width=t.style.padding="1px",t.style.border=0,t.style.overflow="hidden",t.style.display="inline",t.style.zoom=1,u.inlineBlockNeedsLayout=t.offsetWidth===3,t.style.display="block",t.style.overflow="visible",t.innerHTML="<div style='width:5px;'><\/div>",u.shrinkWrapBlocks=t.offsetWidth!==3),t.style.cssText=w+b,t.innerHTML=d,c=t.firstChild,f=c.firstChild,k=c.nextSibling.firstChild.firstChild,l={doesNotAddBorder:f.offsetTop!==5,doesAddBorderForTableAndCells:k.offsetTop===5},f.style.position="fixed",f.style.top="20px",l.fixedPosition=f.offsetTop===20||f.offsetTop===15,f.style.position=f.style.top="",c.style.overflow="hidden",c.style.position="relative",l.subtractsBorderForOverflowNotVisible=f.offsetTop===-5,l.doesNotIncludeMarginInBodyOffset=v.offsetTop!==y,n.getComputedStyle&&(t.style.marginTop="1%",u.pixelMargin=(n.getComputedStyle(t,null)||{marginTop:0}).marginTop!=="1%"),typeof e.style.zoom!="undefined"&&(e.style.zoom=1),v.removeChild(e),o=t=e=null,i.extend(u,l))}),u}(),li=/^(?:\{.*\}|\[.*\])$/,ai=/([A-Z])/g,i.extend({cache:{},uuid:0,expando:"jQuery"+(i.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(n){return n=n.nodeType?i.cache[n[i.expando]]:n[i.expando],!!n&&!ft(n)},data:function(n,r,u,f){if(!!i.acceptData(n)){var a,o,h,c=i.expando,v=typeof r=="string",l=n.nodeType,s=l?i.cache:n,e=l?n[c]:n[c]&&c,y=r==="events";return(!e||!s[e]||!y&&!f&&!s[e].data)&&v&&u===t?void 0:(e||(l?n[c]=e=++i.uuid:e=c),s[e]||(s[e]={},l||(s[e].toJSON=i.noop)),(typeof r=="object"||typeof r=="function")&&(f?s[e]=i.extend(s[e],r):s[e].data=i.extend(s[e].data,r)),a=o=s[e],f||(o.data||(o.data={}),o=o.data),u!==t&&(o[i.camelCase(r)]=u),y&&!o[r])?a.events:(v?(h=o[r],h==null&&(h=o[i.camelCase(r)])):h=o,h)}},removeData:function(n,t,r){if(!!i.acceptData(n)){var e,s,c,o=i.expando,h=n.nodeType,u=h?i.cache:n,f=h?n[o]:o;if(!u[f])return;if(t&&(e=r?u[f]:u[f].data,e)){for(i.isArray(t)||(t in e?t=[t]:(t=i.camelCase(t),t=t in e?[t]:t.split(" "))),s=0,c=t.length;s<c;s++)delete e[t[s]];if(!(r?ft:i.isEmptyObject)(e))return}if(!r&&(delete u[f].data,!ft(u[f])))return;i.support.deleteExpando||!u.setInterval?delete u[f]:u[f]=null,h&&(i.support.deleteExpando?delete n[o]:n.removeAttribute?n.removeAttribute(o):n[o]=null)}},_data:function(n,t,r){return i.data(n,t,r,!0)},acceptData:function(n){if(n.nodeName){var t=i.noData[n.nodeName.toLowerCase()];if(t)return t!==!0&&n.getAttribute("classid")===t}return!0}}),i.fn.extend({data:function(n,r){var u,s,h,o,l,e=this[0],c=0,f=null;if(n===t){if(this.length&&(f=i.data(e),e.nodeType===1&&!i._data(e,"parsedAttrs"))){for(h=e.attributes,l=h.length;c<l;c++)o=h[c].name,o.indexOf("data-")===0&&(o=i.camelCase(o.substring(5)),hi(e,o,f[o]));i._data(e,"parsedAttrs",!0)}return f}return typeof n=="object"?this.each(function(){i.data(this,n)}):(u=n.split(".",2),u[1]=u[1]?"."+u[1]:"",s=u[1]+"!",i.access(this,function(r){if(r===t)return f=this.triggerHandler("getData"+s,[u[0]]),f===t&&e&&(f=i.data(e,n),f=hi(e,n,f)),f===t&&u[1]?this.data(u[0]):f;u[1]=r,this.each(function(){var t=i(this);t.triggerHandler("setData"+s,u),i.data(this,n,r),t.triggerHandler("changeData"+s,u)})},null,r,arguments.length>1,null,!1))},removeData:function(n){return this.each(function(){i.removeData(this,n)})}}),i.extend({_mark:function(n,t){n&&(t=(t||"fx")+"mark",i._data(n,t,(i._data(n,t)||0)+1))},_unmark:function(n,t,r){if(n!==!0&&(r=t,t=n,n=!1),t){r=r||"fx";var u=r+"mark",f=n?0:(i._data(t,u)||1)-1;f?i._data(t,u,f):(i.removeData(t,u,!0),si(t,r,"mark"))}},queue:function(n,t,r){var u;if(n)return t=(t||"fx")+"queue",u=i._data(n,t),r&&(!u||i.isArray(r)?u=i._data(n,t,i.makeArray(r)):u.push(r)),u||[]},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),u=r.shift(),f={};u==="inprogress"&&(u=r.shift()),u&&(t==="fx"&&r.unshift("inprogress"),i._data(n,t+".run",f),u.call(n,function(){i.dequeue(n,t)},f)),r.length||(i.removeData(n,t+"queue "+t+".run",!0),si(n,t,"queue"))}}),i.fn.extend({queue:function(n,r){var u=2;return(typeof n!="string"&&(r=n,n="fx",u--),arguments.length<u)?i.queue(this[0],n):r===t?this:this.each(function(){var t=i.queue(this,n,r);n==="fx"&&t[0]!=="inprogress"&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},delay:function(n,t){return n=i.fx?i.fx.speeds[n]||n:n,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,n);i.stop=function(){clearTimeout(r)}})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,r){function e(){--s||o.resolveWith(u,[u])}typeof n!="string"&&(r=n,n=t),n=n||"fx";for(var o=i.Deferred(),u=this,f=u.length,s=1,h=n+"defer",l=n+"queue",a=n+"mark",c;f--;)(c=i.data(u[f],h,t,!0)||(i.data(u[f],l,t,!0)||i.data(u[f],a,t,!0))&&i.data(u[f],h,i.Callbacks("once memory"),!0))&&(s++,c.add(e));return e(),o.promise(r)}});var vi=/[\n\t\r]/g,g=/\s+/,ou=/\r/g,su=/^(?:button|input)$/i,hu=/^(?:button|input|object|select|textarea)$/i,cu=/^a(?:rea)?$/i,yi=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,pi=i.support.getSetAttribute,e,wi,bi;i.fn.extend({attr:function(n,t){return i.access(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})},prop:function(n,t){return i.access(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return n=i.propFix[n]||n,this.each(function(){try{this[n]=t,delete this[n]}catch(i){}})},addClass:function(n){var r,f,o,t,e,u,s;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,this.className))});if(n&&typeof n=="string")for(r=n.split(g),f=0,o=this.length;f<o;f++)if(t=this[f],t.nodeType===1)if(t.className||r.length!==1){for(e=" "+t.className+" ",u=0,s=r.length;u<s;u++)~e.indexOf(" "+r[u]+" ")||(e+=r[u]+" ");t.className=i.trim(e)}else t.className=n;return this},removeClass:function(n){var o,u,s,r,f,e,h;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,this.className))});if(n&&typeof n=="string"||n===t)for(o=(n||"").split(g),u=0,s=this.length;u<s;u++)if(r=this[u],r.nodeType===1&&r.className)if(n){for(f=(" "+r.className+" ").replace(vi," "),e=0,h=o.length;e<h;e++)f=f.replace(" "+o[e]+" "," ");r.className=i.trim(f)}else r.className="";return this},toggleClass:function(n,t){var r=typeof n,u=typeof t=="boolean";return i.isFunction(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,this.className,t),t)}):this.each(function(){if(r==="string")for(var f,s=0,o=i(this),e=t,h=n.split(g);f=h[s++];)e=u?e:!o.hasClass(f),o[e?"addClass":"removeClass"](f);else(r==="undefined"||r==="boolean")&&(this.className&&i._data(this,"__className__",this.className),this.className=this.className||n===!1?"":i._data(this,"__className__")||"")})},hasClass:function(n){for(var i=" "+n+" ",t=0,r=this.length;t<r;t++)if(this[t].nodeType===1&&(" "+this[t].className+" ").replace(vi," ").indexOf(i)>-1)return!0;return!1},val:function(n){var r,u,e,f=this[0];return!arguments.length?f?(r=i.valHooks[f.type]||i.valHooks[f.nodeName.toLowerCase()],r&&"get"in r&&(u=r.get(f,"value"))!==t)?u:(u=f.value,typeof u=="string"?u.replace(ou,""):u==null?"":u):void 0:(e=i.isFunction(n),this.each(function(u){var o=i(this),f;this.nodeType===1&&(f=e?n.call(this,u,o.val()):n,f==null?f="":typeof f=="number"?f+="":i.isArray(f)&&(f=i.map(f,function(n){return n==null?"":n+""})),r=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,f,"value")!==t||(this.value=f))}))}}),i.extend({valHooks:{option:{get:function(n){var t=n.attributes.value;return!t||t.specified?n.value:n.text}},select:{get:function(n){var o,r,h,t,u=n.selectedIndex,s=[],f=n.options,e=n.type==="select-one";if(u<0)return null;for(r=e?u:0,h=e?u+1:f.length;r<h;r++)if(t=f[r],t.selected&&(i.support.optDisabled?!t.disabled:t.getAttribute("disabled")===null)&&(!t.parentNode.disabled||!i.nodeName(t.parentNode,"optgroup"))){if(o=i(t).val(),e)return o;s.push(o)}return e&&!s.length&&f.length?i(f[u]).val():s},set:function(n,t){var r=i.makeArray(t);return i(n).find("option").each(function(){this.selected=i.inArray(i(this).val(),r)>=0}),r.length||(n.selectedIndex=-1),r}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(n,r,u,f){var o,s,h,c=n.nodeType;if(!!n&&c!==3&&c!==8&&c!==2){if(f&&r in i.attrFn)return i(n)[r](u);if(typeof n.getAttribute=="undefined")return i.prop(n,r,u);if(h=c!==1||!i.isXMLDoc(n),h&&(r=r.toLowerCase(),s=i.attrHooks[r]||(yi.test(r)?wi:e)),u!==t){if(u===null){i.removeAttr(n,r);return}return s&&"set"in s&&h&&(o=s.set(n,u,r))!==t?o:(n.setAttribute(r,""+u),u)}return s&&"get"in s&&h&&(o=s.get(n,r))!==null?o:(o=n.getAttribute(r),o===null?t:o)}},removeAttr:function(n,t){var u,f,r,s,e,o=0;if(t&&n.nodeType===1)for(f=t.toLowerCase().split(g),s=f.length;o<s;o++)r=f[o],r&&(u=i.propFix[r]||r,e=yi.test(r),e||i.attr(n,r,""),n.removeAttribute(pi?r:u),e&&u in n&&(n[u]=!1))},attrHooks:{type:{set:function(n,t){if(su.test(n.nodeName)&&n.parentNode)i.error("type property can't be changed");else if(!i.support.radioValue&&t==="radio"&&i.nodeName(n,"input")){var r=n.value;return n.setAttribute("type",t),r&&(n.value=r),t}}},value:{get:function(n,t){return e&&i.nodeName(n,"button")?e.get(n,t):t in n?n.value:null},set:function(n,t,r){if(e&&i.nodeName(n,"button"))return e.set(n,t,r);n.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(n,r,u){var e,f,s,o=n.nodeType;if(!!n&&o!==3&&o!==8&&o!==2)return s=o!==1||!i.isXMLDoc(n),s&&(r=i.propFix[r]||r,f=i.propHooks[r]),u!==t?f&&"set"in f&&(e=f.set(n,u,r))!==t?e:n[r]=u:f&&"get"in f&&(e=f.get(n,r))!==null?e:n[r]},propHooks:{tabIndex:{get:function(n){var i=n.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):hu.test(n.nodeName)||cu.test(n.nodeName)&&n.href?0:t}}}}),i.attrHooks.tabindex=i.propHooks.tabIndex,wi={get:function(n,r){var u,f=i.prop(n,r);return f===!0||typeof f!="boolean"&&(u=n.getAttributeNode(r))&&u.nodeValue!==!1?r.toLowerCase():t},set:function(n,t,r){var u;return t===!1?i.removeAttr(n,r):(u=i.propFix[r]||r,u in n&&(n[u]=!0),n.setAttribute(r,r.toLowerCase())),r}},pi||(bi={name:!0,id:!0,coords:!0},e=i.valHooks.button={get:function(n,i){var r;return r=n.getAttributeNode(i),r&&(bi[i]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(n,t,i){var u=n.getAttributeNode(i);return u||(u=r.createAttribute(i),n.setAttributeNode(u)),u.nodeValue=t+""}},i.attrHooks.tabindex.set=e.set,i.each(["width","height"],function(n,t){i.attrHooks[t]=i.extend(i.attrHooks[t],{set:function(n,i){if(i==="")return n.setAttribute(t,"auto"),i}})}),i.attrHooks.contenteditable={get:e.get,set:function(n,t,i){t===""&&(t="false"),e.set(n,t,i)}}),i.support.hrefNormalized||i.each(["href","src","width","height"],function(n,r){i.attrHooks[r]=i.extend(i.attrHooks[r],{get:function(n){var i=n.getAttribute(r,2);return i===null?t:i}})}),i.support.style||(i.attrHooks.style={get:function(n){return n.style.cssText.toLowerCase()||t},set:function(n,t){return n.style.cssText=""+t}}),i.support.optSelected||(i.propHooks.selected=i.extend(i.propHooks.selected,{get:function(n){var t=n.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),i.support.enctype||(i.propFix.enctype="encoding"),i.support.checkOn||i.each(["radio","checkbox"],function(){i.valHooks[this]={get:function(n){return n.getAttribute("value")===null?"on":n.value}}}),i.each(["radio","checkbox"],function(){i.valHooks[this]=i.extend(i.valHooks[this],{set:function(n,t){if(i.isArray(t))return n.checked=i.inArray(i(n).val(),t)>=0}})});var et=/^(?:textarea|input|select)$/i,ki=/^([^\.]*)?(?:\.(.+))?$/,lu=/(?:^|\s)hover(\.\S+)?\b/,au=/^key/,vu=/^(?:mouse|contextmenu)|click/,di=/^(?:focusinfocus|focusoutblur)$/,yu=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,pu=function(n){var t=yu.exec(n);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},wu=function(n,t){var i=n.attributes||{};return(!t[1]||n.nodeName.toLowerCase()===t[1])&&(!t[2]||(i.id||{}).value===t[2])&&(!t[3]||t[3].test((i["class"]||{}).value))},gi=function(n){return i.event.special.hover?n:n.replace(lu,"mouseenter$1 mouseleave$1")};i.event={add:function(n,r,u,f,e){var a,s,v,y,p,o,b,l,w,k,c,h;if(!(n.nodeType===3||n.nodeType===8||!r||!u||!(a=i._data(n)))){for(u.handler&&(w=u,u=w.handler,e=w.selector),u.guid||(u.guid=i.guid++),v=a.events,v||(a.events=v={}),s=a.handle,s||(a.handle=s=function(n){return typeof i!="undefined"&&(!n||i.event.triggered!==n.type)?i.event.dispatch.apply(s.elem,arguments):t},s.elem=n),r=i.trim(gi(r)).split(" "),y=0;y<r.length;y++)p=ki.exec(r[y])||[],o=p[1],b=(p[2]||"").split(".").sort(),h=i.event.special[o]||{},o=(e?h.delegateType:h.bindType)||o,h=i.event.special[o]||{},l=i.extend({type:o,origType:p[1],data:f,handler:u,guid:u.guid,selector:e,quick:e&&pu(e),namespace:b.join(".")},w),c=v[o],c||(c=v[o]=[],c.delegateCount=0,h.setup&&h.setup.call(n,f,b,s)!==!1||(n.addEventListener?n.addEventListener(o,s,!1):n.attachEvent&&n.attachEvent("on"+o,s))),h.add&&(h.add.call(n,l),l.handler.guid||(l.handler.guid=u.guid)),e?c.splice(c.delegateCount++,0,l):c.push(l),i.event.global[o]=!0;n=null}},global:{},remove:function(n,t,r,u,f){var y=i.hasData(n)&&i._data(n),l,p,e,b,h,k,a,v,c,w,o,s;if(!!y&&!!(v=y.events)){for(t=i.trim(gi(t||"")).split(" "),l=0;l<t.length;l++){if(p=ki.exec(t[l])||[],e=b=p[1],h=p[2],!e){for(e in v)i.event.remove(n,e+t[l],r,u,!0);continue}for(c=i.event.special[e]||{},e=(u?c.delegateType:c.bindType)||e,o=v[e]||[],k=o.length,h=h?new RegExp("(^|\\.)"+h.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,a=0;a<o.length;a++)s=o[a],(f||b===s.origType)&&(!r||r.guid===s.guid)&&(!h||h.test(s.namespace))&&(!u||u===s.selector||u==="**"&&s.selector)&&(o.splice(a--,1),s.selector&&o.delegateCount--,c.remove&&c.remove.call(n,s));o.length===0&&k!==o.length&&((!c.teardown||c.teardown.call(n,h)===!1)&&i.removeEvent(n,e,y.handle),delete v[e])}i.isEmptyObject(v)&&(w=y.handle,w&&(w.elem=null),i.removeData(n,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(r,u,f,e){if(!f||f.nodeType!==3&&f.nodeType!==8){var o=r.type||r,p=[],w,k,c,s,h,a,l,v,y,b;if(di.test(o+i.event.triggered))return;if(o.indexOf("!")>=0&&(o=o.slice(0,-1),k=!0),o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),(!f||i.event.customEvent[o])&&!i.event.global[o])return;if(r=typeof r=="object"?r[i.expando]?r:new i.Event(o,r):new i.Event(o),r.type=o,r.isTrigger=!0,r.exclusive=k,r.namespace=p.join("."),r.namespace_re=r.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,a=o.indexOf(":")<0?"on"+o:"",!f){w=i.cache;for(c in w)w[c].events&&w[c].events[o]&&i.event.trigger(r,u,w[c].handle.elem,!0);return}if(r.result=t,r.target||(r.target=f),u=u!=null?i.makeArray(u):[],u.unshift(r),l=i.event.special[o]||{},l.trigger&&l.trigger.apply(f,u)===!1)return;if(y=[[f,l.bindType||o]],!e&&!l.noBubble&&!i.isWindow(f)){for(b=l.delegateType||o,s=di.test(b+o)?f:f.parentNode,h=null;s;s=s.parentNode)y.push([s,b]),h=s;h&&h===f.ownerDocument&&y.push([h.defaultView||h.parentWindow||n,b])}for(c=0;c<y.length&&!r.isPropagationStopped();c++)s=y[c][0],r.type=y[c][1],v=(i._data(s,"events")||{})[r.type]&&i._data(s,"handle"),v&&v.apply(s,u),v=a&&s[a],v&&i.acceptData(s)&&v.apply(s,u)===!1&&r.preventDefault();return r.type=o,e||r.isDefaultPrevented()||l._default&&l._default.apply(f.ownerDocument,u)!==!1||o==="click"&&i.nodeName(f,"a")||!i.acceptData(f)||!a||!f[o]||(o==="focus"||o==="blur")&&r.target.offsetWidth===0||i.isWindow(f)||(h=f[a],h&&(f[a]=null),i.event.triggered=o,f[o](),i.event.triggered=t,h&&(f[a]=h)),r.result}},dispatch:function(r){r=i.event.fix(r||n.event);var h=(i._data(this,"events")||{})[r.type]||[],c=h.delegateCount,k=[].slice.call(arguments,0),d=!r.exclusive&&!r.namespace,l=i.event.special[r.type]||{},a=[],f,v,e,y,p,w,o,b,u,s,g;if(k[0]=r,r.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,r)!==!1){if(c&&(!r.button||r.type!=="click"))for(y=i(this),y.context=this.ownerDocument||this,e=r.target;e!=this;e=e.parentNode||this)if(e.disabled!==!0){for(w={},b=[],y[0]=e,f=0;f<c;f++)u=h[f],s=u.selector,w[s]===t&&(w[s]=u.quick?wu(e,u.quick):y.is(s)),w[s]&&b.push(u);b.length&&a.push({elem:e,matches:b})}for(h.length>c&&a.push({elem:this,matches:h.slice(c)}),f=0;f<a.length&&!r.isPropagationStopped();f++)for(o=a[f],r.currentTarget=o.elem,v=0;v<o.matches.length&&!r.isImmediatePropagationStopped();v++)u=o.matches[v],(d||!r.namespace&&!u.namespace||r.namespace_re&&r.namespace_re.test(u.namespace))&&(r.data=u.data,r.handleObj=u,p=((i.event.special[u.origType]||{}).handle||u.handler).apply(o.elem,k),p!==t&&(r.result=p,p===!1&&(r.preventDefault(),r.stopPropagation())));return l.postDispatch&&l.postDispatch.call(this,r),r.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return n.which==null&&(n.which=t.charCode!=null?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,i){var o,u,f,e=i.button,s=i.fromElement;return n.pageX==null&&i.clientX!=null&&(o=n.target.ownerDocument||r,u=o.documentElement,f=o.body,n.pageX=i.clientX+(u&&u.scrollLeft||f&&f.scrollLeft||0)-(u&&u.clientLeft||f&&f.clientLeft||0),n.pageY=i.clientY+(u&&u.scrollTop||f&&f.scrollTop||0)-(u&&u.clientTop||f&&f.clientTop||0)),!n.relatedTarget&&s&&(n.relatedTarget=s===n.target?i.toElement:s),!n.which&&e!==t&&(n.which=e&1?1:e&2?3:e&4?2:0),n}},fix:function(n){if(n[i.expando])return n;var e,o,u=n,f=i.event.fixHooks[n.type]||{},s=f.props?this.props.concat(f.props):this.props;for(n=i.Event(u),e=s.length;e;)o=s[--e],n[o]=u[o];return n.target||(n.target=u.srcElement||r),n.target.nodeType===3&&(n.target=n.target.parentNode),n.metaKey===t&&(n.metaKey=n.ctrlKey),f.filter?f.filter(n,u):n},special:{ready:{setup:i.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(n,t,r){i.isWindow(this)&&(this.onbeforeunload=r)},teardown:function(n,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(n,t,r,u){var f=i.extend(new i.Event,r,{type:n,isSimulated:!0,originalEvent:{}});u?i.event.trigger(f,null,t):i.event.dispatch.call(t,f),f.isDefaultPrevented()&&r.preventDefault()}},i.event.handle=i.event.dispatch,i.removeEvent=r.removeEventListener?function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i,!1)}:function(n,t,i){n.detachEvent&&n.detachEvent("on"+t,i)},i.Event=function(n,t){if(!(this instanceof i.Event))return new i.Event(n,t);n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.returnValue===!1||n.getPreventDefault&&n.getPreventDefault()?k:l):this.type=n,t&&i.extend(this,t),this.timeStamp=n&&n.timeStamp||i.now(),this[i.expando]=!0},i.Event.prototype={preventDefault:function(){this.isDefaultPrevented=k;var n=this.originalEvent;n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=k;var n=this.originalEvent;n&&(n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=k,this.stopPropagation()},isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l},i.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var f=this,r=n.relatedTarget,u=n.handleObj,o=u.selector,e;return r&&(r===f||i.contains(f,r))||(n.type=u.origType,e=u.handler.apply(this,arguments),n.type=t),e}}}),i.support.submitBubbles||(i.event.special.submit={setup:function(){if(i.nodeName(this,"form"))return!1;i.event.add(this,"click._submit keypress._submit",function(n){var u=n.target,r=i.nodeName(u,"input")||i.nodeName(u,"button")?u.form:t;r&&!r._submit_attached&&(i.event.add(r,"submit._submit",function(n){n._submit_bubble=!0}),r._submit_attached=!0)})},postDispatch:function(n){n._submit_bubble&&(delete n._submit_bubble,this.parentNode&&!n.isTrigger&&i.event.simulate("submit",this.parentNode,n,!0))},teardown:function(){if(i.nodeName(this,"form"))return!1;i.event.remove(this,"._submit")}}),i.support.changeBubbles||(i.event.special.change={setup:function(){if(et.test(this.nodeName))return(this.type==="checkbox"||this.type==="radio")&&(i.event.add(this,"propertychange._change",function(n){n.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),i.event.add(this,"click._change",function(n){this._just_changed&&!n.isTrigger&&(this._just_changed=!1,i.event.simulate("change",this,n,!0))})),!1;i.event.add(this,"beforeactivate._change",function(n){var t=n.target;et.test(t.nodeName)&&!t._change_attached&&(i.event.add(t,"change._change",function(n){!this.parentNode||n.isSimulated||n.isTrigger||i.event.simulate("change",this.parentNode,n,!0)}),t._change_attached=!0)})},handle:function(n){var t=n.target;if(this!==t||n.isSimulated||n.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return n.handleObj.handler.apply(this,arguments)},teardown:function(){return i.event.remove(this,"._change"),et.test(this.nodeName)}}),i.support.focusinBubbles||i.each({focus:"focusin",blur:"focusout"},function(n,t){var u=0,f=function(n){i.event.simulate(t,n.target,i.event.fix(n),!0)};i.event.special[t]={setup:function(){u++==0&&r.addEventListener(n,f,!0)},teardown:function(){--u==0&&r.removeEventListener(n,f,!0)}}}),i.fn.extend({on:function(n,r,u,f,e){var o,s;if(typeof n=="object"){typeof r!="string"&&(u=u||r,r=t);for(s in n)this.on(s,r,u,n[s],e);return this}if(u==null&&f==null?(f=r,u=r=t):f==null&&(typeof r=="string"?(f=u,u=t):(f=u,u=r,r=t)),f===!1)f=l;else if(!f)return this;return e===1&&(o=f,f=function(n){return i().off(n),o.apply(this,arguments)},f.guid=o.guid||(o.guid=i.guid++)),this.each(function(){i.event.add(this,n,f,u,r)})},one:function(n,t,i,r){return this.on(n,t,i,r,1)},off:function(n,r,u){var f,e;if(n&&n.preventDefault&&n.handleObj)return f=n.handleObj,i(n.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if(typeof n=="object"){for(e in n)this.off(e,r,n[e]);return this}return(r===!1||typeof r=="function")&&(u=r,r=t),u===!1&&(u=l),this.each(function(){i.event.remove(this,n,u,r)})},bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},live:function(n,t,r){i(this.context).on(n,this.selector,t,r);return this},die:function(n,t){return i(this.context).off(n,this.selector||"**",t),this},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return arguments.length==1?this.off(n,"**"):this.off(t,n,i)},trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){if(this[0])return i.event.trigger(n,t,this[0],!0)},toggle:function(n){var t=arguments,u=n.guid||i.guid++,r=0,f=function(u){var f=(i._data(this,"lastToggle"+n.guid)||0)%r;return i._data(this,"lastToggle"+n.guid,f+1),u.preventDefault(),t[f].apply(this,arguments)||!1};for(f.guid=u;r<t.length;)t[r++].guid=u;return this.click(f)},hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)}}),i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return i==null&&(i=n,n=null),arguments.length>0?this.on(t,null,n,i):this.trigger(t)},i.attrFn&&(i.attrFn[t]=!0),au.test(t)&&(i.event.fixHooks[t]=i.event.keyHooks),vu.test(t)&&(i.event.fixHooks[t]=i.event.mouseHooks)}),function(){function b(t,i,r,u,f,o){for(var s,c,h=0,l=u.length;h<l;h++)if(s=u[h],s){for(c=!1,s=s[t];s;){if(s[e]===r){c=u[s.sizset];break}if(s.nodeType===1)if(o||(s[e]=r,s.sizset=h),typeof i!="string"){if(s===i){c=!0;break}}else if(n.filter(i,[s]).length>0){c=s;break}s=s[t]}u[h]=c}}function k(n,t,i,r,u,f){for(var o,h,s=0,c=r.length;s<c;s++)if(o=r[s],o){for(h=!1,o=o[n];o;){if(o[e]===i){h=r[o.sizset];break}if(o.nodeType!==1||f||(o[e]=i,o.sizset=s),o.nodeName.toLowerCase()===t){h=o;break}o=o[n]}r[s]=h}}var v=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),y=0,d=Object.prototype.toString,c=!1,g=!0,o=/\\/g,tt=/\r\n/g,l=/\W/,n,s,f,a,h,w;[0,0].sort(function(){return g=!1,0}),n=function(t,i,e,o){var tt;if(e=e||[],i=i||r,tt=i,i.nodeType!==1&&i.nodeType!==9)return[];if(!t||typeof t!="string")return e;var y,a,h,g,l,p,b,c,it=!0,k=n.isXML(i),s=[],rt=t;do if(v.exec(""),y=v.exec(rt),y&&(rt=y[3],s.push(y[1]),y[2])){g=y[3];break}while(y);if(s.length>1&&nt.exec(t))if(s.length===2&&u.relative[s[0]])a=w(s[0]+s[1],i,o);else for(a=u.relative[s[0]]?[i]:n(s.shift(),i);s.length;)t=s.shift(),u.relative[t]&&(t+=s.shift()),a=w(t,a,o);else if(!o&&s.length>1&&i.nodeType===9&&!k&&u.match.ID.test(s[0])&&!u.match.ID.test(s[s.length-1])&&(l=n.find(s.shift(),i,k),i=l.expr?n.filter(l.expr,l.set)[0]:l.set[0]),i)for(l=o?{expr:s.pop(),set:f(o)}:n.find(s.pop(),s.length===1&&(s[0]==="~"||s[0]==="+")&&i.parentNode?i.parentNode:i,k),a=l.expr?n.filter(l.expr,l.set):l.set,s.length>0?h=f(a):it=!1;s.length;)p=s.pop(),b=p,u.relative[p]?b=s.pop():p="",b==null&&(b=i),u.relative[p](h,b,k);else h=s=[];if(h||(h=a),h||n.error(p||t),d.call(h)==="[object Array]")if(it)if(i&&i.nodeType===1)for(c=0;h[c]!=null;c++)h[c]&&(h[c]===!0||h[c].nodeType===1&&n.contains(i,h[c]))&&e.push(a[c]);else for(c=0;h[c]!=null;c++)h[c]&&h[c].nodeType===1&&e.push(a[c]);else e.push.apply(e,h);else f(h,e);return g&&(n(g,tt,e,o),n.uniqueSort(e)),e},n.uniqueSort=function(n){if(a&&(c=g,n.sort(a),c))for(var t=1;t<n.length;t++)n[t]===n[t-1]&&n.splice(t--,1);return n},n.matches=function(t,i){return n(t,null,null,i)},n.matchesSelector=function(t,i){return n(i,null,null,[t]).length>0},n.find=function(n,t,i){var f,e,c,r,s,h;if(!n)return[];for(e=0,c=u.order.length;e<c;e++)if(s=u.order[e],(r=u.leftMatch[s].exec(n))&&(h=r[1],r.splice(1,1),h.substr(h.length-1)!=="\\"&&(r[1]=(r[1]||"").replace(o,""),f=u.find[s](r,t,i),f!=null))){n=n.replace(u.match[s],"");break}return f||(f=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:f,expr:n}},n.filter=function(i,r,f,e){for(var o,h,c,l,y,b,p,a,w,k=i,v=[],s=r,d=r&&r[0]&&n.isXML(r[0]);i&&r.length;){for(c in u.filter)if((o=u.leftMatch[c].exec(i))!=null&&o[2]){if(b=u.filter[c],p=o[1],h=!1,o.splice(1,1),p.substr(p.length-1)==="\\")continue;if(s===v&&(v=[]),u.preFilter[c])if(o=u.preFilter[c](o,s,f,v,e,d),o){if(o===!0)continue}else h=l=!0;if(o)for(a=0;(y=s[a])!=null;a++)y&&(l=b(y,o,a,s),w=e^l,f&&l!=null?w?h=!0:s[a]=!1:w&&(v.push(y),h=!0));if(l!==t){if(f||(s=v),i=i.replace(u.match[c],""),!h)return[];break}}if(i===k)if(h==null)n.error(i);else break;k=i}return s},n.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);};var p=n.getText=function(n){var i,r,t=n.nodeType,u="";if(t){if(t===1||t===9||t===11){if(typeof n.textContent=="string")return n.textContent;if(typeof n.innerText=="string")return n.innerText.replace(tt,"");for(n=n.firstChild;n;n=n.nextSibling)u+=p(n)}else if(t===3||t===4)return n.nodeValue}else for(i=0;r=n[i];i++)r.nodeType!==8&&(u+=p(r));return u},u=n.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(n){return n.getAttribute("href")},type:function(n){return n.getAttribute("type")}},relative:{"+":function(t,i){var f=typeof i=="string",e=f&&!l.test(i),o=f&&!e,u,s,r;for(e&&(i=i.toLowerCase()),u=0,s=t.length;u<s;u++)if(r=t[u]){while((r=r.previousSibling)&&r.nodeType!==1);t[u]=o||r&&r.nodeName.toLowerCase()===i?r||!1:r===i}o&&n.filter(i,t,!0)},">":function(t,i){var u,f=typeof i=="string",r=0,o=t.length,e;if(f&&!l.test(i))for(i=i.toLowerCase();r<o;r++)u=t[r],u&&(e=u.parentNode,t[r]=e.nodeName.toLowerCase()===i?e:!1);else{for(;r<o;r++)u=t[r],u&&(t[r]=f?u.parentNode:u.parentNode===i);f&&n.filter(i,t,!0)}},"":function(n,t,i){var r,f=y++,u=b;typeof t!="string"||l.test(t)||(t=t.toLowerCase(),r=t,u=k),u("parentNode",t,f,n,r,i)},"~":function(n,t,i){var r,f=y++,u=b;typeof t!="string"||l.test(t)||(t=t.toLowerCase(),r=t,u=k),u("previousSibling",t,f,n,r,i)}},find:{ID:function(n,t,i){if(typeof t.getElementById!="undefined"&&!i){var r=t.getElementById(n[1]);return r&&r.parentNode?[r]:[]}},NAME:function(n,t){var r,u,i,f;if(typeof t.getElementsByName!="undefined"){for(r=[],u=t.getElementsByName(n[1]),i=0,f=u.length;i<f;i++)u[i].getAttribute("name")===n[1]&&r.push(u[i]);return r.length===0?null:r}},TAG:function(n,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(n[1])}},preFilter:{CLASS:function(n,t,i,r,u,f){if(n=" "+n[1].replace(o,"")+" ",f)return n;for(var s=0,e;(e=t[s])!=null;s++)e&&(u^(e.className&&(" "+e.className+" ").replace(/[\t\n\r]/g," ").indexOf(n)>=0)?i||r.push(e):i&&(t[s]=!1));return!1},ID:function(n){return n[1].replace(o,"")},TAG:function(n){return n[1].replace(o,"").toLowerCase()},CHILD:function(t){if(t[1]==="nth"){t[2]||n.error(t[0]),t[2]=t[2].replace(/^\+|\s*/g,"");var i=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(t[2]==="even"&&"2n"||t[2]==="odd"&&"2n+1"||!/\D/.test(t[2])&&"0n+"+t[2]||t[2]);t[2]=i[1]+(i[2]||1)-0,t[3]=i[3]-0}else t[2]&&n.error(t[0]);return t[0]=y++,t},ATTR:function(n,t,i,r,f,e){var s=n[1]=n[1].replace(o,"");return!e&&u.attrMap[s]&&(n[1]=u.attrMap[s]),n[4]=(n[4]||n[5]||"").replace(o,""),n[2]==="~="&&(n[4]=" "+n[4]+" "),n},PSEUDO:function(t,i,r,f,e){if(t[1]==="not")if((v.exec(t[3])||"").length>1||/^\w/.test(t[3]))t[3]=n(t[3],null,null,i);else{var o=n.filter(t[3],i,r,!0^e);return r||f.push.apply(f,o),!1}else if(u.match.POS.test(t[0])||u.match.CHILD.test(t[0]))return!0;return t},POS:function(n){return n.unshift(!0),n}},filters:{enabled:function(n){return n.disabled===!1&&n.type!=="hidden"},disabled:function(n){return n.disabled===!0},checked:function(n){return n.checked===!0},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},parent:function(n){return!!n.firstChild},empty:function(n){return!n.firstChild},has:function(t,i,r){return!!n(r[3],t).length},header:function(n){return/h\d/i.test(n.nodeName)},text:function(n){var t=n.getAttribute("type"),i=n.type;return n.nodeName.toLowerCase()==="input"&&"text"===i&&(t===i||t===null)},radio:function(n){return n.nodeName.toLowerCase()==="input"&&"radio"===n.type},checkbox:function(n){return n.nodeName.toLowerCase()==="input"&&"checkbox"===n.type},file:function(n){return n.nodeName.toLowerCase()==="input"&&"file"===n.type},password:function(n){return n.nodeName.toLowerCase()==="input"&&"password"===n.type},submit:function(n){var t=n.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===n.type},image:function(n){return n.nodeName.toLowerCase()==="input"&&"image"===n.type},reset:function(n){var t=n.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===n.type},button:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&"button"===n.type||t==="button"},input:function(n){return/input|select|textarea|button/i.test(n.nodeName)},focus:function(n){return n===n.ownerDocument.activeElement}},setFilters:{first:function(n,t){return t===0},last:function(n,t,i,r){return t===r.length-1},even:function(n,t){return t%2==0},odd:function(n,t){return t%2==1},lt:function(n,t,i){return t<i[3]-0},gt:function(n,t,i){return t>i[3]-0},nth:function(n,t,i){return i[3]-0===t},eq:function(n,t,i){return i[3]-0===t}},filter:{PSEUDO:function(t,i,r,f){var e=i[1],h=u.filters[e],s,o,c;if(h)return h(t,r,i,f);if(e==="contains")return(t.textContent||t.innerText||p([t])||"").indexOf(i[3])>=0;if(e==="not"){for(s=i[3],o=0,c=s.length;o<c;o++)if(s[o]===t)return!1;return!0}n.error(e)},CHILD:function(n,t){var r,o,s,u,l,h,f,c=t[1],i=n;switch(c){case"only":case"first":while(i=i.previousSibling)if(i.nodeType===1)return!1;if(c==="first")return!0;i=n;case"last":while(i=i.nextSibling)if(i.nodeType===1)return!1;return!0;case"nth":if(r=t[2],o=t[3],r===1&&o===0)return!0;if(s=t[0],u=n.parentNode,u&&(u[e]!==s||!n.nodeIndex)){for(h=0,i=u.firstChild;i;i=i.nextSibling)i.nodeType===1&&(i.nodeIndex=++h);u[e]=s}return f=n.nodeIndex-o,r===0?f===0:f%r==0&&f/r>=0}},ID:function(n,t){return n.nodeType===1&&n.getAttribute("id")===t},TAG:function(n,t){return t==="*"&&n.nodeType===1||!!n.nodeName&&n.nodeName.toLowerCase()===t},CLASS:function(n,t){return(" "+(n.className||n.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(t,i){var o=i[1],s=n.attr?n.attr(t,o):u.attrHandle[o]?u.attrHandle[o](t):t[o]!=null?t[o]:t.getAttribute(o),f=s+"",e=i[2],r=i[4];return s==null?e==="!=":!e&&n.attr?s!=null:e==="="?f===r:e==="*="?f.indexOf(r)>=0:e==="~="?(" "+f+" ").indexOf(r)>=0:r?e==="!="?f!==r:e==="^="?f.indexOf(r)===0:e==="$="?f.substr(f.length-r.length)===r:e==="|="?f===r||f.substr(0,r.length+1)===r+"-":!1:f&&s!==!1},POS:function(n,t,i,r){var e=t[2],f=u.setFilters[e];if(f)return f(n,i,t,r)}}},nt=u.match.POS,it=function(n,t){return"\\"+(+t+1)};for(s in u.match)u.match[s]=new RegExp(u.match[s].source+/(?![^\[]*\])(?![^\(]*\))/.source),u.leftMatch[s]=new RegExp(/(^(?:.|\r|\n)*?)/.source+u.match[s].source.replace(/\\(\d+)/g,it));u.match.globalPOS=nt,f=function(n,t){return(n=Array.prototype.slice.call(n,0),t)?(t.push.apply(t,n),t):n};try{Array.prototype.slice.call(r.documentElement.childNodes,0)[0].nodeType}catch(rt){f=function(n,t){var i=0,r=t||[],u;if(d.call(n)==="[object Array]")Array.prototype.push.apply(r,n);else if(typeof n.length=="number")for(u=n.length;i<u;i++)r.push(n[i]);else for(;n[i];i++)r.push(n[i]);return r}}r.documentElement.compareDocumentPosition?a=function(n,t){return n===t?(c=!0,0):!n.compareDocumentPosition||!t.compareDocumentPosition?n.compareDocumentPosition?-1:1:n.compareDocumentPosition(t)&4?-1:1}:(a=function(n,t){var i;if(n===t)return c=!0,0;if(n.sourceIndex&&t.sourceIndex)return n.sourceIndex-t.sourceIndex;var e,l,u=[],f=[],o=n.parentNode,s=t.parentNode,r=o;if(o===s)return h(n,t);if(!o)return-1;if(!s)return 1;while(r)u.unshift(r),r=r.parentNode;for(r=s;r;)f.unshift(r),r=r.parentNode;for(e=u.length,l=f.length,i=0;i<e&&i<l;i++)if(u[i]!==f[i])return h(u[i],f[i]);return i===e?h(n,f[i],-1):h(u[i],t,1)},h=function(n,t,i){if(n===t)return i;for(var r=n.nextSibling;r;){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var n=r.createElement("div"),f="script"+ +new Date,i=r.documentElement;n.innerHTML="<a name='"+f+"'/>",i.insertBefore(n,i.firstChild),r.getElementById(f)&&(u.find.ID=function(n,i,r){if(typeof i.getElementById!="undefined"&&!r){var u=i.getElementById(n[1]);return u?u.id===n[1]||typeof u.getAttributeNode!="undefined"&&u.getAttributeNode("id").nodeValue===n[1]?[u]:t:[]}},u.filter.ID=function(n,t){var i=typeof n.getAttributeNode!="undefined"&&n.getAttributeNode("id");return n.nodeType===1&&i&&i.nodeValue===t}),i.removeChild(n),i=n=null}(),function(){var n=r.createElement("div");n.appendChild(r.createComment("")),n.getElementsByTagName("*").length>0&&(u.find.TAG=function(n,t){var i=t.getElementsByTagName(n[1]),u,r;if(n[1]==="*"){for(u=[],r=0;i[r];r++)i[r].nodeType===1&&u.push(i[r]);i=u}return i}),n.innerHTML="<a href='#'><\/a>",n.firstChild&&typeof n.firstChild.getAttribute!="undefined"&&n.firstChild.getAttribute("href")!=="#"&&(u.attrHandle.href=function(n){return n.getAttribute("href",2)}),n=null}(),r.querySelectorAll&&function(){var i=n,t=r.createElement("div"),o="__sizzle__",e;if(t.innerHTML="<p class='TEST'><\/p>",!t.querySelectorAll||t.querySelectorAll(".TEST").length!==0){n=function(t,e,s,h){var c,l;if(e=e||r,!h&&!n.isXML(e)){if(c=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t),c&&(e.nodeType===1||e.nodeType===9)){if(c[1])return f(e.getElementsByTagName(t),s);if(c[2]&&u.find.CLASS&&e.getElementsByClassName)return f(e.getElementsByClassName(c[2]),s)}if(e.nodeType===9){if(t==="body"&&e.body)return f([e.body],s);if(c&&c[3]){if(l=e.getElementById(c[3]),!l||!l.parentNode)return f([],s);if(l.id===c[3])return f([l],s)}try{return f(e.querySelectorAll(t),s)}catch(b){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var w=e,v=e.getAttribute("id"),a=v||o,y=e.parentNode,p=/^\s*[+~]/.test(t);v?a=a.replace(/'/g,"\\$&"):e.setAttribute("id",a),p&&y&&(e=e.parentNode);try{if(!p||y)return f(e.querySelectorAll("[id='"+a+"'] "+t),s)}catch(k){}finally{v||w.removeAttribute("id")}}}return i(t,e,s,h)};for(e in i)n[e]=i[e];t=null}}(),function(){var t=r.documentElement,i=t.matchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.msMatchesSelector,e,f;if(i){e=!i.call(r.createElement("div"),"div"),f=!1;try{i.call(r.documentElement,"[test!='']:sizzle")}catch(o){f=!0}n.matchesSelector=function(t,r){if(r=r.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!n.isXML(t))try{if(f||!u.match.PSEUDO.test(r)&&!/!=/.test(r)){var o=i.call(t,r);if(o||!e||t.document&&t.document.nodeType!==11)return o}}catch(s){}return n(r,null,null,[t]).length>0}}}(),function(){var n=r.createElement("div");if(n.innerHTML="<div class='test e'><\/div><div class='test'><\/div>",!!n.getElementsByClassName&&n.getElementsByClassName("e").length!==0){if(n.lastChild.className="e",n.getElementsByClassName("e").length===1)return;u.order.splice(1,0,"CLASS"),u.find.CLASS=function(n,t,i){if(typeof t.getElementsByClassName!="undefined"&&!i)return t.getElementsByClassName(n[1])},n=null}}(),n.contains=r.documentElement.contains?function(n,t){return n!==t&&(n.contains?n.contains(t):!0)}:r.documentElement.compareDocumentPosition?function(n,t){return!!(n.compareDocumentPosition(t)&16)}:function(){return!1},n.isXML=function(n){var t=(n?n.ownerDocument||n:0).documentElement;return t?t.nodeName!=="HTML":!1},w=function(t,i,r){for(var e,o=[],s="",h=i.nodeType?[i]:i,f,c;e=u.match.PSEUDO.exec(t);)s+=e[0],t=t.replace(u.match.PSEUDO,"");for(t=u.relative[t]?t+"*":t,f=0,c=h.length;f<c;f++)n(t,h[f],o,r);return n.filter(s,o)},n.attr=i.attr,n.selectors.attrMap={},i.find=n,i.expr=n.selectors,i.expr[":"]=i.expr.filters,i.unique=n.uniqueSort,i.text=n.getText,i.isXMLDoc=n.isXML,i.contains=n.contains}();var bu=/Until$/,ku=/^(?:parents|prevUntil|prevAll)/,du=/,/,gu=/^.[^:#\[\.,]*$/,nf=Array.prototype.slice,nr=i.expr.match.globalPOS,tf={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({find:function(n){var s=this,t,f,r,o,u,e;if(typeof n!="string")return i(n).filter(function(){for(t=0,f=s.length;t<f;t++)if(i.contains(s[t],this))return!0});for(r=this.pushStack("","find",n),t=0,f=this.length;t<f;t++)if(o=r.length,i.find(n,this[t],r),t>0)for(u=o;u<r.length;u++)for(e=0;e<o;e++)if(r[e]===r[u]){r.splice(u--,1);break}return r},has:function(n){var t=i(n);return this.filter(function(){for(var n=0,r=t.length;n<r;n++)if(i.contains(this,t[n]))return!0})},not:function(n){return this.pushStack(ei(this,n,!1),"not",n)},filter:function(n){return this.pushStack(ei(this,n,!0),"filter",n)},is:function(n){return!!n&&(typeof n=="string"?nr.test(n)?i(n,this.context).index(this[0])>=0:i.filter(n,this).length>0:this.filter(n).length>0)},closest:function(n,t){var f=[],u,s,r=this[0],e,o;if(i.isArray(n)){for(e=1;r&&r.ownerDocument&&r!==t;){for(u=0;u<n.length;u++)i(r).is(n[u])&&f.push({selector:n[u],elem:r,level:e});r=r.parentNode,e++}return f}for(o=nr.test(n)||typeof n!="string"?i(n,t||this.context):0,u=0,s=this.length;u<s;u++)for(r=this[u];r;){if(o?o.index(r)>-1:i.find.matchesSelector(r,n)){f.push(r);break}if(r=r.parentNode,!r||!r.ownerDocument||r===t||r.nodeType===11)break}return f=f.length>1?i.unique(f):f,this.pushStack(f,"closest",n)},index:function(n){return n?typeof n=="string"?i.inArray(this[0],i(n)):i.inArray(n.jquery?n[0]:n,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(n,t){var u=typeof n=="string"?i(n,t):i.makeArray(n&&n.nodeType?[n]:n),r=i.merge(this.get(),u);return this.pushStack(oi(u[0])||oi(r[0])?r:i.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),i.each({parent:function(n){var t=n.parentNode;return t&&t.nodeType!==11?t:null},parents:function(n){return i.dir(n,"parentNode")},parentsUntil:function(n,t,r){return i.dir(n,"parentNode",r)},next:function(n){return i.nth(n,2,"nextSibling")},prev:function(n){return i.nth(n,2,"previousSibling")},nextAll:function(n){return i.dir(n,"nextSibling")},prevAll:function(n){return i.dir(n,"previousSibling")},nextUntil:function(n,t,r){return i.dir(n,"nextSibling",r)},prevUntil:function(n,t,r){return i.dir(n,"previousSibling",r)},siblings:function(n){return i.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return i.sibling(n.firstChild)},contents:function(n){return i.nodeName(n,"iframe")?n.contentDocument||n.contentWindow.document:i.makeArray(n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return bu.test(n)||(u=r),u&&typeof u=="string"&&(f=i.filter(u,f)),f=this.length>1&&!tf[n]?i.unique(f):f,(this.length>1||du.test(u))&&ku.test(n)&&(f=f.reverse()),this.pushStack(f,n,nf.call(arguments).join(","))}}),i.extend({filter:function(n,t,r){return r&&(n=":not("+n+")"),t.length===1?i.find.matchesSelector(t[0],n)?[t[0]]:[]:i.find.matches(n,t)},dir:function(n,r,u){for(var e=[],f=n[r];f&&f.nodeType!==9&&(u===t||f.nodeType!==1||!i(f).is(u));)f.nodeType===1&&e.push(f),f=f[r];return e},nth:function(n,t,i){t=t||1;for(var u=0;n;n=n[i])if(n.nodeType===1&&++u===t)break;return n},sibling:function(n,t){for(var i=[];n;n=n.nextSibling)n.nodeType===1&&n!==t&&i.push(n);return i}});var tr="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rf=/ jQuery\d+="(?:\d+|null)"/g,ot=/^\s+/,ir=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,rr=/<([\w:]+)/,uf=/<tbody/i,ff=/<|&#?\w+;/,ef=/<(?:script|style)/i,of=/<(?:script|object|embed|option|style)/i,ur=new RegExp("<(?:"+tr+")[\\s/>]","i"),fr=/checked\s*(?:[^=]|=\s*.checked.)/i,er=/\/(java|ecma)script/i,sf=/^\s*<!(?:\[CDATA\[|\-\-)/,u={option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],area:[1,"<map>","<\/map>"],_default:[0,"",""]},st=fi(r);u.optgroup=u.option,u.tbody=u.tfoot=u.colgroup=u.caption=u.thead,u.th=u.td,i.support.htmlSerialize||(u._default=[1,"div<div>","<\/div>"]),i.fn.extend({text:function(n){return i.access(this,function(n){return n===t?i.text(this):this.empty().append((this[0]&&this[0].ownerDocument||r).createTextNode(n))},null,n,arguments.length)},wrapAll:function(n){if(i.isFunction(n))return this.each(function(t){i(this).wrapAll(n.call(this,t))});if(this[0]){var t=i(n,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var n=this;n.firstChild&&n.firstChild.nodeType===1;)n=n.firstChild;return n}).append(this)}return this},wrapInner:function(n){return i.isFunction(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=i.isFunction(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(n){this.nodeType===1&&this.appendChild(n)})},prepend:function(){return this.domManip(arguments,!0,function(n){this.nodeType===1&&this.insertBefore(n,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(n){this.parentNode.insertBefore(n,this)});if(arguments.length){var n=i.clean(arguments);return n.push.apply(n,this.toArray()),this.pushStack(n,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(n){this.parentNode.insertBefore(n,this.nextSibling)});if(arguments.length){var n=this.pushStack(this,"after",arguments);return n.push.apply(n,i.clean(arguments)),n}},remove:function(n,t){for(var u=0,r;(r=this[u])!=null;u++)(!n||i.filter(n,[r]).length)&&(t||r.nodeType!==1||(i.cleanData(r.getElementsByTagName("*")),i.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r));return this},empty:function(){for(var t=0,n;(n=this[t])!=null;t++)for(n.nodeType===1&&i.cleanData(n.getElementsByTagName("*"));n.firstChild;)n.removeChild(n.firstChild);return this},clone:function(n,t){return n=n==null?!1:n,t=t==null?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return i.access(this,function(n){var r=this[0]||{},f=0,e=this.length;if(n===t)return r.nodeType===1?r.innerHTML.replace(rf,""):null;if(typeof n=="string"&&!ef.test(n)&&(i.support.leadingWhitespace||!ot.test(n))&&!u[(rr.exec(n)||["",""])[1].toLowerCase()]){n=n.replace(ir,"<$1><\/$2>");try{for(;f<e;f++)r=this[f]||{},r.nodeType===1&&(i.cleanData(r.getElementsByTagName("*")),r.innerHTML=n);r=0}catch(o){}}r&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(n){return this[0]&&this[0].parentNode?i.isFunction(n)?this.each(function(t){var r=i(this),u=r.html();r.replaceWith(n.call(this,t,u))}):(typeof n!="string"&&(n=i(n).detach()),this.each(function(){var t=this.nextSibling,r=this.parentNode;i(this).remove(),t?i(t).before(n):i(r).append(n)})):this.length?this.pushStack(i(i.isFunction(n)?n():n),"replaceWith",n):this},detach:function(n){return this.remove(n,!0)},domManip:function(n,r,u){var c,o,f,s,e=n[0],l=[];if(!i.support.checkClone&&arguments.length===3&&typeof e=="string"&&fr.test(e))return this.each(function(){i(this).domManip(n,r,u,!0)});if(i.isFunction(e))return this.each(function(f){var o=i(this);n[0]=e.call(this,f,r?o.html():t),o.domManip(n,r,u)});if(this[0]){if(s=e&&e.parentNode,c=i.support.parentNode&&s&&s.nodeType===11&&s.childNodes.length===this.length?{fragment:s}:i.buildFragment(n,this,l),f=c.fragment,o=f.childNodes.length===1?f=f.firstChild:f.firstChild,o){r=r&&i.nodeName(o,"tr");for(var h=0,a=this.length,v=a-1;h<a;h++)u.call(r?ru(this[h],o):this[h],c.cacheable||a>1&&h<v?i.clone(f,!0,!0):f)}l.length&&i.each(l,function(n,t){t.src?i.ajax({type:"GET",global:!1,url:t.src,async:!1,dataType:"script"}):i.globalEval((t.text||t.textContent||t.innerHTML||"").replace(sf,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),i.buildFragment=function(n,t,u){var e,h,s,o,f=n[0];return t&&t[0]&&(o=t[0].ownerDocument||t[0]),o.createDocumentFragment||(o=r),n.length===1&&typeof f=="string"&&f.length<512&&o===r&&f.charAt(0)==="<"&&!of.test(f)&&(i.support.checkClone||!fr.test(f))&&(i.support.html5Clone||!ur.test(f))&&(h=!0,s=i.fragments[f],s&&s!==1&&(e=s)),e||(e=o.createDocumentFragment(),i.clean(n,o,e,u)),h&&(i.fragments[f]=s?e:1),{fragment:e,cacheable:h}},i.fragments={},i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(r){var e=[],u=i(r),o=this.length===1&&this[0].parentNode,f,h,s;if(o&&o.nodeType===11&&o.childNodes.length===1&&u.length===1)return u[t](this[0]),this;for(f=0,h=u.length;f<h;f++)s=(f>0?this.clone(!0):this).get(),i(u[f])[t](s),e=e.concat(s);return this.pushStack(e,n,u.selector)}}),i.extend({clone:function(n,t,r){var f,e,u,o=i.support.html5Clone||i.isXMLDoc(n)||!ur.test("<"+n.nodeName+">")?n.cloneNode(!0):iu(n);if((!i.support.noCloneEvent||!i.support.noCloneChecked)&&(n.nodeType===1||n.nodeType===11)&&!i.isXMLDoc(n))for(ri(n,o),f=b(n),e=b(o),u=0;f[u];++u)e[u]&&ri(f[u],e[u]);if(t&&(ui(n,o),r))for(f=b(n),e=b(o),u=0;f[u];++u)ui(f[u],e[u]);return f=e=null,o},clean:function(n,t,f,e){var k,h,c,l=[],a,o,b,v,g,nt;for(t=t||r,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||r),a=0;(o=n[a])!=null;a++)if(typeof o=="number"&&(o+=""),o){if(typeof o=="string")if(ff.test(o)){o=o.replace(ir,"<$1><\/$2>");var d=(rr.exec(o)||["",""])[1].toLowerCase(),p=u[d]||u._default,tt=p[0],s=t.createElement("div"),w=st.childNodes,y;for(t===r?st.appendChild(s):fi(t).appendChild(s),s.innerHTML=p[1]+o+p[2];tt--;)s=s.lastChild;if(!i.support.tbody)for(b=uf.test(o),v=d==="table"&&!b?s.firstChild&&s.firstChild.childNodes:p[1]==="<table>"&&!b?s.childNodes:[],c=v.length-1;c>=0;--c)i.nodeName(v[c],"tbody")&&!v[c].childNodes.length&&v[c].parentNode.removeChild(v[c]);!i.support.leadingWhitespace&&ot.test(o)&&s.insertBefore(t.createTextNode(ot.exec(o)[0]),s.firstChild),o=s.childNodes,s&&(s.parentNode.removeChild(s),w.length>0&&(y=w[w.length-1],y&&y.parentNode&&y.parentNode.removeChild(y)))}else o=t.createTextNode(o);if(!i.support.appendChecked)if(o[0]&&typeof(g=o.length)=="number")for(c=0;c<g;c++)ti(o[c]);else ti(o);o.nodeType?l.push(o):l=i.merge(l,o)}if(f)for(k=function(n){return!n.type||er.test(n.type)},a=0;l[a];a++)h=l[a],e&&i.nodeName(h,"script")&&(!h.type||er.test(h.type))?e.push(h.parentNode?h.parentNode.removeChild(h):h):(h.nodeType===1&&(nt=i.grep(h.getElementsByTagName("script"),k),l.splice.apply(l,[a+1,0].concat(nt))),f.appendChild(h));return l},cleanData:function(n){for(var r,u,o=i.cache,s=i.event.special,h=i.support.deleteExpando,t,f,e=0;(t=n[e])!=null;e++)if((!t.nodeName||!i.noData[t.nodeName.toLowerCase()])&&(u=t[i.expando],u)){if(r=o[u],r&&r.events){for(f in r.events)s[f]?i.event.remove(t,f):i.removeEvent(t,f,r.handle);r.handle&&(r.handle.elem=null)}h?delete t[i.expando]:t.removeAttribute&&t.removeAttribute(i.expando),delete o[u]}}});var ht=/alpha\([^)]*\)/i,hf=/opacity=([^)]*)/,cf=/([A-Z]|^ms)/g,lf=/^[\-+]?(?:\d*\.)?\d+$/i,ct=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,af=/^([\-+])=([\-+.\de]+)/,vf=/^margin/,yf={position:"absolute",visibility:"hidden",display:"block"},o=["Top","Right","Bottom","Left"],a,or,sr;i.fn.css=function(n,r){return i.access(this,function(n,r,u){return u!==t?i.style(n,r,u):i.css(n,r)},n,r,arguments.length>1)},i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=a(n,"opacity");return i===""?"1":i}return n.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:i.support.cssFloat?"cssFloat":"styleFloat"},style:function(n,r,u,f){if(!!n&&n.nodeType!==3&&n.nodeType!==8&&!!n.style){var o,s,h=i.camelCase(r),c=n.style,e=i.cssHooks[h];if(r=i.cssProps[h]||h,u===t)return e&&"get"in e&&(o=e.get(n,!1,f))!==t?o:c[r];if(s=typeof u,s==="string"&&(o=af.exec(u))&&(u=+(o[1]+1)*+o[2]+parseFloat(i.css(n,r)),s="number"),u==null||s==="number"&&isNaN(u))return;if(s!=="number"||i.cssNumber[h]||(u+="px"),!e||!("set"in e)||(u=e.set(n,u))!==t)try{c[r]=u}catch(l){}}},css:function(n,r,u){var e,f;return(r=i.camelCase(r),f=i.cssHooks[r],r=i.cssProps[r]||r,r==="cssFloat"&&(r="float"),f&&"get"in f&&(e=f.get(n,!0,u))!==t)?e:a?a(n,r):void 0},swap:function(n,t,i){var u={},f,r;for(r in t)u[r]=n.style[r],n.style[r]=t[r];f=i.call(n);for(r in t)n.style[r]=u[r];return f}}),i.curCSS=i.css,r.defaultView&&r.defaultView.getComputedStyle&&(or=function(n,t){var r,e,u,o,f=n.style;return t=t.replace(cf,"-$1").toLowerCase(),(e=n.ownerDocument.defaultView)&&(u=e.getComputedStyle(n,null))&&(r=u.getPropertyValue(t),r===""&&!i.contains(n.ownerDocument.documentElement,n)&&(r=i.style(n,t))),!i.support.pixelMargin&&u&&vf.test(t)&&ct.test(r)&&(o=f.width,f.width=r,r=u.width,f.width=o),r}),r.documentElement.currentStyle&&(sr=function(n,t){var f,u,e,i=n.currentStyle&&n.currentStyle[t],r=n.style;return i==null&&r&&(e=r[t])&&(i=e),ct.test(i)&&(f=r.left,u=n.runtimeStyle&&n.runtimeStyle.left,u&&(n.runtimeStyle.left=n.currentStyle.left),r.left=t==="fontSize"?"1em":i,i=r.pixelLeft+"px",r.left=f,u&&(n.runtimeStyle.left=u)),i===""?"auto":i}),a=or||sr,i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,u){if(r)return n.offsetWidth!==0?ni(n,t,u):i.swap(n,yf,function(){return ni(n,t,u)})},set:function(n,t){return lf.test(t)?t+"px":t}}}),i.support.opacity||(i.cssHooks.opacity={get:function(n,t){return hf.test((t&&n.currentStyle?n.currentStyle.filter:n.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(n,t){var r=n.style,u=n.currentStyle,e=i.isNumeric(t)?"alpha(opacity="+t*100+")":"",f=u&&u.filter||r.filter||"";(r.zoom=1,t>=1&&i.trim(f.replace(ht,""))===""&&(r.removeAttribute("filter"),u&&!u.filter))||(r.filter=ht.test(f)?f.replace(ht,e):f+" "+e)}}),i(function(){i.support.reliableMarginRight||(i.cssHooks.marginRight={get:function(n,t){return i.swap(n,{display:"inline-block"},function(){return t?a(n,"margin-right"):n.style.marginRight})}})}),i.expr&&i.expr.filters&&(i.expr.filters.hidden=function(n){var t=n.offsetWidth,r=n.offsetHeight;return t===0&&r===0||!i.support.reliableHiddenOffsets&&(n.style&&n.style.display||i.css(n,"display"))==="none"},i.expr.filters.visible=function(n){return!i.expr.filters.hidden(n)}),i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var u=typeof i=="string"?i.split(" "):[i],f={},r=0;r<4;r++)f[n+o[r]+t]=u[r]||u[r-2]||u[0];return f}}});var pf=/%20/g,wf=/\[\]$/,hr=/\r?\n/g,bf=/#.*$/,kf=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,df=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,gf=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,ne=/^(?:GET|HEAD)$/,te=/^\/\//,cr=/\?/,ie=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,re=/^(?:select|textarea)/i,lr=/\s+/,ue=/([?&])_=[^&]*/,ar=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,vr=i.fn.load,lt={},yr={},s,h,pr=["*/"]+["*"];try{s=eu.href}catch(oe){s=r.createElement("a"),s.href="",s=s.href}h=ar.exec(s.toLowerCase())||[],i.fn.extend({load:function(n,r,u){var f,e,o,s;return typeof n!="string"&&vr?vr.apply(this,arguments):this.length?(f=n.indexOf(" "),f>=0&&(e=n.slice(f,n.length),n=n.slice(0,f)),o="GET",r&&(i.isFunction(r)?(u=r,r=t):typeof r=="object"&&(r=i.param(r,i.ajaxSettings.traditional),o="POST")),s=this,i.ajax({url:n,type:o,dataType:"html",data:r,complete:function(n,t,r){r=n.responseText,n.isResolved()&&(n.done(function(n){r=n}),s.html(e?i("<div>").append(r.replace(ie,"")).find(e):r)),u&&s.each(u,[r,t,n])}}),this):this},serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?i.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||re.test(this.nodeName)||df.test(this.type))}).map(function(n,t){var r=i(this).val();return r==null?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(hr,"\r\n")}}):{name:t.name,value:r.replace(hr,"\r\n")}}).get()}}),i.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(n,t){i.fn[t]=function(n){return this.on(t,n)}}),i.each(["get","post"],function(n,r){i[r]=function(n,u,f,e){return i.isFunction(u)&&(e=e||f,f=u,u=t),i.ajax({type:r,url:n,data:u,success:f,dataType:e})}}),i.extend({getScript:function(n,r){return i.get(n,t,r,"script")},getJSON:function(n,t,r){return i.get(n,t,r,"json")},ajaxSetup:function(n,t){return t?dt(n,i.ajaxSettings):(t=n,n=i.ajaxSettings),dt(n,t),n},ajaxSettings:{url:s,isLocal:gf.test(h[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":pr},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":n.String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:gt(lt),ajaxTransport:gt(yr),ajax:function(n,r){function y(n,r,h,l){if(e!==2){e=2,nt&&clearTimeout(nt),c=t,g=l||"",f.readyState=n>0?4:0;var y,b,w,a=r,ut=h?tu(u,f,h):t,tt,it;if(n>=200&&n<300||n===304)if(u.ifModified&&((tt=f.getResponseHeader("Last-Modified"))&&(i.lastModified[o]=tt),(it=f.getResponseHeader("Etag"))&&(i.etag[o]=it)),n===304)a="notmodified",y=!0;else try{b=nu(u,ut),a="success",y=!0}catch(ft){a="parsererror",w=ft}else w=a,(!a||n)&&(a="error",n<0&&(n=0));f.status=n,f.statusText=""+(r||a),y?d.resolveWith(s,[b,a,f]):d.rejectWith(s,[f,a,w]),f.statusCode(p),p=t,v&&k.trigger("ajax"+(y?"Success":"Error"),[f,u,y?b:w]),rt.fireWith(s,[f,a]),v&&(k.trigger("ajaxComplete",[f,u]),--i.active||i.event.trigger("ajaxStop"))}}var tt,it;typeof n=="object"&&(r=n,n=t),r=r||{};var u=i.ajaxSetup({},r),s=u.context||u,k=s!==u&&(s.nodeType||s instanceof i)?i(s):i.event,d=i.Deferred(),rt=i.Callbacks("once memory"),p=u.statusCode||{},o,ut={},ft={},g,b,c,nt,l,e=0,v,a,f={readyState:0,setRequestHeader:function(n,t){if(!e){var i=n.toLowerCase();n=ft[i]=ft[i]||n,ut[n]=t}return this},getAllResponseHeaders:function(){return e===2?g:null},getResponseHeader:function(n){var i;if(e===2){if(!b)for(b={};i=kf.exec(g);)b[i[1].toLowerCase()]=i[2];i=b[n.toLowerCase()]}return i===t?null:i},overrideMimeType:function(n){return e||(u.mimeType=n),this},abort:function(n){return n=n||"abort",c&&c.abort(n),y(0,n),this}};if(d.promise(f),f.success=f.done,f.error=f.fail,f.complete=rt.add,f.statusCode=function(n){if(n){var t;if(e<2)for(t in n)p[t]=[p[t],n[t]];else t=n[f.status],f.then(t,t)}return this},u.url=((n||u.url)+"").replace(bf,"").replace(te,h[1]+"//"),u.dataTypes=i.trim(u.dataType||"*").toLowerCase().split(lr),u.crossDomain==null&&(l=ar.exec(u.url.toLowerCase()),u.crossDomain=!(!l||l[1]==h[1]&&l[2]==h[2]&&(l[3]||(l[1]==="http:"?80:443))==(h[3]||(h[1]==="http:"?80:443)))),u.data&&u.processData&&typeof u.data!="string"&&(u.data=i.param(u.data,u.traditional)),w(lt,u,r,f),e===2)return!1;v=u.global,u.type=u.type.toUpperCase(),u.hasContent=!ne.test(u.type),v&&i.active++==0&&i.event.trigger("ajaxStart"),u.hasContent||(u.data&&(u.url+=(cr.test(u.url)?"&":"?")+u.data,delete u.data),o=u.url,u.cache===!1&&(tt=i.now(),it=u.url.replace(ue,"$1_="+tt),u.url=it+(it===u.url?(cr.test(u.url)?"&":"?")+"_="+tt:""))),(u.data&&u.hasContent&&u.contentType!==!1||r.contentType)&&f.setRequestHeader("Content-Type",u.contentType),u.ifModified&&(o=o||u.url,i.lastModified[o]&&f.setRequestHeader("If-Modified-Since",i.lastModified[o]),i.etag[o]&&f.setRequestHeader("If-None-Match",i.etag[o])),f.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+(u.dataTypes[0]!=="*"?", "+pr+"; q=0.01":""):u.accepts["*"]);for(a in u.headers)f.setRequestHeader(a,u.headers[a]);if(u.beforeSend&&(u.beforeSend.call(s,f,u)===!1||e===2))return f.abort(),!1;for(a in{success:1,error:1,complete:1})f[a](u[a]);if(c=w(yr,u,r,f),c){f.readyState=1,v&&k.trigger("ajaxSend",[f,u]),u.async&&u.timeout>0&&(nt=setTimeout(function(){f.abort("timeout")},u.timeout));try{e=1,c.send(ut,y)}catch(et){if(e<2)y(-1,et);else throw et;}}else y(-1,"No Transport");return f},param:function(n,r){var u=[],e=function(n,t){t=i.isFunction(t)?t():t,u[u.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)},f;if(r===t&&(r=i.ajaxSettings.traditional),i.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){e(this.name,this.value)});else for(f in n)ut(f,n[f],r,e);return u.join("&").replace(pf,"+")}}),i.extend({active:0,lastModified:{},etag:{}}),wr=i.now(),p=/(\=)\?(&|$)|\?\?/i,i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return i.expando+"_"+wr++}}),i.ajaxPrefilter("json jsonp",function(t,r,u){var h=typeof t.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(t.contentType);if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(p.test(t.url)||h&&p.test(t.data))){var o,f=t.jsonpCallback=i.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,c=n[f],e=t.url,s=t.data,l="$1"+f+"$2";return t.jsonp!==!1&&(e=e.replace(p,l),t.url===e&&(h&&(s=s.replace(p,l)),t.data===s&&(e+=(/\?/.test(e)?"&":"?")+t.jsonp+"="+f))),t.url=e,t.data=s,n[f]=function(n){o=[n]},u.always(function(){n[f]=c,o&&i.isFunction(c)&&n[f](o[0])}),t.converters["script json"]=function(){return o||i.error(f+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(n){return i.globalEval(n),n}}}),i.ajaxPrefilter("script",function(n){n.cache===t&&(n.cache=!1),n.crossDomain&&(n.type="GET",n.global=!1)}),i.ajaxTransport("script",function(n){if(n.crossDomain){var i,u=r.head||r.getElementsByTagName("head")[0]||r.documentElement;return{send:function(f,e){i=r.createElement("script"),i.async="async",n.scriptCharset&&(i.charset=n.scriptCharset),i.src=n.url,i.onload=i.onreadystatechange=function(n,r){(r||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,u&&i.parentNode&&u.removeChild(i),i=t,r||e(200,"success"))},u.insertBefore(i,u.firstChild)},abort:function(){i&&i.onload(0,1)}}}}),nt=n.ActiveXObject?function(){for(var n in v)v[n](0,1)}:!1,br=0,i.ajaxSettings.xhr=n.ActiveXObject?function(){return!this.isLocal&&kt()||gr()}:kt,function(n){i.extend(i.support,{ajax:!!n,cors:!!n&&"withCredentials"in n})}(i.ajaxSettings.xhr()),i.support.ajax&&i.ajaxTransport(function(r){if(!r.crossDomain||i.support.cors){var u;return{send:function(f,e){var o=r.xhr(),h,s;if(r.username?o.open(r.type,r.url,r.async,r.username,r.password):o.open(r.type,r.url,r.async),r.xhrFields)for(s in r.xhrFields)o[s]=r.xhrFields[s];r.mimeType&&o.overrideMimeType&&o.overrideMimeType(r.mimeType),r.crossDomain||f["X-Requested-With"]||(f["X-Requested-With"]="XMLHttpRequest");try{for(s in f)o.setRequestHeader(s,f[s])}catch(c){}o.send(r.hasContent&&r.data||null),u=function(n,f){var s,a,y,c,l;try{if(u&&(f||o.readyState===4))if(u=t,h&&(o.onreadystatechange=i.noop,nt&&delete v[h]),f)o.readyState!==4&&o.abort();else{s=o.status,y=o.getAllResponseHeaders(),c={},l=o.responseXML,l&&l.documentElement&&(c.xml=l);try{c.text=o.responseText}catch(n){}try{a=o.statusText}catch(p){a=""}!s&&r.isLocal&&!r.crossDomain?s=c.text?200:404:s===1223&&(s=204)}}catch(w){f||e(-1,w)}c&&e(s,a,c,y)},!r.async||o.readyState===4?u():(h=++br,nt&&(v||(v={},i(n).unload(nt)),v[h]=u),o.onreadystatechange=u)},abort:function(){u&&u(0,1)}}}});var at={},f,y,fe=/^(?:toggle|show|hide)$/,ee=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,tt,it=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],rt;i.fn.extend({show:function(n,t,r){var u,e,f,o;if(n||n===0)return this.animate(c("show",3),n,t,r);for(f=0,o=this.length;f<o;f++)u=this[f],u.style&&(e=u.style.display,!i._data(u,"olddisplay")&&e==="none"&&(e=u.style.display=""),(e===""&&i.css(u,"display")==="none"||!i.contains(u.ownerDocument.documentElement,u))&&i._data(u,"olddisplay",wt(u.nodeName)));for(f=0;f<o;f++)u=this[f],u.style&&(e=u.style.display,(e===""||e==="none")&&(u.style.display=i._data(u,"olddisplay")||""));return this},hide:function(n,t,r){if(n||n===0)return this.animate(c("hide",3),n,t,r);for(var f,e,u=0,o=this.length;u<o;u++)f=this[u],f.style&&(e=i.css(f,"display"),e!=="none"&&!i._data(f,"olddisplay")&&i._data(f,"olddisplay",e));for(u=0;u<o;u++)this[u].style&&(this[u].style.display="none");return this},_toggle:i.fn.toggle,toggle:function(n,t,r){var u=typeof n=="boolean";return i.isFunction(n)&&i.isFunction(t)?this._toggle.apply(this,arguments):n==null||u?this.each(function(){var t=u?n:i(this).is(":hidden");i(this)[t?"show":"hide"]()}):this.animate(c("toggle",3),n,t,r),this},fadeTo:function(n,t,i,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,r,u){function e(){f.queue===!1&&i._mark(this);var e=i.extend({},f),w=this.nodeType===1,v=w&&i(this).is(":hidden"),r,u,t,o,y,p,h,s,c,l,a;e.animatedProperties={};for(t in n)if(r=i.camelCase(t),t!==r&&(n[r]=n[t],delete n[t]),(y=i.cssHooks[r])&&"expand"in y){p=y.expand(n[r]),delete n[r];for(t in p)t in n||(n[t]=p[t])}for(r in n){if(u=n[r],i.isArray(u)?(e.animatedProperties[r]=u[1],u=n[r]=u[0]):e.animatedProperties[r]=e.specialEasing&&e.specialEasing[r]||e.easing||"swing",u==="hide"&&v||u==="show"&&!v)return e.complete.call(this);w&&(r==="height"||r==="width")&&(e.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],i.css(this,"display")==="inline"&&i.css(this,"float")==="none"&&(!i.support.inlineBlockNeedsLayout||wt(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}e.overflow!=null&&(this.style.overflow="hidden");for(t in n)o=new i.fx(this,e,t),u=n[t],fe.test(u)?(a=i._data(this,"toggle"+t)||(u==="toggle"?v?"show":"hide":0),a?(i._data(this,"toggle"+t,a==="show"?"hide":"show"),o[a]()):o[u]()):(h=ee.exec(u),s=o.cur(),h?(c=parseFloat(h[2]),l=h[3]||(i.cssNumber[t]?"":"px"),l!=="px"&&(i.style(this,t,(c||1)+l),s=(c||1)/o.cur()*s,i.style(this,t,s+l)),h[1]&&(c=(h[1]==="-="?-1:1)*c+s),o.custom(s,c,l)):o.custom(s,u,""));return!0}var f=i.speed(t,r,u);return i.isEmptyObject(n)?this.each(f.complete,[!1]):(n=i.extend({},n),f.queue===!1?this.each(e):this.queue(f.queue,e))},stop:function(n,r,u){return typeof n!="string"&&(u=r,r=n,n=t),r&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){function e(n,t,r){var f=t[r];i.removeData(n,r,!0),f.stop(u)}var t,o=!1,f=i.timers,r=i._data(this);if(u||i._unmark(!0,this),n==null)for(t in r)r[t]&&r[t].stop&&t.indexOf(".run")===t.length-4&&e(this,r,t);else r[t=n+".run"]&&r[t].stop&&e(this,r,t);for(t=f.length;t--;)f[t].elem===this&&(n==null||f[t].queue===n)&&(u?f[t](!0):f[t].saveState(),o=!0,f.splice(t,1));u&&o||i.dequeue(this,n)})}}),i.each({slideDown:c("show",1),slideUp:c("hide",1),slideToggle:c("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}}),i.extend({speed:function(n,t,r){var u=n&&typeof n=="object"?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:typeof u.duration=="number"?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,(u.queue==null||u.queue===!0)&&(u.queue="fx"),u.old=u.complete,u.complete=function(n){i.isFunction(u.old)&&u.old.call(this),u.queue?i.dequeue(this,u.queue):n!==!1&&i._unmark(this)},u},easing:{linear:function(n){return n},swing:function(n){return-Math.cos(n*Math.PI)/2+.5}},timers:[],fx:function(n,t,i){this.options=t,this.elem=n,this.prop=i,t.orig=t.orig||{}}}),i.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(i.fx.step[this.prop]||i.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var t,n=i.css(this.elem,this.prop);return isNaN(t=parseFloat(n))?!n||n==="auto"?0:n:t},custom:function(n,r,u){function e(n){return f.step(n)}var f=this,o=i.fx;this.startTime=rt||bt(),this.end=r,this.now=this.start=n,this.pos=this.state=0,this.unit=u||this.unit||(i.cssNumber[this.prop]?"":"px"),e.queue=this.options.queue,e.elem=this.elem,e.saveState=function(){i._data(f.elem,"fxshow"+f.prop)===t&&(f.options.hide?i._data(f.elem,"fxshow"+f.prop,f.start):f.options.show&&i._data(f.elem,"fxshow"+f.prop,f.end))},e()&&i.timers.push(e)&&!tt&&(tt=setInterval(o.tick,o.interval))},show:function(){var n=i._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=n||i.style(this.elem,this.prop),this.options.show=!0,n!==t?this.custom(this.cur(),n):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),i(this.elem).show()},hide:function(){this.options.orig[this.prop]=i._data(this.elem,"fxshow"+this.prop)||i.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(n){var r,f,e,o=rt||bt(),s=!0,u=this.elem,t=this.options;if(n||o>=t.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),t.animatedProperties[this.prop]=!0;for(r in t.animatedProperties)t.animatedProperties[r]!==!0&&(s=!1);if(s){if(t.overflow==null||i.support.shrinkWrapBlocks||i.each(["","X","Y"],function(n,i){u.style["overflow"+i]=t.overflow[n]}),t.hide&&i(u).hide(),t.hide||t.show)for(r in t.animatedProperties)i.style(u,r,t.orig[r]),i.removeData(u,"fxshow"+r,!0),i.removeData(u,"toggle"+r,!0);e=t.complete,e&&(t.complete=!1,e.call(u))}return!1}return t.duration==Infinity?this.now=o:(f=o-this.startTime,this.state=f/t.duration,this.pos=i.easing[t.animatedProperties[this.prop]](this.state,f,0,1,t.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},i.extend(i.fx,{tick:function(){for(var r,n=i.timers,t=0;t<n.length;t++)r=n[t],r()||n[t]!==r||n.splice(t--,1);n.length||i.fx.stop()},interval:13,stop:function(){clearInterval(tt),tt=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(n){i.style(n.elem,"opacity",n.now)},_default:function(n){n.elem.style&&n.elem.style[n.prop]!=null?n.elem.style[n.prop]=n.now+n.unit:n.elem[n.prop]=n.now}}}),i.each(it.concat.apply([],it),function(n,t){t.indexOf("margin")&&(i.fx.step[t]=function(n){i.style(n.elem,t,Math.max(0,n.now)+n.unit)})}),i.expr&&i.expr.filters&&(i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length}),kr=/^t(?:able|d|h)$/i,yt=/^(?:body|html)$/i,vt="getBoundingClientRect"in r.documentElement?function(n,t,r,u){try{u=n.getBoundingClientRect()}catch(v){}if(!u||!i.contains(r,n))return u?{top:u.top,left:u.left}:{top:0,left:0};var f=t.body,e=pt(t),o=r.clientTop||f.clientTop||0,s=r.clientLeft||f.clientLeft||0,h=e.pageYOffset||i.support.boxModel&&r.scrollTop||f.scrollTop,c=e.pageXOffset||i.support.boxModel&&r.scrollLeft||f.scrollLeft,l=u.top+h-o,a=u.left+c-s;return{top:l,left:a}}:function(n,t,r){for(var u,c=n.offsetParent,l=n,o=t.body,h=t.defaultView,s=h?h.getComputedStyle(n,null):n.currentStyle,f=n.offsetTop,e=n.offsetLeft;(n=n.parentNode)&&n!==o&&n!==r;){if(i.support.fixedPosition&&s.position==="fixed")break;u=h?h.getComputedStyle(n,null):n.currentStyle,f-=n.scrollTop,e-=n.scrollLeft,n===c&&(f+=n.offsetTop,e+=n.offsetLeft,i.support.doesNotAddBorder&&(!i.support.doesAddBorderForTableAndCells||!kr.test(n.nodeName))&&(f+=parseFloat(u.borderTopWidth)||0,e+=parseFloat(u.borderLeftWidth)||0),l=c,c=n.offsetParent),i.support.subtractsBorderForOverflowNotVisible&&u.overflow!=="visible"&&(f+=parseFloat(u.borderTopWidth)||0,e+=parseFloat(u.borderLeftWidth)||0),s=u}return(s.position==="relative"||s.position==="static")&&(f+=o.offsetTop,e+=o.offsetLeft),i.support.fixedPosition&&s.position==="fixed"&&(f+=Math.max(r.scrollTop,o.scrollTop),e+=Math.max(r.scrollLeft,o.scrollLeft)),{top:f,left:e}},i.fn.offset=function(n){if(arguments.length)return n===t?this:this.each(function(t){i.offset.setOffset(this,n,t)});var r=this[0],u=r&&r.ownerDocument;return u?r===u.body?i.offset.bodyOffset(r):vt(r,u,u.documentElement):null},i.offset={bodyOffset:function(n){var t=n.offsetTop,r=n.offsetLeft;return i.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(i.css(n,"marginTop"))||0,r+=parseFloat(i.css(n,"marginLeft"))||0),{top:t,left:r}},setOffset:function(n,t,r){var f=i.css(n,"position");f==="static"&&(n.style.position="relative");var e=i(n),o=e.offset(),l=i.css(n,"top"),a=i.css(n,"left"),v=(f==="absolute"||f==="fixed")&&i.inArray("auto",[l,a])>-1,u={},s={},h,c;v?(s=e.position(),h=s.top,c=s.left):(h=parseFloat(l)||0,c=parseFloat(a)||0),i.isFunction(t)&&(t=t.call(n,r,o)),t.top!=null&&(u.top=t.top-o.top+h),t.left!=null&&(u.left=t.left-o.left+c),"using"in t?t.using.call(n,u):e.css(u)}},i.fn.extend({position:function(){if(!this[0])return null;var u=this[0],n=this.offsetParent(),t=this.offset(),r=yt.test(n[0].nodeName)?{top:0,left:0}:n.offset();return t.top-=parseFloat(i.css(u,"marginTop"))||0,t.left-=parseFloat(i.css(u,"marginLeft"))||0,r.top+=parseFloat(i.css(n[0],"borderTopWidth"))||0,r.left+=parseFloat(i.css(n[0],"borderLeftWidth"))||0,{top:t.top-r.top,left:t.left-r.left}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent||r.body;n&&!yt.test(n.nodeName)&&i.css(n,"position")==="static";)n=n.offsetParent;return n})}}),i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,r){var u=/Y/.test(r);i.fn[n]=function(f){return i.access(this,function(n,f,e){var o=pt(n);if(e===t)return o?r in o?o[r]:i.support.boxModel&&o.document.documentElement[f]||o.document.body[f]:n[f];o?o.scrollTo(u?i(o).scrollLeft():e,u?e:i(o).scrollTop()):n[f]=e},n,f,arguments.length,null)}}),i.each({Height:"height",Width:"width"},function(n,r){var u="client"+n,f="scroll"+n,e="offset"+n;i.fn["inner"+n]=function(){var n=this[0];return n?n.style?parseFloat(i.css(n,r,"padding")):this[r]():null},i.fn["outer"+n]=function(n){var t=this[0];return t?t.style?parseFloat(i.css(t,r,n?"margin":"border")):this[r]():null},i.fn[r]=function(n){return i.access(this,function(n,r,o){var s,h,c,l;if(i.isWindow(n))return s=n.document,h=s.documentElement[u],i.support.boxModel&&h||s.body&&s.body[u]||h;if(n.nodeType===9)return(s=n.documentElement,s[u]>=s[f])?s[u]:Math.max(n.body[f],s[f],n.body[e],s[e]);if(o===t)return c=i.css(n,r),l=parseFloat(c),i.isNumeric(l)?l:c;i(n).css(r,o)},r,n,arguments.length,null)}}),n.jQuery=n.$=i,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return i})})(window),function(n){function r(){this.debug=!1,this._nextId=0,this._inst=[],this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="datepicker_unselectable",this._currentClass="datepicker_currentDay",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"&#x3c;Prev",prevStatus:"Show the previous month",nextText:"Next&#x3e",nextStatus:"Show the next month",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1},this._defaults={removeHref:!1,showOn:"focus",showAnim:"show",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",prevButtonImage:"",nextButtonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!0,changeMonth:!0,changeYear:!0,showMonthAfterYear:!1,yearRange:"-10:+10",showOtherMonths:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"normal",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!0},n.extend(this._defaults,this.regional[""]),this.dpDiv=n('<div id="'+this._mainDivId+'" style="position: absolute; left: 185px; top: 261px; display: none" class="control-corner-all"><\/div>')}function i(t,i){n.extend(t,i);for(var r in i)(i[r]==null||i[r]==undefined)&&(t[r]=i[r]);return t}n.extend(n.ui,{datepicker:{version:"1.7.2"}});var t="datepicker";n.extend(r.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},setDefaults:function(n){return i(this._defaults,n||{}),this},_attachDatepicker:function(t,i){var r=null,f,e,o,s,u;for(f in this._defaults)if(e=t.getAttribute("date:"+f),e){r=r||{};try{r[f]=eval(e)}catch(h){r[f]=e}}o=t.nodeName.toLowerCase(),s=o=="div"||o=="span",t.id||(t.id="dp"+ ++this.uuid),u=this._newInst(n(t),s),u.settings=n.extend({},i||{},r||{}),o=="input"?this._connectDatepicker(t,u):s&&this._inlineDatepicker(t,u),n.datepicker._register(u)},_newInst:function(t,i){var r=t[0].id.replace(/([:\[\]\.])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"><\/div>'):this.dpDiv}},_connectDatepicker:function(i,r){var u=n(i),l=u.siblings(),h,c,e,f,o,s;if(r.append=n([]),r.trigger=n([]),!u.hasClass(this.markerClassName)){if(h=this._get(r,"appendText"),c=this._get(r,"isRTL"),h&&(r.append=n('<span class="'+this._appendClass+'">'+h+"<\/span>"),u[c?"before":"after"](r.append)),e=this._get(r,"showOn"),(e=="focus"||e=="both")&&u.focus(this._showDatepicker),e=="button"||e=="both"){f=this._get(r,"buttonText"),o=this._get(r,"buttonImage"),r.trigger=n(this._get(r,"buttonImageOnly")?n("<img/>").addClass(this._triggerClass).attr({src:o,alt:f,title:f}):n('<button type="button"><\/button>').addClass(this._triggerClass).html(o==""?f:n("<img/>").attr({src:o,alt:f,title:f}))),u[c?"before":"after"](r.trigger),s=function(){return n.datepicker._datepickerShowing&&n.datepicker._lastInput==i?n.datepicker._hideDatepicker():n.datepicker._showDatepicker(i),!1};r.trigger.on("click.dateTrigger.SKYSALES",s);l.on("click.dateTrigger.SKYSALES",s).on("focus.dateTrigger.SKYSALES",s).addClass(this._triggerClass)}u.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).bind("setData.datepicker",function(n,t,i){r.settings[t]=i}).bind("getData.datepicker",function(n,t){return this._get(r,t)}),n.data(i,t,r)}},_inlineDatepicker:function(i,r){var u=n(i);u.hasClass(this.markerClassName)||(u.addClass(this.markerClassName).append(r.dpDiv).bind("setData.datepicker",function(n,t,i){r.settings[t]=i}).bind("getData.datepicker",function(n,t){return this._get(r,t)}),n.data(i,t,r),this._setDate(r,this._getDefaultDate(r)),this._updateDatepicker(r),this._updateAlternate(r))},_dialogDatepicker:function(r,u,f,e,o){var s=this._dialogInst,h;if(s||(h="dp"+ ++this.uuid,this._dialogInput=n('<input type="text" id="'+h+'" size="1" style="position: absolute; top: -100px;"/>'),this._dialogInput.keydown(this._doKeyDown),n("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},n.data(this._dialogInput[0],t,s)),i(s.settings,e||{}),this._dialogInput.val(u),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,!this._pos){var c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,a=document.documentElement.scrollLeft||document.body.scrollLeft,v=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[c/2-100+a,l/2-150+v]}return this._dialogInput.css("left",this._pos[0]+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=f,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),n.blockUI&&n.blockUI(this.dpDiv),n.data(this._dialogInput[0],t,s),this},_destroyDatepicker:function(i){var u=n(i),f=n.data(i,t),r;u.hasClass(this.markerClassName)&&(r=i.nodeName.toLowerCase(),n.removeData(i,t),r=="input"?(f.append.remove(),f.trigger.remove(),u.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress)):(r=="div"||r=="span")&&u.removeClass(this.markerClassName).empty())},_enableDatepicker:function(i){var u=n(i),e=n.data(i,t),r,f;u.hasClass(this.markerClassName)&&(r=i.nodeName.toLowerCase(),r=="input"?(i.disabled=!1,e.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):(r=="div"||r=="span")&&(f=u.children("."+this._inlineClass),f.children().removeClass("ui-state-disabled")),this._disabledInputs=n.map(this._disabledInputs,function(n){return n==i?null:n}))},_disableDatepicker:function(i){var u=n(i),e=n.data(i,t),r,f;u.hasClass(this.markerClassName)&&(r=i.nodeName.toLowerCase(),r=="input"?(i.disabled=!0,e.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):(r=="div"||r=="span")&&(f=u.children("."+this._inlineClass),f.children().addClass("ui-state-disabled")),this._disabledInputs=n.map(this._disabledInputs,function(n){return n==i?null:n}),this._disabledInputs[this._disabledInputs.length]=i)},_isDisabledDatepicker:function(n){if(!n)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==n)return!0;return!1},_register:function(n){var t=this._nextId++;return this._inst[t]=n,t},_getInst:function(i){try{return n.data(i,t)}catch(r){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(t,r,u){var f=this._getInst(t),e,o;if(arguments.length==2&&typeof r=="string")return r=="defaults"?n.extend({},n.datepicker._defaults):f?r=="all"?n.extend({},f.settings):this._get(f,r):null;e=r||{},typeof r=="string"&&(e={},e[r]=u),f&&(this._curInst==f&&this._hideDatepicker(null),o=this._getDateDatepicker(t),i(f.settings,e),this._setDateDatepicker(t,o),this._updateDatepicker(f))},_changeDatepicker:function(n,t,i){this._optionDatepicker(n,t,i)},_refreshDatepicker:function(n){var t=this._getInst(n);t&&this._updateDatepicker(t)},_setDateDatepicker:function(n,t,i){var r=this._getInst(n);r&&(this._setDate(r,t,i),this._updateDatepicker(r),this._updateAlternate(r))},_getDateDatepicker:function(n){var t=this._getInst(n);return t&&!t.inline&&this._setDateFromField(t),t?this._getDate(t):null},_doKeyDown:function(t){var i=n.datepicker._getInst(t.target),r=!0,f=i.dpDiv.is(".ui-datepicker-rtl"),u;if(i._keyEvent=!0,n.datepicker._datepickerShowing)switch(t.keyCode){case 9:n.datepicker._hideDatepicker(null,"");break;case 13:return u=n("td."+n.datepicker._dayOverClass+", td."+n.datepicker._currentClass,i.dpDiv),u[0]?n.datepicker._selectDay(t.target,i.selectedMonth,i.selectedYear,u[0]):n.datepicker._hideDatepicker(null,n.datepicker._get(i,"duration")),!1;case 27:n.datepicker._hideDatepicker(null,n.datepicker._get(i,"duration"));break;case 33:n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 34:n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&n.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&n.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,f?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,f?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else t.keyCode==36&&t.ctrlKey?n.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var u=n.datepicker._getInst(t.target),i,r;if(n.datepicker._get(u,"constrainInput"))return i=n.datepicker._possibleChars(n.datepicker._get(u,"dateFormat")),r=String.fromCharCode(t.charCode==undefined?t.keyCode:t.charCode),t.ctrlKey||r<" "||!i||i.indexOf(r)>-1},_showDatepicker:function(t){var r,e,u,f;if((t=t.target||t,t.nodeName.toLowerCase()!="input"&&(t=n("input",t.parentNode)[0]),!n.datepicker._isDisabledDatepicker(t)&&n.datepicker._lastInput!=t)&&(r=n.datepicker._getInst(t),e=n.datepicker._get(r,"beforeShow"),i(r.settings,e?e.apply(t,[t,r]):{}),n.datepicker._hideDatepicker(null,""),n.datepicker._lastInput=t,n.datepicker._setDateFromField(r),n.datepicker._inDialog&&(t.value=""),n.datepicker._pos||(n.datepicker._pos=n.datepicker._findPos(t),n.datepicker._pos[1]+=t.offsetHeight),u=!1,n(t).parents().each(function(){return u|=n(this).css("position")=="fixed",!u}),u&&n.browser.opera&&(n.datepicker._pos[0]-=document.documentElement.scrollLeft,n.datepicker._pos[1]-=document.documentElement.scrollTop),f={left:n.datepicker._pos[0],top:n.datepicker._pos[1]},n.datepicker._pos=null,r.rangeStart=null,r.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),n.datepicker._updateDatepicker(r),f=n.datepicker._checkOffset(r,f,u),r.dpDiv.css({position:n.datepicker._inDialog&&n.blockUI?"static":u?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"}),!r.inline)){var o=n.datepicker._get(r,"showAnim")||"show",s=n.datepicker._get(r,"duration"),h=function(){n.datepicker._datepickerShowing=!0,n.browser.msie&&parseInt(n.browser.version,10)<7&&n("iframe.ui-datepicker-cover").css({width:r.dpDiv.width()+4,height:r.dpDiv.height()+4})};n.effects&&n.effects[o]?r.dpDiv.show(o,n.datepicker._get(r,"showOptions"),s,h):r.dpDiv[o](s,h),s==""&&h(),n.datepicker._curInst=r}},_updateDatepicker:function(t){var u={width:t.dpDiv.width()+4,height:t.dpDiv.height()+4},r=this._getNumberOfMonths(t),i=r[1],o=this,f=1,s=18.5,e;t.dpDiv.empty().append(this._generateHTML(t)).find("iframe.ui-datepicker-cover").css({width:u.width,height:u.height}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){n(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&n(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&n(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){o._isDisabledDatepicker(t.inline?t.dpDiv.parent()[0]:t.input[0])||(n(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),n(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&n(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&n(this).addClass("ui-datepicker-next-hover"))}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end().find("div.ui-datepicker-group").each(function(){i>f&&n(this).after("<div class='calendarSeparator'><\/div>"),f++}).end(),i>1?t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"):t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),t.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t.input&&t.input[0].type!="hidden"&&t==n.datepicker._curInst&&n(t.input[0]).focus(),e=t.dpDiv.height()-26,t.dpDiv.find("div.calendarSeparator").css({height:e,marginTop:12})},_checkOffset:function(t,i,r){var u=t.dpDiv.outerWidth(),f=t.dpDiv.outerHeight(),h=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,e=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+n(document).scrollLeft(),o=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)+n(document).scrollTop();return i.left-=this._get(t,"isRTL")?u-h:0,i.left-=r&&i.left==t.input.offset().left?n(document).scrollLeft():0,i.top-=r&&i.top==t.input.offset().top+s?n(document).scrollTop():0,i.left-=i.left+u>e&&e>u?Math.abs(i.left+u-e):0,i.top-=i.top+f>o&&o>f?Math.abs(i.top+f+s*2-o):0,i},_findPos:function(t){for(var u=t.type!="hidden",f=n(t.parentNode),r;t&&(t.type=="hidden"||t.type=="text");)t=t.nextSibling;var i=n(t),e=parseInt(i.css("marginTop"))||parseInt(i.css("marginBottom")),o=parseInt(i.css("marginLeft"))||parseInt(i.css("marginRight"));return u&&i.show(),r=i.offset(),u&&i.hide(),[r.left-o,r.top+f.height()-e]},_hideDatepicker:function(i,r){var u=this._curInst?this._curInst:n.datepicker._inst[1],f,e,o;u&&(!i||u==n.data(i,t))&&(u.stayOpen&&this._selectDate("#"+u.id,this._formatDate(u,u.currentDay,u.currentMonth,u.currentYear)),u.stayOpen=!1,this._datepickerShowing&&(r=r!=null?r:this._get(u,"duration"),f=this._get(u,"showAnim"),e=function(){n.datepicker._tidyDialog(u)},r!=""&&n.effects&&n.effects[f]?u.dpDiv.hide(f,n.datepicker._get(u,"showOptions"),r,e):u.dpDiv[r==""?"hide":f=="slideDown"?"slideUp":f=="fadeIn"?"fadeOut":"hide"](r,e),r==""&&this._tidyDialog(u),o=this._get(u,"onClose"),o&&o.apply(u.input?u.input[0]:null,[u.input?u.input.val():"",u]),this._datepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),n.blockUI&&(n.unblockUI(),n("body").append(this.dpDiv))),this._inDialog=!1),this._curInst=null)},_tidyDialog:function(n){n.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(n.datepicker._curInst||n.datepicker._inst){var i=n(t.target);i.parents("#"+n.datepicker._mainDivId).length!=0||i.hasClass(n.datepicker.markerClassName)||i.hasClass(n.datepicker._triggerClass)||!n.datepicker._datepickerShowing||n.datepicker._inDialog&&n.blockUI||n.datepicker._hideDatepicker(null,"")}},_adjustDate:function(t,i,r){var f=n(t),u=this._getInst(f[0]);this._isDisabledDatepicker(f[0])||(this._adjustInstDate(u,i+(r=="M"?this._get(u,"showCurrentAtPos"):0),r),this._updateDatepicker(u))},_gotoToday:function(t){var u=n(t),i=this._getInst(u[0]),r;this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(r=new Date,i.selectedDay=r.getDate(),i.drawMonth=i.selectedMonth=r.getMonth(),i.drawYear=i.selectedYear=r.getFullYear()),this._notifyChange(i),this._adjustDate(u)},_selectMonthYear:function(t,i,r){var f=n(t),u=this._getInst(f[0]);u._selectingMonthYear=!1,u["selected"+(r=="M"?"Month":"Year")]=u["draw"+(r=="M"?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(u),this._adjustDate(f)},_clickMonthYear:function(t){var r=n(t),i=this._getInst(r[0]);i.input&&i._selectingMonthYear&&!n.browser.msie&&i.input[0].focus(),i._selectingMonthYear=!i._selectingMonthYear},_selectDay:function(t,i,r,u){var e=n(t),f;n(u).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])||(f=this._getInst(e[0]),f.selectedDay=f.currentDay=n("a",u).html(),f.selectedMonth=f.currentMonth=i,f.selectedYear=f.currentYear=r,f.stayOpen&&(f.endDay=f.endMonth=f.endYear=null),this._selectDate(t,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)),f.stayOpen&&(f.rangeStart=this._daylightSavingAdjust(new Date(f.currentYear,f.currentMonth,f.currentDay)),this._updateDatepicker(f)))},_clearDate:function(t){var r=n(t),i=this._getInst(r[0]);i.stayOpen=!1,i.endDay=i.endMonth=i.endYear=i.rangeStart=null,this._selectDate(r,"")},_selectDate:function(t,i){var f=n(t),r=this._getInst(f[0]),u;i=i!=null?i:this._formatDate(r),r.input&&r.input.val(i),this._updateAlternate(r),u=this._get(r,"onSelect"),u?u.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):r.stayOpen||(this._hideDatepicker(null,this._get(r,"duration")),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input[0].focus(),this._lastInput=null)},_updateAlternate:function(t){var i=this._get(t,"altField"),r,u;i&&(r=this._get(t,"altFormat")||this._get(t,"dateFormat"),u=this._getDate(t),dateStr=this.formatDate(r,u,this._getFormatConfig(t)),n(i).each(function(){n(this).val(dateStr)}))},noWeekends:function(n){var t=n.getDay();return[t>0&&t<6,""]},iso8601Week:function(t){var i=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=new Date(i.getFullYear(),0,4),u=r.getDay()||7;return(r.setDate(r.getDate()+1-u),u<4&&i<r)?(i.setDate(i.getDate()-3),n.datepicker.iso8601Week(i)):i>new Date(i.getFullYear(),11,28)&&(u=new Date(i.getFullYear()+1,0,4).getDay()||7,u>4&&(i.getDay()||7)<u-3)?1:Math.floor((i-r)/6048e5)+1},parseDate:function(n,t,i){var f,y,e;if(n==null||t==null)throw"Invalid arguments";if(t=typeof t=="object"?t.toString():t+"",t=="")return null;var w=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,b=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,k=(i?i.dayNames:null)||this._defaults.dayNames,d=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,g=(i?i.monthNames:null)||this._defaults.monthNames,u=-1,o=-1,s=-1,l=-1,a=!1,c=function(t){var i=f+1<n.length&&n.charAt(f+1)==t;return i&&f++,i},h=function(n){c(n);for(var f=n=="@"?14:n=="y"?4:n=="o"?3:2,i=f,u=0;i>0&&r<t.length&&t.charAt(r)>="0"&&t.charAt(r)<="9";)u=u*10+parseInt(t.charAt(r++),10),i--;if(i==f)throw"Missing number at position "+r;return u},p=function(n,i,u){for(var e=c(n)?u:i,o=0,h,l,f,s=0;s<e.length;s++)o=Math.max(o,e[s].length);for(h="",l=r;o>0&&r<t.length;){for(h+=t.charAt(r++),f=0;f<e.length;f++)if(h==e[f])return f+1;o--}throw"Unknown name at position "+l;},v=function(){if(t.charAt(r)!=n.charAt(f))throw"Unexpected literal at position "+r;r++},r=0;for(f=0;f<n.length;f++)if(a)n.charAt(f)!="'"||c("'")?v():a=!1;else switch(n.charAt(f)){case"d":s=h("d");break;case"D":p("D",b,k);break;case"o":l=h("o");break;case"m":o=h("m");break;case"M":o=p("M",d,g);break;case"y":u=h("y");break;case"@":e=new Date(h("@")),u=e.getFullYear(),o=e.getMonth()+1,s=e.getDate();break;case"'":c("'")?v():a=!0;break;default:v()}if(u==-1?u=(new Date).getFullYear():u<100&&(u+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u<=w?0:-100)),l>-1){o=1,s=l;do{if(y=this._getDaysInMonth(u,o-1),s<=y)break;o++,s-=y}while(1)}if(e=this._daylightSavingAdjust(new Date(u,o-1,s)),e.getFullYear()!=u||e.getMonth()+1!=o||e.getDate()!=s)throw"Invalid date";return e},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TIMESTAMP:"@",W3C:"yy-mm-dd",formatDate:function(n,t,i){var u,h,e;if(!t)return"";var l=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,v=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,y=(i?i.monthNames:null)||this._defaults.monthNames,f=function(t){var i=u+1<n.length&&n.charAt(u+1)==t;return i&&u++,i},o=function(n,t,i){var r=""+t;if(f(n))while(r.length<i)r="0"+r;return r},c=function(n,t,i,r){return f(n)?r[t]:i[t]},r="",s=!1;if(t)for(u=0;u<n.length;u++)if(s)n.charAt(u)!="'"||f("'")?r+=n.charAt(u):s=!1;else switch(n.charAt(u)){case"d":r+=o("d",t.getDate(),2);break;case"D":r+=c("D",t.getDay(),l,a);break;case"o":for(h=t.getDate(),e=t.getMonth()-1;e>=0;e--)h+=this._getDaysInMonth(t.getFullYear(),e);r+=o("o",h,3);break;case"m":r+=o("m",t.getMonth()+1,2);break;case"M":r+=c("M",t.getMonth(),v,y);break;case"y":r+=f("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":r+=t.getTime();break;case"'":f("'")?r+="'":s=!0;break;default:r+=n.charAt(u)}return r},_possibleChars:function(n){for(var i="",r=!1,t=0;t<n.length;t++)if(r)n.charAt(t)!="'"||lookAhead("'")?i+=n.charAt(t):r=!1;else switch(n.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":lookAhead("'")?i+="'":r=!0;break;default:i+=n.charAt(t)}return i},_get:function(n,t){return n.settings[t]!==undefined?n.settings[t]:this._defaults[t]},_setDateFromField:function(n){var u=this._get(n,"dateFormat"),i=n.input?n.input.val():null,t,r;n.endDay=n.endMonth=n.endYear=null,t=defaultDate=this._getDefaultDate(n),r=this._getFormatConfig(n);try{t=this.parseDate(u,i,r)||defaultDate}catch(f){this.log(f),t=defaultDate}n.selectedDay=t.getDate(),n.drawMonth=n.selectedMonth=t.getMonth(),n.drawYear=n.selectedYear=t.getFullYear(),n.currentDay=i?t.getDate():0,n.currentMonth=i?t.getMonth():0,n.currentYear=i?t.getFullYear():0,this._adjustInstDate(n)},_getDefaultDate:function(n){var t=this._determineDate(this._get(n,"defaultDate"),new Date),i=this._getMinMaxDate(n,"min",!0),r=this._getMinMaxDate(n,"max");return t=i&&t<i?i:t,t=r&&t>r?r:t},_determineDate:function(n,t){var i=function(n){var t=new Date;return t.setDate(t.getDate()+n),t},r=function(n,t){for(var e=new Date,u=e.getFullYear(),f=e.getMonth(),i=e.getDate(),o=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,r=o.exec(n);r;){switch(r[2]||"d"){case"d":case"D":i+=parseInt(r[1],10);break;case"w":case"W":i+=parseInt(r[1],10)*7;break;case"m":case"M":f+=parseInt(r[1],10),i=Math.min(i,t(u,f));break;case"y":case"Y":u+=parseInt(r[1],10),i=Math.min(i,t(u,f))}r=o.exec(n)}return new Date(u,f,i)};return n=n==null?t:typeof n=="string"?r(n,this._getDaysInMonth):typeof n=="number"?isNaN(n)?t:i(n):n,n=n&&n.toString()=="Invalid Date"?t:n,n&&(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)),this._daylightSavingAdjust(n)},_daylightSavingAdjust:function(n){return n?(n.setHours(n.getHours()>12?n.getHours()+2:0),n):null},_setDate:function(n,t){var r=!t,u=n.selectedMonth,f=n.selectedYear;t=this._determineDate(t,new Date),n.selectedDay=n.currentDay=t.getDate(),n.drawMonth=n.selectedMonth=n.currentMonth=t.getMonth(),n.drawYear=n.selectedYear=n.currentYear=t.getFullYear(),(u!=n.selectedMonth||f!=n.selectedYear)&&this._notifyChange(n),this._adjustInstDate(n),n.input&&n.input.val(r?"":this._formatDate(n))},_getDate:function(n){return!n.currentYear||n.input&&n.input.val()==""?null:this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay))},_generateHTML:function(t){var c=new Date,p,rt,d,ri,s,v,ot,y,ht,ct,lt,at,vt,e;c=this._daylightSavingAdjust(new Date(c.getFullYear(),c.getMonth(),c.getDate()));var k=this._get(t,"showStatus"),l=this._get(t,"isRTL"),ai=this._get(t,"showButtonPanel"),pt=this._get(t,"mandatory")?"":'<div class="datepicker_clear"><a onclick="jQuery.datepicker._clearDate('+this._id+');"'+(k?this._addStatus(this._get(t,"clearStatus")||"&#xa0;"):"")+">"+this._get("clearText")+"<\/a><\/div>",ri='<div class="datepicker_control">'+(l?"":pt)+'<div class="datepicker_close"><a onclick="jQuery.datepicker._hideDatepicker();"'+(k?this._addStatus(this._get(t,"closeStatus")||"&#xa0;"):"")+">"+this._get(t,"closeText")+"<\/a><\/div>"+(l?pt:"")+"<\/div>",wt=this._get(t,"hideIfNoPrevNext"),bt=this._get(t,"navigationAsDateFormat"),o=this._getNumberOfMonths(t),ti=this._get(t,"showCurrentAtPos"),nt=this._get(t,"stepMonths"),vi=this._get(t,"stepBigMonths"),tt=o[0]!=1||o[1]!=1,it=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),a=this._getMinMaxDate(t,"min",!0),h=this._getMinMaxDate(t,"max"),i=t.drawMonth-ti,u=t.drawYear;if(i<0&&(i+=12,u--),h)for(p=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[1]+1,h.getDate())),p=a&&p<a?a:p;this._daylightSavingAdjust(new Date(u,i,1))>p;)i--,i<0&&(i=11,u--);t.drawMonth=i,t.drawYear=u,rt='<div class="datepicker_prev">'+(this._canAdjustMonth(t,-1,u,i)?"<a "+(this._get(t,"removeHref")?"":'href="#"')+" onclick=\"jQuery.datepicker._adjustDate('#"+t.id+"', -"+nt+", 'M');\""+(k?this._addStatus(this._get(t,"prevStatus")||"&#xa0;"):"")+"><img src='"+this._get(t,"prevButtonImage")+"'/><\/a>":wt?"":"<label>"+this._get(t,"prevText")+"<\/label>")+"<\/div>",d=this._get(t,"nextText"),d=bt?this.formatDate(d,this._daylightSavingAdjust(new Date(u,i+nt,1)),this._getFormatConfig(t)):d;var kt='<div class="datepicker_next">'+(this._canAdjustMonth(t,1,u,i)?"<a "+(this._get(t,"removeHref")?"":'href="#"')+" onclick=\"jQuery.datepicker._adjustDate('#"+t.id+"', +"+nt+", 'M');\""+(k?this._addStatus(this._get(t,"nextStatus")||"&#xa0;"):"")+"><img src='"+this._get(t,"nextButtonImage")+"'/><\/a>":wt?">":"<label>"+this._get("nextText")+"<\/label>")+"<\/div>",ut=this._get(t,"currentText"),ii=this._get(t,"gotoCurrent")&&t.currentDay?it:c;ut=bt?this.formatDate(ut,ii,this._getFormatConfig(t)):ut,ri=t.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery.datepicker._hideDatepicker();">'+this._get(t,"closeText")+"<\/button>",s=parseInt(this._get(t,"firstDay"),10),s=isNaN(s)?0:s;var ui=this._get(t,"dayNames"),yi=this._get(t,"dayNamesShort"),fi=this._get(t,"dayNamesMin"),ei=this._get(t,"monthNames"),oi=this._get(t,"monthNamesShort"),dt=this._get(t,"beforeShowDay"),ft=this._get(t,"showOtherMonths"),si=this._get(t,"showTodayLink"),hi=this._get(t,"showCloseLink"),pi=this._get(t,"calculateWeek")||this.iso8601Week,ci=t.endDay?this._daylightSavingAdjust(new Date(t.endYear,t.endMonth,t.endDay)):it,gt=this._getDefaultDate(t),et="";for(v=0;v<o[0];v++){for(ot="",y=0;y<o[1];y++){var st=this._daylightSavingAdjust(new Date(u,i,t.selectedDay)),w=" ui-corner-all",f="";if(tt){f+='<div class="ui-datepicker-group ui-datepicker-group-';switch(y){case 0:f+="first",w=" ui-corner-"+(l?"right":"left");break;case o[1]-1:f+="last",w=" ui-corner-"+(l?"left":"right");break;default:f+="middle",w=""}f+='">'}for(f+=hi?'<div class="datepicker_control"><div class="datepicker_close"><a onclick="jQuery.datepicker._hideDatepicker();">Close<\/a><\/div><\/div>':"",f+='<div class="datepicker_links">'+(/all|left/.test(w)&&v==0?l?kt:rt:"")+(si?'<div class="datepicker_current"><a onclick="DP_jQuery.datepicker._gotoToday(\'#'+t.id+"');\">Today<\/a><\/div>":"")+(/all|right/.test(w)&&v==0?l?rt:kt:"")+this._generateMonthYearHeader(t,i,u,a,h,st,v>0||y>0,ei,oi)+'<\/div><table class="datepicker" cellpadding="0" cellspacing="0"><thead><tr class="datepicker_titleRow">',ht="",e=0;e<7;e++)ct=(e+s)%7,ht+="<td"+((e+s+6)%7>=5?' class="datepicker_weekEndCell"':"")+'><span title="'+ui[ct]+'">'+fi[ct]+"<\/span><\/td>";f+=ht+"<\/tr><\/thead><tbody>",lt=this._getDaysInMonth(u,i),u==t.selectedYear&&i==t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,lt));var ni=(this._getFirstDayOfMonth(u,i)-s+7)%7,li=tt?6:Math.ceil((ni+lt)/7),r=this._daylightSavingAdjust(new Date(u,i,1-ni));for(at=0;at<li;at++){for(f+='<tr class="datepicker_daysRow">',vt="",e=0;e<7;e++){var g=dt?dt.apply(t.input?t.input[0]:null,[r]):[!0,""],b=r.getMonth()!=i,yt=b||!g[0]||a&&r<a||h&&r>h;vt+='<td class="datepicker_daysCell'+((e+s+6)%7>=5?" datepicker_weekEndCell":"")+(b?" ui-datepicker-other-month":"")+(r.getTime()==st.getTime()&&i==t.selectedMonth&&t._keyEvent||gt.getTime()==r.getTime()&&gt.getTime()==st.getTime()?" "+this._dayOverClass:"")+(yt?" "+this._unselectableClass+" ui-state-disabled":"")+(b&&!ft?"":" "+g[1]+(r.getTime()>=it.getTime()&&r.getTime()<=ci.getTime()?" "+this._currentClass:"")+(r.getTime()==c.getTime()?" datepicker_today":""))+'"'+((!b||ft)&&g[2]?' title="'+g[2]+'"':"")+(yt?"":" onmouseover=\"jQuery(this).addClass('datepicker_daysCellOver');\" onmouseout=\"jQuery(this).removeClass('datepicker_daysCellOver');\"  onclick=\"DP_jQuery.datepicker._selectDay('#"+t.id+"',"+i+","+u+', this);return false;"')+">"+(b?ft?r.getDate():"&#xa0;":yt?"<span>"+r.getDate()+"<\/span>":"<a>"+r.getDate()+"<\/a>")+"<\/td>",r.setDate(r.getDate()+1),r=this._daylightSavingAdjust(r)}f+=vt+"<\/tr>"}i++,i>11&&(i=0,u++),f+="<\/tbody><\/table>"+(tt?"<\/div>"+(o[0]>0&&y==o[1]-1?'<div class="ui-datepicker-row-break"><\/div>':""):""),ot+=f}et+=ot}return et+=n.browser.msie&&parseInt(n.browser.version,10)<7&&!t.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"><\/iframe>':"",t._keyEvent=!1,et},_generateMonthYearHeader:function(n,t,i,r,u,f,e,o){var k,d,l;r=n.rangeStart&&r&&f<r?f:r;var p=this._get(n,"changeMonth"),w=this._get(n,"changeYear"),b=this._get(n,"showMonthAfterYear"),c='<div class="datepicker_header">',y="";if(e||!p)y+='<span class="datepicker_newMonth">'+o[t]+"<\/span> ";else{for(k=r&&r.getFullYear()==i,d=u&&u.getFullYear()==i,y+='<select class="datepicker_newMonth" onchange="DP_jQuery.datepicker._selectMonthYear(\'#'+n.id+"', this, 'M');\" onclick=\"DP_jQuery.datepicker._clickMonthYear('#"+n.id+"');\">",l=0;l<12;l++)(!k||l>=r.getMonth())&&(!d||l<=u.getMonth())&&(y+='<option value="'+l+'"'+(l==t?' selected="selected"':"")+">"+o[l]+"<\/option>");y+="<\/select>"}if(b||(c+=y+((e||p||w)&&!(p&&w)?"&#xa0;":"")),e||!w)c+='<span class="datepicker_newYear">'+i+"<\/span>";else{var a=this._get(n,"yearRange").split(":"),h=0,v=0;for(a.length!=2?(h=i-10,v=i+10):a[0].charAt(0)=="+"||a[0].charAt(0)=="-"?(h=i+parseInt(a[0],10),v=i+parseInt(a[1],10)):(h=parseInt(a[0],10),v=parseInt(a[1],10)),h=r?Math.max(h,r.getFullYear()):h,v=u?Math.min(v,u.getFullYear()):v,c+='<select class="datepicker_newYear" onchange="DP_jQuery.datepicker._selectMonthYear(\'#'+n.id+"', this, 'Y');\" onclick=\"DP_jQuery.datepicker._clickMonthYear('#"+n.id+"');\">";h<=v;h++)c+='<option value="'+h+'"'+(h==i?' selected="selected"':"")+">"+h+"<\/option>";c+="<\/select>"}return b&&(c+=(e||p||w?"&#xa0;":"")+y),c+="<\/div>"},_adjustInstDate:function(n,t,i){var e=n.drawYear+(i=="Y"?t:0),o=n.drawMonth+(i=="M"?t:0),s=Math.min(n.selectedDay,this._getDaysInMonth(e,o))+(i=="D"?t:0),r=this._daylightSavingAdjust(new Date(e,o,s)),u=this._getMinMaxDate(n,"min",!0),f=this._getMinMaxDate(n,"max");r=u&&r<u?u:r,r=f&&r>f?f:r,n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear(),(i=="M"||i=="Y")&&this._notifyChange(n)},_notifyChange:function(n){var t=this._get(n,"onChangeMonthYear");t&&t.apply(n.input?n.input[0]:null,[n.selectedYear,n.selectedMonth+1,n])},_getNumberOfMonths:function(n){var t=this._get(n,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(n,t,i){var r=this._determineDate(this._get(n,t+"Date"),null);return!i||!n.rangeStart?r:!r||n.rangeStart>r?n.rangeStart:r},_getDaysInMonth:function(n,t){return 32-new Date(n,t,32).getDate()},_getFirstDayOfMonth:function(n,t){return new Date(n,t,1).getDay()},_canAdjustMonth:function(n,t,i,r){var f=this._getNumberOfMonths(n),u=this._daylightSavingAdjust(new Date(i,r+(t<0?t:f[1]),1));return t<0&&u.setDate(this._getDaysInMonth(u.getFullYear(),u.getMonth())),this._isInRange(n,u)},_isInRange:function(n){var i=n.rangeStart?this._daylightSavingAdjust(new Date(n.selectedYear,n.selectedMonth,n.selectedDay)):null,r,u;return i=i&&n.rangeStart<i?n.rangeStart:i,r=i||this._getMinMaxDate(n,"min"),u=this._getMinMaxDate(n,"max"),!0},_getFormatConfig:function(n){var t=this._get(n,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(n,"dayNamesShort"),dayNames:this._get(n,"dayNames"),monthNamesShort:this._get(n,"monthNamesShort"),monthNames:this._get(n,"monthNames")}},_formatDate:function(n,t,i,r){t||(n.currentDay=n.selectedDay,n.currentMonth=n.selectedMonth,n.currentYear=n.selectedYear);var u=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,i,t)):this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay));return this.formatDate(this._get(n,"dateFormat"),u,this._getFormatConfig(n))}}),n.fn.datepicker=function(t){n.datepicker.initialized||(n(document).mousedown(n.datepicker._checkExternalClick).find("body").append(n.datepicker.dpDiv),n.datepicker.initialized=!0);var i=Array.prototype.slice.call(arguments,1);return typeof t=="string"&&(t=="isDisabled"||t=="getDate")?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i)):t=="option"&&arguments.length==2&&typeof arguments[1]=="string"?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i)):this.each(function(){typeof t=="string"?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this].concat(i)):n.datepicker._attachDatepicker(this,t)})},n.datepicker=new r,n.datepicker.initialized=!1,n.datepicker.uuid=+new Date,n.datepicker.version="1.7.2",window.DP_jQuery=n}(jQuery),function(n){
/*!
     * mcDropdown jQuery Plug-in
     *
     * Copyright 2011 Giva, Inc. (http://www.givainc.com/labs/) 
     * 
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     * 
     * 	http://www.apache.org/licenses/LICENSE-2.0
     * 
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     *
     * Date: 2012-07-03
     * Rev:  1.3.2
     */
n.fn.mcDropdown=function(t,i,r,u){var f;return this.each(function(){if(f=n.data(this,"mcDropdown"),f)return!1;(r||u)&&new n.mcDropDownMenu(this,i,r,u)}),f||!1},n.mcDropdown={version:"1.3.2",setDefaults:function(t){n.extend(r,t)}};var r={noSearchResultLabel:"Sorry, no item matches your search.",defaultInitLabel:"Select station",mcContainerClass:"mcContainer",appendTo:"body",inputClass:"mcdropdown",mainClass:"mcdropdown_menu",cornerClass:"control-corner-all",hoverClass:"mc_hover",parentItemClass:"mc_header",parentItemSpanClass:"mc_country",parentItemSpanDataAttrVal:"country",itemMainClass:"mc_root",childItemSpanClass:"mc_station",childItemSpanDataAttrVal:"station",listInOptGroups:!0,displayCode:!1,activeInputId:"input",inputPreId:"_List",columnSeparatorPreId:"columnDivSeparator",separatorClass:"mc_separator",showSeparator:!1,minRows:8,maxRows:25,rowWidth:160,rowMarginForItems:10,targetColumnSize:2,openFx:"show",openSpeed:200,closeFx:"hide",closeSpeed:200,hoverOverDelay:200,hoverOutDelay:0,showFx:"show",showSpeed:0,hideFx:"hide",hideSpeed:0,animate:!1,dropShadow:!0,autoHeight:!0,lineHeight:19,screenPadding:10,allowParentSelect:!1,delim:":",showACOnEmptyFocus:!1,valueAttr:"val",subStringDelim:[","," -"],subStringEnabled:!1,keyPressSelect:null,linkClicked:null,click:null,select:null,beforeOpen:null,afterOpen:null,blur:null,init:null},i=[],f=0,u=[],e=0,t=n.browser.version&&n.browser.version<=6;n.mcDropDownMenu=function(o,s,h,c){function ei(n){var t=f++;i[t]=n}function oi(n){var t=e++;u[t]=n}function ht(n){var t,i;if(l.subStringEnabled&&n){t=l.subStringDelim;for(prop in t)i=n.indexOf(t[prop]),i>0&&(n=n.substring(0,i));return n}return n}function hi(){a.html("").append(k.find("li").clone())}function lt(i,r,u){var e=r!=null?r:l.openFx,o=u!=null?u:l.openSpeed,f=b?b.val():"";p.closeMenu(i,n(a).attr("id")),ri(a),yt(a).hide(),setTimeout(function(){gt(a)},200),at(w.parent(),a,!0),a[e](o,function(){ti(a),vi(a,y),yi(a,l)}),f&&a.find("li[val='"+f+"']").addClass("mc_hover").children().addClass("mc_hover"),t&&!!n.fn.bgIframe&&a.bgIframe(),y.is(":focus")||y.select(),l.afterOpen!=null&&l.afterOpen.apply(p,[y])}function ci(n){return n.attr(l.valueAttr)}function nt(t){var r,i=t.contents().filter(function(){return this.nodeType==1||this.nodeType==3&&n.trim(this.nodeValue).length>0});return r=i[0]&&i[0].nodeType==3?i[0].nodeValue:i[0]&&i[0].nodeType==1?n(i[0]).text():"",n.trim(r)}function li(t){if(t.length==0)return[];var i=[nt(t)];return t.parents().each(function(){var t=n(this);if(this===a[0])return!1;t.is("li")&&i.push(nt(t))}),i.reverse()}function ai(n){return li(pt(n))}function dt(n){return ai(n).join(l.delim)}function gt(t){ni(t),n("> li.mc_root",t).hover(pi,wi)}function ni(t){n("> li.mc_root",t).off("hover")}function ti(t){var i=ft(t,!0),r=vt();i.bottom>r.y&&n("html,body").animate({scrollTop:"+="+(i.bottom-r.y+l.screenPadding)+"px"})}function vi(t,i){var f;if(l.animate){var r=n(window).width(),u=n(t).width(),e=n(i).offset(),o=r-e.left;o<u&&(f=(r-u)/2,t.animate({left:f}))}}function yi(t,i){for(var o=n(t).offset().top+10,f=n("li[id^='"+i.columnSeparatorPreId+"']").find("span"),s=f.length,r,e,u=0;u<s;u++)r=n(f[u]),r!=null&&r.offset()&&(e=r.offset().left,r.offset({top:o,left:e}))}function pi(){var i=this,r=n.data(i,"timer");a.find(".mc_hover").removeClass("mc_hover"),isNaN(r)||clearTimeout(r),n(this).attr("data-value")&&n(this).attr("data-value")=="station"&&n(this).addClass("mc_hover").find("span").addClass("mc_hover"),n.data(i,"timer",setTimeout(function(){ki.apply(i)},l.hoverOverDelay))}function wi(i){var r=this,u=n.data(r,"timer");isNaN(u)||clearTimeout(u),n(this).removeClass("mc_hover").find("span").removeClass("mc_hover"),n.data(r,"timer",setTimeout(function(){var t=n(r);setTimeout(function(){t.parent().find("> li.mc_hover").length==0&&t.parents("li").each(function(){var t=this;return clearTimeout(n.data(t,"timer")),ut.apply(t),n(this).siblings().filter(".mc_hover").length>0?!1:void 0})},l.hoverOverDelay),ut.apply(r)},l.hoverOutDelay)),t&&i.stopPropagation()}function bi(t){var i=y.data("shadows");return i||(i={}),i[t]||(i[t]=n('<div class="mcdropdown_shadow"><\/div>').appendTo("body"),!n.fn.bgIframe||i[t].bgIframe(),y.data("shadows",i)),i[t]}function ki(){var e=this,t=n("> ul",this),r,u;if(t.is(":visible")||t.length==0)return!1;n(this).parent().find("> li ul:visible").not(t).parent().each(function(){ut.apply(this)}),yt(t),gt(t);var o=t.parents("ul").length,f=vt(),i=ft(n(this));t.css({top:i.bottom,left:i.marginLeft}).show(),r=t.outerHeight()+t.offset().top,r>f.y&&t.css("top",i.bottom-(r-f.y)-l.screenPadding),u=function(){if(l.dropShadow){var r=bi(o),i=ft(t);r.css({top:i.top+i.marginTop,left:i.left+i.marginLeft,width:i.width,height:i.height}).insertAfter(t).show(),n.data(e,"shadow",r)}},l.showSpeed<=0?u():t.hide()[l.showFx](l.showSpeed,u)}function ut(){var i=n("> ul",this);if(i.is(":hidden")||i.length==0)return!1;l.dropShadow&&n.data(this,"shadow")&&n.data(this,"shadow").hide(),t&&i.css("visibility","hidden").parent().removeClass("mc_hover"),i.stop()[l.hideFx](l.hideSpeed)}function ft(t,i){var u=!1,r;return t.is(":hidden")&&(u=!!t.css("visibility","hidden").show()),r=n.extend(t[i===!0?"offset":"position"](),{width:t.outerWidth(),height:t.outerHeight(),marginLeft:parseInt(n.curCSS(t[0],"marginLeft",!0),10)||0,marginRight:parseInt(n.curCSS(t[0],"marginRight",!0),10)||0,marginTop:parseInt(n.curCSS(t[0],"marginTop",!0),10)||0,marginBottom:parseInt(n.curCSS(t[0],"marginBottom",!0),10)||0}),r.marginTop<0&&(r.top+=r.marginTop),r.marginLeft<0&&(r.left+=r.marginLeft),r.bottom=r.top+r.height,r.right=r.left+r.width,u&&t.hide().css("visibility","visible"),r}function at(n,t,i){var r=ft(n,i);return t.css({position:"absolute",top:r.bottom,left:r.left}),r.bottom}function vt(){var t={scrollLeft:n(window).scrollLeft(),scrollTop:n(window).scrollTop(),width:n(window).width(),height:n(window).height()};return t.x=t.scrollLeft+t.width,t.y=t.scrollTop+t.height,t}function di(t,i){var r=i=="height"?"Top":"Left",u=i=="height"?"Bottom":"Right";return parseInt("0"+n.curCSS(t,"border"+r+"Width",!0),10)+parseInt("0"+n.curCSS(t,"border"+u+"Width",!0),10)+parseInt("0"+n.curCSS(t,"padding"+r,!0),10)+parseInt("0"+n.curCSS(t,"padding"+u,!0),10)+parseInt("0"+n.curCSS(t,"margin"+r,!0),10)+parseInt("0"+n.curCSS(t,"margin"+u,!0),10)}function gi(n,t){if(!n.data("dimensions")){var i=w.outerWidth(),r=n===a&&n.data("width")*t<i?Math.floor(i/t):n.data("width");n.data("dimensions",{column:r,item:r-di(n.children().eq(0)[0],"width"),height:n.height()})}return n.data("dimensions")}function nr(n){return l.autoHeight===!1?l.lineHeight:(n.data("height")||n.data("height",n.outerHeight()),n.data("height"))}function yt(t){var o=t.find("> li"),r=o.length,h=Math.ceil(r/l.maxRows),u=!arguments[1]?r<=l.minRows?1:h>l.targetColumnSize?h:l.targetColumnSize:arguments[1],y=gi(t,u),c=0,f=0,p=0,i=0,w=Math.ceil(r/u),v=!1,b=t.parent("li").width(),e,s;return(t.css({visibility:"hidden",display:"block"}),o.each(function(e){var a=e+1,p=Math.floor(a/r*u),o=Math.floor(e/r*u),s=n(this),h,y=function(t){var i=n(t),r=i.hasClass(l.parentItemClass);r&&i.css("paddingTop",0)};e==0&&y(s),c!=o?(h=(f+1)*-1,s.before("<li id='"+l.columnSeparatorPreId+o+"' class='"+l.separatorClass+"'><span/><\/li>"),n("li#"+l.columnSeparatorPreId+o,t).css({marginLeft:l.rowWidth*o,height:1,float:"none"}),y(s),f=0):h=0,s.attr("class").indexOf("empty")>=0&&(s.addClass("mc_header"),v=!0),s.css({marginLeft:l.rowWidth*o+l.rowMarginForItems,marginTop:h,width:l.rowWidth-l.rowMarginForItems*3,"white-space":"normal"})[p>o||a==r?"addClass":"removeClass"]("mc_endcol")[h!=0?"addClass":"removeClass"]("mc_firstrow"),f+=nr(s)||l.lineHeight,f>i&&(i=f),c=o}),o.length==1&&v&&(i=i*2),e=i-10,s=e+3,i%2>0&&(e-=1,s+=1),n("li[id^='"+l.columnSeparatorPreId+"']").find("span").css({height:e,marginTop:s*-1}),l.showSeparator||n("li[id^='"+l.columnSeparatorPreId+"']").css("visibility","hidden"),t!==a&&i+l.screenPadding*2>=vt().height)?yt(t,u+1):(t.css("visibility","visible"),t)}function pt(n){return a.find("li["+l.valueAttr+"='"+n+"']")}function tr(){return pt(b.val())}function ii(t){var i=n(t.target)?n(t.target).val():"",s=t.keyCode>0?t.keyCode>=97&&t.keyCode<=122:t.charCode>=97&&t.charCode<=122,h=t.keyCode>0?t.keyCode>=65&&t.keyCode<=90:t.charCode>=65&&t.charCode<=90,c,v,e,y,o;if(t&&t.target&&t.target.selectionEnd&&(c=i.substr(t.target.selectionStart,t.target.selectionEnd),i=i.replace(c,"")),s||h||t.keyCode==8){var u=t.charCode?String.fromCharCode(t.charCode):String.fromCharCode(t.keyCode),f=i.length,r="";if(t.keyCode==8){if(f<=0)return!0;i=i.substr(0,f-1)}if((t.charCode!=null||t.charCode!=undefined)&&t.charCode<1){if(f<=0)return!0;u=""}else t.charCode!=null&&t.charCode!=undefined||s||h||(u="");r=i+u,r?(v=ri(k.clone()),e=ir(v.find("> li"),r.toLowerCase()).clone(),e.length>0?a.html("").append(e):a.html("").append('<li class="mc_empty"><span>'+l.noSearchResultLabel+"<\/span><\/li>")):a.html("").append(k.find("li").clone()),n.browser.msie&&setTimeout(function(){n(t.target).val(r)},0),lt(t,l.showFx,l.showSpeed)}else{if(t.keyCode==37)return et(-1,!0),!1;if(t.keyCode==38)return et(-1),!1;if(t.keyCode==39)return et(1,!0),!1;if(t.keyCode==40)return et(1),!1;if(t.keyCode==9||t.keyCode==13)return y=a.find("> li").filter("."+l.hoverClass),o=n(y).attr(l.valueAttr),p.setValue(o,!1),d=null,l.keyPressSelect!=null?l.keyPressSelect:o?!1:!0}return!0}function et(t,i){var r=n([]),h,u=0,v=!1,f=a.find("> li"),y,s,b,c;if((r.length==0&&(r=f.filter("."+l.hoverClass)),r.length==0&&d&&(r=pt(d)),r.length==0&&(r=tr()),r.length==0&&(y=f.length,i?t<0?s=a.find("li")[y-1]:t>0&&(s=a.find("li")[0]):t<0?s=a.find("li")[y-1]:t>0&&(s=a.find("li")[0]),r=n(s),v=!0),r.length==0)||(r.find("span").removeClass(l.hoverClass),r.removeClass(l.hoverClass),f.each(function(n){if(this===r[0])return u=n,!1}),!f||f.length==0||r.length==0))return!1;if(i){var w=0,o=0,e=u;v||(f.each(function(t){var i=n(this).attr("id");if(i&&i.search(l.columnSeparatorPreId)>-1)if(t<u)w=t;else if(t>u&&!o)return o=t,!1}),o||(o=f.length),e=t>0?o-w+u:t<0?w-o+u:u),e<0?e=f.length+e:e>=f.length&&(e=e-f.length),r=f.eq(e),u=e}else v||(u=u+t),u<0?u=f.length-1:u>=f.length&&(u=0),t!=0&&(h=f.eq(u),r=n(h));for(b=r.attr("data-value")==l.parentItemSpanDataAttrVal,c=r.attr("class")==l.separatorClass;b||c;)u=i?c?u-1:u+1:u+t,h=f.eq(u),r=h,b=r.prop("data-value")==l.parentItemSpanDataAttrVal,c=r.prop("class")==l.separatorClass;d=r.attr(l.valueAttr),r.addClass(l.hoverClass).find("span").addClass(l.hoverClass),p.setDisplayValue(d,!0)}function ir(t,i){var r=n([]),u=null,f="";return t.each(function(){var t=n(this),e=nt(t),o=ci(t);if(t.is(".mc_header")){u=t,f=nt(t);return}(e.toLowerCase().indexOf(i)>-1||o.toLowerCase().indexOf(i)>-1||f.toLowerCase().indexOf(i)>-1)&&!t.is(".mc_header")&&(u&&(r=r.add(u)),r=r.add(t),u=null)}),r}function ri(t){var f=n("input[id$='_OpenJaw']").attr("checked")!==undefined?!0:!1,y=n("input[id$='_OneWay']").attr("checked")!==undefined?!0:!1,e=n("#restrictedTravelVoucherBookingStations"),o=n("ul#RestrictedPairedStations"),r=n(t).attr("id"),s=r.match(/\d+/).toString(),i=[],p=r.toLowerCase().indexOf("destinationstation")>=0?"destinationstation":"originstation",h=n("#disruptedFlightSearchableStation"+s+"_"+p),c,l,u,a,v;return f,(y||f)&&e.length>0&&(c=e.attr("stationCodes"),i=wt(i,ui(c,","))),o.length>0&&r.toLowerCase().indexOf("destinationstation")>=0&&o.children().each(function(){var t=n(this).html().split("-"),r=n("select[id$='originStation"+s+"']");r.val()==t[0]&&(i=wt(i,ui(t[1],",")))}),h.length>0&&(l=n.map(n(h).find("li"),function(t){return n(t).attr("code")}),u=n(t).clone(),n.each(l,function(t,i){n(u).find("li[val ='"+i+"']").remove()}),a=n(u).find("li[val]"),v=n.map(a,function(t){return n(t).attr("val")}),i=wt(i,v)),rr(n(t),i),t}function rr(t,i){n.each(i,function(i,r){var u=n(t).find("li[val='"+r+"']"),f,e;u.length>0&&(f=n(u).prevAll("li.mc_header:first"),n(u).remove(),e=n(f).nextUntil("li.mc_header"),e.length==0&&n(f).remove())})}function wt(t,i){return n.each(i,function(i,r){n.inArray(r,t)==-1&&t.push(r)}),t}function ui(n,t){return n.split(t)}var y,a,k,ur,w,l,fi,bt,v,tt,ot,p=this,fr="",it=!1,d=null,er="",rt,b,g,ct;l=n.extend({},r,s);var si=n(o).attr("id"),kt=si+l.inputPreId,st=n("<ul/>").attr("id",kt).attr("class",l.mainClass);ei(kt),l.cornerClass&&st.addClass(l.cornerClass),this.constructListForMcDropdown=function(t,i,r,u){var p=!0,o,h,w,c,s,a,f,v,e;if(r.find("> li").remove(),t.sort(function(n,t){var i=n.name,r=t.name;return i==r?0:i<r?-1:1}),u){for(a=t.length,f=0;f<a;f++)if(v=t[f].code,o=n.map(i,function(n){if(n.countryCode==v)return n}),o&&o.length>0){var e=t[f].name,s="",y="",b=o.length;for(e=ht(e),p?(p=!1,y=""):y="style='padding-top: 10px;' ",s+="<li data-value='"+l.parentItemSpanDataAttrVal+"' class='"+l.parentItemClass+"' "+y+" ><span class='"+l.parentItemSpanClass+"'> "+e+"<\/span><\/li>",h=0;h<b;h++)w=o[h].code,c=o[h].name,c=ht(c),s+="<li data-value='"+l.childItemSpanDataAttrVal+"' "+l.valueAttr+"='"+w+"' class='"+l.itemMainClass+" "+l.cornerClass+"'><span class='"+l.childItemSpanClass+"'>"+c+"<\/span><\/li>";r.append(s)}}else{for(s="",a=t.length,f=0;f<a;f++)v=t[f].code,e=t[f].name,e=ht(e),s+="<li data-value='"+l.childItemSpanDataAttrVal+"' "+l.valueAttr+"='"+v+"' class='"+l.itemMainClass+" "+l.cornerClass+"'><span class='"+l.childItemSpanClass+"'>"+e+"<\/span><\/li>";r.append(s)}return r},p.constructListForMcDropdown(h,c,st,l.listInOptGroups),y=n(o),ot=y.is(":input"),l.click==null&&(l.click=function(t,i,r){this.attr(r.valueAttr)?i.setValue(this.attr(r.valueAttr)):i.setValue(n(this.parents("li")[0]).attr(r.valueAttr))}),n(document).bind("click",function(t){var i=n(t.target),e=i.parents().filter(function(){return this===a[0]||!!v&&v[0]===this}),r=i.parents().filter(function(){return n(this).hasClass(l.parentItemClass)||n(this).hasClass(l.parentItemSpanClass)}),f=i.hasClass(l.parentItemClass),o=n.inArray(i.attr("id"),u);e.length&&l.click!=null&&r.length<1&&!f&&l.click.apply(i,[t,p,l]),o<0&&r.length<1&&!f&&p.closeMenu(t)}),a=st,a.appendTo(l.appendTo).css({position:"absolute",top:-1e4,left:-1e4}).find("ul").andSelf().css("display","block").each(function(){var t=n(this);t.data("width",t[0].clientWidth)}).css({top:0,left:0,display:"none"}),k=a.clone(),w=n("<div class='"+l.inputClass+" "+l.cornerClass+" "+l.mcContainerClass+"'><a href='#' tabindex='-1'><\/a><input type='hidden' name='"+(o.name||o.id)+"' id='"+(o.id||o.name)+"' /><\/div>").appendTo(n('<div class="dropDownDiv" style="position: relative;"><\/div>')).parent(),n("#marketCityPair_1 .dropDownDiv div.mcdropdown a")&&n("#marketCityPair_1 .dropDownDiv div.mcdropdown a").attr("href")&&n("#marketCityPair_1 .dropDownDiv div.mcdropdown a").removeAttr("href"),n("#marketCityPair_2 .dropDownDiv div.mcdropdown a")&&n("#marketCityPair_2 .dropDownDiv div.mcdropdown a").attr("href")&&n("#marketCityPair_2 .dropDownDiv div.mcdropdown a").removeAttr("href"),rt=y.replaceWith(w).attr({id:"input_"+o.id,name:"name_"+o.name}),b=w.find(":input"),w=w.find("."+l.inputClass).prepend(rt),g=w.clone().css({position:"absolute",top:-9999999,left:-999999,visibility:"visible"}).show().appendTo("body"),ct={width:g.width()-n("a",g).width(),height:g.outerHeight()},g.remove(),n.data(b[0],"mcDropdown",p),w.parent().height(ct.height),n.browser.safari&&setTimeout(function(){y.width(w.width()-n("a",w).width())},100),n(".marketCityPairChangeFlight .dropDownDiv div.mcdropdown input.inputChangeFlight").css("opacity","0.35"),this.openHandler=function(n){return(l.beforeOpen!=null&&l.beforeOpen.apply(p,[y]),it)?!1:(b&&b.val()||p.setDisplayValue("",!1),p.openMenu(n))},this.checkHiddenValueOnBlur=function(n,t){var i=b.val();return i?p.setDisplayValue(i,!0):p.setDisplayValue(l.defaultInitLabel,!1),l.blur!=null&&t!=!0&&l.blur.apply(p,[y]),!0},y.width(ct.width).filter(":input").attr("autocomplete","off").bind("keypress",ii).bind("contextmenu",function(){return!1}).bind("click",p.openHandler).bind("blur",p.checkHiddenValueOnBlur).bind("focus",p.openHandler),oi(y.attr("id")),(n.browser.msie||n.browser.safari)&&y.bind("keydown",function(n){if(",8,9,37,38,39,40,".indexOf(","+n.keyCode+",")>-1)return ii(n)}),n("a",w).bind("click",function(n){return l.linkClicked&&l.linkClicked.apply(p,[n,y]),!1}),this.selectInput=function(){y.select()},this.setDisplayValue=function(n,t){var i,r;return t&&(i=dt(n),i?(r=i+(l.displayCode&&n?" ("+n+")":""),n=r):(n=l.defaultInitLabel,this.clearSelection())),y[ot?"val":"text"](n)},this.clearSelection=function(){b.val("")},this.setValue=function(n,t){b.val(n);var i=dt(n)+(l.displayCode&&n?" ("+n+")":"");return l.select!=null&&t!=!0&&l.select.apply(p,[n,i,y]),p.setDisplayValue(i,!1)},l.defaultInitLabel&&this.setDisplayValue(l.defaultInitLabel,!1),this.getValue=function(){return[b.val(),y[ot?"val":"text"]()]},this.openMenu=function(n){if(a.is(":visible"))return!1;hi(),n?lt(n):setTimeout(lt,1)},this.isListVisible=function(){return a.is(":visible")},this.updateList=function(n,t){k=p.constructListForMcDropdown(n,t,k,l.listInOptGroups)},this.closeMenu=function(t,r){var f,e,u;d=null;for(f in i)r!=i[f]&&(e=i[f],u=null,u=n("ul#"+e),u.find("li:visible").parent().each(function(){ut.apply(this)}),setTimeout(function(){ni(u)},13),u[l.closeFx](l.closeSpeed))},this.disable=function(n){it=!!n,w[it?"addClass":"removeClass"]("mcdropdownDisabled"),rt.attr("disabled",it)},l.init!=null&&l.init.apply(p,[rt,b,a])}}(jQuery),function(n){n.fn.bgIframe=n.fn.bgiframe=function(t){if(n.browser.msie&&/6.0/.test(navigator.userAgent)){t=n.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},t||{});var i=function(n){return n&&n.constructor==Number?n+"px":n},r='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+t.src+'"style="display:block;position:absolute;z-index:-1;'+(t.opacity!==!1?"filter:Alpha(Opacity='0');":"")+"top:"+(t.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":i(t.top))+";left:"+(t.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":i(t.left))+";width:"+(t.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":i(t.width))+";height:"+(t.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":i(t.height))+';"/>';return this.each(function(){n("> iframe.bgiframe",this).length==0&&this.insertBefore(document.createElement(r),this.firstChild)})}return this}}(jQuery),function(n){n.extend({tablesorter:new function(){function r(n,t){f(n+","+(+new Date-t.getTime())+"ms")}function f(n){typeof console!="undefined"&&typeof console.debug!="undefined"?console.log(n):alert(n)}function s(t,i){var e,o,r,u;if(t.config.debug&&(e=""),o=t.tBodies[0].rows,t.tBodies[0].rows[0]){var s=[],c=o[0].cells,l=c.length;for(r=0;r<l;r++)u=!1,n.metadata&&n(i[r]).metadata()&&n(i[r]).metadata().sorter?u=h(n(i[r]).metadata().sorter):t.config.headers[r]&&t.config.headers[r].sorter&&(u=h(t.config.headers[r].sorter)),u||(u=p(t,c[r])),t.config.debug&&(e+="column:"+r+" parser:"+u.id+"\n"),s.push(u)}return t.config.debug&&f(e),s}function p(i,r){for(var f=t.length,u=1;u<f;u++)if(t[u].is(n.trim(l(i.config,r)),i,r))return t[u];return t[0]}function h(n){for(var r=t.length,i=0;i<r;i++)if(t[i].id.toLowerCase()==n.toLowerCase())return t[i];return!1}function c(t){var s,u,e,f,i;t.config.debug&&(s=new Date);var h=t.tBodies[0]&&t.tBodies[0].rows.length||0,c=t.tBodies[0].rows[0]&&t.tBodies[0].rows[0].cells.length||0,a=t.config.parsers,o={row:[],normalized:[]};for(u=0;u<h;++u){for(e=t.tBodies[0].rows[u],f=[],o.row.push(n(e)),i=0;i<c;++i)f.push(a[i].format(l(t.config,e.cells[i]),t,e.cells[i]));f.push(u),o.normalized.push(f),f=null}return t.config.debug&&r("Building cache for "+h+" rows:",s),o}function l(t,i){if(!i)return"";var r="";return r=t.textExtraction=="simple"?i.childNodes[0]&&i.childNodes[0].hasChildNodes()?i.childNodes[0].innerHTML:i.innerHTML:typeof t.textExtraction=="function"?t.textExtraction(i):n(i).text()}function e(t,i){var c,u,h,y,e;t.config.debug&&(c=new Date);var l=i,a=l.row,f=l.normalized,p=f.length,v=f[0].length-1,w=n(t.tBodies[0]),s=[];for(u=0;u<p;u++)if(s.push(a[f[u][v]]),!t.config.appender)for(h=a[f[u][v]],y=h.length,e=0;e<y;e++)w[0].appendChild(h[e]);t.config.appender&&t.config.appender(t,s),s=null,t.config.debug&&r("Rebuilt table:",c),o(t),setTimeout(function(){n(t).trigger("sortEnd")},0)}function w(t){var u,o,e,i;for(t.config.debug&&(u=new Date),o=n.metadata?!0:!1,e=[],i=0;i<t.tHead.rows.length;i++)e[i]=0;return $tableHeaders=n("thead th",t),$tableHeaders.each(function(i){this.count=0,this.column=i,this.order=d(t.config.sortInitialOrder),(b(this)||k(t,i))&&(this.sortDisabled=!0),this.sortDisabled||n(this).addClass(t.config.cssHeader),t.config.headerList[i]=this}),t.config.debug&&(r("Built headers:",u),f($tableHeaders)),$tableHeaders}function b(t){return n.metadata&&n(t).metadata().sorter===!1?!0:!1}function k(n,t){return n.config.headers[t]&&n.config.headers[t].sorter===!1?!0:!1}function o(n){for(var i=n.config.widgets,r=i.length,t=0;t<r;t++)a(i[t]).format(n)}function a(n){for(var i=u.length,t=0;t<i;t++)if(u[t].id.toLowerCase()==n.toLowerCase())return u[t]}function d(n){return i=typeof n!="Number"?n.toLowerCase()=="desc"?1:0:n==1?n:0}function g(n,t){for(var r=t.length,i=0;i<r;i++)if(t[i][0]==n)return!0;return!1}function v(t,i,r,u){var e,o,f;for(i.removeClass(u[0]).removeClass(u[1]),e=[],i.each(function(){this.sortDisabled||(e[this.column]=n(this))}),o=r.length,f=0;f<o;f++)e[r[f][0]].addClass(u[r[f][1]])}function nt(t){var u=t.config,r;u.widthFixed&&(r=n("<colgroup>"),n("tr:first td",t.tBodies[0]).each(function(){r.append(n("<col>").css("width",n(this).width()))}),n(t).prepend(r))}function tt(n,t){for(var f=n.config,e=t.length,r,u,i=0;i<e;i++)r=t[i],u=f.headerList[r[0]],u.count=r[1],u.count++}function y(n,t,i){var l,u,e,c,f;for(n.config.debug&&(l=new Date),u="var sortWrapper = function(a,b) {",e=t.length,f=0;f<e;f++){var o=t[f][0],s=t[f][1],a=it(n.config.parsers,o)=="text"?s==0?"sortText":"sortTextDesc":s==0?"sortNumeric":"sortNumericDesc",h="e"+f;u+="var "+h+" = "+a+"(a["+o+"],b["+o+"]); ",u+="if("+h+") { return "+h+"; } ",u+="else { "}for(c=i.normalized[0].length-1,u+="return a["+c+"]-b["+c+"];",f=0;f<e;f++)u+="}; ";return u+="return 0; ",u+="}; ",eval(u),i.normalized.sort(sortWrapper),n.config.debug&&r("Sorting on "+t.toString()+" and dir "+s+" time:",l),i}function it(n,t){return n[t].type}var t=[],u=[];this.defaults={cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["rowItem",""]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:".",debug:!1},this.benchmark=r,this.construct=function(t){return this.each(function(){var r,p,u,f,i,l,b,h;this.tHead&&this.tBodies&&(l=0,this.config={},i=n.extend(this.config,n.tablesorter.defaults,t),r=n(this),u=w(this),this.config.parsers=s(this,u),f=c(this),h=[i.cssDesc,i.cssAsc],nt(this),u.click(function(t){var p,w,s,l,o,c,a;if(r.trigger("sortStart"),p=r[0].tBodies[0]&&r[0].tBodies[0].rows.length||0,!this.sortDisabled&&p>0){if(w=n(this),s=this.column,this.order=this.count++%2,t[i.sortMultiSortKey])if(g(s,i.sortList))for(o=0;o<i.sortList.length;o++)c=i.sortList[o],a=i.headerList[c[0]],c[0]==s&&(a.count=c[1],a.count++,c[1]=a.count%2);else i.sortList.push([s,this.order]);else{if(i.sortList=[],i.sortForce!=null)for(l=i.sortForce,o=0;o<l.length;o++)l[o][0]!=s&&i.sortList.push(l[o]);i.sortList.push([s,this.order])}return setTimeout(function(){v(r[0],u,i.sortList,h),e(r[0],y(r[0],i.sortList,f))},1),!1}}).mousedown(function(){if(i.cancelSelection)return this.onselectstart=function(){return!1},!1}),r.bind("update",function(){this.config.parsers=s(this,u),f=c(this)}).bind("sorton",function(t,r){n(this).trigger("sortStart"),i.sortList=r;var o=i.sortList;tt(this,o),v(this,u,o,h),e(this,y(this,o,f))}).bind("appendCache",function(){e(this,f)}).bind("applyWidgetId",function(n,t){a(t).format(this)}).bind("applyWidgets",function(){o(this)}),n.metadata&&n(this).metadata()&&n(this).metadata().sortlist&&(i.sortList=n(this).metadata().sortlist),i.sortList.length>0&&r.trigger("sorton",[i.sortList]),o(this))})},this.addParser=function(n){for(var u=t.length,r=!0,i=0;i<u;i++)t[i].id.toLowerCase()==n.id.toLowerCase()&&(r=!1);r&&t.push(n)},this.addWidget=function(n){u.push(n)},this.formatFloat=function(n){var t=parseFloat(n);return isNaN(t)?0:t},this.formatInt=function(n){var t=parseInt(n);return isNaN(t)?0:t},this.isDigit=function(t,i){var r="\\"+i.decimal,u="/(^[+]?0("+r+"0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)"+r+"(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*"+r+"0+$)/";return RegExp(u).test(n.trim(t))},this.clearTableBody=function(t){if(n.browser.msie){function i(){while(this.firstChild)this.removeChild(this.firstChild)}i.apply(t.tBodies[0])}else t.tBodies[0].innerHTML=""}}}),n.fn.extend({tablesorter:n.tablesorter.construct});var t=n.tablesorter;t.addParser({id:"text",is:function(){return!0},format:function(t){return n.trim(t.toLowerCase())},type:"text"}),t.addParser({id:"digit",is:function(t,i){var r=i.config;return n.tablesorter.isDigit(t,r)},format:function(t){return n.tablesorter.formatFloat(t)},type:"numeric"}),t.addParser({id:"currency",is:function(n){return/^[???.]/.test(n)},format:function(t){return n.tablesorter.formatFloat(t.replace(new RegExp(/[^0-9.]/g),""))},type:"numeric"}),t.addParser({id:"ipAddress",is:function(n){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(n)},format:function(t){for(var f=t.split("."),u="",e=f.length,r,i=0;i<e;i++)r=f[i],u+=r.length==2?"0"+r:r;return n.tablesorter.formatFloat(u)},type:"numeric"}),t.addParser({id:"url",is:function(n){return/^(https?|ftp|file):\/\/$/.test(n)},format:function(n){return jQuery.trim(n.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),t.addParser({id:"isoDate",is:function(n){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(n)},format:function(t){return n.tablesorter.formatFloat(t!=""?+new Date(t.replace(new RegExp(/-/g),"/")):"0")},type:"numeric"}),t.addParser({id:"percent",is:function(t){return/\%$/.test(n.trim(t))},format:function(t){return n.tablesorter.formatFloat(t.replace(new RegExp(/%/g),""))},type:"numeric"}),t.addParser({id:"usLongDate",is:function(n){return n.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(t){return n.tablesorter.formatFloat(+new Date(t))},type:"numeric"}),t.addParser({id:"shortDate",is:function(n){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(n)},format:function(t,i){var r=i.config;return t=t.replace(/\-/g,"/"),r.dateFormat=="us"?t=t.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2"):r.dateFormat=="uk"?t=t.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):(r.dateFormat=="dd/mm/yy"||r.dateFormat=="dd-mm-yy")&&(t=t.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),n.tablesorter.formatFloat(+new Date(t))},type:"numeric"}),t.addParser({id:"time",is:function(n){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(n)},format:function(t){return n.tablesorter.formatFloat(+new Date("2000/01/01 "+t))},type:"numeric"}),t.addParser({id:"metadata",is:function(){return!1},format:function(t,i,r){var u=i.config,f=u.parserMetadataName?u.parserMetadataName:"sortValue";return n(r).metadata()[f]},type:"numeric"}),t.addWidget({id:"zebra",format:function(t){if(t.config.debug)var i=new Date;n("tr:visible",t.tBodies[0]).filter(":even").removeClass(t.config.widgetZebra.css[1]).addClass(t.config.widgetZebra.css[0]).end().filter(":odd").removeClass(t.config.widgetZebra.css[0]).addClass(t.config.widgetZebra.css[1]),t.config.debug&&n.tablesorter.benchmark("Applying Zebra widget",i)}})}(jQuery),function(n,t,i){(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):jQuery&&!jQuery.fn.qtip&&n(jQuery)})(function(r){"use strict";function oi(n,t,i,f){this.id=i,this.target=n,this.tooltip=s,this.elements={target:n},this._id=o+"-"+i,this.timers={img:{}},this.options=t,this.plugins={},this.cache={event:{},target:r(),disabled:u,attr:f,onTooltip:u,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=u}function et(n){return n===s||r.type(n)!=="object"}function pi(n){return!(r.isFunction(n)||n&&n.attr||n.length||r.type(n)==="object"&&(n.jquery||n.then))}function dt(n){var t,e,i,o;return et(n)?u:(et(n.metadata)&&(n.metadata={type:n.metadata}),"content"in n&&(t=n.content,et(t)||t.jquery||t.done?t=n.content={text:e=pi(t)?u:t}:e=t.text,"ajax"in t&&(i=t.ajax,o=i&&i.once!==u,delete t.ajax,t.text=function(n,t){var u=e||r(this).attr(t.options.content.attr)||"Loading...",f=r.ajax(r.extend({},i,{context:t})).then(i.success,s,i.error).then(function(n){return n&&o&&t.set("content.text",n),n},function(n,i,r){t.destroyed||n.status===0||t.set("content.text",i+": "+r)});return o?u:(t.set("content.text",u),f)}),"title"in t&&(r.isPlainObject(t.title)&&(t.button=t.title.button,t.title=t.title.text),pi(t.title||u)&&(t.title=u))),"position"in n&&et(n.position)&&(n.position={my:n.position,at:n.position}),"show"in n&&et(n.show)&&(n.show=n.show.jquery?{target:n.show}:n.show===f?{ready:f}:{event:n.show}),"hide"in n&&et(n.hide)&&(n.hide=n.hide.jquery?{target:n.hide}:{event:n.hide}),"style"in n&&et(n.style)&&(n.style={classes:n.style}),r.each(h,function(){this.sanitize&&this.sanitize(n)}),n)}function wi(n,t){for(var u=0,f,i=n,r=t.split(".");i=i[r[u++]];)u<r.length&&(f=i);return[f||n,r.pop()]}function ar(n,t){var i,r,u;for(i in this.checks)for(r in this.checks[i])(u=new RegExp(r,"i").exec(n))&&(t.push(u),(i==="builtin"||this.plugins[i])&&this.checks[i][r].apply(this.plugins[i]||this,t))}function gt(n){return cr.concat("").join(n?"-"+n+" ":" ")}function ni(n,t){if(t>0)return setTimeout(r.proxy(n,this),t);n.call(this)}function vr(n){this.tooltip.hasClass(a)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=ni.call(this,function(){this.toggle(f,n)},this.options.show.delay))}function yr(n){if(!this.tooltip.hasClass(a)&&!this.destroyed){var t=r(n.relatedTarget),i=t.closest(rt)[0]===this.tooltip[0],f=t[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==t[0]&&this.options.position.target==="mouse"&&i||this.options.hide.fixed&&/mouse(out|leave|move)/.test(n.type)&&(i||f)){try{n.preventDefault(),n.stopImmediatePropagation()}catch(e){}return}this.timers.hide=ni.call(this,function(){this.toggle(u,n)},this.options.hide.delay,this)}}function si(n){!this.tooltip.hasClass(a)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=ni.call(this,function(){this.hide(n)},this.options.hide.inactive))}function di(n){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(n)}function gi(n,i,u){r(t.body).delegate(n,(i.split?i:i.join("."+o+" "))+"."+o,function(){var n=c.api[r.attr(this,bt)];n&&!n.disabled&&u.apply(n,arguments)})}function pr(n,i,e){var y,l,v,h,b,k=r(t.body),p=n[0]===t?k:n,w=n.metadata?n.metadata(e.metadata):s,d=e.metadata.type==="html5"&&w?w[e.metadata.name]:s,a=n.data(e.metadata.name||"qtipopts");try{a=typeof a=="string"?r.parseJSON(a):a}catch(g){}if(h=r.extend(f,{},c.defaults,e,typeof a=="object"?dt(a):s,dt(d||w)),l=h.position,h.id=i,"boolean"==typeof h.content.text)if(v=n.attr(h.content.attr),h.content.attr!==u&&v)h.content.text=v;else return u;if(l.container.length||(l.container=k),l.target===u&&(l.target=p),h.show.target===u&&(h.show.target=p),h.show.solo===f&&(h.show.solo=l.container.closest("body")),h.hide.target===u&&(h.hide.target=p),h.position.viewport===f&&(h.position.viewport=l.container),l.container=l.container.eq(0),l.at=new it(l.at,f),l.my=new it(l.my),n.data(o))if(h.overwrite)n.qtip("destroy",!0);else if(h.overwrite===u)return u;return n.attr(fi,i),h.suppress&&(b=n.attr("title"))&&n.removeAttr("title").attr(ut,b).attr("title",""),y=new oi(n,h,i,!!v),n.data(o,y),y}function pt(n){return n.charAt(0).toUpperCase()+n.slice(1)}function wr(n,t){var u=t.charAt(0).toUpperCase()+t.slice(1),e=(t+" "+rr.join(u+" ")+u).split(" "),r,f,o=0;if(ri[t])return n.css(ri[t]);while(r=e[o++])if((f=n.css(r))!==i)return ri[t]=r,f}function ct(n,t){return Math.ceil(parseFloat(wr(n,t)))}function ur(n,t){this._ns="tip",this.options=t,this.offset=t.offset,this.size=[t.width,t.height],this.init(this.qtip=n)}function fr(n,t){this.options=t,this._ns="-modal",this.init(this.qtip=n)}function sr(n){this._ns="ie6",this.init(this.qtip=n)}var f=!0,u=!1,s=null,w="x",y="y",d="width",at="height",b="top",p="left",tt="bottom",k="right",l="center",dr="flip",hr="flipinvert",ft="shift",c,e,it,wt,h={},o="qtip",fi="data-hasqtip",bt="data-qtip-id",cr=["ui-widget","ui-tooltip"],rt="."+o,vi="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),yi=o+"-fixed",ei=o+"-default",ot=o+"-focus",lr=o+"-hover",a=o+"-disabled",st="_replacedByqTip",ut="oldtitle",kt,v={ie:function(){for(var n=4,i=t.createElement("div");(i.innerHTML="<!--[if gt IE "+n+"]><i><\/i><![endif]-->")&&i.getElementsByTagName("i")[0];n+=1);return n>4?n:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||u},bi,ki,vt,ri,rr,li,ai,g,ui,nt,er,or;e=oi.prototype,e._when=function(n){return r.when.apply(r,n)},e.render=function(n){if(this.rendered||this.destroyed)return this;var i=this,t=this.options,s=this.cache,y=this.elements,p=t.content.text,l=t.content.title,w=t.content.button,e=t.position,k="."+this._id+" ",v=[],b;return r.attr(this.target[0],"aria-describedby",this._id),s.posClass=this._createPosClass((this.position={my:e.my,at:e.at}).my),this.tooltip=y.tooltip=b=r("<div/>",{id:this._id,"class":[o,ei,t.style.classes,s.posClass].join(" "),width:t.style.width||"",height:t.style.height||"",tracking:e.target==="mouse"&&e.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":u,"aria-describedby":this._id+"-content","aria-hidden":f}).toggleClass(a,this.disabled).attr(bt,this.id).data(o,this).appendTo(e.container).append(y.content=r("<div />",{"class":o+"-content",id:this._id+"-content","aria-atomic":f})),this.rendered=-1,this.positioning=f,l&&(this._createTitle(),r.isFunction(l)||v.push(this._updateTitle(l,u))),w&&this._createButton(),r.isFunction(p)||v.push(this._updateContent(p,u)),this.rendered=f,this._setWidget(),r.each(h,function(n){var t;this.initialize==="render"&&(t=this(i))&&(i.plugins[n]=t)}),this._unassignEvents(),this._assignEvents(),this._when(v).then(function(){i._trigger("render"),i.positioning=u,!i.hiddenDuringWait&&(t.show.ready||n)&&i.toggle(f,s.event,u),i.hiddenDuringWait=u}),c.api[this.id]=this,this},e.destroy=function(n){function t(){if(!this.destroyed){this.destroyed=f;var n=this.target,t=n.attr(ut),i;this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),r.each(this.plugins,function(){this.destroy&&this.destroy()});for(i in this.timers)clearTimeout(this.timers[i]);n.removeData(o).removeAttr(bt).removeAttr(fi).removeAttr("aria-describedby"),this.options.suppress&&t&&n.attr("title",t).removeAttr(ut),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=s,delete c.api[this.id]}}if(this.destroyed)return this.target;if((n!==f||this.triggering==="hide")&&this.rendered){this.tooltip.one("tooltiphidden",r.proxy(t,this));this.triggering||this.hide()}else t.call(this);return this.target},wt=e.checks={builtin:{"^id$":function(n,t,i,e){var s=i===f?c.nextid:i,h=o+"-"+s;s!==u&&s.length>0&&!r("#"+h).length?(this._id=h,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):n[t]=e},"^prerender":function(n,t,i){i&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(n,t,i){this._updateContent(i)},"^content.attr$":function(n,t,i,r){this.options.content.text===this.target.attr(r)&&this._updateContent(this.target.attr(i))},"^content.title$":function(n,t,i){if(!i)return this._removeTitle();i&&!this.elements.title&&this._createTitle(),this._updateTitle(i)},"^content.button$":function(n,t,i){this._updateButton(i)},"^content.title.(text|button)$":function(n,t,i){this.set("content."+t,i)},"^position.(my|at)$":function(n,t,i){"string"==typeof i&&(this.position[t]=n[t]=new it(i,t==="at"))},"^position.container$":function(n,t,i){this.rendered&&this.tooltip.appendTo(i)},"^show.ready$":function(n,t,i){i&&(!this.rendered&&this.render(f)||this.toggle(f))},"^style.classes$":function(n,t,i,r){this.rendered&&this.tooltip.removeClass(r).addClass(i)},"^style.(width|height)":function(n,t,i){this.rendered&&this.tooltip.css(t,i)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(n,t,i){this.rendered&&this.tooltip.toggleClass(ei,!!i)},"^events.(render|show|move|hide|focus|blur)$":function(n,t,i){this.rendered&&this.tooltip[(r.isFunction(i)?"":"un")+"bind"]("tooltip"+t,i)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var n=this.options.position;this.tooltip.attr("tracking",n.target==="mouse"&&n.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},e.get=function(n){if(this.destroyed)return this;var i=wi(this.options,n.toLowerCase()),t=i[0][i[1]];return t.precedance?t.string():t},bi=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,ki=/^prerender|show\.ready/i,e.set=function(n,t){if(this.destroyed)return this;var h=this.rendered,i=u,e=this.options,c=this.checks,o;return"string"==typeof n?(o=n,n={},n[o]=t):n=r.extend({},n),r.each(n,function(t,u){if(h&&ki.test(t)){delete n[t];return}var f=wi(e,t.toLowerCase()),o;o=f[0][f[1]],f[0][f[1]]=u&&u.nodeType?r(u):u,i=bi.test(t)||i,n[t]=[f[0],f[1],u,o]}),dt(e),this.positioning=f,r.each(n,r.proxy(ar,this)),this.positioning=u,this.rendered&&this.tooltip[0].offsetWidth>0&&i&&this.reposition(e.position.target==="mouse"?s:this.cache.event),this},e._update=function(n,t){var e=this,o=this.cache;return!this.rendered||!n?u:(r.isFunction(n)&&(n=n.call(this.elements.target,o.event,this)||""),r.isFunction(n.then))?(o.waiting=f,n.then(function(n){return o.waiting=u,e._update(n,t)},s,function(n){return e._update(n,t)})):n===u||!n&&n!==""?u:(n.jquery&&n.length>0?t.empty().append(n.css({display:"block",visibility:"visible"})):t.html(n),this._waitForContent(t).then(function(n){e.rendered&&e.tooltip[0].offsetWidth>0&&e.reposition(o.event,!n.length)}))},e._waitForContent=function(n){var t=this.cache;return t.waiting=f,(r.fn.imagesLoaded?n.imagesLoaded():r.Deferred().resolve([])).done(function(){t.waiting=u}).promise()},e._updateContent=function(n,t){this._update(n,this.elements.content,t)},e._updateTitle=function(n,t){this._update(n,this.elements.title,t)===u&&this._removeTitle(u)},e._createTitle=function(){var n=this.elements,t=this._id+"-title";n.titlebar&&this._removeTitle(),n.titlebar=r("<div />",{"class":o+"-titlebar "+(this.options.style.widget?gt("header"):"")}).append(n.title=r("<div />",{id:t,"class":o+"-title","aria-atomic":f})).insertBefore(n.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(n){r(this).toggleClass("ui-state-active ui-state-focus",n.type.substr(-4)==="down")}).delegate(".qtip-close","mouseover mouseout",function(n){r(this).toggleClass("ui-state-hover",n.type==="mouseover")}),this.options.content.button&&this._createButton()},e._removeTitle=function(n){var t=this.elements;t.title&&(t.titlebar.remove(),t.titlebar=t.title=t.button=s,n!==u&&this.reposition())},e._createPosClass=function(n){return o+"-pos-"+(n||this.options.position.my).abbrev()},e.reposition=function(i,e){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=f;var c=this.cache,d=this.tooltip,a=this.options.position,o=a.target,et=a.my,g=a.at,ot=a.viewport,ht=a.container,ut=a.adjust,at=ut.method.split(" "),ct=d.outerWidth(u),lt=d.outerHeight(u),nt=0,it=0,vt=d.css("position"),s={left:0,top:0},wt=d[0].offsetWidth>0,bt=i&&i.type==="scroll",st=r(n),yt=ht[0].ownerDocument,rt=this.mouse,y,w,ft,pt;if(r.isArray(o)&&o.length===2)g={x:p,y:b},s={left:o[0],top:o[1]};else if(o==="mouse")g={x:p,y:b},(!ut.mouse||this.options.hide.distance)&&c.origin&&c.origin.pageX?i=c.origin:!i||i&&(i.type==="resize"||i.type==="scroll")?i=c.event:rt&&rt.pageX&&(i=rt),vt!=="static"&&(s=ht.offset()),yt.body.offsetWidth!==(n.innerWidth||yt.documentElement.clientWidth)&&(w=r(t.body).offset()),s={left:i.pageX-s.left+(w&&w.left||0),top:i.pageY-s.top+(w&&w.top||0)},ut.mouse&&bt&&rt&&(s.left-=(rt.scrollX||0)-st.scrollLeft(),s.top-=(rt.scrollY||0)-st.scrollTop());else{if(o==="event"?i&&i.target&&i.type!=="scroll"&&i.type!=="resize"?c.target=r(i.target):i.target||(c.target=this.elements.target):o!=="event"&&(c.target=r(o.jquery?o:this.elements.target)),o=c.target,o=r(o).eq(0),o.length===0)return this;o[0]===t||o[0]===n?(nt=v.iOS?n.innerWidth:o.width(),it=v.iOS?n.innerHeight:o.height(),o[0]===n&&(s={top:(ot||o).scrollTop(),left:(ot||o).scrollLeft()})):h.imagemap&&o.is("area")?y=h.imagemap(this,o,g,h.viewport?at:u):h.svg&&o&&o[0].ownerSVGElement?y=h.svg(this,o,g,h.viewport?at:u):(nt=o.outerWidth(u),it=o.outerHeight(u),s=o.offset()),y&&(nt=y.width,it=y.height,w=y.offset,s=y.position),s=this.reposition.offset(o,s,ht),(v.iOS>3.1&&v.iOS<4.1||v.iOS>=4.3&&v.iOS<4.33||!v.iOS&&vt==="fixed")&&(s.left-=st.scrollLeft(),s.top-=st.scrollTop()),(!y||y&&y.adjustable!==u)&&(s.left+=g.x===k?nt:g.x===l?nt/2:0,s.top+=g.y===tt?it:g.y===l?it/2:0)}return(s.left+=ut.x+(et.x===k?-ct:et.x===l?-ct/2:0),s.top+=ut.y+(et.y===tt?-lt:et.y===l?-lt/2:0),h.viewport?(ft=s.adjusted=h.viewport(this,s,a,nt,it,ct,lt),w&&ft.left&&(s.left+=w.left),w&&ft.top&&(s.top+=w.top),ft.my&&(this.position.my=ft.my)):s.adjusted={left:0,top:0},c.posClass!==(pt=this._createPosClass(this.position.my))&&d.removeClass(c.posClass).addClass(c.posClass=pt),!this._trigger("move",[s,ot.elem||ot],i))?this:(delete s.adjusted,e===u||!wt||isNaN(s.left)||isNaN(s.top)||o==="mouse"||!r.isFunction(a.effect)?d.css(s):r.isFunction(a.effect)&&(a.effect.call(d,this,r.extend({},s)),d.queue(function(n){r(this).css({opacity:"",height:""}),v.ie&&this.style.removeAttribute("filter"),n()})),this.positioning=u,this)},e.reposition.offset=function(n,i,u){function l(n,t){i.left+=t*n.scrollLeft(),i.top+=t*n.scrollTop()}if(!u[0])return i;var s=r(n[0].ownerDocument),a=!!v.ie&&t.compatMode!=="CSS1Compat",f=u[0],o,h,e,c;do(h=r.css(f,"position"))!=="static"&&(h==="fixed"?(e=f.getBoundingClientRect(),l(s,-1)):(e=r(f).position(),e.left+=parseFloat(r.css(f,"borderLeftWidth"))||0,e.top+=parseFloat(r.css(f,"borderTopWidth"))||0),i.left-=e.left+(parseFloat(r.css(f,"marginLeft"))||0),i.top-=e.top+(parseFloat(r.css(f,"marginTop"))||0),o||(c=r.css(f,"overflow"))==="hidden"||c==="visible"||(o=r(f)));while(f=f.offsetParent);return o&&(o[0]!==s[0]||a)&&l(o,1),i},vt=(it=e.reposition.Corner=function(n,t){n=(""+n).replace(/([A-Z])/," $1").replace(/middle/gi,l).toLowerCase(),this.x=(n.match(/left|right/i)||n.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(n.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!t;var i=n.charAt(0);this.precedance=i==="t"||i==="b"?y:w}).prototype,vt.invert=function(n,t){this[n]=this[n]===p?k:this[n]===k?p:t||this[n]},vt.string=function(n){var t=this.x,i=this.y,r=t!==i?t==="center"||i!=="center"&&(this.precedance===y||this.forceY)?[i,t]:[t,i]:[t];return n!==!1?r.join(" "):r},vt.abbrev=function(){var n=this.string(!1);return n[0].charAt(0)+(n[1]&&n[1].charAt(0)||"")},vt.clone=function(){return new it(this.string(),this.forceY)},e.toggle=function(n,i){var c=this.cache,b=this.options,e=this.tooltip;if(i){if(/over|enter/.test(i.type)&&c.event&&/out|leave/.test(c.event.type)&&b.show.target.add(i.target).length===b.show.target.length&&e.has(i.relatedTarget).length)return this;c.event=r.event.fix(i)}if(this.waiting&&!n&&(this.hiddenDuringWait=f),this.rendered){if(this.destroyed||this.disabled)return this}else return n?this.render(1):this;var y=n?"show":"hide",h=this.options[y],it=this.options[n?"hide":"show"],k=this.options.position,l=this.options.content,d=this.tooltip.css("width"),g=this.tooltip.is(":visible"),nt=n||h.target.length===1,tt=!i||h.target.length<2||c.target[0]===i.target,p,w,ut,ft,a;return((typeof n).search("boolean|number")&&(n=!g),p=!e.is(":animated")&&g===n&&tt,w=p?s:!!this._trigger(y,[90]),this.destroyed)?this:(w!==u&&n&&this.focus(i),!w||p)?this:(r.attr(e[0],"aria-hidden",!!!n),n?(this.mouse&&(c.origin=r.event.fix(this.mouse)),r.isFunction(l.text)&&this._updateContent(l.text,u),r.isFunction(l.title)&&this._updateTitle(l.title,u),!kt&&k.target==="mouse"&&k.adjust.mouse&&(r(t).bind("mousemove."+o,this._storeMouse),kt=f),d||e.css("width",e.outerWidth(u)),this.reposition(i,arguments[2]),d||e.css("width",""),!h.solo||(typeof h.solo=="string"?r(h.solo):r(rt,h.solo)).not(e).not(h.target).qtip("hide",r.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete c.origin,kt&&!r(rt+'[tracking="true"]:visible',h.solo).not(e).length&&(r(t).unbind("mousemove."+o),kt=u),this.blur(i)),a=r.proxy(function(){n?(v.ie&&e[0].style.removeAttribute("filter"),e.css("overflow",""),"string"==typeof h.autofocus&&r(this.options.show.autofocus,e).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):e.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(n?"visible":"hidden")},this),h.effect===u||nt===u?(e[y](),a()):r.isFunction(h.effect)?(e.stop(1,1),h.effect.call(e,this),e.queue("fx",function(n){a(),n()})):e.fadeTo(90,n?1:0,a),n&&h.target.trigger("qtip-"+this.id+"-inactive"),this)},e.show=function(n){return this.toggle(f,n)},e.hide=function(n){return this.toggle(u,n)},e.focus=function(n){if(!this.rendered||this.destroyed)return this;var t=r(rt),i=this.tooltip,f=parseInt(i[0].style.zIndex,10),u=c.zindex+t.length,e;return i.hasClass(ot)||this._trigger("focus",[u],n)&&(f!==u&&(t.each(function(){this.style.zIndex>f&&(this.style.zIndex=this.style.zIndex-1)}),t.filter("."+ot).qtip("blur",n)),i.addClass(ot)[0].style.zIndex=u),this},e.blur=function(n){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(ot),this._trigger("blur",[this.tooltip.css("zIndex")],n),this)},e.disable=function(n){return this.destroyed?this:(n==="toggle"?n=!(this.rendered?this.tooltip.hasClass(a):this.disabled):"boolean"!=typeof n&&(n=f),this.rendered&&this.tooltip.toggleClass(a,n).attr("aria-disabled",n),this.disabled=!!n,this)},e.enable=function(){return this.disable(u)},e._createButton=function(){var f=this,n=this.elements,i=n.tooltip,t=this.options.content.button,e=typeof t=="string",s=e?t:"Close tooltip";n.button&&n.button.remove(),n.button=t.jquery?t:r("<a />",{"class":"qtip-close "+(this.options.style.widget?"":o+"-icon")}).prepend(r("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),n.button.appendTo(n.titlebar||i).attr("role","button").click(function(n){return i.hasClass(a)||f.hide(n),u})},e._updateButton=function(n){if(!this.rendered)return u;var t=this.elements.button;n?this._createButton():t.remove()},e._setWidget=function(){var t=this.options.style.widget,n=this.elements,i=n.tooltip,r=i.hasClass(a);i.removeClass(a),a=t?"ui-state-disabled":"qtip-disabled",i.toggleClass(a,r),i.toggleClass("ui-helper-reset "+gt(),t).toggleClass(ei,this.options.style.def&&!t),n.content&&n.content.toggleClass(gt("content"),t),n.titlebar&&n.titlebar.toggleClass(gt("header"),t),n.button&&n.button.toggleClass(o+"-icon",!t)},e._storeMouse=function(n){return(this.mouse=r.event.fix(n)).type="mousemove",this},e._bind=function(n,t,i,u,f){if(n&&i&&t.length){var e="."+this._id+(u?"-"+u:"");return r(n).bind((t.split?t:t.join(e+" "))+e,r.proxy(i,f||this)),this}},e._unbind=function(n,t){return n&&r(n).unbind("."+this._id+(t?"-"+t:"")),this},e._trigger=function(n,t,i){var f=r.Event("tooltip"+n);return f.originalEvent=i&&r.extend({},i)||this.cache.event||s,this.triggering=n,this.tooltip.trigger(f,[this].concat(t||[])),this.triggering=u,!f.isDefaultPrevented()},e._bindEvents=function(n,t,i,u,f,e){var o=i.filter(u).add(u.filter(i)),s=[];o.length&&(r.each(t,function(t,i){var u=r.inArray(i,n);u>-1&&s.push(n.splice(u,1)[0])}),s.length&&(this._bind(o,s,function(n){var t=this.rendered?this.tooltip[0].offsetWidth>0:!1;(t?e:f).call(this,n)}),i=i.not(o),u=u.not(o))),this._bind(i,n,f),this._bind(u,t,e)},e._assignInitialEvents=function(n){function o(n){if(this.disabled||this.destroyed)return u;this.cache.event=n&&r.event.fix(n),this.cache.target=n&&r(n.target),clearTimeout(this.timers.show),this.timers.show=ni.call(this,function(){this.render(typeof n=="object"||t.show.ready)},t.prerender?0:t.show.delay)}var t=this.options,i=t.show.target,s=t.hide.target,h=t.show.event?r.trim(""+t.show.event).split(" "):[],e=t.hide.event?r.trim(""+t.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(t.show.event)&&!/mouse(out|leave)/i.test(t.hide.event)&&e.push("mouseleave"),this._bind(i,"mousemove",function(n){this._storeMouse(n),this.cache.onTarget=f}),this._bindEvents(h,e,i,s,o,function(){if(!this.timers)return u;clearTimeout(this.timers.show)}),(t.show.ready||t.prerender)&&o.call(this,n)},e._assignEvents=function(){var y=this,i=this.options,f=i.position,e=this.tooltip,s=i.show.target,o=i.hide.target,p=f.container,h=f.viewport,l=r(t),k=r(t.body),v=r(n),w=i.show.event?r.trim(""+i.show.event).split(" "):[],b=i.hide.event?r.trim(""+i.hide.event).split(" "):[];r.each(i.events,function(n,t){y._bind(e,n==="toggle"?["tooltipshow","tooltiphide"]:["tooltip"+n],t,null,e)}),/mouse(out|leave)/i.test(i.hide.event)&&i.hide.leave==="window"&&this._bind(l,["mouseout","blur"],function(n){/select|option/.test(n.target.nodeName)||n.relatedTarget||this.hide(n)}),i.hide.fixed?o=o.add(e.addClass(yi)):/mouse(over|enter)/i.test(i.show.event)&&this._bind(o,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+i.hide.event).indexOf("unfocus")>-1&&this._bind(p.closest("html"),["mousedown","touchstart"],function(n){var t=r(n.target),i=this.rendered&&!this.tooltip.hasClass(a)&&this.tooltip[0].offsetWidth>0,u=t.parents(rt).filter(this.tooltip[0]).length>0;t[0]===this.target[0]||t[0]===this.tooltip[0]||u||this.target.has(t[0]).length||!i||this.hide(n)}),"number"==typeof i.hide.inactive&&(this._bind(s,"qtip-"+this.id+"-inactive",si,"inactive"),this._bind(o.add(e),c.inactiveEvents,si)),this._bindEvents(w,b,s,o,vr,yr),this._bind(s.add(e),"mousemove",function(n){if("number"==typeof i.hide.distance){var t=this.cache.origin||{},r=this.options.hide.distance,u=Math.abs;(u(n.pageX-t.pageX)>=r||u(n.pageY-t.pageY)>=r)&&this.hide(n)}this._storeMouse(n)}),f.target==="mouse"&&f.adjust.mouse&&(i.hide.event&&this._bind(s,["mouseenter","mouseleave"],function(n){if(!this.cache)return u;this.cache.onTarget=n.type==="mouseenter"}),this._bind(l,"mousemove",function(n){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(a)&&this.tooltip[0].offsetWidth>0&&this.reposition(n)})),(f.adjust.resize||h.length)&&this._bind(r.event.special.resize?h:v,"resize",di),f.adjust.scroll&&this._bind(v.add(f.container),"scroll",di)},e._unassignEvents=function(){var u=this.options,f=u.show.target,e=u.hide.target,i=r.grep([this.elements.target[0],this.rendered&&this.tooltip[0],u.position.container[0],u.position.viewport[0],u.position.container.closest("html")[0],n,t],function(n){return typeof n=="object"});f&&f.toArray&&(i=i.concat(f.toArray())),e&&e.toArray&&(i=i.concat(e.toArray())),this._unbind(i)._unbind(i,"destroy")._unbind(i,"inactive")},r(function(){gi(rt,["mouseenter","mouseleave"],function(n){var u=n.type==="mouseenter",i=r(n.currentTarget),f=r(n.relatedTarget||n.target),t=this.options;u?(this.focus(n),i.hasClass(yi)&&!i.hasClass(a)&&clearTimeout(this.timers.hide)):t.position.target==="mouse"&&t.position.adjust.mouse&&t.hide.event&&t.show.target&&!f.closest(t.show.target[0]).length&&this.hide(n),i.toggleClass(lr,u)}),gi("["+bt+"]",vi,si)}),c=r.fn.qtip=function(n,t,e){var a=(""+n).toLowerCase(),y=s,p=r.makeArray(arguments).slice(1),v=p[p.length-1],l=this[0]?r.data(this[0],o):s;return!arguments.length&&l||a==="api"?l:"string"==typeof n?(this.each(function(){var n=r.data(this,o);if(!n)return f;if(v&&v.timeStamp&&(n.cache.event=v),t&&(a==="option"||a==="options"))if(e!==i||r.isPlainObject(t))n.set(t,e);else return y=n.get(t),u;else n[a]&&n[a].apply(n,p)}),y!==s?y:this):"object"==typeof n||!arguments.length?(l=dt(r.extend(f,{},n)),this.each(function(n){var i,t;if(t=r.isArray(l.id)?l.id[n]:l.id,t=!t||t===u||t.length<1||c.api[t]?c.nextid++:t,i=pr(r(this),t,l),i===u)return f;c.api[t]=i,r.each(h,function(){this.initialize==="initialize"&&this(i)}),i._assignInitialEvents(v)})):void 0},r.qtip=oi,c.api={},r.each({attr:function(n,t){if(this.length){var u=this[0],f="title",i=r.data(u,"qtip");if(n===f&&i&&"object"==typeof i&&i.options.suppress)return arguments.length<2?r.attr(u,ut):(i&&i.options.content.attr===f&&i.cache.attr&&i.set("content.text",t),this.attr(ut,t))}return r.fn["attr"+st].apply(this,arguments)},clone:function(n){var i=r([]),u="title",t=r.fn["clone"+st].apply(this,arguments);return n||t.filter("["+ut+"]").attr("title",function(){return r.attr(this,ut)}).removeAttr(ut),t}},function(n,t){if(!t||r.fn[n+st])return f;var i=r.fn[n+st]=r.fn[n];r.fn[n]=function(){return t.apply(this,arguments)||i.apply(this,arguments)}}),r.ui||(r["cleanData"+st]=r.cleanData,r.cleanData=function(n){for(var i=0,t;(t=r(n[i])).length;i++)if(t.attr(fi))try{t.triggerHandler("removeqtip")}catch(u){}r["cleanData"+st].apply(this,arguments)}),c.version="2.2.1",c.nextid=0,c.inactiveEvents=vi,c.zindex=500,c.defaults={prerender:u,id:u,overwrite:f,suppress:f,content:{text:f,attr:"title",title:u,button:u},position:{my:"top left",at:"bottom right",target:u,container:u,viewport:u,adjust:{x:0,y:0,mouse:f,scroll:f,resize:f,method:"flipinvert flipinvert"},effect:function(n,t){r(this).animate(t,{duration:200,queue:u})}},show:{target:u,event:"mouseenter",effect:f,delay:90,solo:u,ready:u,autofocus:u},hide:{target:u,event:"mouseleave",effect:f,delay:0,fixed:u,inactive:u,leave:"window",distance:u},style:{classes:"",widget:u,width:u,height:u,def:f},events:{render:s,move:s,show:s,hide:s,toggle:s,visible:s,hidden:s,focus:s,blur:s}};var hi,gr=".qtip-tip",ci="margin",ti="border",yt="color",ht="background-color",nr="transparent",tr=" !important",ii=!!t.createElement("canvas").getContext,ir=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i;if(ri={},rr=["Webkit","O","Moz","ms"],ii)var br=n.devicePixelRatio||1,kr=function(){var n=t.createElement("canvas").getContext("2d");return n.backingStorePixelRatio||n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||1}(),lt=br/kr;else li=function(n,t,i){return"<qtipvml:"+n+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(t||"")+' style="behavior: url(#default#VML); '+(i||"")+'" />'};r.extend(ur.prototype,{init:function(n){var t,i;i=this.element=n.elements.tip=r("<div />",{"class":o+"-tip"}).prependTo(n.tooltip),ii?(t=r("<canvas />").appendTo(this.element)[0].getContext("2d"),t.lineJoin="miter",t.miterLimit=1e5,t.save()):(t=li("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(t+t),n._bind(r("*",i).add(i),["click","mousedown"],function(n){n.stopPropagation()},this._ns)),n._bind(n.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(n){var t=this.qtip.elements.titlebar;return t&&(n.y===b||n.y===l&&this.element.position().top+this.size[1]/2+this.options.offset<t.outerHeight(f))},_parseCorner:function(n){var t=this.qtip.options.position.my;return n===u||t===u?n=u:n===f?n=new it(t.string()):n.string||(n=new it(n),n.fixed=f),n},_parseWidth:function(n,t,i){var r=this.qtip.elements,u=ti+pt(t)+"Width";return(i?ct(i,u):ct(r.content,u)||ct(this._useTitle(n)&&r.titlebar||r.content,u)||ct(r.tooltip,u))||0},_parseRadius:function(n){var t=this.qtip.elements,i=ti+pt(n.y)+pt(n.x)+"Radius";return v.ie<9?0:ct(this._useTitle(n)&&t.titlebar||t.content,i)||ct(t.tooltip,i)||0},_invalidColour:function(n,t,i){var r=n.css(t);return!r||i&&r===n.css(i)||ir.test(r)?u:r},_parseColours:function(n){var i=this.qtip.elements,u=this.element.css("cssText",""),f=ti+pt(n[n.precedance])+pt(yt),o=this._useTitle(n)&&i.titlebar||i.content,t=this._invalidColour,e=[];return e[0]=t(u,ht)||t(o,ht)||t(i.content,ht)||t(i.tooltip,ht)||u.css(ht),e[1]=t(u,f,yt)||t(o,f,yt)||t(i.content,f,yt)||t(i.tooltip,f,yt)||i.tooltip.css(f),r("*",u).add(u).css("cssText",ht+":"+nr+tr+";"+ti+":0"+tr+";"),e},_calculateSize:function(n){var o=n.precedance===y,s=this.options.width,r=this.options.height,h=n.abbrev()==="c",c=(o?s:r)*(h?.5:1),i=Math.pow,l=Math.round,a,f,e,u=Math.sqrt(i(c,2)+i(r,2)),t=[this.border/c*u,this.border/r*u];return t[2]=Math.sqrt(i(t[0],2)-i(this.border,2)),t[3]=Math.sqrt(i(t[1],2)-i(this.border,2)),a=u+t[2]+t[3]+(h?0:t[0]),f=a/u,e=[l(f*s),l(f*r)],o?e:e.reverse()},_calculateTip:function(n,t,i){i=i||1,t=t||this.size;var r=t[0]*i,u=t[1]*i,e=Math.ceil(r/2),o=Math.ceil(u/2),f={br:[0,0,r,u,r,0],bl:[0,0,r,0,0,u],tr:[0,u,r,0,r,u],tl:[0,0,0,u,r,u],tc:[0,u,e,0,r,u],bc:[0,0,r,0,e,u],rc:[0,0,r,o,0,u],lc:[r,0,r,u,0,o]};return f.lt=f.br,f.rt=f.bl,f.lb=f.tr,f.rb=f.tl,f[n.abbrev()]},_drawCoords:function(n,t){n.beginPath(),n.moveTo(t[0],t[1]),n.lineTo(t[2],t[3]),n.lineTo(t[4],t[5]),n.closePath()},create:function(){var n=this.corner=(ii||v.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&this.corner.abbrev()!=="c")&&(this.qtip.cache.corner=n.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(t,i){if(!this.enabled)return this;var ht=this.qtip.elements,ot=this.element,rt=ot.children(),ut=this.options,nt=this.size,e=ut.mimic,ft=Math.round,a,et,h,c,st,g,o,s,ct;t||(t=this.qtip.cache.corner||this.corner),e===u?e=t:(e=new it(e),e.precedance=t.precedance,e.x==="inherit"?e.x=t.x:e.y==="inherit"?e.y=t.y:e.x===e.y&&(e[t.precedance]=t[t.precedance])),et=e.precedance,t.precedance===w?this._swapDimensions():this._resetDimensions(),a=this.color=this._parseColours(t),a[1]!==nr?(s=this.border=this._parseWidth(t,t[t.precedance]),ut.border&&s<1&&!ir.test(a[1])&&(a[0]=a[1]),this.border=s=ut.border!==f?ut.border:s):this.border=s=0,o=this.size=this._calculateSize(t),ot.css({width:o[0],height:o[1],lineHeight:o[1]+"px"}),g=t.precedance===y?[ft(e.x===p?s:e.x===k?o[0]-nt[0]-s:(o[0]-nt[0])/2),ft(e.y===b?o[1]-nt[1]:0)]:[ft(e.x===p?o[0]-nt[0]:0),ft(e.y===b?s:e.y===tt?o[1]-nt[1]-s:(o[1]-nt[1])/2)],ii?(h=rt[0].getContext("2d"),h.restore(),h.save(),h.clearRect(0,0,6e3,6e3),c=this._calculateTip(e,nt,lt),st=this._calculateTip(e,this.size,lt),rt.attr(d,o[0]*lt).attr(at,o[1]*lt),rt.css(d,o[0]).css(at,o[1]),this._drawCoords(h,st),h.fillStyle=a[1],h.fill(),h.translate(g[0]*lt,g[1]*lt),this._drawCoords(h,c),h.fillStyle=a[0],h.fill()):(c=this._calculateTip(e),c="m"+c[0]+","+c[1]+" l"+c[2]+","+c[3]+" "+c[4]+","+c[5]+" xe",g[2]=s&&/^(r|b)/i.test(t.string())?v.ie===8?2:1:0,rt.css({coordsize:o[0]+s+" "+(o[1]+s),antialias:""+(e.string().indexOf(l)>-1),left:g[0]-g[2]*Number(et===w),top:g[1]-g[2]*Number(et===y),width:o[0]+s,height:o[1]+s}).each(function(n){var t=r(this);t[t.prop?"prop":"attr"]({coordsize:o[0]+s+" "+(o[1]+s),path:c,fillcolor:a[0],filled:!!n,stroked:!n}).toggle(!!(s||n)),n||t.html(li("stroke",'weight="'+s*2+'px" color="'+a[1]+'" miterlimit="1000" joinstyle="miter"'))})),n.opera&&setTimeout(function(){ht.tip.css({display:"inline-block",visibility:"visible"})},1),i!==u&&this.calculate(t,o)},calculate:function(n,t){if(!this.enabled)return u;var e=this,o=this.qtip.elements,c=this.element,h=this.options.offset,a=o.tooltip.hasClass("ui-widget"),i={},f,s;return n=n||this.corner,f=n.precedance,t=t||this._calculateSize(n),s=[n.x,n.y],f===w&&s.reverse(),r.each(s,function(r,u){var s,a,c;u===l?(s=f===y?p:b,i[s]="50%",i[ci+"-"+s]=-Math.round(t[f===y?0:1]/2)+h):(s=e._parseWidth(n,u,o.tooltip),a=e._parseWidth(n,u,o.content),c=e._parseRadius(n),i[u]=Math.max(-e.border,r?a:h+(c>s?c:-s)))}),i[n[f]]-=t[f===w?0:1],c.css({margin:"",top:"",bottom:"",left:"",right:""}).css(i),i},reposition:function(n,t,r){function rt(n,t,i,r,u){n===ft&&h.precedance===t&&c[r]&&h[i]!==l?h.precedance=h.precedance===w?y:w:n!==ft&&c[r]&&(h[t]=h[t]===l?c[r]>0?r:u:h[t]===r?u:r)}function ut(n,t,f){h[n]===l?it[ci+"-"+t]=s[n]=o[ci+"-"+t]-c[t]:(v=o[f]!==i?[c[t],-o[t]]:[-c[t],o[t]],(s[n]=Math.max(v[0],v[1]))>v[0]&&(r[t]-=c[t],s[t]=u),it[o[f]!==i?f:t]=s[n])}if(this.enabled){var a=t.cache,h=this.corner.clone(),c=r.adjusted,d=t.options.position.adjust.method.split(" "),g=d[0],nt=d[1]||d[0],s={left:u,top:u,x:0,y:0},o,it={},v;this.corner.fixed!==f&&(rt(g,w,y,p,k),rt(nt,y,w,b,tt),(h.string()!==a.corner.string()||a.cornerTop!==c.top||a.cornerLeft!==c.left)&&this.update(h,u)),o=this.calculate(h),o.right!==i&&(o.left=-o.right),o.bottom!==i&&(o.top=-o.bottom),o.user=this.offset,(s.left=g===ft&&!!c.left)&&ut(w,p,k),(s.top=nt===ft&&!!c.top)&&ut(y,b,tt),this.element.css(it).toggle(!(s.x&&s.y||h.x===l&&s.y||h.y===l&&s.x)),r.left-=o.left.charAt?o.user:g!==ft||s.top||!s.left&&!s.top?o.left+this.border:0,r.top-=o.top.charAt?o.user:nt!==ft||s.left||!s.left&&!s.top?o.top+this.border:0,a.cornerLeft=c.left,a.cornerTop=c.top,a.corner=h.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),hi=h.tip=function(n){return new ur(n,n.options.style.tip)},hi.initialize="render",hi.sanitize=function(n){if(n.style&&"tip"in n.style){var t=n.style.tip;typeof t!="object"&&(t=n.style.tip={corner:t}),/string|boolean/i.test(typeof t.corner)||(t.corner=f)}},wt.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(n){this.size=[n.width,n.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},r.extend(f,c.defaults,{style:{tip:{corner:f,mimic:u,width:6,height:6,border:f,offset:0}}}),ui="qtip-modal",nt="."+ui,g=function(){function a(n){if(r.expr[":"].focusable)return r.expr[":"].focusable;var e=!isNaN(r.attr(n,"tabindex")),t=n.nodeName&&n.nodeName.toLowerCase(),i,u,f;return"area"===t?(i=n.parentNode,u=i.name,!n.href||!u||i.nodeName.toLowerCase()!=="map")?!1:(f=r("img[usemap=#"+u+"]")[0],!!f&&f.is(":visible")):/input|select|textarea|button|object/.test(t)?!n.disabled:"a"===t?n.href||e:e}function c(n){o.length<1&&n.length?n.not("body").blur():o.first().focus()}function v(t){if(n.is(":visible")){var f=r(t.target),e=i.tooltip,s=f.closest(rt),h;h=s.length<1?u:parseInt(s[0].style.zIndex,10)>parseInt(e[0].style.zIndex,10),h||f.closest(rt)[0]===e[0]||c(f),l=t.target===o[o.length-1]}}var e=this,o={},i,l,h,n;r.extend(e,{init:function(){return n=e.elem=r("<div />",{id:"qtip-overlay",html:"<div><\/div>",mousedown:function(){return u}}).hide(),r(t.body).bind("focusin"+nt,v),r(t).bind("keydown"+nt,function(n){i&&i.options.show.modal.escape&&n.keyCode===27&&i.hide(n)}),n.bind("click"+nt,function(n){i&&i.options.show.modal.blur&&i.hide(n)}),e},update:function(n){i=n,o=n.options.show.modal.stealfocus!==u?n.tooltip.find("*").filter(function(){return a(this)}):[]},toggle:function(o,l,a){var d=r(t.body),p=o.tooltip,v=o.options.show.modal,y=v.effect,w=l?"show":"hide",b=n.is(":visible"),k=r(nt).filter(":visible:not(:animated)").not(p),g;return(e.update(o),l&&v.stealfocus!==u&&c(r(":focus")),n.toggleClass("blurs",v.blur),l&&n.appendTo(t.body),n.is(":animated")&&b===l&&h!==u||!l&&k.length)?e:(n.stop(f,u),r.isFunction(y)?y.call(n,l):y===u?n[w]():n.fadeTo(parseInt(a,10)||90,l?1:0,function(){l||n.hide()}),l||n.queue(function(t){n.css({left:"",top:""}),r(nt).length||n.detach(),t()}),h=l,i.destroyed&&(i=s),e)}}),e.init()},g=new g,r.extend(fr.prototype,{init:function(n){var t=n.tooltip;if(!this.options.on)return this;n.elements.overlay=g.elem,t.addClass(ui).css("z-index",c.modal_zindex+r(nt).length),n._bind(t,["tooltipshow","tooltiphide"],function(n,i,u){var f=n.originalEvent;if(n.target===t[0])if(f&&n.type==="tooltiphide"&&/mouse(leave|enter)/.test(f.type)&&r(f.relatedTarget).closest(g.elem[0]).length)try{n.preventDefault()}catch(e){}else(!f||f&&f.type!=="tooltipsolo")&&this.toggle(n,n.type==="tooltipshow",u)},this._ns,this),n._bind(t,"tooltipfocus",function(n,i){if(!n.isDefaultPrevented()&&n.target===t[0]){var u=r(nt),f=c.modal_zindex+u.length,e=parseInt(t[0].style.zIndex,10);g.elem[0].style.zIndex=f-1,u.each(function(){this.style.zIndex>e&&(this.style.zIndex-=1)}),u.filter("."+ot).qtip("blur",n.originalEvent),t.addClass(ot)[0].style.zIndex=f,g.update(i);try{n.preventDefault()}catch(o){}}},this._ns,this),n._bind(t,"tooltiphide",function(n){n.target===t[0]&&r(nt).filter(":visible").not(t).last().qtip("focus",n)},this._ns,this)},toggle:function(n,t,i){if(n&&n.isDefaultPrevented())return this;g.toggle(this.qtip,!!t,i)},destroy:function(){this.qtip.tooltip.removeClass(ui),this.qtip._unbind(this.qtip.tooltip,this._ns),g.toggle(this.qtip,u),delete this.qtip.elements.overlay}}),ai=h.modal=function(n){return new fr(n,n.options.show.modal)},ai.sanitize=function(n){n.show&&(typeof n.show.modal!="object"?n.show.modal={on:!!n.show.modal}:typeof n.show.modal.on=="undefined"&&(n.show.modal.on=f))},c.modal_zindex=c.zindex-200,ai.initialize="render",wt.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},r.extend(f,c.defaults,{show:{modal:{on:u,effect:f,blur:f,stealfocus:f,escape:f}}}),h.viewport=function(i,r,f,e,o,s,h){function wt(n,t,i,u,f,e,o,s,h){var v=r[f],c=a[n],b=kt[n],tt=i===ft,k=c===f?h:c===e?-h:-h/2,ut=b===f?s:b===e?-s:-s/2,nt=lt[f]+rt[f]-(pt?0:it[f]),w=nt-v,p=v+h-(o===d?ht:ct)-nt,y=k-(a.precedance===n||c===a[t]?ut:0)-(b===l?s/2:0);return tt?(y=(c===f?1:-1)*k,r[f]+=w>0?w:p>0?-p:0,r[f]=Math.max(-it[f]+rt[f],v-y,Math.min(Math.max(-it[f]+rt[f]+(o===d?ht:ct),v+y),r[f],c==="center"?v-k:1e9))):(u*=i===hr?2:0,w>0&&(c!==f||p>0)?(r[f]-=y+u,g.invert(n,f)):p>0&&(c!==e||w>0)&&(r[f]-=(c===l?-y:y)+u,g.invert(n,e)),r[f]<lt&&-r[f]>p&&(r[f]=v,g=a.clone())),r[f]-v}var vt=f.target,bt=i.elements.tooltip,a=f.my,kt=f.at,nt=f.adjust,ut=nt.method.split(" "),et=ut[0],ot=ut[1]||ut[0],c=f.viewport,yt=f.container,dt=i.cache,v={left:0,top:0},st,g,it,pt,ht,ct,lt,rt;return!c.jquery||vt[0]===n||vt[0]===t.body||nt.method==="none"?v:(it=yt.offset()||v,pt=yt.css("position")==="static",st=bt.css("position")==="fixed",ht=c[0]===n?c.width():c.outerWidth(u),ct=c[0]===n?c.height():c.outerHeight(u),lt={left:st?0:c.scrollLeft(),top:st?0:c.scrollTop()},rt=c.offset()||v,(et!=="shift"||ot!=="shift")&&(g=a.clone()),v={left:et!=="none"?wt(w,y,et,nt.x,p,k,d,e,s):0,top:ot!=="none"?wt(y,w,ot,nt.y,b,tt,at,o,h):0,my:g})},h.polys={polygon:function(n,t){for(var i={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:u},f=0,r,e=[],o=1,s=1,a=0,v=0,h,c,f=n.length;f--;)r=[parseInt(n[--f],10),parseInt(n[f+1],10)],r[0]>i.position.right&&(i.position.right=r[0]),r[0]<i.position.left&&(i.position.left=r[0]),r[1]>i.position.bottom&&(i.position.bottom=r[1]),r[1]<i.position.top&&(i.position.top=r[1]),e.push(r);if(h=i.width=Math.abs(i.position.right-i.position.left),c=i.height=Math.abs(i.position.bottom-i.position.top),t.abbrev()==="c")i.position={left:i.position.left+i.width/2,top:i.position.top+i.height/2};else{while(h>0&&c>0&&o>0&&s>0)for(h=Math.floor(h/2),c=Math.floor(c/2),t.x===p?o=h:t.x===k?o=i.width-h:o+=Math.floor(h/2),t.y===b?s=c:t.y===tt?s=i.height-c:s+=Math.floor(c/2),f=e.length;f--;){if(e.length<2)break;a=e[f][0]-i.position.left,v=e[f][1]-i.position.top,(t.x===p&&a>=o||t.x===k&&a<=o||t.x===l&&(a<o||a>i.width-o)||t.y===b&&v>=s||t.y===tt&&v<=s||t.y===l&&(v<s||v>i.height-s))&&e.splice(f,1)}i.position={left:e[0][0],top:e[0][1]}}return i},rect:function(n,t,i,r){return{width:Math.abs(i-n),height:Math.abs(r-t),position:{left:Math.min(n,i),top:Math.min(t,r)}}},_angles:{tc:3/2,tr:7/4,tl:5/4,bc:1/2,br:1/4,bl:3/4,rc:2,lc:1,c:0},ellipse:function(n,t,i,r,f){var e=h.polys._angles[f.abbrev()],o=e===0?0:i*Math.cos(e*Math.PI),s=r*Math.sin(e*Math.PI);return{width:i*2-Math.abs(o),height:r*2-Math.abs(s),position:{left:n+o,top:t+s},adjustable:u}},circle:function(n,t,i,r){return h.polys.ellipse(n,t,i,i,r)}},h.svg=function(n,i,f){for(var g=r(t),e=i[0],a=r(e.ownerSVGElement),l=e.ownerDocument,b=(parseInt(i.css("stroke-width"),10)||0)/2,v,k,p,nt,d,w,y,s,o,c,tt;!e.getBBox;)e=e.parentNode;if(!e.getBBox||!e.parentNode)return u;switch(e.nodeName){case"ellipse":case"circle":o=h.polys.ellipse(e.cx.baseVal.value,e.cy.baseVal.value,(e.rx||e.r).baseVal.value+b,(e.ry||e.r).baseVal.value+b,f);break;case"line":case"polygon":case"polyline":for(s=e.points||[{x:e.x1.baseVal.value,y:e.y1.baseVal.value},{x:e.x2.baseVal.value,y:e.y2.baseVal.value}],o=[],y=-1,d=s.numberOfItems||s.length;++y<d;)w=s.getItem?s.getItem(y):s[y],o.push.apply(o,[w.x,w.y]);o=h.polys.polygon(o,f);break;default:o=e.getBBox(),o={width:o.width,height:o.height,position:{left:o.x,top:o.y}}}return c=o.position,a=a[0],a.createSVGPoint&&(k=e.getScreenCTM(),s=a.createSVGPoint(),s.x=c.left,s.y=c.top,p=s.matrixTransform(k),c.left=p.x,c.top=p.y),l!==t&&n.position.target!=="mouse"&&(v=r((l.defaultView||l.parentWindow).frameElement).offset(),v&&(c.left+=v.left,c.top+=v.top)),l=r(l),c.left+=l.scrollLeft(),c.top+=l.scrollTop(),o},h.imagemap=function(n,t,i){t.jquery||(t=r(t));var c=(t.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),e=r('img[usemap="#'+t.parent("map").attr("name")+'"]'),p=r.trim(t.attr("coords")),l=p.replace(/,$/,"").split(","),o,a,v,w,s,y;if(!e.length)return u;if(c==="polygon")s=h.polys.polygon(l,i);else if(h.polys[c]){for(v=-1,y=l.length,a=[];++v<y;)a.push(parseInt(l[v],10));s=h.polys[c].apply(this,a.concat(i))}else return u;return o=e.offset(),o.left+=Math.ceil((e.outerWidth(u)-e.width())/2),o.top+=Math.ceil((e.outerHeight(u)-e.height())/2),s.position.left+=o.left,s.position.top+=o.top,s},or='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"><\/iframe>',r.extend(sr.prototype,{_scroll:function(){var t=this.qtip.elements.overlay;t&&(t[0].style.top=r(n).scrollTop()+"px")},init:function(i){var u=i.tooltip,f;r("select, object").length<1&&(this.bgiframe=i.elements.bgiframe=r(or).appendTo(u),i._bind(u,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=r("<div/>",{id:o+"-rcontainer"}).appendTo(t.body),i.elements.overlay&&i.elements.overlay.addClass("qtipmodal-ie6fix")&&(i._bind(n,["scroll","resize"],this._scroll,this._ns,this),i._bind(u,["tooltipshow"],this._scroll,this._ns,this)),this.redraw()},adjustBGIFrame:function(){var t=this.qtip.tooltip,e={height:t.outerHeight(u),width:t.outerWidth(u)},r=this.qtip.plugins.tip,f=this.qtip.elements.tip,i,n;n=parseInt(t.css("borderLeftWidth"),10)||0,n={left:-n,top:-n},r&&f&&(i=r.corner.precedance==="x"?[d,p]:[at,b],n[i[1]]-=f[i[0]]()),this.bgiframe.css(n).css(e)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this;var t=this.qtip.tooltip,u=this.qtip.options.style,e=this.qtip.options.position.container,f,n,i,r;return this.qtip.drawing=1,u.height&&t.css(at,u.height),u.width?t.css(d,u.width):(t.css(d,"").appendTo(this.redrawContainer),n=t.width(),n%2<1&&(n+=1),i=t.css("maxWidth")||"",r=t.css("minWidth")||"",f=(i+r).indexOf("%")>-1?e.width()/100:0,i=(i.indexOf("%")>-1?f:1)*parseInt(i,10)||n,r=(r.indexOf("%")>-1?f:1)*parseInt(r,10)||0,n=i+r?Math.min(Math.max(n,r),i):n,t.css(d,Math.round(n)).appendTo(e)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([n,this.qtip.tooltip],this._ns)}}),er=h.ie6=function(n){return v.ie===6?new sr(n):u},er.initialize="render",wt.ie6={"^content|style$":function(){this.redraw()}}})}(window,document),function(n){n.extend_deep=function(){var t=arguments[0]||{},u=1,f=arguments.length,e=!1,r,i;for(t.constructor==Boolean&&(e=t,t=arguments[1]||{},u=2),typeof t!="object"&&typeof t!="function"&&(t={}),f==1&&(t=this,u=0);u<f;u++)if((r=arguments[u])!=null)for(i in r)t!==r[i]&&(e&&r[i]&&typeof r[i]=="object"&&t[i]&&!r[i].nodeType?t[i]=n.extend_deep(!0,t[i],r[i]):r[i]!=undefined&&(t[i]=r[i]));return t},n.metaobjects=function(t){function u(n){return n.match(/^'.*'$/)&&(n=n.replace(/'/g,"\\'"),n=n.replace(/^\\\'/,"'"),n=n.replace(/\\\'$/,"'")),n}function f(n){return n.match(/^'.*'$/)&&(n=n.replace(/^'/,"/"),n=n.replace(/'$/,"/")),n}function i(n,t){return n=t=="regex"?f(n):u(n),eval("value = "+n+";"),n}function r(n,t){for(var r=n.split("."),f={},e=f,i=0,u=r.length-1;i<=u;i++)r[i]&&(e=e[r[i]]=i==u?t:{});return f}return t=n.extend({context:document,clean:!0,selector:"object.metaobject"},t),n(t.selector,t.context).each(function(){var u={target:this.parentNode,cache:!1};n("> param[name=metaparam]",this).each(function(){n.extend(u,i(this.value))}),n("> param",this).not("[name=metaparam]").each(function(){var f=this.name,e=i(this.value,f),t,o,s;u.cache?(t=f.split("."),o=t.shift(),t=t.join("."),s=t?r(t,e):e,n(u.target).each(function(){var t=n.data(this,o);t?n.extend_deep(!0,t,s):n.data(this,o,s)})):n(u.target).each(function(){n.extend_deep(!0,this,r(f,e))})}),t.clean&&n(this).remove()})}}(jQuery),function(){function t(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var n,u,r,f,e,o,s;window.SKYSALES={},n=window.SKYSALES,n.Json=window.JSON,n.Resource={},n.Util={},n.Class={},n.Instance={},n.Instance.index=0,n.Instance.getNextIndex=function(){return n.Instance.index+=1},window.__doPostBack=function(n,t){var i=document,r=i.SkySales||i.forms.SkySales,u=i.getElementById("eventTarget"),f=i.getElementById("eventArgument"),e=i.getElementById("viewState");r.onsubmit&&r.onsubmit()===!1||(u.value=n||u.value,u.name="__EVENTTARGET",t!==null&&(f.value=t),f.name="__EVENTARGUMENT",e.name="__VIEWSTATE",r.submit())},n.Class.AdvancedBooking=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.creditCardTextBoxId="",t.creditCardNoLinkId="",t.creditCardOpenMessage="",t.creditCardCloseMessage="",t.creditCardTextBoxObj=null,t.creditCardNoLinkObj=null,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setVars=function(){i.setVars.call(this),this.creditCardTextBoxObj=this.getById(this.creditCardTextBoxId),this.creditCardNoLinkObj=this.getById(this.creditCardNoLinkId)},t.addEvents=function(){i.addEvents.call(this);t.creditCardNoLinkObj.on("click",function(n){n.stopPropagation(),n.preventDefault(),t.creditCardTextBoxObj.css("display")=="none"?$(this).text(t.creditCardCloseMessage):($(this).text(t.creditCardOpenMessage),t.creditCardTextBoxObj.val("")),t.creditCardTextBoxObj.slideToggle()})},t},n.Class.LocaleCurrency=function(){var s=new n.Class.SkySales,t=n.Util.extendObject(s),h=n.Util.getResource(),i=h.currencyCultureInfo,r=0,u="",e="",f="",o=!0;t.num=null,t.localeCurrency=null;var c=function(){var n=i.positivePattern;return o||(n=i.negativePattern),n},l=function(n){var f=i.groupSizes||[],y=i.groupSeparator,t=0,u=0,e=3,h=0,l="",o=[],c=[],s=[],v=null,a="";for(t>f.length&&(e=f[t]),h=e-1,r=Math.floor(n),l=r.toString(),o=l.split(""),c=o.reverse(),s=[],v=function(){var n=3;return t<=f.length-2?(t+=1,n=f[t]):n=e,h+=n,n},u=0;u<c.length;u+=1)u>h&&(e=v(),s.push(y)),s.push(c[u]);return o=s.reverse(),a=o.join("")},a=function(n){var t=n-r,u=t.toFixed(i.decimalDigits);return u.substring(2)},v=function(){var n=c()||"";return n.replace("n",f)},y=function(){t.currency=t.num.toString(),o=t.num>=0,t.num=Math.abs(t.num),u=l(t.num),e=a(t.num),f=u,0<i.decimalDigits&&(f+=i.decimalSeparator+e),t.integerPart=u,t.currency=v()};return t.num=null,t.localeCurrency=null,t.integerPart="",t.init=function(n){this.setSettingsByObject(n),null!==this.num&&y()},t},n.Class.Resource=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.carLocationInfo={},t.carLocationArray=[],t.carLocationHash={},t.activityLocationInfo={},t.activityLocationArray=[],t.activityLocationHash={},t.hotelLocationInfo={},t.hotelLocationArray=[],t.hotelLocationHash={},t.locationInfo={},t.countryInfo={},t.provinceStateInfo={},t.stationInfo={},t.macInfo={},t.marketInfo={},t.macHash={},t.stationHash={},t.marketHash={},t.sourceInfo={},t.clientHash={},t.dateCultureInfo={},t.currencyCultureInfo={},t.carrierInfo={},t.carrierHash={},t.datePickerInfo={},t.passengerInfo={},t.passengerHash={},t.titleInfo={},t.carInfo={},t.externalRateInfo={},t.currencyInfo={},t.currencyHash={},t.populateMacHash=function(){var n=0,i=[],u={},r=null,f=-1;if(t.macInfo&&t.macInfo.MacList)for(i=t.macInfo.MacList,f=i.length,n=0;n<f;n+=1)r=i[n],u[r.code]=r;t.macHash=u},t.populateStationList=function(){var n=0,i=[],r=null,u=-1;if(t.stationInfo&&t.stationInfo.StationList)for(i=t.stationInfo.StationList,u=i.length,n=0;n<u;n+=1)r=i[n],r.index=n;t.stationInfo.StationList=i},t.populateStationHash=function(){var n=0,i=[],u={},r=null,f=-1;if(t.stationInfo&&t.stationInfo.StationList)for(i=t.stationInfo.StationList,f=i.length,n=0;n<f;n+=1)r=i[n],u[r.code]=r;t.stationHash=u},t.populatePassengerHash=function(){var n=0,i=[],u={},r=null,f=-1;if(t.passengerInfo&&t.passengerInfo.PassengerList)for(i=t.passengerInfo.PassengerList,f=i.length,n=0;n<f;n+=1)r=i[n],u[r.PassengerNumber]=r;t.passengerHash=u},t.populateCarrierHash=function(){var n=0,i=[],r=0,f={},u=null,e=this.carrierInfo;if(e){if(i=e.carrierList,i&&(r=i.length,r>0))for(n=0;n<r;n+=1)u=i[n],f[u.code]=u;t.carrierHash=f}},t.populateMarketHash=function(){var n=0,i=[],r={},u={},e="",f={},o=t.stationHash;if(t.marketInfo&&t.marketInfo.MarketList){f=t.marketInfo.MarketList;for(e in f)if(f.hasOwnProperty(e)){for(i=f[e],n=i.length-1;n>=0;n-=1)r=i[n],u=o[r.code],u?(r.name=u.name,r.index=u.index,r.countryCode=u.countryCode):i.splice(n,1);i.sort(this.destinationSort)}t.marketHash=f}},t.destinationSort=function(n,t){var i=n.index,r=t.index;return i-r},t.populateClientHash=function(){var h=window.document.cookie,e=[],r=0,i="",o="",u="",f=-1,s=-1;if(h)for(e=document.cookie.split("; "),s=e.length,r=0;r<s;r+=1)i=e[r],f=i.indexOf("="),f>-1&&(o=i.substring(0,f),u=i.substring(f+1,i.length),o&&(u=n.Util.decodeUriComponent(u),t.clientHash[o]=u))},t.populateCurrencyHash=function(){var n=0,i=[],u={},r=null,f=-1;if(t.currencyInfo&&t.currencyInfo.CurrencyList)for(i=t.currencyInfo.CurrencyList,f=i.length,n=0;n<f;n+=1)r=i[n],u[r.code]=r;t.currencyHash=u},t.populateAOSLocationInfoArray=function(n,t){var r=0,u=[],o=0,i=null,f="",e=null;for(n=n||{},u=n.LocationList||[],o=u.length,r=0;r<o;r+=1)i=u[r],f=i.parent,f&&(e=t[f],e&&(i.name="    "+e.name+" - "+i.name,i.optionClass="subLocation"));return u},t.getAOSLocationHash=function(n){var t=0,r=null,i={},f=0,u=null,e=n||{};for(r=e.LocationList||[],f=r.length,t=0;t<f;t+=1)u=r[t],i[u.code]=u;return i=i||{}},t.setSettingsByObject=function(r){i.setSettingsByObject.call(this,r),n.datepicker=this.datePickerInfo,this.populateStationList(),this.populateStationHash(),this.populateCarrierHash(),this.populateMacHash(),this.populateMarketHash(),this.populateClientHash(),this.populatePassengerHash(),this.populateCurrencyHash(),t.carLocationHash=this.getAOSLocationHash(this.carLocationInfo),t.carLocationArray=this.populateAOSLocationInfoArray(this.carLocationInfo,this.carLocationHash),t.activityLocationHash=this.getAOSLocationHash(this.activityLocationInfo),t.activityLocationArray=this.populateAOSLocationInfoArray(this.activityLocationInfo,this.activityLocationHash),t.hotelLocationHash=this.getAOSLocationHash(this.hotelLocationInfo),t.hotelLocationArray=this.populateAOSLocationInfoArray(this.hotelLocationInfo,this.hotelLocationHash)},t},n.Class.PaxTypeControl=function(){var i=new n.Class.AosBase,t=n.Util.extendObject(i);return t.controlId="",t.control=null,t.paxTypeDropDownControl="",t.dropDownControlId="",t.paxInfoMaxQuantity="",t.paxInfoQuantity="",t.childAgesContainerId="",t.childAgesContainer=null,t.childAgesDropDownsContainerId="",t.childAgesDropDownsContainer=null,t.childAgesDropDownTemplateId="",t.childAgesDropDownTemplate=null,t.childLabelTemplateId="",t.childLabelTemplate=null,t.childDropDownBaseId="",t.clientId="",t.selectedAges="",t.minChildAge=1,t.maxChildAge=18,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.initializeDropDowns(0,this.paxInfoMaxQuantity,this.paxInfoQuantity,this.paxTypeDropDownControl),this.addEvents(),this.setTextValues(),this.dropDownControlId.indexOf("CHD")>-1&&this.initializeSelectedChildAgeDropDowns()},t.setVars=function(){i.setVars.call(this),t.control=this.getById(this.controlId),t.paxTypeDropDownControl=this.getById(this.dropDownControlId),this.dropDownControlId.indexOf("CHD")>-1&&(t.childAgesContainer=this.getById(this.childAgesContainerId),t.childAgesDropDownsContainer=this.getById(this.childAgesDropDownsContainerId),t.childAgesDropDownTemplate=this.getById(this.childAgesDropDownTemplateId),t.childLabelTemplate=this.getById(this.childLabelTemplateId))},t.initializeDropDowns=function(t,i,r,u){var f=0,e={},o=[];if(!(i<t)&&u){for(r+="",f=t;f<=i;f+=1)o[f]={code:f,name:f};e={input:u,objectArray:o,selectedItem:r,addZero:!1},n.Util.populate(e)}},t.setTextValuesHandler=function(){t.setTextValues()},t.setTextValues=function(){this.control.val(this.paxTypeDropDownControl.val())},t.setDropDownValuesHandler=function(){t.setDropDownValues()},t.setDropDownValues=function(){this.paxTypeDropDownControl.val(this.control.val())},t.addEvents=function(){i.addEvents.call(this),this.control.change(this.setDropDownValuesHandler),this.paxTypeDropDownControl.change(this.setTextValuesHandler),this.dropDownControlId.indexOf("CHD")>-1&&this.paxTypeDropDownControl.change(this.addChildDropDownListsHandler)},t.initializeSelectedChildAgeDropDowns=function(){for(var i=this.selectedAges.split(",")||[],u=i.length,t=0,f=this.childLabelTemplate.text(),r=null,e="",t=0;t<u;t+=1)i[t]>0&&i[t].toString().length>0&&(f+=this.getChildAgeHtml(t));for(u&&i[0]&&this.childAgesDropDownsContainer.html(f),t=0;t<u;t+=1)e=this.childDropDownBaseId+t,r=this.getById(e),r&&(this.initializeDropDowns(this.minChildAge,this.maxChildAge,i[t],r),n.Util.setRequiredAttribute(r),this.addChildDropDownEvents(r));this.updateChildAges()},t.addChildDropDownListsHandler=function(){var n=this.value;t.addChildDropDownLists(n)},t.addChildDropDownLists=function(t){var i=0,f=this.childLabelTemplate.text(),e="",r={},u="";for(t=t||0,t=parseInt(t,10),i=0;i<t;i+=1)f+=this.getChildAgeHtml(i);for(t?this.childAgesDropDownsContainer.html(f):this.childAgesDropDownsContainer.html(""),i=0;i<t;i+=1)e=this.childDropDownBaseId+i,r=this.getById(e)||{},u=r.val(),u||(u=""),this.initializeDropDowns(this.minChildAge,this.maxChildAge,u,r),n.Util.setRequiredAttribute(r),this.addChildDropDownEvents(r);this.childAgesContainer.val("")},t.getChildAgeHtml=function(t){var i="";return i=this.childAgesDropDownTemplate.text(),i=n.Util.replace(i,/\[childAgeDropDownLabel\]/,t),i=n.Util.replace(i,/\[childAgedropDownId\]/g,t),i=n.Util.replace(i,/\[childAgedropDownName\]/,t),i=n.Util.replace(i,/\[childIndex\]/,t+1),i=n.Util.replace(i,/\[clientId\]/g,this.clientId)},t.addChildDropDownEvents=function(n){n.change(this.updateChildAgesHandler)},t.updateChildAgesHandler=function(){t.updateChildAges()},t.updateChildAges=function(){var n=0,t=null,i="",r=[],u=0;for(r=$("[id^='"+this.childDropDownBaseId+"'] option:selected"),u=r.length,n=0;n<u;n+=1)t=r[n],i+=n===u-1?t.text:t.text+",";this.childAgesContainer.val(i)},t},n.Class.HotelSearch=function(){var r=new n.Class.AosSearch,t=n.Util.extendObject(r);t.rooms="",t.roomsDropDown="",t.roomsDropDownId="",t.roomCount=1,t.roomsId="",t.locationDropDownId="",t.locationDropDown=null,t.locationMegaDropDownIdArray=[],t.checkinDateIdArray=[],t.checkoutDateIdArray=[],t.marketDateArray=[];var f=[],e=[],u=[];return t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.populate(),this.addEvents(),this.setDropDownValues(),this.setDropDownLocationValues(),this.initLocationMegaDropDownIdArray(),this.initCheckinDateIdArray(),this.initCheckoutDateIdArray(),this.initHotelSearch()},t.initLocationMegaDropDownIdArray=function(){for(var t=0,r=null,i={},u=this.locationMegaDropDownIdArray||[],t=0;t<u.length;t+=1)r=u[t],i=new n.Class.HotelLocationMegaDropDownInput,i.init(r),e[f.length]=i},t.initCheckinDateIdArray=function(){for(var t=0,r=null,i={},f=this.checkinDateIdArray||[],t=0;t<f.length;t+=1)r=f[t],i=new n.Class.HotelMarketDate,i.init(r),u[u.length]=i},t.initCheckoutDateIdArray=function(){for(var t=0,r=null,i={},f=this.checkoutDateIdArray||[],t=0;t<f.length;t+=1)r=f[t],i=new n.Class.HotelMarketDate,i.init(r),u[u.length]=i},t.initHotelSearch=function(){$(".hotelDatepicker").find("img").css({float:"left",margin:"8px 0px 0px 5px"}),$(".hotelRoomContainer").find("select").css("position","absolute").selectmenu()},t.populate=function(){r.populate.call(this);var n=this.populateOptions(this.roomCount,1);this.addOptions(this.roomsDropDown[0],n)},t.setVars=function(){r.setVars.call(this);var i=n.Util.getResource();t.locationHash=i.hotelLocationHash||{},t.locationArray=i.hotelLocationArray||[],t.rooms=this.getById(this.roomsId),t.roomsDropDown=this.getById(this.roomsDropDownId),t.locationDropDown=this.getById(this.locationDropDownId)},t.populateOptions=function(n,t){t=t||0,n=n||10;for(var r=[],i=t,u,f=Option,i=t;i<=n;i+=1)u=new f(i,i),r.push(u);return r},t.setTextValuesHandler=function(){t.setTextValues()},t.setTextValues=function(){r.setTextValues.call(this),this.rooms.val(this.roomsDropDown.val())},t.setDropDownValuesHandler=function(){t.setDropDownValues()},t.setDropDownValues=function(){r.setDropDownValues.call(this),this.roomsDropDown.val(this.rooms.val())},t.setDropDownLocationValues=function(){for(i=0;i<t.locationArray.length;i+=1)optionNode="",optionNode='<option value="'+t.locationArray[i].code+'">'+t.locationArray[i].desc+"<\/option>",t.locationDropDown.append(optionNode)},t.addEvents=function(){r.addEvents.call(this),this.rooms.change(this.setDropDownValuesHandler),this.roomsDropDown.change(this.setTextValuesHandler)},t},n.Util.openWindow=function(n,t,i,r){window.open(n,t,"width="+r+", height="+i)},n.Class.TermsAndConditions=function(){var t=new n.Class.TermsAndConditionsBase;return n.Util.extendObject(t)},n.Util.setRoomSelection=function(n){var i=$(n).siblings("div#roomRadioFare").find(":radio"),r=$("div.hotelAvailabilityContainer").find('input[id*="HotelKey"]'),u=$("div.hotelAvailabilityContainer").find('input[id*="HotelRoomKey"]'),t=i.val().split("KeySeparator")||[];i.attr("checked","checked").trigger("change"),t.length>0&&r.val(t[0]),t.length>1&&u.val(t[1]),window.onbeforeunload=null,$("form#SkySales").attr("target","hotelPersonalizationsFrame")},n.Util.displayHotelConditions=function(){var r=n.Util.ValidateHotelPax(),i;r==!0&&($("#modal-4").hide(),$("#modal-5").show(),$(".hotelTerms").show(),i=function(){$(".hotelTerms .submitcontinue").tooltip({items:"input",position:{my:"center bottom-10",at:"center top",using:function(n,t){$(this).css(n),$("div").tooltip({tooltipClass:"custom-tooltip-styling"}),$("<div>").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}},content:function(){var t=$(this),n;if(t.is("input"))return n=$(this).siblings("span").find("div"),$(n).html()}})},i())},n.Util.initHotelInfo=function(n,t,i){var r="GetItemDescriptionAjax-resource.aspx?itemKey="+n;$("#"+t).load(r+' .HTLInner[groupid="'+i+'"] ul')},n.Util.displayRoomInfo=function(n){$("#"+n).hasClass("hidden")?$("#"+n).removeClass("hidden"):$("#"+n).addClass("hidden")},n.Class.Cancel=function(){var i=new n.Class.AosBase,t=n.Util.extendObject(i);return t.cancelLinkId="",t.cancelInputId="",t.cancelButtonName="",t.container=null,t.cancelLink="",t.cancelInput="",t.cancelCustomLink=$(".hotelUpdateLink"),t.policiesToggleViewParams=null,t.policiesToggleView=null,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setVars=function(){var r=this.getById(this.cancelLinkId),u=this.getById(this.cancelInputId),i=null;this.policiesToggleViewParams&&(i=new n.Class.ToggleView,i.init(this.policiesToggleViewParams),t.policiesToggleView=i),r&&(t.cancelLink=$(r)),u&&(t.cancelInput=$(u))},t.addEvents=function(){i.addEvents.call(this),t.cancelCustomLink.click(this.cancelDataCustom)},t.cancelDataCustom=function(){$(this).siblings("input").val("1"),window.__doPostBack(t.cancelButtonName)},t.cancelDataHandler=function(){t.cancel()},t.cancel=function(){this.cancelInput.val("1"),window.__doPostBack(this.cancelButtonName)},t},n.Class.AosAvailability=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.showText="",t.hideText="",t.imgUp="",t.imgDown="",t.aosKeyId="",t.aosKey="",t.aosItemId="",t.aosItem="",t.seperator="",t.aosArray=[],t.aosKeyId="",t.hiddenHotelInfo="",t.wifiHotelGroupListId="",t.wifiLinkIndicator="",t.wifiLinkIndicatorText="",t.noWifiLinkIndicatorText="",t.wifiIconImageSrc="",t.wifiIconImageId="",t.locationHotelGroupListId="",t.longitudeKeywordText="",t.latitudeKeywordText="",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.initAosArray()},t.setVars=function(){t.aosKey=this.getById(this.aosKeyId),t.aosItem=this.getById(this.aosItemId)},t.initAosArray=function(){for(var r=this.aosArray||[],e=r.length,u,t,f,i=0;i<e;i+=1)t=r[i],f={showText:this.showText,hideText:this.hideText,showHideImgUp:this.imgUp,showHideImgDown:this.imgDown,containerId:t.aosId,showHideTextEventId:t.textId,showHideImgEventId:t.imgId,itemArray:t.itemArray,aosAvailability:this},u=new n.Class.Aos,u.init(f),r[i]=u;this.initHotelInfoContent()},t.initHotelInfoContent=function(){var i=$(".hotelAvailabilityContainer").find(".desc");i.length>0&&i.each(function(){var i=$(this),c=$(".hotelAvailabilityContainer").find(".hotelInfoTabbed"),r=i.siblings("#hotelInfoTabbedClone"),e,o,u;i.html(n.Util.decodeUriComponent(i.html())),r.html(i.html()),i.html(i.find('.HTLInner[groupid="ProductText"]'));var s=r.find('.HTLInner[groupid="'+t.wifiHotelGroupListId+'"]'),h=i.parent().find(".hotelWifiIndicator"),f=r.find('.HTLInner[groupid="'+t.locationHotelGroupListId+'"]');s.length>0&&s.html().indexOf(t.wifiLinkIndicator)!=-1?h.append(t.wifiLinkIndicatorText+"<img id="+t.wifiIconImageId+" src="+t.wifiIconImageSrc+" />"):h.append(t.noWifiLinkIndicatorText),f.length>0&&f.html().indexOf(t.longitudeKeywordText)!=-1&&f.html().indexOf(t.latitudeKeywordText)!=-1&&(r.find('.HTLInner[groupid="'+t.locationHotelGroupListId+'"]').find("li").each(function(){return $(this).html().indexOf(t.longitudeKeywordText)!=-1?e=$.trim($(this).html().replace("Longitude:","")):$(this).html().indexOf(t.latitudeKeywordText)!=-1&&(o=$.trim($(this).html().replace("Latitude:",""))),e!=null&&o!=null?!1:void 0}),i.parent().find(".hotelLocationMap").attr("onclick","SKYSALES.Util.initDisplayDialogOpen(600, 800, '', 'map-container', ''); googleMapsApi.map($('#map-canvas')[0], "+o+", "+e+")")),u=0,r.find(".HTLInner").each(function(){if(t.hiddenHotelInfo.indexOf($(this).attr("groupid"))==-1){var n=i.parent().find(".hotelInfoTabbed");u++,n.find("ul#hotelInfoItems").append('<li><a href="#tabs-'+u.toString()+'">'+$(this).find("h3").html()+"<\/a><\/li>"),n.append('<div id="tabs-'+u.toString()+'"><p class="tabContent"><\/p><\/div>'),n.find("#tabs-"+u.toString()).find(".tabContent").html($(this).html())}})})},t.updateKeyValues=function(n){var r=n.input.val()||"",t=r.split(this.seperator)||[],i=t.length;i>0&&this.aosKey.val(t[0]),i>1&&this.aosItem.val(t[1])},t},n.Class.AosBase=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.addOptions=n.Class.AosBase.prototype.addOptions,t},n.Class.AosBase.prototype.addOptions=function(n,t){var i=0;if(n&&n.options)for(i=0;i<t.length;i+=1)n.options[n.options.length]=t[i]},n.Class.AosSearch=function(){var r=new n.Class.AosBase,t=n.Util.extendObject(r),i=n.Util.getResource();return t.availabilityRequest={},t.locationArray=[],t.locationHash={},t.location=null,t.locationId="",t.locationDropDownId="",t.locationDropDown=null,t.subLocationId="",t.subLocation=null,t.sourceCodeInfo=i.sourceInfo,t.sourceCodeId="",t.sourceCodeDropDownId="",t.startDateId="",t.startDate="",t.startDayId="",t.startDay="",t.startMonthYearId="",t.startMonthYear=null,t.startMonthCount=1,t.endDateId="",t.endDate=null,t.endDayId="",t.endDay=null,t.endMonthYearId="",t.endMonthYear=null,t.endMonthCount=1,t.dateDelimiter="-",t.sourceCodeArray=[],t.sourceCode="",t.sourceCodeDropDown="",t.sortBy=null,t.sortByDropDown=null,t.sortByDropDownId="",t.sortById="",t.addEvents=function(){this.startDate.change(this.setDropDownValuesHandler),this.endDate.change(this.setDropDownValuesHandler),this.location.change(this.setDropDownValuesHandler),this.sourceCode.change(this.setDropDownValuesHandler),this.sortBy.change(this.setDropDownValuesHandler),this.subLocation.change(this.setLocationHandler)},t.setLocationHandler=function(){t.setLocation()},t.setLocation=function(){var n=this.subLocation.val();this.location.val(n)},t.getSubLocationArray=function(n){var r=[],f=this.locationArray||[],t=null,i=0,e=f.length,u="",o=this.locationHash;if(n&&(t=o[n],t))if(u=t.parent||"",u)for(t=o[u],r.push(t),i=0;i<e;i+=1)t=f[i],u===t.parent&&r.push(t);else for(r.push(t),i=0;i<e;i+=1)t=f[i],u=t.parent||"",u===n&&r.push(t);return r.length===0&&(r=f),r},t.populate=function(){var c=this.locationArray||[],e=this.location||{},l=e.val(),a=this.getSubLocationArray(l),o="",t,s,u,i=0,h="",r="",f=[];for(t={input:e,objectArray:c,showCode:!1},n.Util.populate(t),t={input:this.subLocation,objectArray:a,showCode:!1},n.Util.populate(t),o=e.val(),this.subLocation.val(o),f=[],i=1;i<32;i+=1)h=i,r=i,r<10&&(r="0"+r),f[i]={code:r,name:h};t={input:this.startDay,objectArray:f},n.Util.populate(t),t={input:this.endDay,objectArray:f},n.Util.populate(t),u=this.getMonthYearOptions(this.startMonthCount),this.addOptions(this.startMonthYear[0],u),u=this.getMonthYearOptions(this.endMonthCount),this.addOptions(this.endMonthYear[0],u),s={sourceCode:this.sourceCodeDropDown,sortBy:this.sortByDropDown},this.populateFromAvailabilityRequest(s)},t.populateFromAvailabilityRequest=function(t){t=t||{};var o=this.availabilityRequest||{},u,f,r,e,i,s=n.Util.populate;for(i in t)t.hasOwnProperty(i)&&(e=t[i],f=o[i]||{},r=f.options,r&&(u={input:e,objectArray:r},s(u)))},t.getMonthYearOptions=function(n){n=n||12,n=parseInt(n,10);var o=[],r=new Date,l=this.dateDelimiter,f=0,s,h,e,u,t,c,a=Option,v=i.dateCultureInfo.monthNames||[];for(r.setDate(1),f=0;f<n;f+=1)e=r.getFullYear(),u=r.getMonth(),t=u+1,t<10&&(t="0"+t),s=e+l+t,h=v[u]+" "+e,c=new a(h,s),o.push(c),r.setMonth(u+1);return o},t.setTextValuesHandler=function(){t.setTextValues()},t.setTextValues=function(){var t,i,r,u,f;r=this.startMonthYear.val(),u=this.startDay.val(),f=r+this.dateDelimiter+u,t=n.Util.parseIsoDate(f),t&&(t=n.Util.dateToIsoString(t),this.startDate.val(t)),r=this.endMonthYear.val(),u=this.endDay.val(),f=r+this.dateDelimiter+u,i=n.Util.parseIsoDate(f),i&&(i=n.Util.dateToIsoString(i),this.endDate.val(i)),this.location.val(this.locationDropDown.val()),this.sourceCode.val(this.sourceCodeDropDown.val()),this.sortBy.val(this.sortByDropDown.val())},t.setDropDownValuesHandler=function(){t.setDropDownValues()},t.setDropDownValues=function(){var r,u,f,i,e,t,o,s,h=this.dateDelimiter;s=this.startDate.val(),r=n.Util.parseIsoDate(s),r&&(f=r.getDate(),i=f,i<10&&(i="0"+i),e=r.getMonth(),t=e,t+=1,t<10&&(t="0"+t),o=r.getFullYear(),this.startDay.val(i),this.startMonthYear.val(o+h+t)),s=this.endDate.val(),u=n.Util.parseIsoDate(s),u&&(f=u.getDate(),i=f,i<10&&(i="0"+i),e=u.getMonth(),t=e,t+=1,t<10&&(t="0"+t),o=u.getFullYear(),this.endDay.val(i),this.endMonthYear.val(o+h+t)),this.locationDropDown.val(this.location.val()),this.sourceCodeDropDown.val(this.sourceCode.val()),this.sortByDropDown.val(this.sortBy.val())},t.setVars=function(){t.location=this.getById(this.locationId),t.locationDropDown=this.getById(this.locationDropDownId),t.subLocation=this.getById(this.subLocationId),t.sourceCodeArray=this.sourceCodeInfo.SourceList||[],t.sourceCode=this.getById(this.sourceCodeId),t.sourceCodeDropDown=this.getById(this.sourceCodeDropDownId),t.startDate=this.getById(this.startDateId),t.startDay=this.getById(this.startDayId),t.startMonthYear=this.getById(this.startMonthYearId),t.endDate=this.getById(this.endDateId),t.endDay=this.getById(this.endDayId),t.endMonthYear=this.getById(this.endMonthYearId),t.sortBy=this.getById(this.sortById),t.sortByDropDown=this.getById(this.sortByDropDownId)},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.populate(),this.addEvents(),this.setDropDownValues()},t},n.Class.Aos=function(){var f=new n.Class.AosBase,t=n.Util.extendObject(f),u=null,i="",r="";return t.showText="",t.hideText="",t.showHideTextEventId="",t.showHideImgEventId="",t.showHideImgUp="",t.showHideImgDown="",t.aosKey="",t.itemArray=[],t.aosAvailability=null,t.showHandler=function(){t.show()},t.hideHandler=function(){t.hide()},t.show=function(){u.show(),r.html(this.hideText),i.attr("src",this.showHideImgUp)},t.hide=function(){u.hide(),r.html(this.showText),i.attr("src",this.showHideImgDown)},t.addEvents=function(){i.attr("src",this.showHideImgDown),r.html(this.showText),u.hide(),r.toggle(this.showHandler,this.hideHandler),i.toggle(this.showHandler,this.hideHandler)},t.setVars=function(){f.setVars.call(this),u=this.getById(this.containerId),i=this.getById(this.showHideImgEventId),r=this.getById(this.showHideTextEventId)},t.initItemArray=function(){for(var i=this.itemArray||[],e=i.length,r,u,f,t=0;t<e;t+=1)u=i[t],f={aosKey:this.aosKey,itemKeyId:u.itemKeyId,inputId:u.inputId,aos:this},r=new n.Class.AosItem,r.init(f),i[t]=r},t.updateKeyValues=function(n){this.aosAvailability.updateKeyValues(n)},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.initItemArray(),this.addEvents()},t},n.Class.AosItem=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.aosKey="",t.aos=null,t.inputId="",t.input=null,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setVars=function(){t.input=this.getById(this.inputId)},t.addEvents=function(){this.input.change(this.updateKeyValuesHandler)},t.updateKeyValuesHandler=function(){t.updateKeyValues()},t.updateKeyValues=function(){this.aos.updateKeyValues(this)},t},n.Class.TermsAndConditionsBase=function(){var i=new n.Class.AosBase,t=n.Util.extendObject(i),r={},u="$";return t.showHideId="",t.showHide=null,t.inputId="",t.input=null,t.url="",t.clientName="",t.setVars=function(){i.setVars.call(this),t.showHide=this.getById(t.showHideId),t.input=this.getById(t.inputId)},t.sendRequest=function(){$.post(t.url,r,t.updateDom)},t.updateDom=function(n){t.container&&(t.container.html(n),t.show("slow"))},t.showTermsAndConditions=function(){var n=t.input.attr("name");n=t.clientName+u+n,r[n]=1,r[t.clientName+u+"AjaxControlPrefix"]=t.clientName,r.__EVENTTARGET=t.clientName+u+"OnTermsAndConditions",t.sendRequest()},t.addEvents=function(){i.addEvents.call(this),t.showHide.click(t.showTermsAndConditions)},t.init=function(n){i.init.call(this,n),t.addEvents()},t},n.Class.ItemDescriptions=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.itemDescriptionsArray=[],t.addLongDescriptions=function(t){var i=new n.Class.ToggleView;i.init(t)},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.initItemDescriptionsArray()},t.initItemDescriptionsArray=function(){for(var t=0,i=this.itemDescriptionsArray||[],u=i.length,r=null,t=0;t<u;t+=1)r=new n.Class.ItemDescription,r.init(i[t]),i[t]=r},t},n.Class.ItemDescription=function(){var i=new n.Class.ToggleView,t=n.Util.extendObject(i);return t.itemId="",t.contentType="",t.detailsAvailable=!1,t.longDescription="",t.noDescriptionAvailableMessage="",t.messageDivId="",t.messageDiv=null,t.itemKey="",t.getItemDescriptionUri="GetItemDescriptionAjax-resource.aspx",t.getItemDetailsUri="GetItemDetails.aspx",t.ajaxParams="",t.addressId="",t.addressDom=null,t.infoNeeded=!1,t.ratingCode="",t.thumbFilename="",t.itemName="",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setVars=function(){i.setVars.call(this),t.messageDiv=this.getById(this.messageDivId),t.ajaxParams={itemKey:this.itemKey},t.longDescription=n.Util.decodeUriComponent(t.longDescription),t.addressDom=this.getById(this.addressId)},t.updateShowHandler=function(){t.updateShow()},t.updateShow=function(){this.sendItemDescriptionRequest()},t.sendItemDescriptionRequest=function(){window.open(this.getItemDetailsUri+"?itemId="+this.itemId+"&itemKey="+this.itemKey+"&addressId="+this.addressId+"&infoNeeded="+this.infoNeeded+"&ratingCode="+this.ratingCode+"&thumbFilename="+this.thumbFilename+"&itemName="+this.itemName,"mywindow","status=1,resizable=1,scrollbars=1,location=1,width=750,height=600")},t.updateAddressHandler=function(n){t.updateAddress(n)},t.updateAddress=function(n){this.addressDom.html(n)},t.updateElement=function(n){n.length>0?this.messageDiv.html(n):this.messageDiv.html(t.noDescriptionAvailableMessage)},t.getItemDescriptionHandler=function(r){r.length>0&&(r=n.Util.decodeUriComponent(r),t.longDescription=r),t.updateElement(r),i.updateShow.call(t)},t},n.Class.ItemSummary=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.itemId="",t.item=null,t.summaryId="",t.summary=null,t.addressId_openerpage="",t.addressId_samepage="",t.address=null,t.addressValue="",t.iframeId="",t.iframe=null,t.iframeSrc="",t.infoNeeded="false",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.draw()},t.setVars=function(){i.setVars.call(this),this.summary=this.getById(this.summaryId),this.iframe=this.getById(this.iframeId),this.infoNeeded=="false"?(this.item=window.opener.$("#"+this.itemId),this.address=window.opener.$("#"+this.addressId_openerpage)):this.address=this.getById(this.addressId_samepage)},t.draw=function(){var n=null,t="",i="",r=this.address,u=this.addressValue;r.html(u),this.infoNeeded=="false"&&(n=this.item.clone(),n.find("p.openCloseLink").remove(),n.find("div.itemDesc > h4").remove(),n.find("div#additionalDetails").remove(),i=n.find("div.itemDesc > h3").text(),n.find("div.itemDesc > h3").replaceWith("<h3>"+i+"<\/h3>"),n.find("div.itemDesc").attr("id","popupDesc"),t=n.html(),this.summary.html(t)),this.iframe.html("<iframe src="+this.iframeSrc+' width="750" height="400">a<\/iframe>')},t},n.Class.HotelGuestNames=function(){var r=new n.Class.SkySales,t=n.Util.extendObject(r);return t.guestFirstNameClass="",t.guestLastNameClass="",t.hotelGuestFirstNameClass="",t.hotelGuestLastNameClass="",t.hotelGuestFirstNamePlaceholder="",t.hotelGuestLastNamePlaceholder="",t.passengerCount="",t.init=function(n){this.setSettingsByObject(n),this.populateHotelGuestsNames()},t.populateHotelGuestsNames=function(){var n=window.parent.document,r,u;if(n!=null){var f=n.querySelectorAll(t.guestFirstNameClass),e=n.querySelectorAll(t.guestLastNameClass),o=$(t.hotelGuestFirstNameClass),s=$(t.hotelGuestLastNameClass);for(i=0;i<t.passengerCount;i++)o[i]!=null&&s[i]!=null&&(r=$(f[i]).val()==t.hotelGuestFirstNamePlaceholder?"":$(f[i]).val(),u=$(e[i]).val()==t.hotelGuestLastNamePlaceholder?"":$(e[i]).val(),$(o[i]).val(r),$(s[i]).val(u))}},t},n.Util.createObjectArray=[],n.Util.createObject=function(t,i,r,u){u=u||"ready";var f=n.Util.createObjectArray;f[f.length]={objNameBase:t,objType:i,json:r,createEvent:u}},n.Util.initObjects=function(t){t=t||"ready";for(var r=0,e=n.Util.createObjectArray,u="",f="",o=null,i=null,r=0;r<e.length;r+=1)i=e[r],i.createEvent===t&&(u=i.objNameBase+n.Instance.getNextIndex(),f=i.objType,o=i.json||{},n.Class[f]&&(n.Instance[u]=new n.Class[f],n.Instance[u].init(o)))},n.Util.decodeUriComponent=function(n){return n=n||"",window.decodeURIComponent&&(n=window.decodeURIComponent(n)),n=n.replace(/\+/g," ")},n.Util.encodeUriComponent=function(n){return n=n||"",window.encodeURIComponent&&(n=window.encodeURIComponent(n)),n},n.Util.getTime=function(n,t,i){var r="",u=0;return n=Number(n),u=n,t=Number(t),i=Number(i),isNaN(n)===!1&&(n>12?n=n-12:n===0?n=12:n.toString().length===1&&(n="0"+n),r=n,isNaN(t)===!1&&(t.toString().length===1&&(t="0"+t),r=r+":"+t,isNaN(i)===!1&&(i.toString().length===1&&(i="0"+i),r=r+":"+i)),r=u>11&&u<24?r+" PM":r+" AM"),r},n.Util.getResource=function(){return n.Resource},n.Util.getAttributeValue=function(n,t){var i=t+".validation";return n.data(i)},n.Util.setAttribute=function(n,t,i){var r=t+".validation";n.data(r,i)},n.Util.ApplyToAllCheckBox=function(n){var t=$("table#bgTable_"+n.data.journeyindex),i=n.data.checkControl.filter(":checked");t.hasClass("allBaggageFirstCheckbox")&&(i=n.data.checkControl.filter(":visible")),i.length>0||$(t).hasClass("allBaggageFirstCheckbox")?(parentDiv=i.closest("div[id^=BAGPROTECT]").attr("id"),arrID=parentDiv.split("_"),t.find(".baggageINS").filter(":gt(0)").find("div[id$="+arrID[2]+"]").find("input:checkbox").attr("checked",!0).removeClass("unchecked").trigger("change"),t.removeClass("allBaggageFirstCheckbox")):(t.find(".baggageINS").filter(":gt(0)").find("input:checkbox").attr("checked",!1).trigger("change"),t.hasClass("allBaggageChecked")||t.find(".baggageINS").filter(":gt(0)").find("input:checkbox").addClass("unchecked"))},n.Util.ApplyToAllCheckBoxLite=function(n,t){var i=$("table#bgTable_"+n),r=t.filter(":checked");i.hasClass("allBaggageFirstCheckbox")&&(r=t.filter(":visible")),r.length>0||$(i).hasClass("allBaggageFirstCheckbox")?(parentDiv=r.closest("div[id^=BAGPROTECT]").attr("id"),arrID=parentDiv.split("_"),i.find(".baggageINS").filter(":gt(0)").find("div[id$="+arrID[2]+"]").find("input:checkbox").attr("checked",!0).removeClass("unchecked").trigger("change"),i.removeClass("allBaggageFirstCheckbox")):(i.find(".baggageINS").filter(":gt(0)").find("input:checkbox").attr("checked",!1).trigger("change"),i.hasClass("allBaggageChecked")||i.find(".baggageINS").filter(":gt(0)").find("input:checkbox").addClass("unchecked"))},n.Util.ApplyToAllSelect=function(n){var t=$("table#bgTable_"+n.data.journeyindex),r=t.find("td.bgControl#hasTR").length;if(r>0){var i=n.data.selectControl[0].id,u=i.substr(i.length-4),f=u.substr(0,3);f=="SEG"?t.find("select[id*='SEG']").filter(":gt(0)").val(n.data.selectControl.val()).change():t.find("select:not([id*='SEG'])").filter(":gt(0)").val(n.data.selectControl.val()).change()}else t.find("select").filter(":gt(0)").val(n.data.selectControl.val()).change()},n.Util.ValidateOnBlur=function(t){for(validateControl=function(t){validate=n.Validate(null,"","",null),validate.isExemptFromValidation(t)||(validate.validateSingleElement(t),validate.outputErrors())},controlsToValidate=$(t).find(":input").get(),i=0;i<controlsToValidate.length;i++)$(controlsToValidate[i]).blur(function(){validateControl(this)})},n.Util.ExemptHotelValidation=function(){return $("[id$='CheckoutMonthYear']").length>0&&(n.Util.exemptFromValidation($("[id$='CheckoutMonthYear']")),validate=n.Validate(null,"","",null),validate.validateSingleElement($("[id$='CheckoutMonthYear']")[0])),!0},n.Util.IncludeHotelValidation=function(){return n.Util.includeInValidation($("[id$='CheckoutMonthYear']")),!0},n.Util.ApplyToAllSelectSF=function(n){var t=$("table#sfTable_"+n.data.journeyindex);t.find("select").filter(":gt(0)").val(n.data.selectControl.val()).change()},n.Util.ApplyToAllSelectLite=function(n,t){var i=$("table#bgTable_"+n);i.find("select").filter(":gt(0)").val(t.val()).selectmenu().trigger("change")},n.Util.removeAttribute=function(n,t){var i=t+".validation";$(n).removeData(i)},n.Util.setRequiredAttribute=function(t,i){var u="required",f="requirederror",e="true",r=n.Util.setAttribute;r(t,u,e),i&&r(t,f,i),n.Util.formatInputLabel(t)},n.Util.exemptFromValidation=function(t){var i="validate",r=n.Util.setAttribute;r($(t),i,"false")},n.Util.includeInValidation=function(t){var i="validate",r=n.Util.setAttribute;r($(t),i,"true")},n.Util.removeRequiredAttribute=function(t){var r="required",u="requiredError",i=n.Util.removeAttribute;i(t,r),i(t,u),n.Util.formatInputLabel(t)},n.Util.addCommas=function(n){var i,r,t;for(n+="",x=n.split("."),x1=x[0],x2=x.length>1?x[1]+"00":"0000",i=x2.substr(0,2),r=x2.substr(2,x2.length),x2=String(Math.round(i+"."+r)),x2=x2.length>1?"."+x2:".0"+x2,t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},n.Util.removeComma=function(n){return n.replace(/,/g,"")},n.Util.showDepartFareRule=function(){var t=document.getElementById("arrowDepart"),u=$(".specific-rule-native"),n,i,r;t.style.background=u.is(":visible")?"url(images/CebuAirRevamp/blue-arrow-right.png) no-repeat right":"url(images/CebuAirRevamp/blue-arrow-down.png) no-repeat right",n=$(".specific-rule-native"),n&&(n.is(":visible")?(n.hide(),$("#fareRulesNativeNote").hide()):(i=$("#labelColapsibleDepart"),r=$(".specific-rule-native.depart"),$(i).after(r.show()),$("#fareRulesNativeNote").show()))},n.Util.showArriveFareRule=function(){var t=document.getElementById("arrowArrive"),r=$(".specific-rule-native-arrive");if(t.style.background=r.is(":visible")?"url(images/CebuAirRevamp/blue-arrow-right.png) no-repeat right":"url(images/CebuAirRevamp/blue-arrow-down.png) no-repeat right",divNative=$(".specific-rule-native-arrive"),divNative.length>0)divNative.is(":visible")?divNative.hide():divNative.show();else{var i=$("div.specific-rule-native.arrive"),n=i?$(i).clone():"",u=$(".specific-rule-arrive.foreign");n&&(n.removeClass("specific-rule-native"),n.removeClass("arrive"),n.addClass("specific-rule-native-arrive"),u.append(n.show()))}},n.Util.resizeFareRulesContainer=function(n,t){$(window).load(function(){var i,r,u,f;$("."+n+".rule-set").length>1&&(i=$("."+n+" .rule-set:first"),r=$("."+n+" .rule-set:last"),i.css("height")>r.css("height")?r.css("height",i.css("height")):i.css("height",r.css("height")),u=$("."+t+" .rule-set:first"),f=$("."+t+" .rule-set:last"),u.css("height")>f.css("height")?f.css("height",u.css("height")):u.css("height",f.css("height")))})},n.Util.hideShowAddons=function(){var i=function(){var t=$("#priceINS"),i=$("#pricePEB"),r=$("#pricePEBINS"),u=$("#priceMEAL"),f=$("#priceSEF"),e=$("#priceSMS"),o=$("#priceNameChange"),s=$("#airbTotal"),h=$("#ckitTotal"),c=$("#priceSEAT"),l=$("#priceNBAG"),a=$("#priceUMNR"),b=$("#priceWAF"),k=$("#priceWWF"),v=$("#priceCEBCONN"),y=$("#priceCEBEX"),p=$("#priceGETGO"),d=$("#totalSeatFeeTax"),w=parseInt(n($(t)))+parseInt(n($(i)))+parseInt(n($(r)))+parseInt(n($(u)))+parseInt(n($(f)))+parseInt(n($(e)))+parseInt(n($(o)))+parseInt(n($(s)))+parseInt(n($(h)))+parseInt(n($(c)))+parseInt(n($(l)))+parseInt(n($(a)))+parseInt(n($(v)))+parseInt(n($(y)))+parseInt(n($(p)));return w===0?!1:!0},t=function(t){if(parseInt(n($(t)))===0){var r=$(t).parent();$(r).hide(),$(r).parent().children().eq(r.index()+1).hide(),$(r).parent().children().eq(r.index()+2).hide()}$(t).change(function(){var t=$(this).parent(),r=$(t).parent(),u=r.index(),f=$(this).attr("id");f==="priceWWF"?parseInt(n($(this)))===0?$(this).parent().hide():$(this).parent().show():($(r).show(),$(r).parent().children().eq(u-1).show(),$(this).text()==="0.00"?($(t).hide(),$(t).parent().children().eq(t.index()+1).hide(),$(t).parent().children().eq(t.index()+2).hide()):($(t).show(),$(t).parent().children().eq(t.index()+1).show(),$(t).parent().children().eq(t.index()+2).show()),i()||($(r).hide(),$(r).parent().children().eq(u-1).hide()))})},n=function(n){return n.text().replace(/,/g,"")};$(window).load(function(){var r=$("#priceINS"),f=$("#pricePEB"),e=$("#pricePEBINS"),o=$("#priceMEAL"),s=$("#priceSEF"),h=$("#priceSMS"),c=$("#priceNameChange"),l=$("#airbTotal"),a=$("#ckitTotal"),v=$("#priceSEAT"),y=$("#priceNBAG"),p=$("#priceUMNR"),nt=$("#priceWAF"),w=$("#priceWWF"),b=$("#priceCEBCONN"),u=$("#totalSeatFeeTax"),k=$("#priceGETGO");if(t(r),t(f),t(e),t(o),t(s),t(h),t(c),t(l),t(a),t(v),t(y),t(p),t(w),t(b),t(priceCEBEX),t(k),!i()){var d=$(r).parent(),n=$(d).parent(),g=n.index();$(n).hide(),$(n).parent().children().eq(g-1).hide()}$(u).html()=="0.00"&&$(u).parent().hide()})},n.Util.popUpBaggageReminder=function(t,i,r,u){$(window).load(function(){var f=$("#"+t).find("select");$(f).each(function(){$(this).change(function(){var t=$("option:selected",this).attr("value").split("_");t[0]===i&&(n.Util.initDisplayDialogOpen(180,400,r,u,"OK"),$("#dimmerDialogContent").css("height","auto"),$("#dimmerDialogContentBody").css("height","auto"))})})})},n.Util.showErrorDiv=function(){$(".errorSectionHeader").length!=0?$("#errorDiv").show():$("#errorDiv").hide()},n.Util.changeLocale=function(n){location.href="Search.aspx?culture="+n},n.Util.sefAllowanceInit=function(){var n=function(){$('ul[id^="ControlGroupGuestView_SportsEquipmentGuestView"]').attr("style","width: 380px; height: auto;"),$('ul[id^="ControlGroupFlightChangeAddOnsView_SportsEquipmentFlightChangeAddOnsView"]').attr("style","width: 380px; height: auto;")},t=function(){$(this).find(".sfControl").each(function(){$(this).find("a").attr("style","width:380px;")})};$(document).ready(n),$(document).ready(t),$(".sefPerGuest").click(n),$(window).load(function(){$("#sfTable_1 .sfControl").length<=0&&$("#sfOldTotalView").css("margin-left","425px")})},n.Util.hideIfZeroValue=function(){hideNodeIfNoValue=function(n){parseInt(removeComma($(n)))===0&&($(n).hide(),$(n).parent().children().eq($(n).index()-1).hide())},removeComma=function(n){return n.text().replace(/,/g,"")},$(window).load(function(){hideNodeIfNoValue($("#totalSeatFeeTax"))})},n.Util.paymentInit=function(n){var t=function(){if($("#"+n+"_ExternalAccount_PQ_AMOUNT_DropDownList24Hours").val()!=undefined){var i=$("#"+n+"_ExternalAccount_PQ_AMOUNT_DropDownList24Hours").val().split("-")[0];$("#24Partners-"+i).show(),$("#paymentCenter24-"+i).show()}};$(document).ready(function(){var n=[$("#BillAddressSTATEPROVVI a span").first(),$("#BillAddressSTATEPROVMC a span").first()],i=[$("#BillAddressSTATEPROVVI select"),$("#BillAddressSTATEPROVMC select")];$.each(i,function(t){$(this).val()===""&&n[t].css("color","#B8B6B6"),$(this).change(function(){$(this).val()===""?n[t].css("color","#B8B6B6"):n[t].css("color","#555555")})}),t()}),$("#"+n+"_ExternalAccount_PQ_AMOUNT_DropDownList24Hours").change(function(){$("[id^=24Partners]").hide(),$("[id^=paymentCenter24]").hide(),t()})},n.Util.placeholderOnFocus=function(n){var t=$(n).siblings("label.placeholder");t&&($.trim($(n).val())!=""?t.hide():t.show())},n.Util.openWindow=function(n){var t=screen.height*.38,i=screen.width*.5,r=screen.height*.62/2,u=screen.width*.5/2;window.open(n,"_blank","toolbar=0, scrollbars=0,    resizable=yes, top="+r+",left="+u+",width="+i+", height="+t+"'")},n.Util.hideAmountDue=function(){$(window).load(function(){for(var t=["FinalizeCancel","FlightsCancel","Refund",],n=0;n<t.length;n++)$(location).attr("href").indexOf(t[n])>-1&&($(".AmountDueDiv").hide(),$(".summaryOverallDueTotal").hide())})},n.Util.extendObject=function(n){var t=function(){};return t.prototype=n,new t},n.Util.supplant=function(n,t){var i=/\[(\w+)\]/g;return n&&n.replace&&t?n.replace(i,function(n,i){var r=null;return t.hasOwnProperty(i)&&(r=t[i]),r===null?r="":r===undefined&&(r=i),r}):""},n.Util.parseIsoDate=function(n){var r=/^(\d{4})-([0-3]\d)-(\d{2})/,i=null,t=r.exec(n);return t&&(i=new Date(+t[1],t[2]-1,+t[3])),i},n.Util.dateToIsoString=function(n){var u=n.getFullYear(),t=(n.getMonth()+1).toString(),i=n.getDate().toString(),r="";return t.length===1&&(t="0"+t),i.length===1&&(i="0"+i),r=u+"-"+t+"-"+i},n.Util.parseIsoDate=function(n){var r=/^(\d{4})-(\d{2})-(\d{2})/,i=null,t=r.exec(n);return t&&(i=new Date(+t[1],t[2]-1,+t[3])),i},n.Util.dateToIsoString=function(n){var u=n.getFullYear(),t=(n.getMonth()+1).toString(),i=n.getDate().toString(),r="";return t.length===1&&(t="0"+t),i.length===1&&(i="0"+i),r=u+"-"+t+"-"+i},n.Util.populateSelect=function(n){var w;n=n||{};var t=n.selectedItem||null,l=n.objectArray||null,f=n.selectBox||null,b=n.showCode||!1,k=n.clearOptions||!1,a=!0,s="",r="",e=null,u=null,h=0,v=0,i="",y=Option,d=n.codeName||"code",g=n.nameProperty||"name",o=null,c=!1,p="";if(n.addZero!=null&&(a=n.addZero),f&&f.length>0&&(e=f[0],e&&e.options)){for(o=e.options,k?o.length=0:(e.originalOptionLength||(e.originalOptionLength=e.options.length),o.length=e.originalOptionLength),v=l.length,$.browser.msie&&$.browser.version<7&&(c=!0),h=0;h<v;h+=1)u=l[h]||{},s=u[g]||"",r=u[d],r||r===0||(r=""),b&&(s+=" ("+r+")"),c?(i=new y(s,r,n.selectedItem==r,!1),u.optionClass&&$(i).addClass(u.optionClass),o[o.length]=i):(i+='<option value="'+r+'"',u.optionClass&&(i+=' class"="'+u.optionClass+'"'),selected=n.selectedItem==r?'selected="selected"':"",i+=" "+selected,i+=">"+s+"<\/option>");c||f.append(i),t!==null&&(t=String(t),w=new RegExp(/^[1-9]$/),t.match(w)&&a&&(t="0"+t),f.val(t),p=f.val(),p!==t&&(i=new y(t,t,!1,!1),u.optionClass&&$(i).addClass(u.optionClass),f.append(i),f.val(t)))}},n.Util.populate=function(t){t=t||{};var i=t.input||$([]);i&&i[0]&&i[0].options?(t.selectBox=i,n.Util.populateSelect(t)):i&&(t.options=t.objectArray||[],n.Class.DropDown.getDropDown(t)),!t.dataExempt&&i.selectmenu&&i.selectmenu()},n.Util.cloneArray=function(n){return n.concat()},n.Util.convertToLocaleCurrency=function(t){var r={num:t},i=new n.Class.LocaleCurrency;return i.init(r),i.currency},n.Util.convertToLocaleInteger=function(t){var r={num:t},i=new n.Class.LocaleCurrency;return i.init(r),i.integerPart},n.Util.formatAmount=function(n,t,i,r){var u="",f=t==="0"||t==="";return n===""||f?n!==""&&f?u=n:n!==""||f||(u=t+" "+i):u=t+" "+i+" "+r+" "+n,u},n.Util.replace=function(n,t,i){var u="",r=typeof t;return i=String(i),r=r.toLowerCase(),n=String(n),r==="object"&&(i=i.replace(/\$/g,"$$$$")),u=n.replace(t,i)},n.Util.hideOrDisplayRule=function(n,t,i){var r="div.rule-set",u="hidden";$(n).find(r).find(t).addClass(u),$(n).find(r).find(i).removeClass(u)},n.Util.initDisplayDialog=function(){var n={appendTo:$("#dimmerDialogPlaceHolder"),autoOpen:!1,closeOnEscape:!1,closeText:"",dialogClass:"no-close",draggable:!1,height:500,maxHeight:600,width:700,maxWidth:600,modal:!0,resizable:!1,show:null};$("#dimmerCloseLink").click(function(){var t=$("#deck");return t!==undefined&&t.show(),$("#dimmerDialogContent").dialog("close"),!1}),$("#dimmerDialogContent").dialog(n)},n.Util.initDisplayDialogOpen=function(t,i,r,u,f,e){var o,h,s;$("#dimmerDialogPlaceHolder").show(),$("#dimmerDialogContent").show(),u=="genTermsContainer"&&$("#dimmerDialogContentBody").addClass("genTerms"),o="OK",$("#btnDialogOK").text()!=""&&(o=$("#btnDialogOK").text()),f==="OK"?($("#dimmerDialogContent").dialog({width:i,height:t,buttons:{OK:function(){$(this).dialog("close")}}}),$(".ui-dialog-buttonpane .ui-button-text:contains(OK)").text(o),$(".ui-dialog-buttonpane").show()):($("#dimmerDialogContent").dialog({width:i,height:t}),$("#dimmerDialogContent .ui-dialog-buttonpane").hide()),$("#dimmerDialogContentBody").css({height:t-80+"px"}),$("#dimmerHeaderLabel").html(r),s=$("#"+u).html(),$("#dimmerDialogContentBody").html(s),$("#dimmerDialogContentBody").find(".hotelInfoTabbed").length>0&&$("#dimmerDialogContentBody").find(".hotelInfoTabbed").tabs(),$("#dimmerDialogContentBody").find(".hotels-list.rooms").length>0&&$("#dimmerDialogContentBody").css({overflow:"auto"}),$("#dimmerDialogContent").parent().css({position:"fixed"}).end().dialog("open"),$(".modal-close").length>0&&$(".modal-close").click(function(){return $("#dimmerDialogContent").dialog("close"),!1}),e==!1?$("#dimmerCloseLink").hide():($("#dimmerCloseLink").show(),$("#dimmerCloseLink").click(function(){return u=="hotelPersonalizations"&&(n.DisplayLoadingBar(),window.onbeforeunload=null,window.location.href=window.location.pathname),$("#dimmerDialogContent").dialog("close"),!1}))},n.Util.initDisplayDialogOpenExternal=function(n,t,i,r,u){var o,f,e;window.onbeforeunload=null,$("#dimmerDialogPlaceHolder").show(),$("#dimmerDialogContent").show(),$("#dimmerDialogContent").dialog({width:t,height:n}),$("#dimmerDialogContentBody").css({overflow:"hidden",height:n-80+"px"}),$("#dimmerDialogContentBody").removeClass("genTerms"),$("#dimmerHeaderLabel").html(i),o=$('<iframe frameborder="0" marginwidth="0" marginheight="0" allowfullscreen id="externalSource" width="100%"><\/iframe>'),$("#dimmerDialogContentBody").html(o),f=$("#externalSource"),f.attr("src",r),u===0&&(u=30),f.css("height",n-u+"px"),e=$("#deck"),e!==undefined&&e.hide(),$("#dimmerDialogContent").parent().css({position:"fixed"}).end().dialog("open"),isZHCulture==!0&&$("#dimmerDialogPlaceHolder").children().eq(1).css({top:"5%"})},n.Util.initDisplayDialogOpenExternal=function(n,t,i,r){var s,e,o;$("#dimmerDialogPlaceHolder").show(),$("#dimmerDialogContent").show(),$("#dimmerDialogContent").dialog({width:t,height:700}),$("#dimmerHeaderLabel").html(i),$("#dimmerHeaderLabel").html()=="Advance Passenger Information System (APIS) and TSA Secure Flight"&&($("#dimmerDialogContent").css({overflow:"hidden"}),n=600),$("#dimmerDialogContentBody").css({overflow:"hidden",height:n+"px"}),s=$('<iframe frameborder="0" marginwidth="0" marginheight="0" allowfullscreen id="externalSource" width="100%"><\/iframe>'),$("#dimmerDialogContentBody").html(s),e=$("#externalSource"),e.attr("src",r),e.css("height",n-10+"px"),$("#dimmerDialogContent .ui-dialog-buttonpane").hide(),o=$("#deck"),o!==undefined&&o.hide(),$("#dimmerDialogContent").parent().css({position:"fixed"}).end().dialog("open")},n.Util.initDisplayDialogOpenExternalSpecialDcc=function(n,t,i,r){var e,u,f;$("#dimmerDialogPlaceHolder").show(),$("#dimmerDialogContent").show(),$("#dimmerDialogContent").dialog({width:t,height:700}),$("#dimmerDialogContentBody").css({overflow:"hidden",height:n-40+"px"}),$("#dimmerHeaderLabel").html(i),e=$('<iframe frameborder="0" marginwidth="0" marginheight="0" allowfullscreen id="externalSource" width="100%"><\/iframe>'),$("#dimmerDialogContentBody").html(e),u=$("#externalSource"),u.attr("src",r),u.css("height",n-10+"px"),f=$("#deck"),f!==undefined&&f.hide(),$("#dimmerDialogContent").parent().css({position:"fixed"}).end().dialog("open")},n.Util.ValidatePagedPassenger=function(){return $("#PassengerReminder").length>0?$(".existingPaxs").filter(function(){return $.trim($(this).text())==""}).length>0?(n.Util.initDisplayDialogOpen(200,400,"Passenger Information Incomplete","PassengerReminder","OK"),!1):!0:!0},n.Util.ValidateHotelPax=function(){var t;if($("div.guest-form").length>0){for(var i=$("div.guest-form").find("input").filter(function(){return $(this).attr("type")=="text"}),n=null,t=0,r=i.length,t=0;t<r;t+=1)n=$(i[t]),n.removeClass("validationError"),($.trim(n.val())==""||$.trim(n.val())==n.attr("requiredempty"))&&n.addClass("validationError");return i.filter(function(){return $(this).hasClass("validationError")}).length>0?!1:!0}return!0},n.Util.CheckPassengerFieldValue=function(){var n=".passengerform",t=$(n).find("select.focusable");for(i=0;i<t.length;i++)if(t[i].value==""){$(n).remove();break}},n.Class.SkySales=function(){var t=this;return t.containerId="",t.container=null,t.init=n.Class.SkySales.prototype.init,t.getById=n.Class.SkySales.prototype.getById,t.setSettingsByObject=n.Class.SkySales.prototype.setSettingsByObject,t.addEvents=n.Class.SkySales.prototype.addEvents,t.setVars=n.Class.SkySales.prototype.setVars,t.hide=n.Class.SkySales.prototype.hide,t.show=n.Class.SkySales.prototype.show,t},n.Class.SkySales.prototype.init=function(n){this.setSettingsByObject(n),this.setVars()},n.Class.SkySales.prototype.getById=function(n,t){var i=null;return n&&t?i=$("#"+n,t):n&&(i=window.document.getElementById(n),i&&(i=$(i))),i||(i=$([])),i},n.Class.SkySales.prototype.setSettingsByObject=function(n){var t="";for(t in n)n.hasOwnProperty(t)&&this[t]!==undefined&&(this[t]=n[t])},n.Class.SkySales.prototype.addEvents=function(){},n.Class.SkySales.prototype.setVars=function(){this.container=this.getById(this.containerId)},n.Class.SkySales.prototype.hide=function(){this.container.hide("slow")},n.Class.SkySales.prototype.show=function(){this.container.show("slow")},n.Class.BaseToggleView=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.toggleViewIdArray=[],t.toggleViewArray=[],t.addToggleView=function(i){i.toggleViewIdArray&&(i=i.toggleViewIdArray);var r=i||[],e=null,u=0,f=null;for(r.length===undefined&&(r=[],r[0]=i),u=0;u<r.length;u+=1)e=r[u],f=new n.Class.ToggleView,f.init(e),t.toggleViewArray[t.toggleViewArray.length]=f},t},n.Class.FlightSearch=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return flightTypeInputArray=[],childBirthDialogObj=null,t.marketArray=[],t.flightTypeInputIdArray=[],t.countryInputIdArray=[],t.countryInputArray=[],t.clientId="",t.buttonSubmit=null,t.adultDropDown=null,t.childDropDown=null,t.seniorCitizenDropDown=null,t.paxWithDisabilityDropDown=null,t.hkTaxExemptDropDown=null,t.vatExemptDropDown=null,t.departureDate=null,t.returnDate=null,t.adultDropDownId="",t.childDropDownId="",t.seniorCitizenDropdownId="",t.paxWithDisabilityDropdownId="",t.hkTaxExemptDropdownId="",t.vatExemptDropdownId="",t.departureDateId="",t.returnDateId="",t.maxPassengerCount="",t.exceedsMaxPaxAllowedLabel="",t.totalSelectedPax=null,t.childBirthDatesDialogObj=null,t.flightTypeDivContainerId="",t.flightTypeDivContainer=null,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.initFlightTypeInputIdArray(),this.initCountryInputIdArray(),this.initChildDialogDropdownBirthDate(),this.populateFlightType(),this.initAdultDropdownAttribute(),this.initDepartureDropdownAttribute(),this.initReturnDropdownAttribute()},t.setVars=function(){var n=this.clientId.split("_")[0],i=n+"_ButtonSubmit";t.adultDropDown=this.getById(t.adultDropDownId),t.childDropDown=this.getById(t.childDropDownId),t.seniorCitizenDropDown=this.getById(t.seniorCitizenDropdownId),t.paxWithDisabilityDropDown=this.getById(t.paxWithDisabilityDropdownId),t.hkTaxExemptDropDown=this.getById(t.hkTaxExemptDropdownId),t.vatExemptDropDown=this.getById(t.vatExemptDropdownId),t.departureDate=this.getById(t.departureDateId),t.returnDate=this.getById(t.returnDateId),this.flightTypeDivContainerId.trim().length>0&&(t.flightTypeDivContainer=$("#"+this.flightTypeDivContainerId+" input[type='radio']:checked")),t.buttonSubmit=this.getById(i)},t.addEvents=function(){this.adultDropDown.change(t.updateChildDropdownItemsHandler),this.adultDropDown.blur(t.hideErrorDivHandler),this.buttonSubmit.click(t.submitButtonHandler)},t.setSettingsByObject=function(t){i.setSettingsByObject.call(this,t);for(var r=0,f=this.marketArray||[],u=null,r=0;r<f.length;r+=1)u=new n.Class.FlightSearchMarket,u.flightSearch=this,u.index=r,u.init(f[r]),this.marketArray[r]=u},t.submitButtonHandler=function(){t.checkFlightType();return n.Util.validate(this)&&t.validatePaxCount()&&childBirthDialogObj.submitHandler()&&n.DisplayLoadingBar()},t.childDropDownChangeHandler=function(){var n=$(t.childDropDown).val();n=parseInt(n),n>0&&childBirthDialogObj.generateChildDropdown(n)},t.updateChildDropdownItemsHandler=function(){var n=this;n&&n.id&&t.updateChildDropdownItems(n.id)},t.hideErrorDivHandler=function(){hideErrorDiv(this)},t.updateChildDropdownItems=function(i){var f=$("#"+i.replace("ADT","CHD")),h=(f.get(0)?f[0].options.length:0)-1,c=$("#"+i).val(),e=parseInt(t.maxPassengerCount)||20,o=[],r,u,s;if(c<1&&(e=2),h!=e){for(r=0;r<=e;r++)u={},u.code=r.toString(),u.name=r.toString(),o[r]=u;s={input:f,objectArray:o,clearOptions:!0},n.Util.populate(s)}},t.initCountryInputIdArray=function(){for(var i=0,u=null,r={},f=this.countryInputIdArray||[],i=0;i<f.length;i+=1)u=f[i],r=new n.Class.CountryInput,r.init(u),t.countryInputArray[this.countryInputArray.length]=r},t.initChildDialogDropdownBirthDate=function(){var t=new n.Class.ChildDialogDropdownFlightSearch;t.init(this.childBirthDatesDialogObj),childBirthDialogObj=t},t.initFlightTypeInputIdArray=function(){for(var i=0,r=null,t={},u=this.flightTypeInputIdArray||[],i=0;i<u.length;i+=1)r=u[i],t=new n.Class.FlightTypeInput,t.flightSearch=this,t.index=i,t.init(r),flightTypeInputArray[flightTypeInputArray.length]=t},t.populateFlightType=function(){for(var n=0,i=null,t=null,n=0;n<flightTypeInputArray.length;n+=1)if(i=flightTypeInputArray[n],t=$(i.input),t.attr("checked")){t.click();break}},t.updateFlightType=function(n){for(var u=0,f=null,r=null,t,i=null,u=0;u<flightTypeInputArray.length;u+=1)for(f=flightTypeInputArray[u],i=f.hideInputArray,t=0;t<i.length;t+=1)r=$(i[t]),r.show();for(i=n.hideInputArray,t=0;t<i.length;t+=1)r=$(i[t]),r.hide()},t.initAdultDropdownAttribute=function(){$("#"+t.adultDropDownId).attr("required","true"),$("#"+t.adultDropDownId).attr("requirederror","ENTER <b>NUMBER OF GUEST<\/b>."),$("#"+t.adultDropDownId).attr("checkpaxcount","true")},t.checkFlightType=function(){var n=$("#"+this.flightTypeDivContainerId+" input[type='radio']:checked");n&&(n.val().toLowerCase()=="oneway"?$("#"+t.returnDateId).removeAttr("checkreturndate").removeAttr("required").removeAttr("requirederror"):t.initReturnDropdownAttribute())},t.initDepartureDropdownAttribute=function(){$("#"+t.departureDateId).attr("required","true").attr("requirederror","ENTER <b>DEPARTURE DATE<\/b>.").attr("checkdeparturedate","true")},t.initReturnDropdownAttribute=function(){$("#"+t.returnDateId).attr("required","true").attr("requirederror","ENTER <b>RETURN DATE<\/b>.").attr("checkreturndate","true")},t.validatePaxCount=function(){return(t.totalSelectedPax=parseInt(t.adultDropDown.val())+parseInt(t.childDropDown.val()),t.totalSelectedPax>t.maxPassengerCount)?(alert(t.exceedsMaxPaxAllowedLabel+t.maxPassengerCount),!1):!0},t},n.Class.ChildDialogDropdownFlightSearch=function(){var o=n.Class.SkySales(),t=n.Util.extendObject(o),r=new n.Class.DatePickerManager;t.clientId="",t.submitButton=null,t.flightSearchButtonSubmitId="",t.flightSearchButtonSubmit=null,t.passengerContainerId="",t.searchPaxFormsId="",t.childBirthDateDialogId="",t.childBirthDateDialog=null,t.passengerContainerId="",t.passengerContainer=null,t.flightTypeDivContainerId="",t.flightTypeDivContainer=null,t.childBirthDateDialogSubmitId="",t.childBirthDateDialogSubmit=null,t.childBirthDateDialogCloseId="",t.childBirthDateDialogClose=null,t.adultDropdownId="",t.adultDropdown=null,t.childDropdownName="",t.childDropdownId="",t.childDropdown=null,t.datePickerHiddenPreId="",t.datePickerHidden=null,t.datepickerLastDateObj=null,t.childUMNRMessageId="",t.childUMNRMessage=null,t.childUMNRErrorId="",t.childUMNRError=null,t.childDropdownDialogBoxMonthPreId="",t.childDropdownDialogBoxMonthPreName="",t.childDropdownDialogBoxDayPreId="",t.childDropdownDialogBoxDayPreName="",t.childDropdownDialogBoxYearPreId="",t.childDropdownDialogBoxYearPreName="",t.childRadioButtons=[],t.childRadioButtonsGroupName="",t.childBirthContainerPreId="",t.infPaxTypeCode="",t.chdPaxTypeCode="",t.headerText="",t.dialogCHDLabel="",t.childBirthDateInvalidLabel="",t.infantBirthDateInvalidLabel="",t.childAgeExceedLabel="",t.infantCountExceedAdultLabel="",t.childCountExceedAdultLabel="",t.monthInitLabel="",t.dayInitLabel="",t.yearInitLabel="",t.childDropdownStartYear="",t.infantAgeLimit="",t.childAgeLimit="",t.AdtDropdownIds="",t.AdtDropDownElement=null,t.childRadioContainerPreId="childTypeContainer",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.initChildBirthdateDialogBox(),this.addEvents()},t.setVars=function(){var n=this.clientId.split("_")[0],i=n+"_ButtonSubmit";t.submitButton=this.getById(i),t.flightSearchButtonSubmit=this.getById(this.flightSearchButtonSubmitId),t.childBirthDateDialogSubmit=this.getById(this.childBirthDateDialogSubmitId),t.childBirthDateDialogClose=this.getById(this.childBirthDateDialogCloseId),t.client=this.getById(this.clientId),t.childBirthDateDialog=this.getById(this.childBirthDateDialogId),t.passengerContainer=$(this.childBirthDateDialog).find("#"+this.passengerContainerId),t.adultDropdown=this.getById(this.adultDropdownId),t.childDropdown=this.getById(this.childDropdownId),t.childUMNRMessage=this.getById(this.childUMNRMessageId),t.childUMNRError=this.getById(this.childUMNRErrorId),t.datePickerHidden=$("[id^='"+this.datePickerHiddenPreId+"']"),this.flightTypeDivContainerId!=""&&(t.flightTypeDivContainer=$("#"+this.flightTypeDivContainerId+" input[type='radio']:checked"),t.datepickerLastDateObj=t.flightTypeDivContainer.length>0&&t.flightTypeDivContainer.val().toLowerCase()=="oneway"?this.datePickerHidden[0]:this.datePickerHidden[1])},t.addEvents=function(){t.childBirthDateDialogSubmit.click(this.submitFromDialogHandler),t.childBirthDateDialogClose.click(this.closeFromDialogHandler)},t.initChildBirthdateDialogBox=function(){var n={appendTo:$("#"+t.searchPaxFormsId),autoOpen:!1,closeOnEscape:!1,closeText:"",dialogClass:"no-close",maxHeight:600,width:450,maxWidth:600,modal:!0,position:{my:"center top",at:"center bottom",of:".header"},resizable:!1,show:null,title:this.headerText,beforeClose:this.dialogBeforeCloseHandler,close:this.dialogCloseHandler,create:this.dialogCreateHandler,focus:this.dialogFocusHandler,open:this.dialogOpenHandler};t.childBirthDateDialog.dialog(n)},t.dialogBeforeCloseHandler=function(){},t.dialogCloseHandler=function(){},t.dialogCreateHandler=function(){},t.dialogFocusHandler=function(){},t.dialogOpenHandler=function(){},t.submitHandler=function(){var e=t.adultDropdown.val(),r=t.childDropdown.val(),f=this.AdtDropdownIds,i=f.split(","),u=0,n;if(r>0){if(i.length>0){for(n=0;n<i.length-1;n++)if(t.AdtDropDownElement=$("#searchPaxForms").find("select[id*="+i[n]+"]"),parseFloat(t.AdtDropDownElement.val())>0){u+=1;break}u>0?$(t.childUMNRMessage).hide():$(t.childUMNRMessage).show()}return $(t.childUMNRError).hide(),t.generateChildDropdown(r),t.childBirthDateDialog.dialog("open"),!1}return!0},t.submitFromDialogHandler=function(){var lt=t.adultDropdown.val(),nt=t.childDropdown.val(),tt=parseInt(nt),l=0,a=0,it=parseInt(t.infantAgeLimit),r=!0,rt=t.AdtDropdownIds,c=rt.split(","),at=0,o=0,n,u;if(c.length>0)for(n=0;n<c.length-1;n++)t.AdtDropDownElement=$("#searchPaxForms").find("select[id*="+c[n]+"]"),parseFloat(t.AdtDropDownElement.val())>0&&(o+=parseFloat(t.AdtDropDownElement.val()));for(n=0;n<tt;n++){var v=n.toString(),ut=f(v),ft=e(v),y=$("input[name='"+ut+"']:checked");if(y&&r){var s=y.val(),h=t.computePaxAge(n),et=parseInt(t.childAgeLimit.Min),ot=parseInt(t.childAgeLimit.Max);$("#"+ft).find("[class*='validationError']").removeClass("validationError"),$(t.childUMNRError).hide();var p=$("#ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListPassengerType_CHDBirthDay_"+n).find("option:selected").text(),w=$("#ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListMarketDay1").find("option:selected").text(),b=$("#ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListMarketMonth1").val().substring(0,4),k=$("#ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListPassengerType_CHDBirthYear_0").val(),d=$("#ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListPassengerType_CHDBirthMonth_0").val(),g=$("#ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListMarketMonth1").val().substring(5,7),vt=g-d,yt=w-p,pt=b-k,st=Math.abs(new Date(b,g,w)-new Date(k,d,p)),ht=864e5,ct=Math.round(st/ht);h<0?(u=i(n),$("#"+u.month.id+"-button").addClass("validationError"),alert(t.childBirthDateInvalidLabel),r=!1):ct<8&&(s=="INF"||s=="CHD")?(u=i(n),$("#"+u.month.id+"-button").addClass("validationError"),alert(t.infantBirthDateInvalidLabel),r=!1):s=="INF"||h<it?l++:s=="CHD"&&(a++,h<et&&o<=0?(u=i(n),$("#"+u.month.id+"-button").addClass("validationError"),$(t.childUMNRError).hide().show(500),r=!1):h>ot&&(u=i(n),$("#"+u.month.id+"-button").addClass("validationError"),alert(t.childAgeExceedLabel),r=!1))}}return l>o&&(alert(t.infantCountExceedAdultLabel),r=!1),o==1&&a>10&&(alert(t.childCountExceedAdultLabel),r=!1),r},t.closeFromDialogHandler=function(){t.childBirthDateDialog.dialog("close")},t.generateChildDropdown=function(n){var s=null,f,u,v,r;for(t.passengerContainer.children().remove(),f=0;f<n;f++){var a=f.toString(),b=$("<div/>").attr({id:e(a),"class":"childControls"}),i=t.constructBirthDropdownControls(f),k=t.dialogCHDLabel.replace("[num]",(f+1).toString()),d=$("<label/>").html(k).attr({"for":i.month.id}),h=$("<select/>").attr({id:i.month.id,name:i.month.name,"class":"birthMonth"}),c=$("<select/>").attr({id:i.day.id,name:i.day.name,"class":"birthDay"}),l=$("<select/>").attr({id:i.year.id,name:i.year.name,"class":"birthYear"});if(i.paxCHDType&&i.paxCHDType.length>0)for(u=i.paxCHDType,v=u.length,s=$("<div/>").attr({id:t.childRadioContainerPreId+a,"class":"childType hidden"}),r=0;r<v;r++){var y=u[r].id,p=u[r].label,o=$("<input/>").attr({id:y,type:"radio",name:u[r].name,value:u[r].value}),w=$("<label/>").attr({"for":y}),g=$("<b/>").html(p.boldText);w.append(g).append(p.descriptionText),u[r].checked&&u[r].checked==="true"&&o.attr({checked:!0}),o=$("<p/>").append(o).append(w),s.append(o)}b.append(d).append(h).append(c).append(l).append(s).appendTo(t.passengerContainer),t.attachEventsToDateControls(h,c,l,f),t.populateDateControls(h,c,l)}},t.populateDateControls=function(i,u,f){var e=new Date(t.childDropdownStartYear,0,1),o=n.Util.getResource(),s=o.dateCultureInfo.monthNames,h=parseInt(t.childDropdownStartYear)||1990,c=r.createAllDayOptionArray(),l=r.createAllMonthOptionArray(s),a=r.createYearOptionArray(h,null,!0),v={selectedItem:e.getDate(),objectArray:c,input:u},y={selectedItem:e.getMonth()+1,objectArray:l,input:i},p={selectedItem:e.getFullYear(),objectArray:a,input:f};n.Util.populate(v),n.Util.populate(y),n.Util.populate(p)},t.attachEventsToDateControls=function(n,i,r,u){$(n).bind("change",[n,i,r,u],t.updateBirthDateDayControl),$(r).bind("change",[n,i,r,u],t.updateBirthDateDayControl),$(n).bind("change",[n,i,r,u],t.checkChildAge),$(i).bind("change",[n,i,r,u],t.checkChildAge),$(r).bind("change",[n,i,r,u],t.checkChildAge)},t.updateBirthDateDayControl=function(t){var u=t.data[0],i=t.data[1],f=t.data[2],a=t.data[3],e=$(i).val()?$(i).val():"",o=$(u).val()-1,s=$(f).val(),h=32-new Date(s,o,32).getDate(),c=r.createAllDayOptionArray(h),l={objectArray:c,selectedItem:e,input:i,clearOptions:!0};n.Util.populate(l)},t.checkChildAge=function(n){var e=n.data[3],p=t.adultDropdown.val(),l=parseInt(t.infantAgeLimit),w=parseInt(t.childAgeLimit),a=t.computePaxAge(e),v=t.infPaxTypeCode,r,f,c,i,s;chdValueIndicator=t.chdPaxTypeCode;var y=t.AdtDropdownIds,o=y.split(","),h=0;if(o.length>0){for(i=0;i<o.length-1;i++)if(t.AdtDropDownElement=$("#searchPaxForms").find("select[id*="+o[i]+"]"),parseFloat(t.AdtDropDownElement.val())>0){h+=1;break}if(h>0)if(r=$("#"+t.childRadioContainerPreId+e.toString()),a<l)r.find(':radio[value="'+v+'"]').attr("checked","true"),r.show();else for(r.find(':radio[value="'+chdValueIndicator+'"]').attr("checked","true"),r.hide(),f=u(e),c=f.length,i=0;i<c;i++)f[i].checked&&f[i].checked==="true"&&(s=$("#"+f[i].id),s.is(":checked")||s.attr("checked",!0))}},t.computeAge=function(n,t){if(n>t){var i=n.getFullYear()-t.getFullYear();return(n.getMonth()<t.getMonth()||n.getMonth()<=t.getMonth()&&n.getDate()<t.getDate())&&i--,i}return-1},t.computePaxAge=function(n){var u=i(n),f=$("#"+u.month.id),e=$("#"+u.day.id),o=$("#"+u.year.id),s=new Date(o.val(),f.val()-1,e.val()),h=r.parseDateWholeString($(t.datepickerLastDateObj).val());return t.computeAge(h,s)},t.constructBirthDropdownControls=function(n){var t;return t=$(i(n)),t.attr({paxCHDType:u(n)}),t.get(0)};var i=function(n){var f={},u=$(f),i=n.toString(),r=t;return u.attr({month:{id:r.childDropdownDialogBoxMonthPreId+i,name:r.childDropdownDialogBoxMonthPreName+i},day:{id:r.childDropdownDialogBoxDayPreId+i,name:r.childDropdownDialogBoxDayPreName+i},year:{id:r.childDropdownDialogBoxYearPreId+i,name:r.childDropdownDialogBoxYearPreName+i}}),u.get(0)},u=function(n){var u=[],e=n.toString(),r=t.childRadioButtons,o,i;if(r.length>0)for(o=r.length,i=0;i<o;i++)u.push({name:f(e),id:r[i].id+e,value:r[i].value,label:r[i].label,checked:r[i].checked});return u},f=function(n){return t.childRadioButtonsGroupName+n},e=function(n){return t.childBirthContainerPreId+n};return t},n.Class.FlightSearchMarket=function(){var o=new n.Class.SkySales,t=n.Util.extendObject(o);t.flightSearch=null,t.index=-1,t.validationMessageObject={},t.hasFlightSearchSession="",t.validationObjectIdArray=[],t.stationInputIdArray=[],t.stationDropDownIdArray=[],t.marketInputIdArray=[],t.macInputIdArray=[],t.marketDateIdArray=[],t.lowFareAvailabilityArray=[],t.marketDateArray=[],t.marketInputMegaDropDownIdArray=[];var i=[],r=[],u=[],f=[],e=[],s=[];return t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.initMarketInputIdArray(),this.initStationInputIdArray(),this.initStationDropDownIdArray(),this.initMacInputIdArray(),this.initMarketDateIdArray(),this.initMarketInputMegaDropDownIdArray()},t.initMacInputIdArray=function(){for(var i=0,r=null,t={},u=this.macInputIdArray||[],i=0;i<u.length;i+=1)r=u[i],t=new n.Class.MacInput,t.init(r),f[f.length]=t,t.showMac.call(t.stationInput)},t.initMarketDateIdArray=function(){for(var t=0,r=null,i={},u=this.marketDateIdArray||[],t=0;t<u.length;t+=1)r=u[t],i=new n.Class.MarketDate,i.init(r),e[e.length]=i},t.initMarketInputIdArray=function(){for(var t=0,u=null,r={},f=this.marketInputIdArray||[],t=0;t<f.length;t+=1)u=f[t],r=new n.Class.MarketInput,r.init(u),i[i.length]=r},t.initMarketInputMegaDropDownIdArray=function(){for(var t=0,u=null,r={},f=this.marketInputMegaDropDownIdArray||[],t=0;t<f.length;t+=1)u=f[t],r=new n.Class.MarketMegaDropDownInput,r.init(u),s[i.length]=r},t.initStationInputIdArray=function(){for(var t=0,u=null,i={},f=this.stationInputIdArray,t=0;t<f.length;t+=1)u=f[t],i=new n.Class.StationInput,i.init(u),r[r.length]=i},t.initStationDropDownIdArray=function(){for(var t=0,r=null,i={},f=this.stationDropDownIdArray,t=0;t<f.length;t+=1)r=f[t],i=new n.Class.StationDropDown,i.init(r),u[u.length]=i},t.initLowFareAvailabilityArray=function(){for(var i=0,r=null,t=this.lowFareAvailabilityArray,f=t.length,u={},i=0;i<f;i+=1)r=new n.Class.LowFareAvailability,u=t[i],u.datePickerManager=this.marketDateArray[0].datePickerManager,r.init(u),t[t.length]=r},t.initValidationObjectRedirect=function(){for(var o=this.validationObjectIdArray||[],t=0,r="",u="",f="",e=null,s=null,n=null,i,t=0;t<o.length;t+=1)r=o[t],u=r.key||"",f=r.value||"",e=$("object.metaobject>param[value*='"+u+"']"),e.length>0&&(s=$(":input#"+f),s.length>0&&(n=e[0],"value"in n&&(i=n.value,i=i.replace(u,f),n.value=i)))},t},n.Class.LowFareAvailability=function(){var f=new n.Class.SkySales,t=n.Util.extendObject(f),i="",r="",u="";return t.request={},t.url="TripPlannerLowFareSelectAjax-resource.aspx",t.containerId="lowFareAvailabilityContainerId",t.container={},t.showId="",t.show=null,t.flightSearch={},t.tripPlannerSearchFlight={},t.originId="",t.destinationId="",t.marketDateId="",t.marketDateObject={},t.datePickerManager={},t.requestStartDate=null,t.requestEndDate=null,t.lowFareAvailabilityMisconfiguredErrorDivId="lowFareAvailabilityMisconfiguredErrorText",t.lowFareAvailabilityMisconfiguredErrorText="",t.updateShow=function(){this.tripPlannerSearchFlight.tripPlannerSearchFlights.dontRequireOriginAndDestinationOnFlights(),this.tripPlannerSearchFlight.requireOriginAndDestination();var n=this.validate();n&&(this.populateRequest(),this.sendLowFareAvailabilityRequest())},t.updateShowHandler=function(){t.updateShow()},t.validate=function(){return n.Util.validate(this.show[0])},t.addEvents=function(){this.show.click(this.updateShowHandler)},t.populateRequest=function(){var g=this.flightSearch.countryInputArray[0].input.val(),c=this.tripPlannerSearchFlight.tripPlannerSearchFlights.tripPlannerSearch,nt=c.preferredFareDropDown.val(),tt=c.passengerDiscountDropDown.val(),l={},p=c.passengerTypeDropDowns.passengerTypeDropDownArray||[],it=p.length,s=0,w="",f="",b="",rt=i.val(),ut=r.val(),ft=u.val(),a=ft.split("-"),et=a[0],ot=a[1]-1,st=a[2],k={},d={},v=new Date,y=new Date,e=new Date,h=new Date,o=new Date;for(t.marketDateObject=new Date(et,ot,st),t.request={"Search.ResidentCountry":g,"Search.PreferredFare":nt,"Search.DiscountCode":tt},s=0;s<it;s+=1)l=p[s],w=l.attr("name"),b=l.val(),t.request[w]=b;y=new Date(v.getFullYear(),v.getMonth(),v.getDate()-1),e=new Date(this.marketDateObject),e.setDate(e.getDate()-7),h=y>e?y:e,o=new Date(this.marketDateObject),o.setDate(o.getDate()+7),t.requestStartDate=h,t.requestEndDate=o,f="Search.DateMarkets[0].",t.request[f+"OriginStation.MarketCode"]=rt,t.request[f+"DestinationStation.MarketCode"]=ut,k=n.Util.dateToIsoString(h),t.request[f+"DepartureDate"]=k,d=n.Util.dateToIsoString(o),t.request[f+"ArrivalDate"]=d,this.tripPlannerSearchFlight.hideTripIsUnavailable(),this.tripPlannerSearchFlight.hideTripHasNoFares()},t.sendLowFareAvailabilityRequest=function(){$.post(this.url,this.request,this.responseHandler)},t.availabilityExists=function(n){n=n||[];for(var t=!1,u=n.length||0,i=0,r=[];i<u&&!t;)r=n[i].JourneyDateMarketList,r.length>0&&(t=!0),i+=1;return t},t.makeDateMarketHash=function(n){n=n||[];for(var y={},u=0,k=n.length,p={},f=[],w=0,r=0,e,t={},o=0,s=[],h=[],c=[],l=[],a=[],b={},i=0,v="",u=0;u<k;u+=1)for(p=n[u],f=p.JourneyDateMarketList,w=f.length,r=0;r<w;r+=1)e=f[r],t=e.DepartureDate,o=t.Month-1,v="date_0_"+t.Year+"_"+o+"_"+t.Day,s=e.Journeys||[],i=0,s.length&&(h=s[0].Segments||[],h.length&&(c=h[0].Fares||[],c.length&&(l=c[0].PaxFares||[],l.length&&(a=l[0].ServiceCharges||[],a.length&&(b=a[0]||{},i=b.Amount||0,i=parseFloat(i,10)))))),y[v]={year:t.Year,month:o,day:t.Day,containerId:v,price:i};return y},t.processResponse=function(t){var y=$(t),p=y.html(),w=n.Json.parse(p),s={containerId:"lowFareAvailabilityContainerId",templateId:"tripPlannerCalendar",totalTemplateId:"totalTemplateId",totalId:"totalId",marketArray:[],requestStartDate:this.requestStartDate,requestEndDate:this.requestEndDate},h=[],i={},b=w.TripAvailabilityResponse||{},f=b.Schedules||[],c=null,l=null,u=[],a=0,o=0,r={},e={},v={};l=this.availabilityExists(f),l?f.length>0&&(c=f[0],u=c.JourneyDateMarketList||[],a=u.length,a>0&&(r=u[0],i={departureStation:r.DepartureStation,arrivalStation:r.ArrivalStation,selectedDate:this.marketDateObject,startYear:r.DepartureDate.Year,startMonth:r.DepartureDate.Month-1,startDay:r.DepartureDate.Day},o=u.length,o>0&&(e=u[o-1],i.endYear=e.DepartureDate.Year,i.endMonth=e.DepartureDate.Month-1,i.endDay=e.DepartureDate.Day)),i.dateMarketHash=this.makeDateMarketHash(f),i.datePickerManager=this.datePickerManager,h.push(i),s.marketArray=h,v=new n.Class.TripPlannerCalendarAvailabilityInput,v.init(s),this.container.show()):(this.tripPlannerSearchFlight.showTripIsUnavailable(),this.container.hide())},t.validateResponse=function(n){var t=!0;return n===""?t=!1:$(n)[0].innerHTML||(t=!1),t},t.validateAndProcessResponse=function(n){var i=$(n),r=this.validateResponse(i);r?this.processResponse(i):alert(t.lowFareAvailabilityMisconfiguredErrorText)},t.responseHandler=function(n){t.validateAndProcessResponse(n)},t.ajaxErrorHandler=function(n){t.ajaxError(n)},t.setVars=function(){var n=this.getById(this.lowFareAvailabilityMisconfiguredErrorDivId);n.length>0&&(t.lowFareAvailabilityMisconfiguredErrorText=n.text()),t.show=this.getById(this.showId),t.container=this.getById(this.containerId),i=this.getById(this.originId),r=this.getById(this.destinationId),u=this.getById(this.marketDateId),t.flightSearch=this.tripPlannerSearchFlight.tripPlannerSearchFlights.tripPlannerSearch.flightSearch},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t},n.Class.MacInput=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.macHash=n.Util.getResource().macHash,t.stationHash=n.Util.getResource().stationHash,t.stationInputId="",t.macContainerId="",t.macLabelId="",t.macInputId="",t.macContainer={},t.stationInput={},t.macInput={},t.macLabel={},t.showMac=function(){var n=$(this).val(),r=null,u="",f="",i=null;n=n||"",n=n.toUpperCase(),t.macInput.removeAttr("checked"),t.macContainer.hide(),r=t.stationHash[n],r&&(u=r.macCode,i=t.macHash[u],i&&i.stations.length>0&&(f=i.stations.join(),t.macLabel.html(f),t.macContainer.show()))},t.addEvents=function(){t.stationInput.change(t.showMac)},t.setVars=function(){t.stationInput=this.getById(t.stationInputId),t.macContainer=this.getById(t.macContainerId),t.macLabel=this.getById(t.macLabelId),t.macInput=this.getById(t.macInputId)},t.init=function(n){i.init.call(this,n),t.macContainer.hide(),this.addEvents()},t},n.Class.HotelMarketDate=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.dateFormat=n.datepicker.datePickerFormat,t.dateDelimiter=n.datepicker.datePickerDelimiter,t.marketDateId="",t.marketDate=null,t.marketDateDisplayId="",t.marketDateDisplay=null,t.marketDayId="",t.marketDay=null,t.marketMonthYearId="",t.marketMonthYear=null,t.marketInputDateId="",t.marketInputDate=null,t.useJQueryDatePicker=!0,t.datePickerManager={},t.fullDateFormatString="mm/dd/yy",t.dateDisplayFormat="dd M yy",t.exemptMarketMonthDay="true",t.setSettingsByObject=function(n){i.setSettingsByObject.call(this,n);var r="";for(r in n)t.hasOwnProperty(r)&&(t[r]=n[r])},t.parseDate=function(i){var e="",o="",s="",f=new Date,r="",h="",c=[],u=0,l=n.Util.parseIsoDate(i);if(l)f=l;else if(i.indexOf(t.dateDelimiter)>-1){for(c=i.split(t.dateDelimiter),u=0;u<t.dateFormat.length;u+=1){r=c[u],r.charAt(0)==="0"&&(r=r.substring(1)),h=t.dateFormat.charAt(u);switch(h){case"m":o=r;break;case"d":e=r;break;case"y":s=r}}f=new Date(s,o-1,e)}return f},t.addEvents=function(){var i={isAOS:!1,yearMonth:this.marketMonthYear,day:this.marketDay,dateDisplay:this.marketDateDisplay,linkedDate:this.marketDate,useJQueryDatePicker:this.useJQueryDatePicker,fullDateFormatString:this.fullDateFormatString,dateDisplayFormat:this.dateDisplayFormat};t.datePickerManager=new n.Class.DatePickerManager,this.datePickerManager.init(i),t.marketDay.change(t.updateMarketInputDate)},t.updateMarketInputDate=function(){t.marketInputDate.val(t.marketDate.val())},t.exemptDateControls=function(){t.exemptMarketMonthDay=="true"&&(t.marketDay.length>0&&$(t.marketDay).attr("data-exempt","true"),t.marketMonthYear.length>0&&$(t.marketMonthYear).attr("data-exempt","true"))},t.setVars=function(){t.marketDate=this.getById(t.marketDateId),t.marketDateDisplay=this.getById(t.marketDateDisplayId),t.marketDay=this.getById(t.marketDayId),t.marketMonthYear=this.getById(t.marketMonthYearId),t.marketInputDate=this.getById(t.marketInputDateId)},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.exemptDateControls(),this.addEvents(),this.initHotelMarketDatePicker()},t.initHotelMarketDatePicker=function(){if(t.marketInputDate.length!=0){var n=t.marketInputDate.val().split("-"),i=n[0],r=n[1]-1,u=n[2],f=new Date(i,r,u);t.marketDate.val(t.marketInputDate.val()),dateDisplayString=$.datepicker.formatDate(t.dateDisplayFormat,f),t.marketDateDisplay.val(dateDisplayString),$("#"+t.marketDay.attr("id")+",#"+t.marketMonthYear.attr("id")).selectmenu()}},t.datesInOrder=function(n){var t=!0,i=null,r=null;return i=this.parseDate(n[0]),r=this.parseDate(n[1]),i>r&&(t=!1),t},t.datesIsEqual=function(n,t){var i=!0,r,u=null,f=new Date;return u=this.parseDate(n[0]),r=this.GetDifhours(u,f),r<=t&&(i=!1),i},t.dateNoFlights=function(n){var t=!0,i=null,r=new Date,f=new Date,u=new Date(new Date(r).setMonth(r.getMonth()+18));return i=this.parseDate(n[n.length-1]),i>u&&(t=!1),t},t.GetDifhours=function(n,t){var r=n.getDate(),u=t.getDate(),f=n.getMonth()+1,e=t.getMonth()+1,o=n.getFullYear(),s=t.getFullYear(),i;return f<=e&&o<=s&&(i=r-u+1,i=i*24),i},t},n.Class.MarketDate=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.dateFormat=n.datepicker.datePickerFormat,t.dateDelimiter=n.datepicker.datePickerDelimiter,t.marketDateId="",t.marketDate=null,t.marketDateDisplayId="",t.marketDateDisplay=null,t.marketDayId="",t.marketDay=null,t.marketMonthYearId="",t.marketMonthYear=null,t.useJQueryDatePicker=!0,t.datePickerManager={},t.fullDateFormatString="mm/dd/yy",t.dateDisplayFormat="dd M yy",t.exemptMarketMonthDay="false",t.flightTypeDivContainerId="",t.originStationInputId="",t.hasFlightSearchSession="",t.setSettingsByObject=function(n){i.setSettingsByObject.call(this,n);var r="";for(r in n)t.hasOwnProperty(r)&&(t[r]=n[r])},t.parseDate=function(i){var e="",o="",s="",f=new Date,r="",h="",c=[],u=0,l=n.Util.parseIsoDate(i);if(l)f=l;else if(i.indexOf(t.dateDelimiter)>-1){for(c=i.split(t.dateDelimiter),u=0;u<t.dateFormat.length;u+=1){r=c[u],r.charAt(0)==="0"&&(r=r.substring(1)),h=t.dateFormat.charAt(u);switch(h){case"m":o=r;break;case"d":e=r;break;case"y":s=r}}f=new Date(s,o-1,e)}return f},t.addEvents=function(){var i={isAOS:!1,yearMonth:this.marketMonthYear,day:this.marketDay,dateDisplay:this.marketDateDisplay,linkedDate:this.marketDate,useJQueryDatePicker:this.useJQueryDatePicker,fullDateFormatString:this.fullDateFormatString,dateDisplayFormat:this.dateDisplayFormat,flightTypeDivContainerId:this.flightTypeDivContainerId,originStationInputId:this.originStationInputId};t.datePickerManager=new n.Class.DatePickerManager,this.datePickerManager.init(i),t.marketMonthYear.change(t.updateMarketMonthYear2),t.marketDay.change(t.updatemarketDay2),$(document).ready(t.populateDateDropDown)},t.populateDateDropDown=function(){if(t.hasFlightSearchSession=="true"){var i=$("#"+t.marketDateId).val(),r=n.Util.parseIsoDate(i),u=$.datepicker.formatDate(t.dateDisplayFormat,r);$("#"+t.marketDateDisplayId).val(u)}},t.updatemarketDay2=function(){var u=$("select[id *= AvailabilitySearchInputSearchChangeView]"),r=$("select[id *= MarketDay]"),f=$("input[id *= CheckBoxChangeMarket]"),n,i;$("select[id *= MarketDay]").selectmenu(),this.id.indexOf("1")>=0&&u.length===0?(n=this.id,i=this.id.replace("MarketDay","MarketMonth"),t.updateSecondDateControl(n,i)):this.id.indexOf("1")>=0&&r.length>0&&($(r[1]).is(":disabled")||(n=this.id,i=this.id.replace("MarketDay","MarketMonth"),t.updateSecondDateControl(n,i)))},t.updateMarketMonthYear2=function(){var u=$("select[id *= AvailabilitySearchInputSearchChangeView]"),r=$("select[id *= MarketMonth]"),f=$("input[id *= CheckBoxChangeMarket]"),n,i;this.id.indexOf("1")>=0&&u.length===0?(n=this.id,i=this.id.replace("MarketMonth","MarketDay"),t.updateSecondDateControl(i,n)):this.id.indexOf("1")>=0&&r.length>0&&($(r[1]).is(":disabled")||(n=this.id,i=this.id.replace("MarketMonth","MarketDay"),t.updateSecondDateControl(i,n)))},t.updateSecondDateControl=function(i,r){var h=r.replace("1","2"),f=t.getById(h),c=i.replace("1","2"),u=t.getById(c),e=t.getById(r).val(),o=t.getById(i).val(),s=e.split("-"),l=s[0],a=s[1]-1,v=new Date(l,a,o),y=new n.Class.DatePickerManager;f.attr("class")&&(f.is('[class*="Disrupted"]')||f.is('[class*="Dependent"]'))||u.attr("class")&&(u.is('[class*="Disrupted"]')||u.is('[class*="Dependent"]'))||(y.dayPopulateInterface(v,u,!1),f.val(e),u.val(o),f.change(),u.change(),$("#"+u.attr("id")+",#"+f.attr("id")).selectmenu())},t.exemptDateControls=function(){t.exemptMarketMonthDay=="true"&&(t.marketDay.length>0&&$(t.marketDay).attr("data-exempt","true"),t.marketMonthYear.length>0&&$(t.marketMonthYear).attr("data-exempt","true"))},t.setVars=function(){t.marketDate=this.getById(t.marketDateId),t.marketDateDisplay=this.getById(t.marketDateDisplayId),t.marketDay=this.getById(t.marketDayId),t.marketMonthYear=this.getById(t.marketMonthYearId)},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.exemptDateControls(),this.addEvents()},t.daysWithinHotelBookingLimit=function(n){var t=!1,i=null,r=null,u=null;return i=this.parseDate(n[0]),r=this.parseDate(n[1]),u=Math.round(Math.abs(r-i)/864e5),u<=30&&(t=!0),t},t.datesInOrder=function(n){var t=!0,i=null,r=null;return i=this.parseDate(n[0]),r=this.parseDate(n[1]),i>r&&(t=!1),t},t.datesOnlyIsEqual=function(n){var r=!0,t=null,i=null;return t=this.parseDate(n[0]),i=this.parseDate(n[1]),t.getMonth()==i.getMonth()&&t.getDate()==i.getDate()&&t.getFullYear()==i.getFullYear()&&(r=!1),r},t.datesIsEqual=function(n,t){var i=!0,r,u=null,f=new Date;return u=this.parseDate(n[0]),r=this.GetDifhours(u,f),r<=t&&(i=!1),i},t.dateNoFlights=function(n){var t=!0,i=null,r=new Date,f=new Date,u=new Date(new Date(r).setMonth(r.getMonth()+18));return i=this.parseDate(n[n.length-1]),i>u&&(t=!1),t},t.GetDifhours=function(n,t){var r=n.getDate(),u=t.getDate(),f=n.getMonth()+1,e=t.getMonth()+1,o=n.getFullYear(),s=t.getFullYear(),i;return f<=e&&o<=s&&(i=r-u+1,i=i*24),i},t},n.Class.CountryInput=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.countryInfo=n.Util.getResource().countryInfo,t.countryInputId="",t.input={},t.defaultCountry="",t.countryArray=[],t.dataExempt=!1,t.populateCountryInput=function(){var i={},r=this.countryInfo||{},t=this.defaultValue,u=r.CountryList||[];t||(t=this.defaultCountry.toLowerCase()=="none"?"":this.defaultCountry||r.DefaultValue),i={input:this.input,objectArray:u,selectedItem:t,showCode:this.showCode,dataExempt:this.dataExempt},n.Util.populate(i)},t.setVars=function(){t.input=this.getById(t.countryInputId)},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.populateCountryInput()},t},n.Class.ProvinceStateInput=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i),r=n.Util.getResource();return t.allStateArray=[],t.countryInputId="",t.countryInput={},t.provinceStateInputId="",t.stateInput={},t.defaultCountry="",t.populateStateInputHandler=function(){t.populateStateInput(this)},t.populateStateInput=function(t){for(var e={},r=this.allStateArray||[],l,i=0,o=0,h=r.length,s="",u=[],c=$(t).val(),f,i=0;i<h;i+=1)r[i]&&r[i].ccode===c&&(u[o]=r[i],o++);u.length===0&&(f=$.map(r,function(n){return n.ccode==="Other"?n:null}),f&&(u=f,s=u[0].code)),e={selectedItem:s,input:this.stateInput,objectArray:u,showCode:!1},n.Util.populate(e)},t.addEvents=function(){this.countryInput.change(this.populateStateInputHandler)},t.setVars=function(){this.stateInput=this.getById(this.provinceStateInputId),this.countryInput=this.getById(this.countryInputId)},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),$(document).ready(function(){t.countryInput.change()})},t},n.Class.TravellerInput=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i),r=n.Util.getResource();return t.checkboxContactDetailsId="",t.checkboxContactDetails=null,t.firstNameTextBoxId="",t.firstNameTextBox=null,t.middleNameTextBoxId="",t.middleNameTextBox=null,t.lastNameTextBoxId="",t.lastNameTextBox=null,t.titleDropDownListId="",t.titleDropDownList=null,t.dobDayDropDownListId="",t.dobDayDropDownList=null,t.dobMonthDropDownListId="",t.dobMonthDropDownList=null,t.dobYearDropDownListId="",t.dobYearDropDownList=null,t.docNationalityDropDownListId="",t.docNationalityDropDownList=null,t.docTypeDropDownListId="",t.docTypeDropDownList=null,t.docCountryDropDownListId="",t.docCountryDropDownList=null,t.docNumberTextBoxId="",t.docNumberTextBox=null,t.docExpDayDropDownListId="",t.docExpDayDropDownList=null,t.docExpMonthDropDownListId="",t.docExpMonthDropDownList=null,t.docExpYearDropDownListId="",t.docExpYearDropDownList=null,t.nationality="",t.firstName="",t.middleName="",t.lastName="",t.title="",t.dobDay="",t.dobMonth="",t.dobYear="",t.docType="",t.docCountry="",t.docNumber="",t.docExpDay="",t.docExpMonth="",t.docExpYear="",t.nationalityMcDropdownId="",t.nationalityMcDropdown=null,t.useMySavedDetailsTooltipId="",t.isOnLoad=!0,t.setVars=function(){t.checkboxContactDetails=this.getById(this.checkboxContactDetailsId),t.firstNameTextBox=this.getById(this.firstNameTextBoxId),t.middleNameTextBox=this.getById(this.middleNameTextBoxId),t.lastNameTextBox=this.getById(this.lastNameTextBoxId),t.titleDropDownList=this.getById(this.titleDropDownListId),t.dobDayDropDownList=this.getById(this.dobDayDropDownListId),t.dobMonthDropDownList=this.getById(this.dobMonthDropDownListId),t.dobYearDropDownList=this.getById(this.dobYearDropDownListId),t.docNationalityDropDownList=this.getById(this.docNationalityDropDownListId),t.docTypeDropDownList=this.getById(this.docTypeDropDownListId),t.docCountryDropDownList=this.getById(this.docCountryDropDownListId),t.docNumberTextBox=this.getById(this.docNumberTextBoxId),t.docExpDayDropDownList=this.getById(this.docExpDayDropDownListId),t.docExpMonthDropDownList=this.getById(this.docExpMonthDropDownListId),t.docExpYearDropDownList=this.getById(this.docExpYearDropDownListId),t.nationalityMcDropdown=this.getById(this.nationalityMcDropdownId)},t.initPopulateTravellerInput=function(){this.isOnLoad=!1},t.populateTravellerInput=function(){if(this.checkboxContactDetails.is(":checked")||this.isOnLoad){$("div").find("#getGoMembership_1").hide(),this.titleDropDownList.val(this.title).trigger("change"),this.firstNameTextBox.val(this.firstName),this.lastNameTextBox.val(this.lastName),this.dobDayDropDownList.val(this.dobDay),this.dobMonthDropDownList.val(this.dobMonth),this.dobYearDropDownList.val(this.dobYear),this.docNationalityDropDownList.val(this.nationality),this.nationalityMcDropDown!=null&&this.nationalityMcDropdown.mcDropdown().setValue(this.nationality),this.middleNameTextBox.val()=="MIDDLE NAME*"?this.middleNameTextBox.val("MIDDLE NAME*"):this.middleNameTextBox.val(this.middleName),$("#"+this.useMySavedDetailsTooltipId).find(":radio").removeAttr("checked"),$($(".passengerform")[0]).find(".hidden").removeClass("hidden");var n=$($(".passengerform")[0]).children("fieldset.special");n.length>1?(n.eq(0).removeClass("collapsed"),n.eq(1).addClass("collapsed")):n.eq(0).addClass("collapsed")}else $("div").find("#getGoMembership_1").show(),this.titleDropDownList.val(""),this.firstNameTextBox.val("GIVEN NAME*"),this.middleNameTextBox.val("MIDDLE NAME*"),this.lastNameTextBox.val("FAMILY NAME/SURNAME*"),this.dobDayDropDownList.val(""),this.dobMonthDropDownList.val(""),this.dobYearDropDownList.val(""),this.docNationalityDropDownList.val(""),this.nationalityMcDropDown!=null&&this.nationalityMcDropdown.mcDropdown().setDisplayValue(null,!0),$($(".passengerform")[0]).children("fieldset").children(".toBeHidden").addClass("hidden"),$($(".passengerform")[0]).children("fieldset.special").addClass("hidden").removeClass("expanded");this.titleDropDownList.selectmenu(),this.dobDayDropDownList.selectmenu(),this.dobMonthDropDownList.selectmenu(),this.dobYearDropDownList.selectmenu(),this.nationalityMcDropDown==null&&this.docNationalityDropDownList.selectmenu(),$(t.firstNameTextBox).trigger("blur"),$(t.lastNameTextBox).trigger("blur"),$("select.loyalty-selectmenu-disabled").selectmenu("disable")},t.populateTravellerInputHandler=function(){return t.populateTravellerInput()},t.addEvents=function(){this.checkboxContactDetails.click(this.populateTravellerInputHandler)},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.initPopulateTravellerInput()},t},n.Class.PopulatePaymentContactDetails=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.contactCheckboxId="",t.contactCheckbox=null,t.contactData={},t.cardType=null,t.contactInputs={},t.contactAddressDetailsId="",t.contactAddressDetails=null,t.defaultAddressType="",t.placeHolderCheckingHandler=function(){t.placeHolderChecking(this)},t.placeHolderChecking=function(){$("label.placeholder").siblings("input").each(function(){$.trim($(this).val())!=""?$(this).siblings("label.placeholder").hide():$(this).siblings("label.placeholder").show()})},t.populateContactDetailsHandler=function(){t.populateContactDetails(this)},t.populateContactDetails=function(n){var e=0,i="",o=!1,f=this.contactData,s={},r,u,h;if(this.contactCheckboxId?o=$(n).attr("checked"):this.contactAddressDetailsId&&(o=this.getById(this.contactAddressDetailsId).val()!="none",o&&(s=$.map(this.contactData,function(n){return n.type===t.getById(t.contactAddressDetailsId).val()?n:null}),s&&s[0]&&(f=s[0]))),o){r="";for(r in f)f.hasOwnProperty(r)&&(u=$.map(this.contactInputs,function(n){return r==="lastName"?n.inputId.indexOf("AccountHolderName")!=-1?n:null:n.inputId.toLowerCase().indexOf("_"+r.toLowerCase())!=-1?n:null}),u&&u[0]&&f[r]!=""&&(this.getById(u[0].inputId).val(f[r]),r==="country"&&this.getById(u[0].inputId).change().selectmenu(),r==="stateprov"&&this.getById(u[0].inputId).selectmenu()))}else for(h=this.contactInputs.length,e=0;e<h;e++)i=this.contactInputs[e].inputId,i.indexOf("AMT")===-1&&i.indexOf("ISSBANK")===-1&&i.indexOf("ISSBANKLOC")===-1&&i.indexOf("ACCTNO")===-1&&i.indexOf("VerificationCode")===-1&&i.indexOf("EXPDAT")===-1&&(this.getById(i).val(""),this.getById(i).focus(),this.getById(i).blur(),i.indexOf("_COUNTRY")!=-1&&$("#"+i).is("select")&&this.getById(i).change().selectmenu())},t.initDefaultAddress=function(){this.contactAddressDetailsId&&this.defaultAddressType&&$(window).load(function(){t.contactAddressDetails.val(t.defaultAddressType),t.contactAddressDetails.change().selectmenu(),$(t.contactAddressDetails).bind("change",this.populateContactDetailsHandler),$(t.contactAddressDetails).trigger("change")})},t.reorderCountryAndStatePositions=function(){var n,t,i,r,u,f,e,o,s;n=this.cardType,t="BillAddressLabelCOUNTRY"+n,r="BillAddressLabelSTATEPROV"+n,f="BillAddressCOUNTRY"+n,o="BillAddressSTATEPROV"+n,i=this.getById(t),u=this.getById(r),e=this.getById(f),s=this.getById(o),e[0]!=null&&s[0]!=null&&i[0]!=null&&u[0]!=null&&($("#"+t).remove(),$("#"+r).remove(),$("#PlaceHolderLabelSTATEPROV"+n).after(i[0].cloneNode(!0)),$("#PlaceHolderLabelCOUNTRY"+n).after(u[0].cloneNode(!0)),$("#"+f).remove(),$("#"+o).remove(),$("#PlaceHolderInputSTATEPROV"+n).after(e[0].cloneNode(!0)),$("#PlaceHolderInputCOUNTRY"+n).after(s[0].cloneNode(!0)))},t.addEvents=function(){this.contactCheckboxId.length?(this.contactCheckbox.click(this.populateContactDetailsHandler),$.browser.msie&&this.contactCheckbox.click(this.placeHolderCheckingHandler)):this.contactAddressDetailsId&&this.contactAddressDetails.change(this.populateContactDetailsHandler)},t.setVars=function(){this.contactCheckboxId?this.contactCheckbox=this.getById(this.contactCheckboxId):this.contactAddressDetailsId&&(this.contactAddressDetails=this.getById(this.contactAddressDetailsId))},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.initDefaultAddress()},t},n.Class.DateInput=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.yearStart=1900,t.yearEnd=0,t.dayCount=31,t.date=null,t.dateId="",t.dateYear=null,t.dateYearId="",t.dateYearValue="",t.dateMonth=null,t.dateMonthId="",t.dateMonthValue="",t.dateDay=null,t.dateDayId="",t.dateDayValue="",t.dateDayInfo=[],t.dateMonthInfo=[],t.dateYearInfo=[],t.useOneBasedMonth=!1,t.useTwoDigitMonth=!1,t.showNumberMonth=!1,t.defaultDayOfMonth="",t.initDateInfo=function(){for(var h=n.Util.getResource()||{},e=h.dateCultureInfo.monthNamesShort||[],i="",o=0,t=0,r=0,c=this.useOneBasedMonth,l=this.dayCount,u=this.yearStart,a=new Date,v=a.getFullYear(),f=this.yearEnd||v,y=this.dateDayInfo,p=this.dateMonthInfo,s=this.dateYearInfo,w=this.useTwoDigitMonth,b=this.showNumberMonth,t=1;t<=l;t+=1)y.push({name:t,code:t});for(o=e.length,t=0;t<o;t+=1)r=t,i=e[t],i&&(b&&(i=r,i=parseInt(i,10),i+=1,i<10&&(i="0"+i)),c&&(r=t+1),w&&r<10&&(r="0"+r),p.push({name:i,code:r}));if(f<u)for(t=f;t<=u;t+=1)s.push({name:t,code:t});else for(t=f;t>=u;t-=1)s.push({name:t,code:t})},t.initDropDown=function(t,i){var r={};r={objectArray:t,input:i,showCode:!1,clearOptions:!1,selectedItem:""},n.Util.populate(r)},t.initDropDownValues=function(){var n=null,t="",i="",r="";this.dateYearValue!==""&&this.dateMonthValue!==""&&this.dateDayValue!==""&&(n=new Date(this.dateYearValue,this.dateMonthValue-1,this.dateDayValue),n&&(t=n.getFullYear(),i=n.getMonth(),r=n.getDate(),t!==9999&&(this.dateYear.val(t),this.dateMonth.val(i),this.dateDay.val(r),this.updateDate())))},t.updateDateHandler=function(){t.updateDate()},t.updateDate=function(){var f="",r=null,u=0,t=0,i=0,e=this.defaultDayOfMonth;u=this.dateYear.val(),t=this.dateMonth.val(),i=this.dateDay.val(),i||e!=="last"||(u=parseInt(u,10),t=parseInt(t,10),i=1,r=new Date(u,t,i),this.useOneBasedMonth||r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1),i=r.getDate()),u&&t!==""&&i&&t!==null&&(u=parseInt(u,10),t=parseInt(t,10),this.useOneBasedMonth&&(t-=1),i=parseInt(i,10),r=new Date(u,t,i),f=n.Util.dateToIsoString(r)),this.date.val(f)},t.setVars=function(){this.date=this.getById(this.dateId),this.dateYear=this.getById(this.dateYearId),this.dateMonth=this.getById(this.dateMonthId),this.dateDay=this.getById(this.dateDayId)},t.addEvents=function(){this.dateYear.change(this.updateDateHandler),this.dateMonth.change(this.updateDateHandler),this.dateDay.change(this.updateDateHandler)},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.initDateInfo(),this.initDropDown(this.dateYearInfo,this.dateYear),this.initDropDown(this.dateMonthInfo,this.dateMonth),this.initDropDown(this.dateDayInfo,this.dateDay),this.initDropDownValues(),this.addEvents()},t},n.Class.FlightTypeInput=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.flightSearch=null,t.index=-1,t.flightTypeId="",t.hideInputIdArray=[],t.hideInputArray=[],t.input={},resetStationFields=function(){$("select[id$='originStation1']").val(""),$("select[id$='destinationStation1']").val(""),$("select[id$='originStation2']").val(""),$("select[id$='destinationStation2']").val(""),$("input#input_originStationContainerCategory1").val("From"),$("input#input_destinationStationContainerCategory1").val("To"),$("input#input_originStationContainerCategory2").val("From"),$("input#input_destinationStationContainerCategory2").val("To")},t.updateFlightTypeHandler=function(){t.flightSearch.updateFlightType(t);var u=$("select[id$='originStation2']"),f=$("select[id$='destinationStation2']"),i=u||null,r=f||null;this.value==="OpenJaw"&&i&&r?(n.Util.setRequiredAttribute($(i),"ENTER <b>RETURN ORIGIN<\/b>."),n.Util.setRequiredAttribute($(r),"ENTER <b>RETURN DESTINATION<\/b>."),$("#restrictedTravelVoucherBookingStations").length<=0&&resetStationFields()):(n.Util.removeRequiredAttribute($(i)),n.Util.removeRequiredAttribute($(r)))},t.addEvents=function(){i.addEvents.call(this),this.input.click(this.updateFlightTypeHandler)},t.setVars=function(){var f;i.setVars.call(this);var n=0,r=null,u=[];for(t.input=this.getById(this.flightTypeId),f=this.hideInputIdArray.length,n=0;n<f;n+=1)r=t.getById(this.hideInputIdArray[n]),r&&(u[u.length]=r);t.hideInputArray=$(u)},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t},n.Class.ControlGroupBookingRetrieve=function(){var f=new n.Class.ControlGroup,t=n.Util.extendObject(f);t.bookingRetrieve=null;var e=[],s=[],h=[],c=[],l=[],o=[],i=$("a.retrieveHeaderCollapsed"),r=$("a.retrieveTextExpanded"),u=$("a.retrieveShowLessCollapsed");return t.init=function(f){this.setSettingsByObject(f),thisObject=this;var e=new n.Class.BookingRetrieve;e.init(f),t.bookingRetrieve=e,t.marketInputMegaDropDownIdArray=this.bookingRetrieve.marketArray[0].marketInputMegaDropDownIdArray,this.setVars(),this.addEvents(),this.initMarketInputMegaDropDownIdArray(),i.each(function(n){$(this).click(function(){thisObject.collapseExpand(n)})}),r.each(function(n){$(this).click(function(){thisObject.collapseExpand(n)})}),u.each(function(n){$(this).click(function(){thisObject.collapseExpand(n)})})},t.collapseExpand=function(n){var t=$($("table.manageBooking")[n]);t&&t.is(":hidden")?(t.show(),$(i[n]).removeClass("retrieveHeaderExpanded"),$(i[n]).addClass("retrieveHeaderCollapsed"),$(r[n]).removeClass("retrieveTextExpanded"),$(r[n]).addClass("retrieveTextCollapsed"),$(u[n]).removeClass("retrieveShowLessExpanded"),$(u[n]).addClass("retrieveShowLessCollapsed"),$("#ControlGroupCheckInRetrievalView_BookingRetrieveInputCheckInRetrievalView_LinkButtonRetrieve").show(),$("#ControlGroupViewItineraryRetrievalView_BookingRetrieveInputViewItineraryRetrievalView_LinkButtonRetrieve").show(),$("#ControlGroupChangeFlightRetrievalView_BookingRetrieveInputChangeFlightRetrievalView_LinkButtonRetrieve").show(),$("#ControlGroupCancelFlightRetrievalView_BookingRetrieveInputCancelFlightRetrievalView_LinkButtonRetrieve").show(),$("#ControlGroupAddInfantRetrievalView_BookingRetrieveInputAddInfantRetrievalView_LinkButtonRetrieve").show(),$("#ControlGroupPayNowRetrievalView_BookingRetrieveInputPayNowRetrievalView_LinkButtonRetrieve").show(),$("#ControlGroupBaggageRetrievalView_BookingRetrieveInputBaggageRetrievalView_LinkButtonRetrieve").show(),$("#ControlGroupSeatMapRetrievalView_BookingRetrieveInputSeatMapRetrievalView_LinkButtonRetrieve").show(),$("#ControlGroupInsuranceRetrievalView_BookingRetrieveInputInsuranceRetrievalView_LinkButtonRetrieve").show(),$("#ControlGroupMealsRetrievalView_BookingRetrieveInputMealsRetrievalView_LinkButtonRetrieve").show(),$("#ControlGroupSportsEquipmentRetrievalView_BookingRetrieveInputSportsEquipmentRetrievalView_LinkButtonRetrieve").show()):t&&!t.is(":hidden")&&(t.hide(),$(i[n]).removeClass("retrieveHeaderCollapsed"),$(i[n]).addClass("retrieveHeaderExpanded"),$(r[n]).removeClass("retrieveTextCollapsed"),$(r[n]).addClass("retrieveTextExpanded"),$(u[n]).removeClass("retrieveShowLessCollapsed"),$(u[n]).addClass("retrieveShowLessExpanded"),$("#ControlGroupCheckInRetrievalView_BookingRetrieveInputCheckInRetrievalView_LinkButtonRetrieve").hide(),$("#ControlGroupViewItineraryRetrievalView_BookingRetrieveInputViewItineraryRetrievalView_LinkButtonRetrieve").hide(),$("#ControlGroupChangeFlightRetrievalView_BookingRetrieveInputChangeFlightRetrievalView_LinkButtonRetrieve").hide(),$("#ControlGroupCancelFlightRetrievalView_BookingRetrieveInputCancelFlightRetrievalView_LinkButtonRetrieve").hide(),$("#ControlGroupAddInfantRetrievalView_BookingRetrieveInputAddInfantRetrievalView_LinkButtonRetrieve").hide(),$("#ControlGroupPayNowRetrievalView_BookingRetrieveInputPayNowRetrievalView_LinkButtonRetrieve").hide(),$("#ControlGroupBaggageRetrievalView_BookingRetrieveInputBaggageRetrievalView_LinkButtonRetrieve").hide(),$("#ControlGroupSeatMapRetrievalView_BookingRetrieveInputSeatMapRetrievalView_LinkButtonRetrieve").hide(),$("#ControlGroupInsuranceRetrievalView_BookingRetrieveInputInsuranceRetrievalView_LinkButtonRetrieve").hide(),$("#ControlGroupMealsRetrievalView_BookingRetrieveInputMealsRetrievalView_LinkButtonRetrieve").hide(),$("#ControlGroupSportsEquipmentRetrievalView_BookingRetrieveInputSportsEquipmentRetrievalView_LinkButtonRetrieve").hide())},t.validateHandler=function(){return t.validate()},t.validate=function(){var n=!1,t=this.bookingRetrieve;return n=t.isOneSectionPopulated(),n&&(n=f.validate.call(this)),n},t.initMarketInputMegaDropDownIdArray=function(){var t=0,r=null,i={},u=this.marketInputMegaDropDownIdArray||[];for(marketMegaInputIdArrayNext=this.marketInputMegaDropDownIdArrayNext||[],t=0;t<u.length;t+=1)r=u[t],i=new n.Class.MarketMegaDropDownInput,i.init(r),o[e.length]=i},t},n.Util.BookingRetrieveMegaDropdownEvent=function(n){var t=$(n).closest("div#retrieveMcDropDownHidden").find("select");t.val($(n).val()),t.trigger("change").selectmenu()},n.Class.BookingRetrieve=function(){var i=new n.Class.FlightSearch,t=n.Util.extendObject(i);return t.marketArray=[],t.missingInformation="",t.sectionValidation={},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setVars=function(){i.setVars.call(this);var n=0,e=0,t=this.sectionValidation,r=[],u="",f=null;for(u in t)if(t.hasOwnProperty(u))for(r=t[u]||[],e=r.length,n=0;n<e;n+=1)f=r[n],f.input=this.getById(f.id)},t.isOneSectionPopulated=function(){var t=0,s=0,i=this.sectionValidation,r=[],u="",h=null,f=null,e=!1,n="",c="",o=!0;for(u in i)if(i.hasOwnProperty(u)){for(r=i[u]||[],s=r.length,o=!0,t=0;t<s;t+=1)if(h=r[t],f=h.input[0],f&&(n=f.value,c=n.requiredempty||"",n===c&&(n=""),!n)){o=!1;break}if(o){e=!0;break}}return e||alert(this.missingInformation),e},t},n.Class.MarketInput=function(){var r=new n.Class.SkySales,t=n.Util.extendObject(r),i=n.Util.getResource()||{};return t.marketHash=i.marketHash,t.stationHash=i.stationInfo.StationList||[],t.containerId="",t.originText="",t.destinationText="",t.container=null,t.disableInputId="",t.disableInput=null,t.originId="",t.origin=null,t.destinationId="",t.destination=null,t.toggleMarketCount=0,t.toggleMarketHandler=function(){t.toggleMarket()},t.useComboBox=function(n){var t=!0;return n&&n.get(0)&&n.get(0).options&&(t=!1),t},t.toggleMarket=function(){if(t.toggleMarketCount%2==0)$(":input",t.container).attr("disabled","disabled");else{$(":input",t.container).removeAttr("disabled");var i=this.originId[this.originId.length-1],n=parseInt(i);n!=null&&marketJSON.Station!=null&&marketJSON.Station[n-1]!=null&&marketJSON.Station[n-1].IsReroutable=="False"&&$("div.mcdropdown input.inputChangeFlight",t.container).attr("disabled","disabled")}t.toggleMarketCount+=1},t.updateMarketOriginHandler=function(){var n=$(this).val(),i=$("input[id *= BookingRetrieveInputRetrieveBookingView]");i.length===0&&t.updateMarketOrigin(n)},t.updateMarketOrigin=function(i){var r=[],e={},u=null,o=!0,h=$("input[id *= BookingRetrieveInputRetrieveBookingView]"),s,f;i=i.toUpperCase(),r=this.marketHash[i],r=r||[],h.length>0?(e={input:this.destination,objectArray:r,showCode:!0},n.Util.populate(e),this.destination.change()):(o=t.useComboBox(t.destination),o?(u={input:t.destination,options:r},n.Class.DropDown.getDropDown(u)):(u={selectBox:t.destination,objectArray:r,showCode:!1},s=u.selectBox||null,f=null,f=s.get(0),thisID=f.id,thisID.substring(thisID.length-1,thisID.length-14)=="originStation"||thisID.substring(thisID.length-1,thisID.length-19)=="destinationStation"?(n.Util.populateSelectOriDestSattion(u,t.originText,t.destinationText),$("#"+thisID).selectmenu()):n.Util.populateSelect(u)))},t.addEvents=function(){this.origin.change(this.updateMarketOriginHandler),this.disableInput.click(this.toggleMarketHandler)},t.setVars=function(){t.container=this.getById(this.containerId),t.disableInput=this.getById(this.disableInputId),t.origin=this.getById(this.originId),t.destination=this.getById(this.destinationId),t.originText=$("div[id *= originText]").eq(0).innerHTML,t.destinationText=$("div[id *= destinationText]").eq(0).innerHTML},t.populateMarketInput=function(i){var s=$("input[id *= BookingRetrieveInputRetrieveBookingView]"),u,f,r,o,e;s.length>0?(u={},u={input:i,objectArray:this.stationHash,showCode:!0},n.Util.populate(u)):(f=!0,r={},i&&i.length>0&&(f=t.useComboBox(i),f?(r={input:i,options:t.stationHash},n.Class.DropDown.getDropDown(r)):(r={selectBox:i,objectArray:t.stationHash,showCode:!1},o=r.selectBox||null,e=null,e=o.get(0),thisID=e.id,thisID.substring(thisID.length-1,thisID.length-14)=="originStation"||thisID.substring(thisID.length-1,thisID.length-19)=="destinationStation"?n.Util.populateSelectOriDestSattion(r,t.originText,t.destinationText):n.Util.populateSelect(r))))},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.populateMarketInput(this.origin),this.populateMarketInput(this.destination),this.disableInput.click(),this.disableInput.removeAttr("checked")},t},n.Class.HotelLocationMegaDropDownInput=function(){var r=new n.Class.SkySales,t=n.Util.extendObject(r),i=n.Util.getResource()||{};return t.marketHash=i.marketHash,t.stationHash=i.stationInfo.StationList||[],t.countryHash=i.countryInfo.CountryList||[],t.destinationTextBoxContainerId="",t.destinationTextBoxContainer=null,t.destinationStationInputId="",t.destinationStationInput=null,t.destinationStationSelectId="",t.destinationStationSelect=null,t.maxRows=18,t.minColumn=3,t.valueAttr="val",t.noHotelLocationResultLabel="",t.initialHotelLocationLabel="",t.init=function(n){r.init.call(this,n),this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.populateHotelLocationMegaInput(this.destination,this.destinationStationInputId,this.destinationTextBoxContainer,this.stationHash,!0)},t.setVars=function(){t.destinationTextBoxContainer=this.getById(this.destinationTextBoxContainerId),t.destinationStationInput=this.getById(this.destinationStationInputId),t.destinationStationSelect=this.getById(this.destinationStationSelectId)},t.populateHotelLocationMegaInput=function(n,i,r,u,f){var s=u||t.stationHash,h=t.countryHash,l,e,o;if(destinationSelectedHandler=function(n,i){var f=t.getById(t.destinationStationInputId),e=f.mcDropdown();t.updateStationInput(r,i,n),e.closeMenu()},destinationShowHandler=function(n){var f=t.getById(t.destinationStationInputId),u=f.mcDropdown();u.isListVisible()?u.closeMenu():u.openHandler(n)},destinationClearValueHandler=function(){var n=$("#"+t.destinationStationInputId).mcDropdown();n.getValue()[0]==""&&n.getValue()[1]==t.initialHotelLocationLabel&&$(t.destinationStationSelect).val(""),t.destinationStationSelect.blur()},options={select:destinationSelectedHandler,blur:destinationClearValueHandler,inputClass:"mcdropdown",valueAttr:t.valueAttr,maxRows:t.maxRows,noSearchResultLabel:t.noHotelLocationResultLabel,defaultInitLabel:t.initialHotelLocationLabel,displayCode:!0,subStringEnabled:!0,showSeparator:!0,linkClicked:destinationShowHandler,keyPressSelect:!0},f){var e=t.getById(i),a=e.mcDropdown(n,options,h,s),c=r.val();e.parent().addClass("hotelLocationMcDropDownContainer"),e.addClass("hotelLocationInputContainer"),c&&(l=t.getById(i).mcDropdown(),l.setValue(c,!0))}else e=t.getById(i),o=e.mcDropdown(),o&&o.updateList(h,s,!0)},t.updateStationInput=function(n,t,i){var r=$(n);n&&n.length>0&&r.val(i).change()},t},n.Class.MarketMegaDropDownInput=function(){var r=new n.Class.SkySales,t=n.Util.extendObject(r),i=n.Util.getResource()||{};return t.marketHash=i.marketHash,t.stationHash=i.stationInfo.StationList||[],t.countryHash=i.countryInfo.CountryList||[],t.originTextBoxContainerId="",t.originTextBoxContainer=null,t.destinationTextBoxContainerId="",t.destinationTextBoxContainer=null,t.originStationInputId="",t.originStationInput=null,t.destinationStationInputId="",t.destinationStationInput=null,t.originStationSelectId="",t.originStationSelect=null,t.destinationStationSelectId="",t.destinationStationSelect=null,t.dateDisplayId="",t.dateDisplay=null,t.flightTypeDivContainerId="",t.isBookingRetrieve="",t.maxRows=18,t.minColumn=3,t.valueAttr="val",t.noSearchResultLabel="",t.initialFromSearchLabel="",t.initialToSearchLabel="",t.init=function(n){r.init.call(this,n),this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.populateMarketMegaInput(this.origin,this.originStationInputId,this.originTextBoxContainer,this.stationHash,!0,!0),this.populateMarketMegaInput(this.destination,this.destinationStationInputId,this.destinationTextBoxContainer,this.stationHash,!1,!0),this.megaDropDownStationAddEvents()},t.setVars=function(){t.originTextBoxContainer=this.getById(this.originTextBoxContainerId),t.destinationTextBoxContainer=this.getById(this.destinationTextBoxContainerId),t.originStationInput=this.getById(this.originStationInputId),t.destinationStationInput=this.getById(this.destinationStationInputId),t.originStationSelect=this.getById(this.originStationSelectId),t.destinationStationSelect=this.getById(this.destinationStationSelectId),t.dateDisplay=$("[id^='"+this.dateDisplayId+"']")},t.megaDropDownStationAddEvents=function(){$($("#"+this.originStationInputId).siblings("input")[0]).bind("blur",function(){hideErrorDiv(this)}),$($("#"+this.destinationStationInputId).siblings("input")[0]).bind("blur",function(){hideErrorDiv(this)})},t.populateMarketMegaInput=function(n,i,r,u,f,e){var h=u||t.stationHash,c=t.countryHash,v=function(n,i){var e=t.getById(t.destinationStationInputId),f=e.mcDropdown();t.updateStationInput(r,i,n),n&&(t.updateDestinationDropdown(n),t.originStationSelect.blur()),f.clearSelection(),f.openHandler()},y=function(n){var f=t.getById(t.originStationInputId),u=f.mcDropdown();u.isListVisible()?u.closeMenu():u.openHandler(n)},p=function(n,i){var f=t.getById(t.destinationStationInputId),e=f.mcDropdown();t.updateStationInput(r,i,n),e.closeMenu(),n&&i&&t.dateDisplay&&t.dateDisplay.length>0&&(t.openNextControlHandler(t.destinationStationInputId),t.destinationStationSelect.blur())},w=function(n){var f=t.getById(t.destinationStationInputId),u=f.mcDropdown();u.isListVisible()?u.closeMenu():u.openHandler(n)},b=function(){var n=$("#"+t.originStationInputId).mcDropdown();n.getValue()[0]==""&&n.getValue()[1]==t.initialFromSearchLabel&&$(t.originStationSelect).val(""),t.originStationSelect.blur()},k=function(){var n=$("#"+t.destinationStationInputId).mcDropdown();n.getValue()[0]==""&&n.getValue()[1]==t.initialToSearchLabel&&$(t.destinationStationSelect).val(""),t.destinationStationSelect.blur()},d={select:f?v:p,blur:f?b:k,inputClass:t.isBookingRetrieve&&t.isBookingRetrieve=="true"?"retrieveMcdropdown":"mcdropdown",valueAttr:t.valueAttr,maxRows:t.maxRows,noSearchResultLabel:t.noSearchResultLabel,defaultInitLabel:f?t.initialFromSearchLabel:t.initialToSearchLabel,displayCode:!0,subStringEnabled:!0,showSeparator:!0,linkClicked:f?y:w,keyPressSelect:f?null:!0},a,o,s;if(e){var o=t.getById(i),g=o.mcDropdown(n,d,c,h),l=r.val();l&&(a=t.getById(i).mcDropdown(),a.setValue(l,!0))}else o=t.getById(i),s=o.mcDropdown(),s&&s.updateList(c,h,!0)},t.updateStationInput=function(n,t,i){var r=$(n);n&&n.length>0&&r.val(i).change()},t.updateDestinationDropdown=function(n){var i=t.marketHash[n];t.populateMarketMegaInput(t.destination,t.destinationStationInputId,t.destinationTextBoxContainer,i,!1,!1)},t.openNextControlHandler=function(n){var i=$("#"+t.flightTypeDivContainerId+" input[type='radio']:checked"),r=i.val()?i.val().toLowerCase():"";n.indexOf("2")>0&&r=="openjaw"?t.dateDisplay[1].click():t.dateDisplay[0].click()},t},n.Class.StationInput=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.stationInputId="",t.stationInput=null,t.setVars=function(){i.setVars.call(this),t.stationInput=this.getById(this.stationInputId)},t.init=function(n){i.init.call(this,n),this.addEvents()},t},n.Class.StationDropDown=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.selectBoxId="",t.selectBox=null,t.inputId="",t.input=null,t.updateStationDropDown=function(){var n=$(this).val(),i=$("input[id *= BookingRetrieveInputRetrieveBookingView]");n&&i.length===0&&t.selectBox.val(n)},t.updateStationInput=function(){var n=$(this).val();t.input.val(n),t.input.change(),n==""&&(this.options[0].selected=1)},t.addEvents=function(){t.input.change(t.updateStationDropDown),t.selectBox.change(t.updateStationInput)},t.setVars=function(){t.selectBox=this.getById(t.selectBoxId),t.input=this.getById(t.inputId)},t.init=function(n){i.init.call(this,n),this.addEvents(),t.input.change()},t},n.Class.TravelDocumentInput=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.travelDocumentInfoId="",t.travelDocumentInfo=null,t.instanceName="",t.delimiter="_",t.documentTypeId="",t.documentType=null,t.documentNumberId="",t.documentNumber=null,t.documentIssuingCountryId="",t.documentIssuingCountry=null,t.documentBirthCountryId="",t.documentBirthCountry=null,t.documentExpYearId="",t.documentExpYear=null,t.documentExpMonthId="",t.documentExpMonth=null,t.documentExpDayId="",t.documentExpDay=null,t.actionId="",t.action=null,t.travelDocumentKey="",t.missingDocumentText="",t.missingDocumentTypeText="",t.invalidExpDateText="",t.emptyExpDateText="",t.invalidDaysOfMonthTextPre="",t.invalidDaysOfMonthTextMid="",t.invalidDaysOfMonthTextPost="",t.missingDocumentNumberText="",t.missingDocumentCountryText="",t.travelDocumentKey="",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setVars=function(){t.travelDocumentInfo=this.getById(this.travelDocumentInfoId),t.documentType=this.getById(this.documentTypeId),t.documentNumber=this.getById(this.documentNumberId),t.documentIssuingCountry=this.getById(this.documentIssuingCountryId),t.documentBirthCountry=this.getById(this.documentBirthCountryId),t.documentExpYear=this.getById(this.documentExpYearId),t.documentExpMonth=this.getById(this.documentExpMonthId),t.documentExpDay=this.getById(this.documentExpDayId),t.action=this.getById(this.actionId)},t.setTravelDocumentInfo=function(){var n="",t=this.documentType.val(),i=this.documentNumber.val(),r=this.documentIssuingCountry.val(),u=this.documentBirthCountry.val();return t&&i&&r&&documentCountryOfBirth&&(n=t+this.delimiter+i+this.delimiter+r+this.delimiter+u,this.travelDocumentInfo.val(n)),!0},t.validateTravelDocumentHandler=function(){return t.validateTravelDocument()},t.validateTravelDocument=function(){this.setTravelDocumentInfo();var t=this.action[0];return n.Util.validate(t)&&this.validateInput()},t.addEvents=function(){this.action.click(this.validateTravelDocumentHandler)},t.validateInput=function(){var f=!0,n="",u="",e=this.documentNumber.val()||"",i=this.documentExpYear.val()||"",r=this.documentExpMonth.val()||"",t=this.documentExpDay.val()||"",o=this.documentType.val()||"",s=this.documentIssuingCountry.val()||"",h=!1,c=!1,l="";return(e||o||s||i||r||t)&&(e||(n=n+this.missingDocumentNumberText+"\n"),o||(n=n+this.missingDocumentTypeText+"\n"),s||(n=n+this.missingDocumentCountryText+"\n"),c=this.checkDaysOfMonth(t,r,i),h=this.isPastDate(t,r,i),t&&r&&i?c?h||(n=n+this.invalidExpDateText+"\n"):(l=this.documentExpMonth.find(":selected").text(),u=this.invalidDaysOfMonthTextPre+t,u+=this.invalidDaysOfMonthTextMid+l+this.invalidDaysOfMonthTextPost,n=n+u+"\n"):n=n+this.emptyExpDateText+"\n",n&&(window.alert(this.missingDocumentText+"\n"+n),f=!1)),f},t.checkDaysOfMonth=function(n,t,i){i=window.parseInt(i,10),t=window.parseInt(t,10),n=window.parseInt(n,10);var u=!1,r=null,f=-1,e=null;return i&&t&&n&&(t-=1,r=new Date,r.setMonth(2),r.setDate(1),r.setDate(r.getDate()-1),f=r.getDate(),e=[31,f,31,30,31,30,31,31,30,31,30,31],n<=e[t]&&(u=!0)),u},t.isPastDate=function(n,t,i){i=window.parseInt(i,10),t=window.parseInt(t,10),n=window.parseInt(n,10);var r=!1,u=null,f=null;return i&&t&&n&&(t-=1,u=new Date,f=new Date(i,t,n),f>u&&(r=!0)),r},t},n.Class.ControlGroup=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.actionId="SkySales",t.action=null,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setVars=function(){i.setVars.call(this),t.action=this.getById(this.actionId)},t.addEvents=function(){i.addEvents.call(this),this.action.click(this.validateHandler)},t.validateHandler=function(){return t.validate()},t.validate=function(){var r=this.action[0],t=n.Util.validate(r),u=$("#CONTROLGROUPAGENTGUEST_ButtonSubmit"),i=$("#errorDivBorder");return t||u===undefined||i.text().trim().length===0||i.hide(),t},t},n.Class.ControlGroupRegister=function(){var i=new n.Class.ControlGroup,t=n.Util.extendObject(i);return t.travelDocumentInput=null,t.setSettingsByObject=function(r){i.setSettingsByObject.call(this,r);var u=new n.Class.TravelDocumentInput;u.init(this.travelDocumentInput),t.travelDocumentInput=u},t.validateHandler=function(){return t.validate()},t.validate=function(){var n=!1;return n=this.travelDocumentInput.setTravelDocumentInfo(),n&&(n=i.validate.call(this)),n},t},n.Class.PersonInput=function(){var r=new n.Class.SkySales,t=n.Util.extendObject(r),i=n.Util.getResource();return t.countryInputId="",t.countryInput=null,t.stateInputId="",t.stateInput=null,t.emptyStateSelect="",t.defaultProvinceStateCode="",t.defaultCountryCode="",t.countryStateHash=null,t.clientHash=i.clientHash,t.countryArray=i.countryInfo.CountryList,t.allStateArray=i.provinceStateInfo.ProvinceStateList,t.enableSeatLocation=!1,t.seatLocationInputId="",t.seatLocationInput=null,t.seatLocationHiddenFieldId="",t.seatLocationHiddenField=null,t.seatTypeInputId="",t.seatTypeInput=null,t.seatTypeArray=[],t.seatLocationArray=[],t.defaultSeatLocation="",t.defaultSeatType="",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.initCountryInput(),this.initStateInput(),this.initializeSeatPreferences()},t.initCountryInput=function(){var t={},i=this.countryArray||[];t={selectedItem:this.defaultCountryCode,input:this.countryInput,objectArray:i,showCode:!1},n.Util.populate(t)},t.initStateInput=function(){var u={},r=this.allStateArray||[],t,i=0,e=r.length,f=this.defaultCountryCode+"|"+this.defaultProvinceStateCode;for(this.defaultProvinceStateCode.indexOf("|")>-1&&(f=this.defaultProvinceStateCode),i=0;i<e;i+=1)t=r[i],t.code=t.ccode+"|"+t.scode;u={selectedItem:f,input:this.stateInput,objectArray:r,showCode:!1},n.Util.populate(u)},t.getCountryStateHash=function(){for(var i=0,n=0,t=[],r=null,u=null,f={},h=0,e=0,o=this.countryArray,s=this.allStateArray,h=o.length,i=0;i<h;i+=1){for(u=o[i],t=[],t.push({name:this.emptyStateSelect,code:"",ccode:"",scode:""}),e=s.length,n=0;n<e;n+=1)r=s[n],r.ccode===u.code&&t.push(r);f[u.code]=t}return f},t.updateCountryHandler=function(){t.updateCountry()},t.updateCountry=function(){var i=this.stateInput.val(),n=i.split("|"),t="";n.length===2&&(t=n[0],this.countryInput.val(t))},t.updateStateHandler=function(){t.updateState()},t.updateState=function(){var o=this.countryInput.val(),t=[],u={},r=[],i=0,f=0,s=this.getCountryStateHash(),e={};for(t=s[o],t=t||[],t.length===0&&(r.push({name:this.emptyStateSelect,code:"",ccode:"",scode:""}),t=this.allStateArray),f=t.length,i=0;i<f;i+=1)u=t[i],r.push(u);e={objectArray:r,input:this.stateInput,showCode:!1,clearOptions:!0},n.Util.populate(e)},t.addEvents=function(){this.countryInput.ready(this.disableDOB),this.countryInput.change(this.updateStateHandler),this.stateInput.change(this.updateCountryHandler),this.seatLocationInput.change(this.updateSeatLocationHiddenHandler)},t.disableDOB=function(){var n=$(".disabled select").selectmenu();n.selectmenu("disable")},t.updateSeatLocationHiddenHandler=function(){t.updateSeatLocationHidden()},t.updateSeatLocationHidden=function(){var n=this.seatLocationInput||{},t=n.val(),i=this.seatLocationHiddenField||{};i.val(t)},t.setVars=function(){t.countryInput=this.getById(this.countryInputId),t.stateInput=this.getById(this.stateInputId),t.seatLocationHiddenField=this.getById(this.seatLocationHiddenFieldId),t.seatLocationInput=this.getById(this.seatLocationInputId),t.seatTypeInput=this.getById(this.seatTypeInputId)},t.populateSeatDropDowns=function(){var t={},i={};t={selectBox:this.seatTypeInput,objectArray:this.seatTypeArray,selectedItem:this.defaultSeatType},n.Util.populateSelect(t),i={selectBox:this.seatLocationInput,objectArray:this.seatLocationArray,selectedItem:this.defaultSeatLocation},n.Util.populateSelect(i)},t.updateSeatLocationDropDownList=function(){var t=this.enableSeatLocation||!1,n=this.seatLocationInput||{};t?n.removeAttr("disabled"):n.attr("disabled","disabled")},t.initializeSeatPreferences=function(){this.populateSeatDropDowns(),this.updateSeatLocationDropDownList(),this.updateSeatLocationHidden()},t},n.Class.AgencyInput=function(){var i=new n.Class.PersonInput,t=n.Util.extendObject(i);return t.updateCountryHandler=function(){t.updateCountry()},t.updateStateHandler=function(){t.updateState()},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.initCountryInput(),this.initStateInput()},t},n.Class.ContactInput=function(){var i=new n.Class.PersonInput,t=n.Util.extendObject(i);return t.clientId="",t.keyIdArray=[],t.keyArray=[],t.clientStoreIdHash=null,t.imContactId="",t.imContact=null,t.currentContactData={},t.logOutButton=null,t.clientHash=n.Util.getResource().clientHash,t.clearCurrentContactHandler=function(){t.clearCurrentContact()},t.clearCurrentContact=function(){var n=this.clientId;this.getById(n+"_DropDownListTitle").val(""),this.getById(n+"_TextBoxFirstName").val(""),this.getById(n+"_TextBoxMiddleName").val(""),this.getById(n+"_TextBoxLastName").val(""),this.getById(n+"_TextBoxAddressLine1").val(""),this.getById(n+"_TextBoxAddressLine2").val(""),this.getById(n+"_TextBoxAddressLine3").val(""),this.getById(n+"_TextBoxCity").val(""),this.getById(n+"_DropDownListStateProvince").val(""),this.getById(n+"_DropDownListCountry").val(""),this.getById(n+"_TextBoxPostalCode").val(""),this.getById(n+"_TextBoxHomePhone").val(""),this.getById(n+"_TextBoxWorkPhone").val(""),this.getById(n+"_TextBoxOtherPhone").val(""),this.getById(n+"_TextBoxFax").val(""),this.getById(n+"_TextBoxEmailAddress").val("")},t.initHelpInfoDisplay=function(){$("#helpPhoneImage").tooltip({items:"img",position:{my:"center top+10",at:"center bottom",using:function(n,t){$(this).css(n),$("div").tooltip({tooltipClass:"custom-tooltip-styling"}),$("<div>").addClass("arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}},content:function(){var t=$(this),n;if(t.is("img"))return n=$(this).parent().children("span.tooltipHidden").find("div"),$(n).html()}})},t.populateCurrentContactHandler=function(){t.populateCurrentContact()},t.populateCurrentContact=function(){this.currentContactData&&(this.imContact.attr("checked")===!0?this.populateContactFields():this.clearCurrentContact())},t.populateContactFields=function(){var t=this.clientId,n=this.currentContactData;this.getById(t+"_DropDownListTitle").val(n.title),this.getById(t+"_TextBoxFirstName").val(n.firstName),this.getById(t+"_TextBoxMiddleName").val(n.middleName),this.getById(t+"_TextBoxLastName").val(n.lastName),this.getById(t+"_TextBoxAddressLine1").val(n.streetAddressOne),this.getById(t+"_TextBoxAddressLine2").val(n.streetAddressTwo),this.getById(t+"_TextBoxAddressLine3").val(n.streetAddressThree),this.getById(t+"_TextBoxCity").val(n.city),this.getById(t+"_DropDownListStateProvince").val(n.country+"|"+n.stateProvince),this.getById(t+"_DropDownListCountry").val(n.country),this.getById(t+"_TextBoxPostalCode").val(n.postalCode),this.getById(t+"_TextBoxHomePhone").val(n.eveningPhone),this.getById(t+"_TextBoxWorkPhone").val(n.dayPhone),this.getById(t+"_TextBoxOtherPhone").val(n.mobilePhone),this.getById(t+"_TextBoxFax").val(n.faxPhone),this.getById(t+"_TextBoxEmailAddress").val(n.email)},t.updateCountryHandler=function(){t.updateCountry()},t.updateStateHandler=function(){t.updateState()},t.getKey=function(){for(var i=0,r=t.keyArray,u=null,n="",i=0;i<r.length;i+=1)u=r[i],n+=u.val();return n=this.clientId+"_"+n.toLowerCase()},t.populateClientStoreIdHash=function(){var f=t.clientHash,r=0,o="",e=[],i="",u=-1,n=this.getKey(),s=null;if(t.clientStoreIdHash={},n&&f&&f[n])for(t.clientStoreIdHash=t.clientStoreIdHash||{},o=f[n],e=o.split("&"),keyValueArrayLength=e.length,r=0;r<keyValueArrayLength;r+=1)i=e[r],u=i.indexOf("="),u>-1&&(n=i.substring(0,u),s=i.substring(u+1,i.length),n&&(t.clientStoreIdHash[n]=s))},t.autoPopulateFormHandler=function(){t.autoPopulateForm()},t.autoPopulateForm=function(){var i=t.clientStoreIdHash,n="",r="";this.populateClientStoreIdHash();for(n in i)i.hasOwnProperty(n)&&(r=i[n],this.getById(n).val(r))},t.addEvents=function(){var n=0,t=this.keyArray,r=null,u=t.length;for(i.addEvents.call(this),n=0;n<t.length;n+=1)r=t[n],r.change(this.autoPopulateFormHandler);this.imContact.click(this.populateCurrentContactHandler),this.logOutButton.click(this.clearCurrentContactHandler)},t.setVars=function(){var n=0,r=this.keyIdArray,u=this.keyArray,f="";for(i.setVars.call(this),n=0;n<r.length;n+=1)f=r[n],u[u.length]=this.getById(f);t.imContact=this.getById(t.imContactId),t.logOutButton=this.getById("MemberLoginContactView_ButtonLogOut")},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.initCountryInput(),this.initStateInput(),t.initHelpInfoDisplay()},t},n.Class.FillGuestNames=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i),r=n.Util.getResource()||{};return t.firstNameField="",t.lastNameField="",t.passengerIndex=0,t.passengerNameFields=[],t.firstNamePlaceHolder="",t.lastNamePlaceHolder="",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.initializeFields()},t.initializeFields=function(){this.passengerNameFields.each(function(){$(this).trigger("blur")})},t.addEvents=function(){this.passengerNameFields=$("#"+t.firstNameField+",#"+t.lastNameField),this.passengerNameFields.each(function(){$(this).blur(function(){t.copyOverNames($("#"+t.firstNameField).val(),$("#"+t.lastNameField).val())})})},t.copyOverNames=function(n,i){n.indexOf(this.firstNamePlaceHolder)==-1&&i.indexOf(this.lastNamePlaceHolder)==-1&&n!=""&&i!=""?($(".paxName_"+t.passengerIndex).each(function(){$(this).text(i+", "+n)}),$(".paxNameSF_"+t.passengerIndex).each(function(){$(this).text(i+", "+n)})):($(".paxName_"+t.passengerIndex).each(function(){$(this).hasClass("existingPaxs")?$(this).text(""):$(this).text("GUEST "+(t.passengerIndex+1))}),$(".paxNameSF_"+t.passengerIndex).each(function(){$(this).hasClass("existingPaxs")?$(this).text(""):$(this).text("GUEST "+(t.passengerIndex+1))}))},t},n.Class.SetValidationForPager=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.init=function(){this.addEvents()},t.addEvents=function(){$(".paxPagerContainer").find("a").click(function(){var t;n.ExpandPassengerFieldsOnValidate();for(var i=$("div.passengerform").find("input,select"),r=null,t=0,u=new n.Validate(null,"","",null),f=i.length,t=0;t<f;t+=1)r=i[t],u.checkBirthdate(r),u.validateSingleElement(r);if(i.filter(function(){return $(this).hasClass("validationError")}).length>0)return!1})},t.validationHandler=function(){n.ExpandPassengerFieldsOnValidate(),t.validation()},t.validation=function(){for(var r=$("div.passengerform").find("input,select"),i=null,t=0,u=new n.Validate(null,"","",null),f=r.length,t=0;t<f;t+=1)i=r[t],u.checkBirthdate(i),u.validateSingleElement(i)},t},n.Class.TBABooking=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i),r=n.Util.getResource()||{};return t.passengerNameCollection=[],t.groupBookingCheckBox="",t.groupBookingCheckBoxInput=[],t.tbaSetting="",t.passengerNameCollectionFields=[],t.firstPaxTBA="",t.alwaysTBA="",t.requiredFields=[],t.firstNamePlaceHolder="",t.lastNamePlaceHolder="",t.hasPaxTBAValue="",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.pageInit()},t.pageInit=function(){$(document).ready(function(){t.collectRequiredFields(),t.hasPaxTBAValue=="true"&&t.groupBookingCheckBoxInput.trigger("change")})},t.setVars=function(){this.setPassengerNameCollection()},t.collectRequiredFields=function(){for(var o="required.validation",t,f,i=0;i<this.passengerNameCollectionFields.length;i++){var u=[],e=this.passengerNameCollectionFields[i].firstName.closest("div.passengerform"),r=e.find("input,select");for(t=0;t<r.length;t++)$(r[t]).attr("id")!=this.passengerNameCollectionFields[i].firstName.attr("id")&&$(r[t]).attr("id")!=this.passengerNameCollectionFields[i].lastName.attr("id")&&(f=n.Util.getAttributeValue($(r[t]),"required"),f=="true"&&u.push($(r[t])));u.length>0&&this.requiredFields.push(u)}},t.setPassengerNameCollection=function(){for(var t,n=0;n<this.passengerNameCollection.length;n++)t=[],$("#"+this.passengerNameCollection[n].firstName).length>0&&$("#"+this.passengerNameCollection[n].lastName).length>0&&(t.firstName=$("#"+this.passengerNameCollection[n].firstName),t.lastName=$("#"+this.passengerNameCollection[n].lastName),t.paxType=this.passengerNameCollection[n].paxType,this.passengerNameCollectionFields.push(t));this.groupBookingCheckBoxInput=$("#"+this.groupBookingCheckBox)},t.addEvents=function(){this.groupBookingCheckBoxInput.change(function(){t.toggleTBAFields($(this))});for(var n=0;n<this.passengerNameCollectionFields.length;n++)this.passengerNameCollectionFields[n].lastName.blur(function(){t.checkIfTbaLastName(this)})},t.toggleTBAFields=function(n){n.is(":checked")?t.applyTBAFields():t.removeTBAFields()},t.applyTBAFields=function(){this.tbaSetting==this.firstPaxTBA?this.applyTBA(this.tbaSetting):this.tbaSetting==this.alwaysTBA&&this.applyTBA(this.tbaSetting)},t.applyTBA=function(n){var u=-1,t,r=0,f,e,i;switch(n){case this.firstPaxTBA:r=1;break;case this.alwaysTBA:r=0}for(f=$(this.passengerNameCollectionFields[0].lastName),e=f.attr("id"),e.indexOf("TextBoxLastName_0")==-1&&(r=0),i=r;i<this.passengerNameCollectionFields.length;i++){if(t=i,t!=0&&t%26==0&&u++,t>25)while(t>25)t-=26;this.outputTBA(i,u,t)}},t.outputTBA=function(n,t,i){this.passengerNameCollectionFields[n].firstName!=null&&this.passengerNameCollectionFields[n].lastName!=null&&(this.passengerNameCollectionFields[n].lastName.val().indexOf(this.lastNamePlaceHolder)!=-1&&this.passengerNameCollectionFields[n].lastName.val("TBA"),this.passengerNameCollectionFields[n].firstName.val().indexOf(this.firstNamePlaceHolder)!=-1&&(n<26?this.passengerNameCollectionFields[n].firstName.val(String.fromCharCode("A".charCodeAt(0)+n)):this.passengerNameCollectionFields[n].firstName.val(String.fromCharCode("A".charCodeAt(0)+t)+String.fromCharCode("A".charCodeAt(0)+i))),this.passengerNameCollectionFields[n].lastName.val()=="TBA"&&this.removeRequiredAttributeForTBAPax(n))},t.removeRequiredAttributeForTBAPax=function(t){for(var i=0;i<this.requiredFields[t].length;i++)n.Util.removeRequiredAttribute($(this.requiredFields[t][i]))},t.revertRequiredAttribute=function(t){for(var i=0;i<this.requiredFields.length;i++)n.Util.setRequiredAttribute($(this.requiredFields[t][i]))},t.checkIfTbaLastName=function(n){var t,i;$(n).val()!="TBA"?(t=$(n).attr("id").split("_"),i=t[t.length-1],this.revertRequiredAttribute(i)):(t=$(n).attr("id").split("_"),i=t[t.length-1],this.removeRequiredAttributeForTBAPax(i))},t.removeTBAFields=function(){for(var i=-1,t,n=0;n<this.passengerNameCollectionFields.length;n++){if(t=n,this.passengerNameCollectionFields[n].lastName.val()=="TBA"&&this.passengerNameCollectionFields[n].lastName.val(this.lastNamePlaceHolder),t!=0&&t%26==0&&i++,t>25)while(t>25)t-=26;(this.passengerNameCollectionFields[n].firstName.val()==String.fromCharCode("A".charCodeAt(0)+n)||this.passengerNameCollectionFields[n].firstName.val()==String.fromCharCode("A".charCodeAt(0)+i)+String.fromCharCode("A".charCodeAt(0)+t))&&this.passengerNameCollectionFields[n].firstName.val(this.firstNamePlaceHolder),this.passengerNameCollectionFields[n].lastName!="TBA"&&this.revertRequiredAttribute(n)}},t},n.Class.MealShowHideControls=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i),r=n.Util.getResource()||{};return t.predefinedMealCode="",t.marketTableId="",t.mealDropDowns=[],t.noThanksLinkId="",t.allMealDropDownsPerMarket=[],t.marketPosition="",t.noThanksAddedLink="",t.addedDiv="",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setVars=function(){var n=t.marketTableId.split("_");t.marketPosition=n[n.length-1]},t.addEvents=function(){$("#"+t.noThanksLinkId).click(function(){t.noThanksClickEvent(this)}),$("."+t.noThanksAddedLink).each(function(){$(this).click(function(){t.noThanksAdd(this)})})},t.noThanksAdd=function(n){for(var r=$(n).closest("div.mealControl"),u=r.attr("id").split("_"),e=u[u.length-2],i=0;i<t.allMealDropDownsPerMarket.length;i++)if(t.allMealDropDownsPerMarket[i]!=undefined&&$("#"+t.allMealDropDownsPerMarket[i].mealId).val()!=null){var f=$("#"+t.allMealDropDownsPerMarket[i].mealId).val().split("_"),o=f[f.length-3],s=$("#"+t.allMealDropDownsPerMarket[i].mealId+" option:eq(0)").val();e==t.allMealDropDownsPerMarket[i].servingType&&o!="0"&&$("#"+t.allMealDropDownsPerMarket[i].mealId).val(s).trigger("change").selectmenu()}$("."+r.attr("id")).closest('div[role="dialog"]').find(".saveMeals").trigger("click")},t.noThanksClickEvent=function(n){for(var f=$(n).closest("div.mealControl"),i=0;i<t.mealDropDowns.length;i++)if(t.mealDropDowns[i]!=undefined&&$("#"+t.mealDropDowns[i].mealId).val()!=null){var r=$("#"+t.mealDropDowns[i].mealId).val().split("_"),u=r[r.length-3],e=parseInt(u)<=0?0:parseInt(u)-1,o=$("#"+t.mealDropDowns[i].mealId+" option:eq("+e+")").val();$("#"+t.mealDropDowns[i].mealId).val(o).trigger("change").selectmenu()}$("."+f.attr("id")).closest('div[role="dialog"]').find(".saveMeals").trigger("click"),$(n).hide(),$(n).siblings(".preSelectedMealText").hide()},t},n.Class.GroupRequiredValidation=function(){var r=new n.Class.SkySales,t=n.Util.extendObject(r);return t.fieldList=[],t.fields=[],t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setVars=function(){var u,r,n,f;ctr=0;for(i in t.fieldList){u=i,r=t.fieldList[u];for(j in r)n=j,f=r[n],this.getById(n).length>0&&(t.fields[ctr++]=this.getById(n))}},t.addEvents=function(){for(i=0;i<t.fields.length;i++)$(t.fields[i]).blur(t.validateFields)},t.validateFields=function(){var i,f,e,r,u,o;for(validate=n.Validate(null,"","",null),setRequiredValidation=!1,j=0;j<t.fields.length;j++)if(placeholder=n.Util.getAttributeValue(t.fields[j],"requiredempty"),t.fields[j].val()!=""&&t.fields[j].val()!=placeholder){setRequiredValidation=!0;break}for(j=0;j<t.fields.length;j++)if(setRequiredValidation==!0){i="",f=t.fields[j].prop("id"),ctr=0;for(k in t.fieldList){e=k,r=t.fieldList[e];for(l in r)if(u=l,o=r[u],u==f){i=o;break}}n.Util.setRequiredAttribute(t.fields[j],i),n.Util.removeAttribute(t.fields[j],"validate")}else n.Util.setAttribute(t.fields[j],"validate","false"),n.Util.removeRequiredAttribute(t.fields[j]),validate.validateSingleElement(t.fields[j][0])},t},n.Class.GroupRequiredValidation.createObject=function(t){n.Util.createObject("groupRequiredValidation","GroupRequiredValidation",t)},n.Class.UrgencyMessaging=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.uniqueUsersToast,t.lastBookingToast,t.uniqueUsersValue=0,t.lastBookingValue=0,t.uniqueUsersPoll=!0,t.lastBookingPoll=!0,t.uniqueUsersRegion="",t.lastBookingRegion="",t.uniqueUsersMessagePre="",t.uniqueUsersMessagePost="",t.lastBookingMessagePre="",t.lastBookingMessagePost="",t.uniqueUsersSwitch=!0,t.uniqueUsersMinimum=0,t.lastBookingSwitch=!0,t.lastBookingMaximum=0,t.businessRuleSwitch=!0,t.pollingSwitch=!0,t.pollingInterval=0,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),$(window).load(function(){t.uniqueUsersSwitch==!0&&t.createUrgencyUniqueUsers(),t.lastBookingSwitch==!0&&t.createUrgencyLastBooking()})},t.setVars=function(){},t.addEvents=function(){},t.setSettingsByObject=function(n){i.setSettingsByObject.call(this,n)},t.handleUrgencyResponse=function(n){urgencyData=t.extractUrgencyData(n),urgencyData!=""&&t.handleUrgency(urgencyData)},t.handleUrgencyResponseUpdate=function(n){urgencyData=t.extractUrgencyData(n),urgencyData!=""&&t.handleUrgencyUpdate(urgencyData)},t.extractUrgencyData=function(n){if(n.result!=undefined&&n.result.data!=undefined&&n.result.data.offerGroups!=undefined&&n.result.data.offerGroups.length>0&&n.result.data.offerGroups[0].offerItems!=undefined&&n.result.data.offerGroups[0].offerItems.items.length>0){var r=n.result.data.offerGroups[0].offerItems.items[0],u=r.message,i={};return i.tracking=r.tracking.href,i.region=n.context.region,i.region==t.uniqueUsersRegion?i.message=r.count:i.region==t.lastBookingRegion&&(i.message=r.count),i}return""},t.handleUrgency=function(n){var i;if(n!=""){var u=n.region==t.uniqueUsersRegion,f=n.region==t.lastBookingRegion,r=n.message;u==!0&&(i=r>=2,(i||!t.businessRuleSwitch)&&(messagePre=t.uniqueUsersMessagePre,messagePost=t.uniqueUsersMessagePost,t.uniqueUsersToast=t.createUpdateWidget(messagePre,n.message,messagePost,n.tracking,n.region),t.uniqueUsersValue=n.message)),f==!0&&(i=r<=120,(i||!t.businessRuleSwitch)&&(messagePre=t.lastBookingMessagePre,messagePost=t.lastBookingMessagePost,t.lastBookingToast=t.createUpdateWidget(messagePre,n.message,messagePost,n.tracking,n.region),t.lastBookingValue=n.message))}},t.handleUrgencyUpdate=function(n){var u,i,r;n!=""&&(isUniqueUsers=n.region==t.uniqueUsersRegion,isLastBooking=n.region==t.lastBookingRegion,u=n.message,isUniqueUsers==!0&&(i=u>=2,(i||!t.businessRuleSwitch)&&(messagePre=t.uniqueUsersMessagePre,messagePost=t.uniqueUsersMessagePost,r=t.uniqueUsersValue,n.message>r&&(t.uniqueUsersValue=n.message,t.uniqueUsersToast=t.createUpdateWidget(messagePre,n.message,messagePost,n.tracking,n.region)))),isLastBooking==!0&&(i=u<=120,(i||!t.businessRuleSwitch)&&(messagePre=t.lastBookingMessagePre,messagePost=t.lastBookingMessagePost,r=t.lastBookingValue,n.message<r&&(t.lastBookingValue=n.message,t.lastBookingToast=t.createUpdateWidget(messagePre,n.message,messagePost,n.tracking,n.region)))))},t.createUpdateWidget=function(n,i,r,u,f){var e,o;return f==t.uniqueUsersRegion?e=t.uniqueUsersToast:f==t.lastBookingRegion&&(e=t.lastBookingToast),cssClass=f.split(".")[1],thePopUp="<div><\/div>",theContainer='<div class="urgencyContainer '+cssClass+'"><\/div>',theMessage='<div class="urgencyMessage"><\/div>',messagePart1="<span>"+n+"<\/span>",urgencyValue='<span id="urgencyValue">'+i+"<\/span>",messagePart2="<span>"+r+"<\/span>",theMessage=$(theMessage).append($(messagePart1)),theMessage=$(theMessage).append($(urgencyValue)),theMessage=$(theMessage).append($(messagePart2)),theContainer=$(theContainer).append($(theMessage)),thePopUp=$(thePopUp).append($(theContainer)),thePopUp=$(thePopUp).append($('<br  style="clear:both"/>')),o=e==undefined?$.toast({text:$(thePopUp).html(),hideAfter:!1,bgColor:"#2574bb",textColor:"#FFFFFF",stack:2,position:"bottom-right",afterShown:function(){u!=undefined&&u!=""&&(url=u+"?type=VIEWED",t.sendTracking(url))},afterHidden:function(){f==t.uniqueUsersRegion&&(t.uniqueUsersPoll=!1),f==t.lastBookingRegion&&(t.lastBookingPoll=!1)}}):e.update({text:$(thePopUp).html(),hideAfter:!1,bgColor:"#2574bb",textColor:"#FFFFFF",stack:2,position:"bottom-right",afterHidden:function(){f==t.uniqueUsersRegion&&(t.uniqueUsersPoll=!1),f==t.lastBookingRegion&&(t.lastBookingPoll=!1)}}),container=$("."+cssClass).closest(".jq-toast-single"),$(container).css("width","306px"),$(container).css("height","82px"),$(".close-jq-toast-single").text("[X] close").css("font-size","12px"),o},t.sendTracking=function(n){Boxever.get(n,function(){})},t.pollToast=function(n){t.pollingSwitch==!0&&setTimeout(n,t.pollingInterval*1e3)},t.createFlowExecutionRequest=function(n){clientKey=window._boxever.client_key,channel="WEB",language=CIDatalayer.language,currencyCode=CIDatalayer.currency,uri="/select",pointOfSale=CIDatalayer.pos,browserId=window._boxever.browser_id;return{context:{clientKey:clientKey,channel:channel,language:language,currencyCode:currencyCode,uri:uri,pointOfSale:pointOfSale,browserId:browserId,region:n}}},t.createUrgencyUniqueUsers=function(){window._boxeverq=window._boxeverq||[];var n=t.createFlowExecutionRequest(t.uniqueUsersRegion);window._boxeverq.push(function(){var t=n}),Boxever.flowExecutionCreate(n,function(n){t.handleUrgencyResponse(n)},"json"),t.uniqueUsersToast!=undefined?t.pollToast(t.updateUrgencyUniqueUsers):t.pollToast(t.createUrgencyUniqueUsers)},t.createUrgencyLastBooking=function(){window._boxeverq=window._boxeverq||[];var n=t.createFlowExecutionRequest(t.lastBookingRegion);window._boxeverq.push(function(){var t=n}),Boxever.flowExecutionCreate(n,function(n){t.handleUrgencyResponse(n)},"json"),t.lastBookingToast!=undefined?t.pollToast(t.updateUrgencyLastBooking):t.pollToast(t.createUrgencyLastBooking)},t.updateUrgencyUniqueUsers=function(){window._boxeverq=window._boxeverq||[];var n=t.createFlowExecutionRequest(t.uniqueUsersRegion);window._boxeverq.push(function(){var t=n}),Boxever.flowExecutionCreate(n,function(n){t.handleUrgencyResponseUpdate(n)},"json"),t.uniqueUsersPoll==!0&&t.pollToast(t.updateUrgencyUniqueUsers)},t.updateUrgencyLastBooking=function(){window._boxeverq=window._boxeverq||[];var n=t.createFlowExecutionRequest(t.lastBookingRegion);window._boxeverq.push(function(){var t=n}),Boxever.flowExecutionCreate(n,function(n){t.handleUrgencyResponseUpdate(n)},"json"),t.lastBookingPoll==!0&&t.pollToast(t.updateUrgencyLastBooking)},t},n.Class.ToggleView=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.showId="",t.hideId="",t.elementId="",t.show=null,t.hide=null,t.element=null,t.setVars=function(){i.setVars.call(this),t.show=this.getById(this.showId),t.hide=this.getById(this.hideId),t.element=this.getById(this.elementId)},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.updateShowHandler=function(){t.updateShow()},t.updateHideHandler=function(){t.updateHide()},t.updateShow=function(){this.element.show("slow")},t.updateHide=function(){this.element.hide()},t.updateToggleHandler=function(){t.updateToggle()},t.updateToggle=function(){this.element.is(":visible")?this.updateHide():this.updateShow()},t.addEvents=function(){i.addEvents.call(this),this.showId===this.hideId?this.show.click(this.updateToggleHandler):(this.show.click(this.updateShowHandler),this.hide.click(this.updateHideHandler))},t},n.Class.PaymentInputBase=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.paymentInputCreditCardTypeId="",t.paymentInputCreditCardType={},t.paymentInputCreditCardNumberId="",t.paymentInputCreditCardNumber={},t.paymentInputCreditCardExpirationMonthId="",t.paymentInputCreditCardExpirationMonth={},t.paymentInputCreditCardExpirationYearId="",t.paymentInputCreditCardExpirationYear={},t.paymentInputCreditCardHolderNameId="",t.paymentInputCreditCardHolderName={},t.paymentInputCreditCardAmountId="",t.paymentInputCreditCardAmount={},t.paymentInputCreditCardCvvId="",t.paymentInputCreditCardCvv={},t.paymentInputCreditCardIssueNumberId="",t.paymentInputCreditCardIssueNumber={},t.init=function(n){this.setSettingsByObject(n),this.setVars()},t.setVars=function(){t.paymentInputCreditCardAmount=this.getById(this.paymentInputCreditCardAmountId),t.paymentInputCreditCardCvv=this.getById(this.paymentInputCreditCardCvvId),t.paymentInputCreditCardExpirationMonth=this.getById(this.paymentInputCreditCardExpirationMonthId),t.paymentInputCreditCardExpirationYear=this.getById(this.paymentInputCreditCardExpirationYearId),t.paymentInputCreditCardHolderName=this.getById(this.paymentInputCreditCardHolderNameId),t.paymentInputCreditCardNumber=this.getById(this.paymentInputCreditCardNumberId),t.paymentInputCreditCardType=this.getById(this.paymentInputCreditCardTypeId),t.paymentInputCreditCardIssueNumber=this.getById(this.paymentInputCreditCardIssueNumberId)},t},n.Class.InlineDCC=function(){var i=n.Class.PaymentInputBase(),t=n.Util.extendObject(i);return t.inlineDCCOfferKeyInputId="",t.cultureCode="",t.foreignAmountId="",t.foreignCurrencyNameId="",t.foreignCurrencySymbolId="",t.ownCurrencyAmountId="",t.ownCurrencyNameId="",t.ownCurrencySymbolId="",t.rejectInlineDccRadioButtonId="",t.acceptInlineDccRadioButtonId="",t.doubleOptOutId="",t.inlineDCCAjaxSucceededId="",t.dccId="",t.inlineDCCConversionLabelId="",t.paymentMethodInputId="",t.paymentMethodInput={},t.amountInputId="",t.accountNumberInputId="",t.currencyCode="",t.feeAmt=null,t.inlineDCCJson={},t.inlineDCCActive=!1,t.paymentMethod=null,t.setDCCVars=function(n){t.dcc=this.getById(this.dccId),t.inlineDCCConversionLabel=this.getById(this.inlineDCCConversionLabelId),t.paymentMethodInput=n.methodInput,t.accountNoTextBox=n.accountNumber,t.amountTextBox=n.amountDom,t.inlineDCCAjaxSucceeded=this.getById(this.inlineDCCAjaxSucceededId),t.inlineDCCActive=n.inlineDCCActive},t.inlineDCCAjaxRequestHandler=function(){t.getInlineDCC()},t.addEvents=function(){this.accountNoTextBox&&this.accountNoTextBox.change(this.inlineDCCAjaxRequestHandler)},t.init=function(n){this.setSettingsByObject(n)},t.getInlineDCC=function(n){this.setDCCVars(n),this.clearInlineDCCOffer();var r={},u=n.key,f=0,o=n.inlineDCCActive,s=n.paymentType,h=s.paymentTypes.paymentFees.paymentFeeHash,e={},c=n.accountNumberValue,t=0,i=0;o?(e=h[u]||{},f=e.amount||0,t||(t=n.accountNumber.val(),t||(t=n.maskedNumber)),i||(i=this.amountTextBox.val()),i&&t?(r={amount:i,paymentFee:f,currencyCode:this.currencyCode,accountNumber:t,accountNumberId:c,paymentMethod:u,cultureCode:this.cultureCode},this.currencyCode&&i&&t&&0<parseFloat(i)&&12<=t.length&&(this.inlineDCCAjaxSucceeded.val("false"),this.paymentMethod=n,$.post("DccOffer-rest.aspx",r,this.inlineDCCResponseHandler))):this.clearInlineDCCOffer()):this.clearInlineDCCOffer()},t.clearInlineDCCOffer=function(){this.dcc.html("")},t.updateDccInputClass=function(){t.acceptInlineDccRadioButton.is(":checked")?($(".paymentCurrencyAmount.selected").removeClass("selected"),$("label[for='"+t.acceptInlineDccRadioButton.prop("id")+"']").find($(".paymentCurrencyAmount")).addClass("selected")):t.rejectInlineDccRadioButton.is(":checked")&&($(".paymentCurrencyAmount.selected").removeClass("selected"),$("label[for='"+t.rejectInlineDccRadioButton.prop("id")+"']").find($(".paymentCurrencyAmount")).addClass("selected"))},t.addCommas=function(n){n+="",x=n.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},t.addEventsAfterAjaxResponse=function(){this.acceptInlineDccRadioButton.change(this.updateDccInputClass),this.rejectInlineDccRadioButton.change(this.updateDccInputClass)},t.setVarsAfterAjaxResponse=function(n){t.foreignAmount=t.addCommas(n.foreignCurrencyAmount),t.foreignCurrencyName=n.foreignCurrencyName,t.foreignCurrencySymbol=n.foreignCurrencySymbol,t.ownCurrencyAmount=t.addCommas(n.ownCurrencyAmount),t.ownCurrencyName=n.ownCurrencyName,t.ownCurrencySymbol=n.ownCurrencySymbol,t.rejectInlineDccRadioButton=this.getById(this.rejectInlineDccRadioButtonId),t.acceptInlineDccRadioButton=this.getById(this.acceptInlineDccRadioButtonId)},t.foreignUpdateConversionLabel=function(){this.inlineDCCConversionLabel.text("( "+this.foreignAmount+" "+this.foreignCurrencyName+")")},t.ownUpdateConversionLabel=function(){this.inlineDCCConversionLabel.text("")},t.noThanks=function(){this.getById("dccCont").show("slow")},t.noShowThanks=function(){this.getById("dccCont").hide("slow")},t.updateAcceptRadioBtn=function(n){this.acceptInlineDccRadioButton.attr("checked",n),this.rejectInlineDccRadioButton.attr("checked",!n),this.acceptInlineDccRadioButton.trigger("change"),this.foreignUpdateConversionLabel()},t.updateInlineDCCOffer=function(i){var r={},f=this.getById(this.inlineDCCOfferKeyInputId),e=$("#dcc_"+this.paymentMethod.paymentMethodCode),o="",u="",s=this.paymentMethod,c=s.paymentType,l=c.getCurrentPaymentMethodKey(),a=s.accountNumber.val(),h="";f.val(""),i&&(r=n.Json.parse(i),r&&(h="ExternalAccount:"+r.paymentMethodCode,h===l&&r.accountNumber===a&&(r.paymentMethodCode&&this.inlineDCCAjaxSucceeded.val("true"),f.val(i),e.empty(),r.applicable===!0&&(u=$("#inlineDccTemplate_"+this.paymentMethod.paymentMethodCode).html(),u=n.Util.replace(u,"<!--",""),u=n.Util.replace(u,"-->",""),r.foreignCurrencyAmount=t.addCommas(r.foreignCurrencyAmount.toFixed(2)),r.ownCurrencyAmount=t.addCommas(r.ownCurrencyAmount.toFixed(2)),o=n.Util.supplant(u,r),e.append(o)),this.setVarsAfterAjaxResponse(r),this.addEventsAfterAjaxResponse(),this.updateAcceptRadioBtn(r.acceptByDefault))))},t.inlineDCCResponseHandler=function(n){t.updateInlineDCCOffer(n)},t},n.Class.PaymentFees=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.paymentFeeArray=[],t.paymentFeeHash={},t.quotedAmount=-1,t.templateId="",t.template=null,t.submitName="",t.url="PaymentFeesAjax-resource.aspx",t.quotedAmountName="",t.keyName="",t.key="",t.paymentMethod={},t.setVars=function(){i.setVars.call(this),t.template=this.getById(this.templateId)},t.updatePaymentAmountHandler=function(){t.updatePaymentAmount()},t.updatePaymentAmount=function(n,t){var r=this.submitName,u=t,f=this.quotedAmountName,e=this.keyName,i={},o="__EVENTTARGET";i[f]=u,i[e]=n,i[o]="",i[r]="UpdatePaymentArray",$.post(this.url,i,this.updatePaymentFeeArrayHandler)},t.updatePaymentFeeArrayHandler=function(n){t.updatePaymentFeeArray(n)},t.updatePaymentFeeArray=function(i){i=$(i).text();try{i=n.Json.parse(i)||{}}catch(r){i={}}t.paymentFeeArray=i.paymentFeeArray||[],t.quotedAmount=i.quotedAmount||0,t.key=i.key||"",this.initPaymentFeeHash(),this.updatePaymentFee(this.key,this.quotedAmount)},t.updatePaymentFeeHandler=function(){t.updatePaymentFee()},t.updatePaymentFee=function(n,t){var u=this.paymentFeeHash[n]||{},i=this.quotedAmount,r=this.paymentMethod;this.deactivatePaymentFees(),t=parseFloat(t,10),i=parseFloat(i,10),i===t?(this.activatePaymentFees(u),r&&r.paymentType.paymentTypes.inlineDCC.getInlineDCC(r)):this.updatePaymentAmount(n,t)},t.activatePaymentFees=function(n){var i="",t=n.amount;t=parseFloat(t,10),t>0&&(i=this.getHtml(n),this.container.html(i),this.container.show())},t.deactivatePaymentFees=function(){var n="";this.container.html(n),this.container.hide()},t.getHtml=function(t){var i="";return i=this.template.text(),i=n.Util.supplant(i,t)},t.initPaymentFeeHash=function(){for(var r=this.paymentFeeArray||[],t=null,i=0,e=r.length,u={},f="",i=0;i<e;i+=1)t=new n.Class.PaymentFee,t.init(r[i]),f=t.key,u[f]=t;this.paymentFeeHash=u},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.initPaymentFeeHash()},t},n.Class.PaymentFee=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.amount=-1,t.total=-1,t.feeCode=-1,t.isFixedAmount=!1,t.key="",t.amountFormatted="",t.totalFormatted="",t.init=function(n){this.setSettingsByObject(n),t.amount=parseFloat(this.amount,10),t.total=parseFloat(this.total,10)},t},n.Class.PaymentTypes=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.paymentTypeArray=[],t.paymentFees={},t.showDeviceFingerprint=!1,t.passThroughForChargePaymentArray=[],t.passThroughForHoldPaymentArray=[],t.inlineDCC={},t.storedPaymentInputId="",t.storedPaymentInput={},t.initPaymentTypeArray=function(){for(var i=this.paymentTypeArray||[],r=null,t=0,f=i.length,u=!1,t=0;t<f;t+=1)r=new n.Class.PaymentType,r.paymentTypes=this,r.init(i[t]),i[t]=r,r.isDefault===!0&&u===!1&&(r.activate(),u=!0,t=0,i[t].actionId=="ExternalAccount_tab"&&i[t].isPQDefault=="True"&&$("#24hold_tab")&&($("#ExternalAccount_PaymentMethodCode")!=undefined&&$("#ExternalAccount_PaymentMethodCode").val("ExternalAccount:PQ"),$("#"+i[t].actionId).removeClass("here"),$("#24hold_tab").addClass("here"),i[t].updatePaymentMethod("ExternalAccount:PQ")));this.paymentTypeArray=i},t.initPassThroughPaymentArray=function(t,i){t=t||"",i=i||{};for(var c=this.passThroughForChargePaymentArray||[],l=this.passThroughForHoldPaymentArray||[],e=null,o=null,u=0,s={},h=i.paymentMethodType||"",a=i.paymentMethodCode||"",r=t+h+"_"+a+"_",f=c.concat(l),v=f.length,u=0;u<v;u+=1)o=f[u],e=new n.Class.PassThroughPayment,s={paymentInputCreditCardTypeId:h+"_PaymentMethodCode",paymentInputCreditCardNumberId:r+"ACCTNO",paymentInputCreditCardExpirationMonthId:r+"EXPDAT_MONTH",paymentInputCreditCardExpirationYearId:r+"EXPDAT_YEAR",paymentInputCreditCardHolderNameId:r+"CC::AccountHolderName",paymentInputCreditCardCvvId:r+"CC::VerificationCode",paymentInputCreditCardIssueNumberId:r+"CC::IssueNumber"},o.paymentInputContentIds=s,e.init(o),f[u]=e;this.passThroughPaymentArray=f},t.initPaymentFees=function(){var t;t=new n.Class.PaymentFees,t.init(this.paymentFees),this.paymentFees=t},t.updatePaymentTypes=function(n){var i=this.paymentTypeArray||[],r=null,t=0,u=i.length;if(n){for(t=0;t<u;t+=1)r=i[t],r.deactivate();n.activate()}},t.enableDeviceFingerprint=function(){var t=n.Class.PaymentTypes.deviceFingerprintLoaded;this.showDeviceFingerprint===!0&&t===!1&&(n.Class.PaymentTypes.deviceFingerprintLoaded=!0,$("body").append('<iframe id="deviceFingerprint" src="DeviceFingerprint.aspx" width="0" height="0"><\/iframe>'))},t.initDCC=function(){var t=new n.Class.InlineDCC;t.init(this.inlineDCC),this.inlineDCC=t},t.setVars=function(){t.storedPaymentInput=this.getById(this.storedPaymentInputId)},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.initDCC(),this.initPaymentFees(),this.initPassThroughPaymentArray(),this.initPaymentTypeArray(),this.enableDeviceFingerprint()},t},n.Class.PaymentTypes.deviceFingerprintLoaded=!1,n.Class.PaymentType=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.paymentTypes=null,t.actionId="",t.action=null,t.selectBarId="",t.selectBar={},t.containerId="",t.container=null,t.paymentMethodActionId="",t.paymentMethodAction=null,t.paymentMethodActionCloneId="",t.paymentMethodActionClone=null,t.isDefault=!1,t.nameSpaceName="",t.nameSpaceId="",t.hint="",t.isPQDefault=!1,t.twentyFourFOPs="",t.paymentMethodArray=[],t.paymentCentersArray=[],t.setVars=function(){i.setVars.call(this),t.action=this.getById(this.actionId),t.selectBar=this.getById(this.selectBarId),t.container=this.getById(this.containerId),t.paymentMethodAction=this.getById(this.paymentMethodActionId),t.paymentMethodActionClone=$("[id^='"+this.paymentMethodActionCloneId+"']")},t.addEvents=function(){var i,n;for(this.action.click(this.updatePaymentTypeHandler),this.paymentMethodAction.change(this.updatePaymentMethodHandler),i=t.paymentMethodActionClone.length,n=0;n<i;n++)$(t.paymentMethodActionClone[n]).change(t.updatePaymentMethodFromCloneHandler);$(window).load(function(){!t.container.is(":hidden")&&t.container&&t.container.length&&t.container.hide()})},t.supplant=function(){for(var u=this.paymentMethodActionClone.length,f,e,i,n,r=0;r<u;r++)if(this.actionId==="ExternalAccount_tab")for(f="",e=0,i=0;i<this.paymentMethodAction.get(0).children.length;i++)n=this.paymentMethodAction.get(0).children[i].value.split(":"),$.inArray(n[1],this.paymentCentersArray)===-1&&n[1]!=="BA"&&n[1]!=="BC"&&n[1]!=="PP"&&t.twentyFourFOPs.indexOf(n[1])===-1&&$(this.paymentMethodActionClone[r]).append(this.paymentMethodAction.get(0).children[i].cloneNode(!0))},t.updatePaymentTypeHandler=function(n){return n.preventDefault(),t.updatePaymentType(),!1},t.updatePaymentType=function(){this.setActivePaymentMethod(this),this.paymentTypes.updatePaymentTypes(this)},t.setActivePaymentMethod=function(n){var i=null,t=0,r,u;if(n.actionId==="ExternalAccount_tab")for(i=n.paymentMethodAction[0],r=i.length,t=0;t<r;t++)if(u=i[t].value.split(":"),$.inArray(u[1],this.paymentCentersArray)===-1){i[t].selected=!0;break}},t.deactivate=function(){this.action.removeClass("here"),this.container.hide();var f=this.paymentMethodArray||[],e=null,t=0,s=f.length,h=this.nameSpaceName,i=this.paymentMethodAction,u=i.attr("name")||"",o=this.hint,c=new n.Hint,r=$("#"+this.nameSpaceId+"CheckBoxTravelFund");for(this.actionId==="CustomerAccount_tab"?(r.checked=!1,r.removeAttr("checked")):(r.checked=!0,r.attr("checked","checked")),o!==""&&i.length>0&&(c.removeEventFunction.call(i[0]),n.Util.removeAttribute(i,"hint",o)),u=n.Util.replace(u,h,""),this.paymentMethodAction.attr("name",u),t=0;t<s;t+=1)e=f[t],e.deactivate()},t.activate=function(){var u,f,i;this.action.addClass("here"),u=this.action.clientWidth/2,f=this.action.offsetLeft+u,this.selectBar.css("background-position",f+"px"),this.container.show();var o=this.nameSpaceName,t=this.paymentMethodAction,r=t.attr("name")||"",e=this.hint,s=new n.Hint,h=this.getActivePaymentMethod();e!==""&&t.length>0&&(n.Util.setAttribute(t,"hint",e),s.eventFunction.call(t[0])),r=o+r,t.attr("name",r),i=$("#"+this.nameSpaceId+"CheckBoxTravelFund"),this.actionId==="CustomerAccount_tab"?(i.checked=!1,i.removeAttr("checked")):(i.checked=!0,i.attr("checked","checked")),this.updatePaymentMethod(h.staticKey)},t.getActivePaymentMethod=function(){var t=this.paymentMethodArray||[],f=this.paymentMethodAction.val(),i={},r={},u=t.length,n=0;if(u>0)for(i=t[0],n=0;n<u;n+=1)if(r=t[n],r.staticKey===f){i=r;break}return i},t.initPaymentMethodArray=function(){for(var r=this.paymentMethodArray||[],t=null,i=0,u=r.length,i=0;i<u;i+=1)t=new n.Class.PaymentMethod,t.paymentType=this,t.nameSpaceName=this.nameSpaceName,t.init(r[i]),r[i]=t;this.paymentMethodArray=r},t.updatePaymentMethodFromCloneHandler=function(){for(var i=$(this).val(),r=t.paymentMethodActionClone.length,n=0;n<r;n++)$(t.paymentMethodActionClone[n]).val(i);t.paymentMethodAction.val(i),t.paymentMethodAction.change()},t.updatePaymentMethodHandler=function(){var n=$(this).val();$("#paymentCurrency").remove(),t.updatePaymentMethod(n)},t.getCurrentStoredPaymentId=function(){var n="",t=this.paymentMethodAction,i=t.val();return n=this.getStoredPaymentIdFromValue(i)},t.getStoredPaymentIdFromValue=function(n){n=n||"";var t=0,i=n.split("-");return i.length>1&&(t=i[1]),t},t.getCurrentPaymentMethodKey=function(){var n="",t=this.paymentMethodAction,i=t.val();return n=this.getPaymentMethodKeyFromValue(i)},t.getPaymentMethodKeyFromValue=function(n){n=n||"";var t="",i=n.split("-");return t=i[0]},t.updatePaymentMethod=function(n){n=n||"";var i=n,u=this.paymentMethodArray||[],t={},r=0,o=u.length,s=i.indexOf("-"),f=i.indexOf("_"),e="";for(s>-1&&(i=i.substring(0,s)),f>-1&&(e=i.substring(f+1,i.length),i=i.substring(0,f)),r=0;r<o;r+=1)t=u[r],t.deactivate();for(r=0;r<o;r+=1)t=u[r],n===t.staticKey&&(t.activate(),$("fieldset#"+t.paymentMethodType+"_"+t.paymentMethodCode).length>0&&$("fieldset#"+t.paymentMethodType+"_"+t.paymentMethodCode).find($("select[id*="+t.paymentMethodCode+'][name="DropDownListPaymentMethodCode"]')).selectmenu(),$.placeholder.shim(),e&&t.updateRefundPaymentAmount(e))},t.setPaymentFieldsOnStoredPayments=function(){for(var u=this.paymentMethodArray,n=null,t=null,r=0,f=u.length,i=0,r=0;r<f;r+=1)if(t=u[r],t.isStoredPayment)for(i=0;i<f;i+=1)n=u[i],n.isStoredPayment||t.key!==n.key||(t.paymentFieldArray=n.paymentFieldArray)},t.setPaymentFieldsOnBookingPayments=function(){for(var u=this.paymentMethodArray,n=null,t=null,r=0,f=u.length,i=0,r=0;r<f;r+=1)if(t=u[r],t.isBookingPayment)for(i=0;i<f;i+=1)n=u[i],n.isBookingPayment||t.key!==n.key||(t.paymentFieldArray=n.paymentFieldArray)},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.supplant(),this.initPaymentMethodArray()},t},n.Class.PaymentMethod=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.paymentInputJson={},t.paymentInput={},t.paymentType=null,t.isDefault=!1,t.key="",t.staticKey="",t.accountNumberId="",t.accountNumberValue=0,t.accountNumber=null,t.amountId="",t.amountDom=null,t.paymentFieldArray=[],t.nameSpaceName="",t.isStoredPayment=!1,t.isBookingPayment=!1,t.inlineDCCActive=!1,t.paymentMethodType="",t.paymentMethodCode="",t.maskedNumber="",t.expirationYear="",t.expirationMonth="",t.expirationYearInputId="",t.expirationYearInput="",t.expirationMonthInputId="",t.expirationMonthInput="",t.cardNameIdArray=[],t.cardNameArray=[],t.cardNameValue="",t.cardNameLocation="",t.isActive=!1,t.accountNumberTextId="",t.accountNumberText=null,t.refundAmount=0,t.clearFields=!1,t.supportPaymentFees=!0,t.initPaymentFieldArray=function(){for(var i=this.paymentFieldArray||[],r=null,t=0,u=i.length,t=0;t<u;t+=1)r=new n.Class.PaymentField,r.nameSpaceName=this.nameSpaceName,r.init(i[t]),i[t]=r;this.paymentFieldArray=i},t.deactivate=function(){this.container.hide();var i=this.paymentFieldArray||[],r=null,n=0,u=i.length;for(t.isActive=!1,this.clearFields&&this.clearStoredFields(),n=0;n<u;n+=1)r=i[n],r.deactivate()},t.activate=function(){var n=this.paymentFieldArray||[],u=null,i=0,r=n.length,s=this.amountDom,h=s.val(),f=this.paymentType,e=f.paymentTypes,o=e.paymentFees,c=this.accountNumber,l=this.accountNumberText;for(t.isActive=!0,this.isStoredPayment||(c.show(),l.html("")),r===0&&(this.paymentType.setPaymentFieldsOnStoredPayments(),this.paymentType.setPaymentFieldsOnBookingPayments(),n=this.paymentFieldArray||[],r=n.length),this.isStoredPayment?this.populateStoredFields():(cardNameValue=this.cardNameValue.split(":"),cardNameLocation=this.getById(this.cardNameLocation),cardNameLocation&&cardNameValue[1]?(cardNameLocation.val(cardNameValue[1]),cardNameLocation.selectmenu()):cardNameLocation&&cardNameValue[0].length==0&&cardNameLocation.val(cardNameValue[0]).selectmenu()),i=0;i<r;i+=1)u=n[i],u.activate(this);this.container.show(),this.supportPaymentFees&&(o.paymentMethod=this,o.updatePaymentFee(this.key,h),e.initPassThroughPaymentArray(f.nameSpaceId,this))},t.populateStoredFields=function(){var u=this.accountNumber,f=this.cardNameArray,n=0,o=f.length,e=null,t=this.cardNameValue.split(":"),i=this.getById(this.cardNameLocation),s=this.accountNumberText,h=this.staticKey||"",r=h.split("-"),c=r.length,l=this.paymentType.paymentTypes.storedPaymentInput||{};for(u.val(this.maskedNumber),u.hide(),s.html(this.maskedNumber),n=0;n<o;n+=1)e=f[n],e.val(t[0]);i&&t[1]&&(i.val(t[1]),i.selectmenu()),c===2&&this.key===r[0]&&l.val(r[1]),this.expirationMonth.length===1&&(this.expirationMonth="0"+this.expirationMonth),this.expirationYearInput.val(this.expirationYear),this.expirationYearInput.selectmenu(),this.expirationMonthInput.val(this.expirationMonth),this.expirationMonthInput.selectmenu(),this.expirationYearInput.change()},t.clearStoredFields=function(){var r=this.accountNumber,t=this.cardNameArray,n=0,u=t.length,i=null,f=this.paymentType.paymentTypes.storedPaymentInput||{};for(r.val(""),n=0;n<u;n+=1)i=t[n],i.val("");f.val(""),this.expirationMonth.length===1&&(this.expirationMonth="0"+this.expirationMonth),this.expirationYearInput.val(""),this.expirationMonthInput.val(""),this.expirationYearInput.change()},t.updatePaymentAmountHandler=function(){t.updatePaymentAmount()},t.updatePaymentAmount=function(){var t=this.amountDom,i=t.val(),r=this.paymentType||{},u=r.paymentTypes||{},n=u.paymentFees;this.isActive&&n&&n.updatePaymentAmount(this.key,i)},t.updateRefundPaymentAmount=function(){var n=this.amountDom||{};n.val(this.refundAmount)},t.setVars=function(){var n=0,r="",u=null,f=this.cardNameIdArray,e=f.length;for(i.setVars.call(this),t.amountDom=this.getById(this.amountId),t.accountNumber=this.getById(this.accountNumberId),t.accountNumberText=this.getById(this.accountNumberTextId),t.methodInput=this.paymentType.paymentMethodAction,t.expirationYearInput=this.getById(this.expirationYearInputId),t.expirationMonthInput=this.getById(this.expirationMonthInputId),n=0;n<e;n+=1)r=f[n],u=this.getById(r),this.cardNameArray.push(u)},t.updatePaymentAccountNumberHandler=function(){t.updatePaymentAccountNumber()},t.updatePaymentAccountNumber=function(){this.isActive&&this.paymentType.paymentTypes.inlineDCC.getInlineDCC(this)},t.addEvents=function(){this.amountDom.change(this.updatePaymentAmountHandler),this.accountNumber.change(this.updatePaymentAccountNumberHandler)},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.initPaymentFieldArray()},t},n.Class.PaymentField=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.nameSpaceName="",t.requiredType="",t.requiredError="",t.validationFunction=null,t.validationFunctionParams=[],t.validationTypeError="",t.valueMaxLength=-1,t.valueMinLength=-1,t.fieldType="",t.maxValue="",t.maxLengthError="",t.minValue="",t.minLengthError="",t.valueRegEx="",t.valueRegExError="",t.valueType="",t.hint="",t.deactivate=function(){var i=this.nameSpaceName,t=this.container.attr("name")||"";t=n.Util.replace(t,i,""),this.container.attr("name",t),this.removeAttributes()},t.activate=function(n){var i=this.nameSpaceName,t=this.container.attr("name")||"";t=i+t,this.container.attr("name",t),this.addAttributes(n)},t.removeAttributes=function(){var i=this.requiredType,e="",o=this.valueMaxLength,s=this.maxLengthError,h=this.valueMinLength,c=this.minLengthError,l=this.valueRegEx,a=this.valueRegExError,r=this.valueType,v=this.validationFunction,y=this.validationFunctionParams,p=this.validationTypeError,u=this.fieldType||"",f=this.hint,w=new n.Hint,t=this.container;i=i.toLowerCase(),u=u.toLowerCase(),(i==="required"||this.containerId.indexOf("VerificationCode")!==-1)&&n.Util.removeRequiredAttribute(t),r=r.toLowerCase(),n.Util.removeAttribute(t,"requirederror",e),n.Util.removeAttribute(t,"validationtype",r),n.Util.removeAttribute(t,"validationfunction",v),n.Util.removeAttribute(t,"validationfunctionparams",y),n.Util.removeAttribute(t,"validationtypeerror",p),n.Util.removeAttribute(t,"minlength",h),n.Util.removeAttribute(t,"maxlength",o),n.Util.removeAttribute(t,"minlengtherror",c),n.Util.removeAttribute(t,"maxlengtherror",s),n.Util.removeAttribute(t,"regex",l),n.Util.removeAttribute(t,"regexerror",a),u==="amount"&&(n.Util.removeAttribute(t,"maxvalue"),n.Util.removeAttribute(t,"minvalue")),f!==""&&t.length>0&&(w.removeEventFunction.call(t[0]),n.Util.removeAttribute(t,"hint",f))},t.addAttributes=function(t){var f=this.requiredType,a=this.requiredError,v=this.valueMaxLength,y=this.maxLengthError,p=this.valueMinLength,w=this.minLengthError,b=this.valueRegEx,k=this.valueRegExError,o=this.valueType,s=this.validationFunction,d=this.validationFunctionParams,g=this.validationTypeError,h=this.hint,e=this.fieldType||"",u=this.maxValue||"",nt=this.minValue||"",tt=t.isStoredPayment,i=this.container,it=new n.Hint,r=n.Util.setAttribute;if(o=o.toLowerCase(),e=e.toLowerCase(),f=f.toLowerCase(),!tt||e!=="accountnumber"){if((f==="required"||this.containerId.indexOf("VerificationCode")!==-1)&&n.Util.setRequiredAttribute(i),f==="notallowed"&&i.css("visibility","hidden"),r(i,"requirederror",a),r(i,"validationtype",o),r(i,"validationtypeerror",g),r(i,"minlength",p),r(i,"maxlength",v),r(i,"minlengtherror",w),r(i,"maxlengtherror",y),r(i,"regex",b),r(i,"regexerror",k),e==="amount"){if(t.paymentMethodCode=="CF"){var c=$("#remainingCredit").text().split(" ")[1],rt=Number(c.replace(/,/g,"")),l=$("#remainingAmtDue").text(),ut=Number(l.replace(/,/g,""));u=rt<=ut?c:l}else t.isBookingPayment&&(u=t.refundAmount);u=u.toString(),r(i,"maxvalue",u),r(i,"minvalue",nt)}s&&(r(i,"validationfunction",s),r(i,"validationfunctionparams",d))}h!==""&&i.length>0&&(r(i,"hint",h),it.eventFunction.call(i[0]))},t.init=function(n){this.setSettingsByObject(n),this.setVars()},t},n.Class.CalendarAvailabilityInputBase=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.containerId="availabilityInputContainerId",t.container=null,t.templateId="availabilityInputTemplateId",t.template=null,t.totalTemplateId="totalTemplateId",t.totalTemplate=null,t.totalId="totalId",t.total=null,t.marketArray=[],t.marketClass="",t.requestStartDate=null,t.requestEndDate=null,t.pointsLabelAppend="",t.pointsSuffix="",t.isLoyalty="",t.init=function(n){this.setSettingsByObject(n),this.initMarketArray(),this.setVars(),this.draw(),this.setVarsAfterDraw(),this.addEvents(),this.selectInitialDateMarkets()},t.setVars=function(){t.container=this.getById(this.containerId),t.template=this.getById(this.templateId),t.totalTemplate=this.getById(this.totalTemplateId)},t.initMarketArray=function(){for(var i=0,r=this.marketArray||[],u=r.length,t=null,i=0;i<u;i+=1)t=new n.Class[this.marketClass],t.availabilityInput=this,t.marketIndex=i,t.containerId="market_"+i,t.selectedDateContainerId="selectedDate_"+i,t.requestStartDate=this.requestStartDate,t.requestEndDate=this.requestEndDate,t.init(r[i]),r[i]=t},t.setVarsAfterDraw=function(){t.total=this.getById(this.totalId);for(var n=0,i=this.marketArray||[],u=i.length,r=null,n=0;n<u;n+=1)r=i[n],r.setVarsAfterDraw()},t.addEvents=function(){for(var n=0,t=this.marketArray||[],r=t.length,i=null,n=0;n<r;n+=1)i=t[n],i.addEvents()},t.selectInitialDateMarkets=function(){for(var n=0,t=this.marketArray||[],r=t.length,i=null,n=0;n<r;n+=1)i=t[n],i.selectInitialDateMarket()},t.getHtml=function(){for(var i=this.template.text(),r="",t=0,u=this.marketArray||[],e=u.length,f=null,t=0;t<e;t+=1)f=u[t],r+=f.getHtml();return i=n.Util.replace(i,/\[marketArray\]/,r)},t.draw=function(){var n=this.getHtml();this.container.html(n)},t.updateTotalAmount=function(){var t=this.totalTemplate.text(),i=new n.Class.CalendarAvailabilityTotals,r="";i.marketArray=this.marketArray,i.getTotals(),r=n.Util.formatAmount(i.totalPrice,i.totalPoints,this.pointsLabelAppend,this.pointsSuffix),t=n.Util.replace(t,/\[totalAmount\]/,r),t=this.isLoyalty?LoyaltySelect.updateTotal(t,r):n.Util.replace(t,/\[totalAmount\]/,r),this.total.html(t)},t},n.Class.CalendarAvailabilityTotals=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.totalPoints=0,t.totalPrice=0,t.marketArray=[],t.init=function(n){this.setSettingsByObject(n)},t.getFormattedPrice=function(t){var i="";return t!==null&&t>=0&&(i=n.Util.convertToLocaleCurrency(t),i===""&&(i=t.toString())),i},t.getTotals=function(){for(var i=0,u=this.marketArray||[],c=u.length,f=null,r=null,e=0,o=0,s=0,h=0,i=0;i<c;i+=1)f=u[i],r=f.selectedDateMarket||{},o=r.price||0,e=r.points||0,s+=o,h+=e;t.totalPoints=n.Util.convertToLocaleInteger(h),t.totalPrice=this.getFormattedPrice(s)},t},n.Class.CalendarAvailabilityInput=function(){var t=new n.Class.CalendarAvailabilityInputBase,i=n.Util.extendObject(t);return i.init=function(n){this.setSettingsByObject(n),t.marketClass="CalendarAvailabilityMarket",this.initMarketArray(),this.setVars(),this.draw(),this.setVarsAfterDraw(),this.addEvents(),this.selectInitialDateMarkets()},i},n.Class.TripPlannerCalendarAvailabilityInput=function(){var i=new n.Class.CalendarAvailabilityInputBase,t=n.Util.extendObject(i);return t.datePickerManager={},t.init=function(n){this.setSettingsByObject(n),i.marketClass="TripPlannerCalendarAvailabilityMarket",this.initMarketArray(),this.setVars(),this.draw(),this.setVarsAfterDraw(),this.addEvents(),this.selectInitialDateMarkets()},t},n.Class.CalendarAvailabilityMarketBase=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.containerId="",t.container=null,t.selectedDateContainerId="",t.selectedDateContainer=null,t.templateId="marketTemplateId",t.template=null,t.selectedDateTemplateId="selectedDateTemplateId",t.selectedDateTemplate=null,t.noFlightsTemplateId="noFlightsTemplateId",t.noFlightsTemplate=null,t.availabilityInput=null,t.dateMarketHash={},t.marketIndex=-1,t.departureStation="",t.arrivalStation="",t.departureStationCode="",t.arrivalStationCode="",t.departureLabel="",t.arrivalLabel="",t.selectedDateMarket=null,t.selectedDate="",t.selectedClass="selected",t.dateMarketPrefix="date_",t.inputDayId="",t.inputDay=null,t.inputMonthId="",t.inputMonth=null,t.inputYearId="",t.inputYear=null,t.prevLinkId="",t.nextLinkId="",t.submitLinkId="",t.submitLink=null,t.noDateSelectedError="",t.startYear="",t.startMonth="",t.startDay="",t.startDate="",t.firstBlockDate="",t.endYear="",t.endMonth="",t.endDay="",t.endDate="",t.lastBlockDate="",t.requestStartDate=null,t.requestEndDate=null,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.initStartDate(),this.initEndDate(),this.initFirstBlockDate(),this.initLastBlockDate(),this.initDateMarketHash(),this.initValidation()},t.setVars=function(){t.template=this.getById(this.templateId),t.inputDay=this.getById(this.inputDayId),t.inputMonth=this.getById(this.inputMonthId),t.inputYear=this.getById(this.inputYearId),t.submitLink=this.getById(this.submitLinkId),t.noDateSelectedError=$("#noDateSelectedError").attr("text"),t.noFlightsTemplate=this.getById(this.noFlightsTemplateId)},t.setVarsAfterDraw=function(){t.container=this.getById(this.containerId),t.selectedDateContainer=this.getById(this.selectedDateContainerId),t.selectedDateTemplate=this.getById(this.selectedDateTemplateId);var n=this.dateMarketHash||{},i="",r=null;for(i in n)n.hasOwnProperty(i)&&(r=n[i],r&&r.setVarsAfterDraw())},t.addEvents=function(){this.container.click(this.updateFareHandler),this.submitLink.unbind("click").bind("click",this.validateFlightSelection)},t.initValidation=function(){this.submitLink.unbind("click"),this.submitLink.bind("click",this.validateFlightSelection)},t.validateFlightSelection=function(){var i=$(".empty.selected"),r=$('input[id*="HiddenFieldDay"][value=-1]');if(i.length>0||r.length>0)return window.alert(t.noDateSelectedError),!1},t.getDateMarketKey=function(n){var i=n.target,t=i.id;return t===""&&(t=$(i).parent("div.calendarDayContent").attr("id")||""),t},t.updateFareEvent=function(n){var t=this.getDateMarketKey(n);this.updateFare(t)},t.updateFareHandler=function(n){t.updateFareEvent(n)},t.updateFare=function(i){var r=this.dateMarketHash[i],u="",f=",",e=",",o="",s=-1,h=-1,c=-1;r&&(r.price>=0||r.points>0)&&(this.deactivateAllDateMarkets(),r.activate(),t.selectedDateMarket=r,u=this.selectedDateTemplate.text(),u=n.Util.replace(u,/\[formattedDate\]/,r.formattedDate),f=r.getFormattedPrice(),e=n.Util.convertToLocaleInteger(r.points),o=n.Util.formatAmount(f,e,r.pointsLabelAppend,r.pointsSuffix),u=n.Util.replace(u,/\[amount\]/,o),this.selectedDateContainer.html(u),c=parseInt(r.year,10),this.inputYear.val(c),h=parseInt(r.month,10)+1,this.inputMonth.val(h),s=parseInt(r.day,10),this.inputDay.val(s),this.availabilityInput.updateTotalAmount())},t.selectInitialDateMarket=function(){var n=this.dateMarketPrefix+this.marketIndex+"_"+this.selectedDate;this.updateFare(n)},t.deactivateAllDateMarkets=function(){var r=this.selectedClass,n=this.dateMarketHash||{},t="",i=null;for(t in n)n.hasOwnProperty(t)&&(i=n[t],i.deactivate(r))},t.initStartDate=function(){t.startDate=new Date(this.startYear,this.startMonth,this.startDay)},t.initEndDate=function(){t.endDate=new Date(this.endYear,this.endMonth,this.endDay)},t.initFirstBlockDate=function(){var n=this.startDate,i,u=n.getDay(),r=new Date;i=this.addDays(n,u*-1),r.setTime(i),t.firstBlockDate=r},t.initLastBlockDate=function(){var u=7,n=this.endDate,f=n.getDay(),e=u-f,i=0,r=new Date;i=this.addDays(n,e),r.setTime(i),t.lastBlockDate=r},t.getMarketHashKey=function(n){n=n||new Date;return this.dateMarketPrefix+this.marketIndex+"_"+n.getFullYear()+"_"+n.getMonth()+"_"+n.getDate()},t.initDateMarketHash=function(){var t=new Date,e=this.lastBlockDate,u=this.dateMarketHash||{},r="",f=0,i=null;for(t.setTime(this.firstBlockDate.getTime());t<e;)r=this.getMarketHashKey(t),i=new n.Class.CalendarAvailabilityDateMarket,i.market=this,u[r]=u[r]||{},i.init(u[r]),i.date=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i.availableClass=this.availableClass,u[r]=i,f=this.addDays(t,1),t.setTime(f)},t.getMonthName=function(t){t=parseInt(t,10);var r="",u=null,i=null;return u=n.Util.getResource(),i=u.dateCultureInfo.monthNames,i.length>t&&(r=i[t]),r},t.getDayNameArray=function(){var t=null,i=null;return t=n.Util.getResource(),i=t.dateCultureInfo.dayNamesShort||[]},t.supplantDayNames=function(t){for(var r=this.getDayNameArray(),i=0,o=r.length,u=null,f="",e="",i=0;i<o;i+=1)e=r[i],f="\\[daysOfWeek"+i+"\\]",u=new RegExp(f),t=n.Util.replace(t,u,e);return t},t.getHtml=function(){var n="";return n=this.startYear?this.template.text():this.noFlightsTemplate.text(),n=this.supplant(n)},t.supplant=function(t){t=t||"";var i=this.startMonth==this.endMonth?this.getMonthName(this.startMonth):this.getMonthName(this.startMonth)+"-"+this.getMonthName(this.endMonth),r="";return t=n.Util.replace(t,/\[currentMonth\]/,i+" "+this.endYear),t=n.Util.replace(t,/\[startDateMonth\]/,i),t=n.Util.replace(t,/\[startDateYear\]/,this.startYear),t=n.Util.replace(t,/\[marketIndex\]/g,this.marketIndex),t=n.Util.replace(t,/\[prevLink\]/,$("#"+this.prevLinkId+this.marketIndex).attr("href")),t=n.Util.replace(t,/\[nextLink\]/,$("#"+this.nextLinkId+this.marketIndex).attr("href")),t=n.Util.replace(t,/\[prevLinkMarketIndex\]/,this.marketIndex),t=n.Util.replace(t,/\[nextLinkMarketIndex\]/,this.marketIndex),this.marketIndex==1?(t=n.Util.replace(t,/\[flightLabel\]/,this.arrivalLabel),t=n.Util.replace(t,/\[calendarFlightDetails\]/,"calendarFlightDetailsReturn")):(t=n.Util.replace(t,/\[flightLabel\]/,this.departureLabel),t=n.Util.replace(t,/\[calendarFlightDetails\]/,"calendarFlightDetailsDepart")),t=n.Util.replace(t,/\[departureStation\]/,this.departureStation+" "+this.departureStationCode),t=n.Util.replace(t,/\[arrivalStation\]/,this.arrivalStation+" "+this.arrivalStationCode),t=this.supplantDayNames(t),r=this.getMarketHtml(),t=n.Util.replace(t,/\[dateMarketHash\]/,r)},t.getMarketHtml=function(){var t="",i=[],n=new Date,o=this.lastBlockDate,s=this.dateMarketHash||{},r="",u=0,f=null,e="";for(n.setTime(this.firstBlockDate.getTime());n<o;)r=this.getMarketHashKey(n),f=s[r],e=f.getHtml(),i.push(e),u=this.addDays(n,1),n.setTime(u);return t=i.join("")},t.addDays=function(n,t){return n.getTime()+t*864e5},t.getDateMarketArray=function(){var n=this.dateMarketHash||{},t="",i=null,r=[];for(t in n)n.hasOwnProperty(t)&&(i=n[t],r.push(i));return r},t},n.Class.CalendarAvailabilityMarket=function(){var i=new n.Class.CalendarAvailabilityMarketBase,t=n.Util.extendObject(i);return t.availableClass="",t.updateFareHandler=function(n){t.updateFareEvent(n)},t},n.Class.TripPlannerCalendarAvailabilityMarket=function(){var i=new n.Class.CalendarAvailabilityMarketBase,t=n.Util.extendObject(i);return t.datePickerManager={},t.availableClass="available",t.updateDateDropDowns=function(n){var i=this.getDateMarketKey(n),t=this.dateMarketHash[i],r=t.price,u=t.date;r&&(this.datePickerManager.datePopulate(u),this.availabilityInput.container.hide())},t.updateDateDropDownsHandler=function(n){t.updateDateDropDowns(n)},t.addEvents=function(){this.container.click(this.updateDateDropDownsHandler)},t},n.Class.CalendarAvailabilityDateMarket=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.market=null,t.date=null,t.containerId="",t.container=null,t.fromLabel="",t.currency="",t.templateId="dateMarketTemplateId",t.template=null,t.defaultJourneyTemplateId="dateMarketJourneyDefaultTemplateId",t.defaultJourneyTemplate=null,t.price=null,t.formattedDate="",t.year=-1,t.month=-1,t.day=-1,t.points=null,t.pointsSuffix="pts",t.pointsLabelAppend=" & ",t.availableClass="available",t.init=function(n){this.setSettingsByObject(n),this.setVars()},t.setVars=function(){t.template=this.getById(this.templateId)},t.setVarsAfterDraw=function(){t.container=this.getById(this.containerId)},t.getFormattedPrice=function(){var t=this.price,i="";return t!==null&&t>=0&&(i=n.Util.convertToLocaleCurrency(t),i===""&&(i=t.toString())),i},t.getHtml=function(){var n=this.template.text();return n=this.supplant(n)},t.daySupplantValue=function(){var r=this.market,f="&nbsp;",n=r.requestStartDate,t=r.requestEndDate,i=this.date,u=i.getDate();return n&&t&&n&&t&&(i<n||i>t)&&(u=f),u},t.supplant=function(t){var a=this.price,v=this.getFormattedPrice(),i="",f=this.date,r=f.getFullYear().toString(),e="",o=f.getMonth(),s=0,y=this.daySupplantValue(),p=this.market,h="",w=n.Util.convertToLocaleInteger(this.points),c=this.date.getDate(),l=this.date.getMonth(),nt=this.date.getYear(),b=this.market.startDay,k=this.market.startMonth,tt=this.market.startYear,d=this.market.endDay,g=this.market.endMonth,it=this.market.endYear,u=!1;return s=o+1,e=r.charAt(2)+r.charAt(3),(c>=b&&l>=k||c<=d&&l<=g)&&(u=!0),t=u?n.Util.replace(t,/\[day\]/g,y):n.Util.replace(t,/\[day\]/g,""),t=n.Util.replace(t,/\[month\]/g,o),t=n.Util.replace(t,/\[showMonth\]/g,s),t=n.Util.replace(t,/\[year\]/g,r),t=n.Util.replace(t,/\[twoDigitYear\]/g,e),t=n.Util.replace(t,/\[marketIndex\]/g,p.marketIndex),a>0&&(h=this.availableClass),i=n.Util.formatAmount(v,w,this.pointsLabelAppend,this.pointsSuffix),i==""?(t=n.Util.replace(t,/\[fromLabel\]/g,""),t=n.Util.replace(t,/\[currency\]/g,""),t=n.Util.replace(t,/\[amount\]/g,i),t=u?n.Util.replace(t,"day","day empty"):t):(t=n.Util.replace(t,/\[fromLabel\]/g,this.fromLabel),i=n.Util.replace(i,".00",""),t=n.Util.replace(t,/\[currency\]/g,this.currency),t=n.Util.replace(t,/\[amount\]/g,i)),t=n.Util.replace(t,/\[availableClass\]/g,h)},t.activate=function(){var n=this.market.selectedClass,t=this.availableClass;this.container.removeClass(t),this.container.addClass(n)},t.deactivate=function(){var n=this.market.selectedClass,t=this.availableClass;this.container.removeClass(n),this.container.addClass(t)},t},n.Class.BookingPayment=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.paymentId="",t.paymentMethodType="",t.paymentMethodCode="",t.refundAmount="",t.init=function(n){this.setSettingsByObject(n),this.setVars()},t},n.Class.Payment=function(){var n=this;n.init=function(){n.addCookie(),n.addEvents()},n.addPaymentCenter=function(){var u=$("#paymentCenterFee"),r=$("#pricePCF"),i=n.removeComma(r);i=parseFloat(i)+parseFloat(u.text()),r.text(n.addCommas(i.toFixed(2)))},n.addCookie=function(){var t=[],n,i;t[0]="Sun",t[1]="Mon",t[2]="Tue",t[3]="Wed",t[4]="Thu",t[5]="Fri",t[6]="Sat",n=[],n[0]="Jan",n[1]="Feb",n[2]="Mar",n[3]="Apr",n[4]="May",n[5]="Jun",n[6]="Jul",n[7]="Aug",n[8]="Sep",n[9]="Oct",n[10]="Nov",n[11]="Dec",i=function(){var i=new Date,f=i.getDate()+1,o=i.getFullYear(),s=i.getMonth(),r=new Date(o,s,f),u=r.getDay(),h=r.getMonth(),c=r.getFullYear(),e;return u>6&&(u=0),e=t[u]+","+f+" "+n[h]+" "+c+" 03:00:00 UTC"},document.cookie="prevpage="+window.location.href+";expires="+i()},n.removeComma=function(n){return n.text().replace(/,/g,"")},n.addCommas=function(n){n+="",x=n.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},n.total=function(){var u=n.removeComma($("#priceWWF")),f=n.removeComma($("#priceSEF")),e=n.removeComma($("#priceINS")),h=thisAddOns.removeComma($("#hotelAmount")),o=n.removeComma($("#pricePEB")),s=n.removeComma($("#pricePEBINS")),i=n.removeComma($("#priceMEAL")),k=n.removeComma($("#priceSEAT")),d=n.removeComma($("#priceWAF")),g=n.removeComma($("#pricePCF")),c=n.removeComma($("#pricePF")),l=n.removeComma($("#priceSF")),nt=$("#addOnsSubTotal"),tt=$("#overallTotal"),et=$("#amountdue"),ot=$("#totalAmountDue"),it=$("#bookingSummaryTotal"),rt=$("#priceNBAG").text(),ut=n.removeComma($("#taxesFaresTotal")),ft=n.removeComma($("#faresSubTotal")),a=$("span#currentMealTotal"),v=$("span#currentBaggageTotal"),y=$("span#currentInsuranceTotal"),p=$("span#currentSEFTotal"),w=$("span#currentWWFTotal"),b=$("span#currentBagProtectTotal"),r,t;a.text()!=""&&v.text()!=""&&y.text()!=""&&p.text()!=""&&w.text()!=""&&b.text()!=""&&(i=parseFloat(i-parseFloat(thisAddOns.removeComma(a))),o=parseFloat(o-parseFloat(thisAddOns.removeComma(v))),e=parseFloat(e-parseFloat(thisAddOns.removeComma(y))),f=parseFloat(f-parseFloat(thisAddOns.removeComma(p))),u=parseFloat(u-parseFloat(thisAddOns.removeComma(w))),s=parseFloat(s-parseFloat(thisAddOns.removeComma(b)))),r=parseFloat(u)+parseFloat(f)+parseFloat(e)+parseFloat(o)+parseFloat(s)+parseFloat(i)+parseFloat(k)+parseFloat(d)+parseFloat(g)+parseFloat(rt)+parseFloat(i),h!=""&&(r+=parseFloat(h.replace(",",""))),t=parseFloat(ft)+parseFloat(r)+parseFloat(ut),c!=""&&(t=t+parseFloat(c)),l!=""&&(t=t+parseFloat(l)),nt.text(n.addCommas(r.toFixed(2))),tt.text(n.addCommas(t.toFixed(2))),it.text(n.addCommas(t.toFixed(2)))},n.placeHolderChecker=function(){$("label.placeholder").siblings("input").each(function(){$.trim($(this).val())!=""?$(this).siblings("label.placeholder").hide():$(this).siblings("label.placeholder").show()})},n.addEvents=function(){$(function(){$("[name='DropDownListPaymentMethodCode'], [id$='AddressSelect']").change(function(){n.placeHolderChecker()}),$("#ExternalAccount_tab").click(function(){n.placeHolderChecker()})})}},n.Class.PriceDisplay=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.toggleViewIdArray=null,t.init=function(i){this.setSettingsByObject(i),t.initTaxesAndFees();for(var f=this.toggleViewIdArray||[],r=0,u=null,r=0;r<f.length;r+=1)u=new n.Class.ToggleView,u.init(f[r]),t.toggleViewIdArray[r]=u},t.initTaxesAndFees=function(){$("#priceDetails").each(function(){$(this).find("#TaxesAndFeesLink").each(function(){var n=$(this);n.hover(function(){$(this).siblings("#showTax").css({display:"block"})},function(){$(this).siblings("#showTax").css({display:"none"})})})})},$("#priceDetailsContents").each(function(){$(this).find("#TaxesAndFeesLink").each(function(){var n=$(this);n.click(function(){$(this).siblings("#showTax").toggle()})})}),$("#adminFee").click(function(){$("#webAndMobileAdminFee").toggle(),$("#TaxesAndFeesLink").css({"border-top":"none"})}),t},n.Class.PriceDisplayCulture=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.openJaw="",t.roundTrip="",t.oneWay="",t.adult="",t.child="",t.infant="",t.pwd="",t.senior="",t.txex="",t.init=function(n){this.setSettingsByObject(n),t.openJaw=this.oneWay,t.roundTrip=this.roundTrip,t.oneWay=this.oneWay,t.adult=this.adult,t.child=this.child,t.infant=this.infant,t.pwd=this.pwd,t.senior=this.senior,t.txex=this.txex},t},n.Class.FlightDisplay=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.toggleViewIdArray=null,t.init=function(i){this.setSettingsByObject(i);for(var f=this.toggleViewIdArray||[],r=0,u=null,r=0;r<f.length;r+=1)u=new n.Class.ToggleView,u.init(f[r]),t.toggleViewIdArray[r]=u},t},n.Class.UpgradeAvailabilityInput=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.cabinUpgradeSegmentArray=[],t.init=function(n){this.setSettingsByObject(n),this.initCabinUpgradeSegmentArray()},t.initCabinUpgradeSegmentArray=function(){for(var i=0,u=this.cabinUpgradeSegmentArray||[],f=u.length,r=null,i=0;i<f;i+=1)r=new n.Class.CabinUpgradeSegment,r.init(u[i]),t.cabinUpgradeSegmentArray[i]=r},t},n.Class.CabinUpgradeSegment=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.segmentInputId="",t.segmentInput=null,t.cabinUpgradeOptionsArray=[],t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.initCabinUpgradeOptionsArray()},t.initCabinUpgradeOptionsArray=function(){for(var i=0,u=this.cabinUpgradeOptionsArray||[],f=u.length,r=null,i=0;i<f;i+=1)r=new n.Class.CabinUpgrade,r.init(u[i]),r.cabinUpgradeSegment=this,t.cabinUpgradeOptionsArray[i]=r},t.setVars=function(){t.segmentInput=this.getById(this.segmentInputId)},t},n.Class.CabinUpgrade=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.upgradeOptionId="",t.upgradeOption=null,t.optionValue="",t.cabinUpgradeSegment=null,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setVars=function(){t.upgradeOption=this.getById(this.upgradeOptionId)},t.addEvents=function(){this.upgradeOption.click(this.updateDataHandler)},t.updateDataHandler=function(){t.updateData()},t.updateData=function(){var n=this.cabinUpgradeSegment||{},t=n.segmentInput;t.val(this.optionValue)},t},n.Class.RandomImage=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.imageUriArray=[],t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.setAsBackground()},t.getRandomNumber=function(){var n=this.imageUriArray.length;return Math.floor(Math.random()*n)},t.setAsBackground=function(){var n=this.getRandomNumber(),t="url("+this.imageUriArray[n]+")";this.container.css("background-image",t)},t},n.Class.DropDown=function(t){t=t||{};var r=new n.Class.SkySales,i=n.Util.extendObject(r);return i.container={},i.name="",i.showCode=!0,i.options=[],i.dropDownContainer=null,i.dropDownContainerInput=null,i.document=null,i.optionList=null,i.optionActiveClass="optionActive",i.timeOutObj=null,i.timeOut=225,i.minCharLength=2,i.optionMax=100,i.html='<div><\/div><div class="dropDownContainer"><\/div>',i.autoComplete=!0,i.getOptionHtml=function(n){n=n||"",n=n.toLowerCase();var t={},e="",r="",h=0,o=this.options,c=this.showCode,u="",f="",s="",l=new RegExp("^"+n,"i");if(n.length<i.minCharLength)r="";else for(e in o)o.hasOwnProperty(e)&&(t=o[e],u=t.name||"",u=u.toLowerCase(),f=t.code||"",f=f.toLowerCase(),(u.indexOf(n)>-1||f.indexOf(n)>-1)&&(s=t.optionClass?' class="'+t.optionClass+'"':"",r+="<div"+s+"><span>"+t.code+"<\/span>"+t.name,c&&(r+=" ("+t.code+")"),r+="<\/div>",h+=1));return r},i.close=function(){i.timeOutObj&&window.clearTimeout(i.timeOutObj),i.document.unbind("click",i.close),i.optionList&&(i.optionList.unbind("hover"),i.optionList.unbind("click")),i.optionList=null,i.dropDownContainer.html("")},i.getActiveOptionIndex=function(){var n=-1,t=$("."+i.optionActiveClass,i.dropDownContainer);return i.optionList&&t.length>0&&(n=i.optionList.index(t[0])),n},i.arrowDown=function(){var n=i.getActiveOptionIndex();i.optionList?n===-1&&i.optionList.length>0?i.optionActive.call(i.optionList[0]):i.optionList.length>n+1?(i.optionInActive.call(i.optionList[n]),i.optionActive.call(i.optionList[n+1])):i.arrowDownOpen():i.arrowDownOpen()},i.arrowDownOpen=function(){var n=i.minCharLength;i.minCharLength=0,i.open(),i.minCharLength=n},i.arrowUp=function(){var n=i.getActiveOptionIndex();i.optionList&&(n===-1&&i.optionList.length>0?i.optionActive.call(i.optionList[0]):n>0&&i.optionList.length>0&&(i.optionInActive.call(i.optionList[n]),i.optionActive.call(i.optionList[n-1])))},i.selectButton=function(){var n=i.getActiveOptionIndex(),t=i.optionMax;n>-1?i.selectOption.call(i.optionList[n]):i.autoComplete===!0&&(i.optionMax=1,i.open(),i.optionList&&i.optionList.length>0&&i.selectOption.call(i.optionList[0]),i.optionMax=t)},i.keyEvent=function(n){var t=!0,r=n.which;return r===40?(i.arrowDown(),i.autoComplete=!0,t=!1):r===38?(i.arrowUp(),i.autoComplete=!0,t=!1):r===9?(i.selectButton(),i.inputBlur()):r===13?(i.selectButton(),i.autoComplete=!1,t=!1):i.autoComplete=!0,t},i.inputKeyEvent=function(n){var r=!0,t=n.which;return t!==40&&t!==38&&t!==9&&t!==13&&(i.timeOutObj&&window.clearTimeout(i.timeOutObj),i.timeOutObj=window.setTimeout(i.open,i.timeOut),r=!1),r},i.catchEvent=function(){return!1},i.open=function(){var t="",n=null,f=i.dropDownContainerInput.val(),e=i.getOptionHtml(f),r=0,u=0;i.dropDownContainer.html(e),i.addOptionEvents(),i.dropDownContainer.click(i.catchEvent),i.document.click(i.close),i.dropDownContainer.show(),i.optionList&&i.optionList.length>0&&i.optionActive&&i.optionActive.call(i.optionList[0]),u=i.dropDownContainer.width(),$.browser.msie&&(r=i.dropDownContainer.height(),t='<iframe src="#"><\/iframe>',i.dropDownContainer.prepend(t),n=$("iframe",i.dropDownContainer),n.width(u),n.height(r))},i.optionActive=function(){var n=$(this);i.optionList.removeClass(i.optionActiveClass),n.addClass(i.optionActiveClass)},i.optionInActive=function(){var n=$(this);n.removeClass(i.optionActiveClass)},i.selectOption=function(){var n=$("span",this).text();i.dropDownContainerInput.val(n),i.close(),i.dropDownContainerInput.change()},i.addOptionEvents=function(){i.optionList=$("div",i.dropDownContainer),i.optionList.hover(i.optionActive,i.optionInActive),i.optionList.click(i.selectOption)},i.inputBlur=function(){i.close()},i.addEvents=function(n){i.dropDownContainerInput=n.input,i.dropDownContainer=$("div.dropDownContainer",i.container),i.document=$(document),i.dropDownContainerInput.keyup(i.inputKeyEvent),i.dropDownContainerInput.keydown(i.keyEvent)},i.init=function(t){i.setSettingsByObject(t);var r=i.html;t.input.attr("autocomplete","off"),t.input.wrap('<span class="dropDownOuterContainer"><\/span>'),t.input.after(r),i.container=t.input.parent("span.dropDownOuterContainer"),i.addEvents(t),n.Class.DropDown.dropDownArray[n.Class.DropDown.dropDownArray.length]=i},i.init(t),i},n.Class.DropDown.dropDownArray=[],n.Class.DropDown.getDropDown=function(t){for(var i=null,r=0,e=null,u=n.Class.DropDown.dropDownArray,f=null,o=t.input[0],r=0;r<u.length;r+=1)e=u[r],f=e.dropDownContainerInput[0],f&&o&&f===o&&(i=u[r],t.options&&(i.options=t.options));return i||(i=new n.Class.DropDown(t)),i},n.Class.DatePickerManager=function(){var o=new n.Class.SkySales,t=n.Util.extendObject(o),r=[],u="-",f="yy-mm",s="first",e=new RegExp("\\d{4}-\\d{2}"),i=new Date,h=n.Util.getResource();return t.isAOS=!1,t.yearMonth=null,t.day=null,t.dateDisplay=null,t.linkedDate=null,t.useJQueryDatePicker=!0,t.yearMonthOptionArray=[],t.fullDateFormatString="mm/dd/yy",t.dateDisplayFormat="dd M yy",t.flightTypeDivContainerId="",t.flightTypeRadioButtons=null,t.originStationInputId="",t.originStationInput=null,t.beginDateBound=new Date,t.endDateBound=new Date,t.currentDate=new Date,t.removeDaysOutOfBounds=!0,t.setBeginDateBound=function(n){t.beginDateBound=n,t.yearMonthOptionArray=[]},t.setEndDateBound=function(n){t.endDateBound=n,t.yearMonthOptionArray=[]},t.getDaysInMonth=function(n){var t=new Date(n.getFullYear(),n.getMonth(),32),i=t.getDate();return 32-i},t.validateDay=function(n){return n=n||"",n.match(/\d{2}/)},t.validateYearMonth=function(n){return n=n||"",n.match(e)},t.getDate=function(n,t){var i=null,f=0,e=1,r=[],o=0,s=0;return n=n||this.yearMonth.val(),t=t||this.day.val(),n&&t?(r=n.split(u),!0===this.isAOS&&(f=1,e=0),o=r[f],s=r[e]-1,i=new Date(o,s,t)):i=this.currentDate,i},t.parseDateWholeString=function(n,i){var f=i?i:u,r=n.split(f),e=r[0]+f+r[1],o=r[2];return t.parseDate(e,o)},t.parseDate=function(n,t){var r=new Date,e=this.validateDay(t),o=this.validateYearMonth(n),i={},u=31,f=1;return e&&o?(i=this.getDate(n,t),u=this.getDaysInMonth(i),f=t,t>u&&(f=u),r=new Date(i.getFullYear(),i.getMonth(),f)):r=new Date,r},t.setDefaultMinDate=function(n){var t;if(n.id&&n.id.indexOf("2")>0){var u=n.id.replace("2","1"),r=$("#"+u).val(),i=new Date(r);return isNaN(i)&&(t=r.split("-"),i=new Date(t[0],parseInt(t[1])-1,t[2])),{minDate:i}}return{}},t.readLinked=function(){var t=this.parseDate(this.yearMonth.val(),this.day.val()),i=n.Util.dateToIsoString(t);this.linkedDate.val(i)},t.readLinkedHandler=function(n,i){var u=t.linkedDate.get(0).id?t.linkedDate.get(0).id.indexOf("2")>-1:!1;if(u){var f=t.linkedDate.get(0).id.replace("2","1"),r=$("#"+f).val(),e=t.linkedDate.val(),o=new Date(r),s=new Date(e);o>=s?t.setYearMonthAndDayInput(r):t.readLinked()}else t.readLinked();return t.setDefaultMinDate(i)},t.trimDaysBeforeBeginDateBound=function(n){var u=this.beginDateBound.getFullYear(),f=this.beginDateBound.getMonth(),t=this.beginDateBound.getDate(),i=parseInt(n[0].code,10),r=0,e=this.currentDate.getFullYear(),o=this.currentDate.getMonth();return o===f&&e===u&&i<t&&(r=t-i,n.splice(0,r)),n},t.dayArrayIndexOf=function(n,t){for(var e=t.length,i=0,r={},u=-1,f,i=0;i<e;i+=1)if(r=t[i],f=parseInt(r.code,10),f===n){u=i;break}return u},t.trimDaysAfterEndDateBound=function(n){var f=this.endDateBound.getFullYear(),e=this.endDateBound.getMonth(),t=this.endDateBound.getDate(),o=n.length,r=n[o-1].code,u=0,i=0,s=this.currentDate.getFullYear(),h=this.currentDate.getMonth();return h===e&&s===f&&r>t&&(i=this.dayArrayIndexOf(t,n)+1,i>=0&&(u=r-t,n.splice(i,u))),n},t.removeDaysOutsideOfBounds=function(n){return n=this.trimDaysBeforeBeginDateBound(n),n=this.trimDaysAfterEndDateBound(n)},t.dayPopulateInterface=function(n,i,u){r=this.createAllDayOptionArray(),t.day=i,t.removeDaysOutOfBounds=u,this.dayPopulate(n)},t.dayPopulate=function(t){var o=t.getDate(),s=this.getDaysInMonth(t),u=31-s,i=n.Util.cloneArray(r),f=31,e={};u>0&&(f=31-u,i.splice(f,u)),this.removeDaysOutOfBounds&&(i=this.removeDaysOutsideOfBounds(i)),e={selectedItem:o,objectArray:i,input:this.day,clearOptions:!0},n.Util.populate(e)},t.getYearMonthOptionArray=function(){var u=this.yearMonthOptionArray,t=0,f="0",i=2009,r=0,h={},c="",l="",e=this.beginDateBound,v=this.endDateBound,o={},s={},a=31;if(u.length===0)for(t=e.getMonth(),i=e.getFullYear(),h=n.Resource.dateCultureInfo.monthNamesShort,r=0;r<12;r+=1){if(o=new Date(i,t,1),a=this.getDaysInMonth(o),s=new Date(i,t,a),s>=e&&o<=v)c=h[t],f=t<9?"0":"",l=i+"-"+f+(t+1),u[r]={name:c,code:l};else if(s>this.endDateBound)break;t+=1,t>11&&(t=0,i+=1)}return u},t.yearMonthPopulate=function(t){var r=this.getYearMonthOptionArray(),u=$.datepicker.formatDate(f,t),i={};i={selectedItem:u,objectArray:r,input:this.yearMonth,clearOptions:!0},n.Util.populate(i)},t.datePopulate=function(n){n?t.currentDate=n:n=this.currentDate,this.yearMonthPopulate(n),this.dayPopulate(n),this.copyDayAndYearMonthInputToLinkedDate()},t.repopulateDayInputAndUpdateLinkedDate=function(){var r=this.day.val(),i=this.getDate(this.yearMonth.val(),1),u=this.getDaysInMonth(i),f="";r>u&&(r=u),i=new Date(i.getFullYear(),i.getMonth(),r),i<this.beginDateBound&&(i=this.beginDateBound),t.currentDate=i,this.dayPopulate(i),f=n.Util.dateToIsoString(i),this.linkedDate.val(f)},t.repopulateDayInputAndUpdateLinkedDateHandler=function(){t.repopulateDayInputAndUpdateLinkedDate()},t.setYearMonthAndDayInput=function(i){var u="",e="",o=t.dateDisplayFormat,r=n.Util.parseIsoDate(i);r&&(u=$.datepicker.formatDate(f,r),this.yearMonth.val(u),this.repopulateDayInputAndUpdateLinkedDate(),this.dayPopulate(r),this.readLinked(),this.day.change(),e=$.datepicker.formatDate(o,r),t.dateDisplay.val(e)),t.currentDate=r},t.setYearMonthAndDayInputHandler=function(n){var u,r,f,o,e;t.setYearMonthAndDayInput(n),t.linkedDate.get(0).id.indexOf("1")>0&&(Date.parse($("#date_picker_display_1").val())!=1||Date.parse($("#date_picker_display_2").val())!=1)&&($("#"+t.linkedDate.get(0).id).parent("div.marketDate").removeClass("validationError"),$("#"+t.linkedDate.get(0).id.replace("1","2")).parent("div.marketDate").removeClass("validationError")),t.linkedDate&&t.linkedDate.length>0&&t.linkedDate.get(0).id.indexOf("1")>0&&(u=$("#"+t.flightTypeDivContainerId+" input[type='radio']:checked"),r=u?u.val().toLowerCase():"",r&&(r=="roundtrip"?(f=t.linkedDate.get(0).id.replace("1","2"),$("#"+f).datepicker&&$("#"+f).datepicker("show")):r=="openjaw"&&(o=t.getById(t.originStationInputId.replace("1","2")),e=o.mcDropdown(),e&&e.openHandler())))},t.copyDayAndYearMonthInputToLinkedDate=function(){var r=this.yearMonth.val(),u=this.day.val(),i=this.parseDate(r,u),f=n.Util.dateToIsoString(i);this.linkedDate.val(f),t.currentDate=i},t.updatemarketDay2=function(){var i;if(t.linkedDate&&t.linkedDate.length>0&&(i=t.linkedDate.get(0).id?t.linkedDate.get(0).id.indexOf("1")>-1:!1),i){var r=t.dateDisplay.get(0).id.replace("1","2"),u=$("#"+r),f=t.linkedDate.val(),e=n.Util.parseIsoDate(f),o=$.datepicker.formatDate(t.dateDisplayFormat,e);u.val(o)}},t.copyDayAndYearMonthInputToLinkedDateHandler=function(){t.copyDayAndYearMonthInputToLinkedDate(),t.updatemarketDay2()},t.createYearOptionArray=function(n,t,r){var e=[],o=n?parseInt(n):1900,s=t?parseInt(t):i.getFullYear(),u,f;if(r)for(u=s;u>=o;u--)f={name:u,code:u},e.push(f);else for(u=o;u<=s;u++)f={name:u,code:u},e.push(f);return e},t.createAllMonthOptionArray=function(n){var u=[],f=n?n:h.dateCultureInfo.monthNames,o=f.length,t,e,i,r;for(Option=function(n,t){this.name=n,this.code=t},t=1;t<=o;t++)i=f[t-1],i&&(r=t<=9?"0"+t:t,e=new Option(i,r),u.push(e));return u},t.createAllDayOptionArray=function(n){for(var r=[],t=1,i={},u=n?parseInt(n):31,t=1;t<=u;t+=1)i={},i.name=t,i.code=t<=9?"0"+t:t,r.push(i);return r},t.dateLastDayOfMonthOneYearFromToday=function(){var n=i.getFullYear()+1,t=i.getMonth();return new Date(n,t,0)},t.setVars=function(){this.beginDateBound.setDate(i.getDate()),this.endDateBound=this.dateLastDayOfMonthOneYearFromToday(),!0===this.isAOS&&(u="/",f="m/yy",e=new RegExp("\\d{1,2}\\/\\d{4}"),s="eq(1)"),r=this.createAllDayOptionArray(),t.originStationInput=this.getById(t.originStationInputId)},t.initInputs=function(){var n=new Date;n=this.isAOS?new Date(this.linkedDate.val()):this.getDate(this.yearMonth.val(),this.day.val()),n!==null&&(t.currentDate=n,this.dayPopulate(n),t.currentDate=n,this.isAOS||this.copyDayAndYearMonthInputToLinkedDate())},t.getMaxDate=function(){var i=null,n=new Date,t=null,r=31;return this.yearMonth.val()!==null?(i=$("option:last",this.yearMonth).val(),t=parseInt($("option:last",this.yearMonth).attr("max-day")),n=this.getDate(i,1),r=isNaN(t)?this.getDaysInMonth(n):t,n=new Date(n.getFullYear(),n.getMonth(),r)):n.setYear(n.getFullYear()+1),n},t.addEventsToJQueryDatePicker=function(){var f=new Date,r={},e=n.Util.getResource(),t=e.dateCultureInfo,i=n.datepicker,u={};r=this.getMaxDate(),this.useJQueryDatePicker&&(u={beforeShow:this.readLinkedHandler,onSelect:this.setYearMonthAndDayInputHandler,minDate:f,maxDate:r,showOn:"both",buttonImageOnly:!0,buttonImage:"images/CebuAirRevamp/calendar.png",prevButtonImage:"images/CebuAirRevamp/blue-arrow-left.png",nextButtonImage:"images/CebuAirRevamp/blue-arrow-right.png",buttonText:"Calendar",numberOfMonths:2,changeYear:!0,changeMonth:!0,showTodayLink:!1,showCloseLink:!1,mandatory:!0,monthNames:t.monthNames,monthNamesShort:t.monthNamesShort,dayNames:t.dayNames,dayNamesShort:t.dayNamesShort,dayNamesMin:["S","M","T","W","Th","F","S"],closeText:i.closeText,prevText:i.prevText,nextText:i.nextText,currentText:i.currentText,dateFormat:"yy-mm-dd",removeHref:!0},this.linkedDate.datepicker(u))},t.addEvents=function(){this.yearMonth.change(this.repopulateDayInputAndUpdateLinkedDateHandler),this.day.change(this.copyDayAndYearMonthInputToLinkedDateHandler),this.addEventsToJQueryDatePicker()},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.initInputs(),this.addEvents()},t},n.initializeSkySalesForm=function(){document.SkySales=document.forms.SkySales},n.getSkySalesForm=function(){return $("SkySales")[0]},n.Common=function(){var t=this,i=null;t.allInputObjects=null,t.initializeCommon=function(){var i=new n.Hint;t.addKeyDownEvents(),t.addSetAndEraseEvents(),t.setValues(),i.addHintEvents()},t.setValues=function(){var n=function(){this.jsvalue!==null&&this.jsvalue!==undefined&&(this.value=this.jsvalue)};t.getAllInputObjects().each(n)},t.stopSubmit=function(){return $("form").unbind("submit",t.stopSubmit),!1},t.resetSubmit=function(){var n=$("form");n.unbind("submit",t.stopSubmit)},t.addKeyDownEvents=function(){var n=function(n){var i=$("form");return n.keyCode===13?(i.submit(t.stopSubmit),n.preventDefault(),n.stopPropagation(),setTimeout(t.resetSubmit,25),!1):!0};this.getAllInputObjects().keydown(n)},t.getAllInputObjects=function(){return t.allInputObjects===null&&(t.allInputObjects=$(":input")),t.allInputObjects},t.addSetAndEraseEvents=function(){var i=null,r=null,u=null;i=function(){var i=$(this),r=n.Util.getAttributeValue(i,"requiredempty");t.eraseElement(this,r)},r=function(){var i=$(this),r=n.Util.getAttributeValue(i,"requiredempty");t.setElement(this,r),i.change()},u=function(){var t=$(this),u=null;u=n.Util.getAttributeValue(t,"requiredempty"),u!==null&&u!==undefined&&t.is(":text")&&(t.focus(i),t.blur(r))},t.getAllInputObjects().each(u)},t.eraseElement=function(n,t){n.value===t&&(n.value="")},t.setElement=function(n,t){n.value===""&&(n.value=t)},t.getCountryInfo=function(){return i===null&&(i=window.countryInfo),i},t.setCountryInfo=function(n){return i=n,t},t.isEmpty=function(t,i){var r=null,u=!1;return t&&i===undefined&&(i=t.requiredempty?t.requiredempty:""),r=n.Common.getValue(t),(r===null||r===undefined||r.length===0||r===i)&&(u=!0),u},t.stripeTables=function(){return $(".stripeMe tr:even").addClass("alt"),t}},n.Common.addEvent=function(n,t,i){$(n).bind(t,i)},n.Common.getValue=function(n){var t=null;return n?t=$(n).val():null},n.Util.getRequiredFlag=function(){return"*"},n.Util.formatInputLabel=function(t){var f=$(t).attr("id"),e=n.Util.getRequiredFlag(),u=null,i="",r="",o=-1;f&&(u=$("label[for='"+f+"']"),i=u.text(),i&&u.find(".off-screen").length==0&&(r=n.Util.getAttributeValue(t,"required"),r=r||"",r=r.toString().toLowerCase(),o=i.indexOf(e),o===0&&(i=i.substring(1)),r==="true"&&(i=e+i),u.text(i)))},n.InputLabel=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.getInputLabelRequiredFlag=function(){return"*"},t.getInputLabelSuffix=function(){return":"},t.formatInputLabel=function(){var i=t.getInputLabelRequiredFlag(),r=t.getInputLabelSuffix(),u=function(){var o=t.getById(this.id).eq(0),f=$(o).text(),e="",u=null;f!==""&&this.type!="select-one"&&(e=$(this).attr("type"),e!=="checkbox"&&e!=="radio"&&f.indexOf(":")==-1&&(f=f+r),u=this.required,u===undefined&&(u=null),u===null&&(u=this.getAttribute("required")),u!==null&&(u=u.toString().toLowerCase(),u==="true"&&f.indexOf("*")==-1&&(f=i+f)),$(o).text(f))};n.common.getAllInputObjects().each(u)},t},n.Dhtml=function(){var n=this;return n.getX=function(n){var t=0;if(n.x)t+=n.x;else if(n.offsetParent)while(n.offsetParent)t+=n.offsetLeft,n=n.offsetParent;return t},n.getY=function(n){var t=0;if(n.y)t+=n.y;else if(n)while(n)t+=n.offsetTop,n=n.offsetParent;return t},n},n.Hint=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.addHintEvents=function(){n.common.getAllInputObjects().each(this.eventFunction)},t.eventFunction=function(){var i=n.Util.getAttributeValue($(this),"hint");i&&(this.tagName&&this.tagName.toString().toLowerCase()==="input"?t.addHintFocusEvents(this):t.addHintHoverEvents(this))},t.removeEventFunction=function(){var t=$(this),i=n.Util.getAttributeValue(t,"hint");i&&(this.tagName&&this.tagName.toString().toLowerCase()==="input"?(t.unbind("focus"),t.unbind("blur")):(t.unbind("mouseenter"),t.unbind("mouseleave")))},t.addHintFocusEvents=function(n,i){var r=null,u=null;r=function(){t.showHint(n,i)},u=function(){t.hideHint(n,i)},$(n).is(":hidden")===!1&&($(n).focus(r),$(n).blur(u))},t.addHintHoverEvents=function(n,i){var r=null,u=null;r=function(){t.showHint(n,i)},u=function(){t.hideHint(n,i)},$(n).hover(r,u)},t.getHintDivId=function(){return"cssHint"},t.showHint=function(i,r,u,f,e){var p=t.getHintDivId(),c=this.getById(p),o=0,l=0,w=0,b=0,a=n.Util.getAttributeValue($(i),"hint"),h=null,s=null,v=0,y=0;u===undefined&&(u=i.hintxoffset),f===undefined&&(f=i.hintyoffset),e===undefined&&(e=i.hintReferenceid),h=this.getById(e)[0],s=new n.Dhtml,h?(o=s.getX(h),l=s.getY(h),u===undefined&&(o+=h.offsetWidth+100)):(o=s.getX(i),l=s.getY(i),u===undefined&&(o+=i.offsetWidth+100)),!r&&a&&(r=a),c.html(r),c.show(),u=u!==undefined?u:w,f=f!==undefined?f:b,v=parseInt(u,10)+parseInt(o,10),y=parseInt(f,10)+parseInt(l,10),c.css("left",v+"px"),c.css("top",y+"px")},t.hideHint=function(){var i=t.getHintDivId();this.getById(i).hide()},t},n.ValidationErrorReadAlong=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.objId="",t.obj=null,t.errorMessage="",t.isError=!1,t.hasBeenFixed=!1,t.hasValidationEvents=!1,t.getValidationErrorHtml=function(){return'<iframe id="validationErrorContainerReadAlongIFrame" class="hidden" ><\/iframe> <div id="validationErrorContainerReadAlong" > <div id="validationErrorContainerReadAlongContent" > <div class="validationArrow" style="top:72px;left:125px;"> <\/div> <div id="validationErrorContainerReadAlongList" > <\/div> <\/div> <\/div>'},t.getValidationErrorCloseId=function(){return"validationErrorContainerReadAlongCloseButton"},t.getValidationErrorListId=function(){return"validationErrorContainerReadAlongList"},t.getValidationErrorIFrameId=function(){return"validationErrorContainerReadAlongIFrame"},t.getValidationErrorDivId=function(){return"validationErrorContainerReadAlong"},t.getFixedClass=function(){return"fixedValidationError"},t.addCloseEvent=function(){var i=t.getValidationErrorCloseId(),n=null;n=function(){t.hide()},this.getById(i).click(n)},t.addValidationErrorDiv=function(){var n=this.getById("errorDiv");n.length===0&&(n=this.getById("errorDiv")),$(".hotelDatepicker.checkout").hasClass("validationError")?n.css("display","none"):n.css("display","block"),n.append(t.getValidationErrorHtml())},t.hide=function(){var n=t.getValidationErrorIFrameId(),i=t.getValidationErrorDivId();this.getById(n).hide(),this.getById(i).hide()},t.addFocusEvent=function(i){var r={obj:this};eventFunction=null,eventFunction=function(r){var v=r.data.obj,c=null,o=null,l=0,a=0,f=0,e=0,y=null,s=null,p=i,u,h;if(v.isError===!0)return c=new n.Hint,c.hideHint(),o=t.getById(t.getValidationErrorDivId()),l=parseInt(o.width(),10)+5,a=parseInt(o.height(),10)+5,y=new n.Dhtml,o.find("li").each(function(n){n===p?$(this).removeClass("hidden"):$(this).addClass("hidden")}),h=this.id,u=h.indexOf(":")>=0?$(document.getElementById(h)):$("#"+h),navigator.userAgent.toLowerCase().indexOf("firefox")>-1?(u.is("input")&&u.prop("type")=="text"||u.is("select"))&&u.width()<146?(f=u.offset().left-(125-u.width()/2),e=u.offset().top-84):u.is(":checkbox")||u.is(":radio")?(f=u.offset().left-125,e=u.offset().top-84):u.is(":text")?(f=u.offset().left,e=u.offset().top-84):(f=u.offset().left,e=u.offset().top-75):navigator.userAgent.toLowerCase().indexOf("ie")>-1?(u.is("input:text")&&u.prop("type")=="text"||u.is("select"))&&u.width()<146?(f=u.offset().left-(125-u.width()/2),e=u.offset().top-83):u.is(":radio")?(f=u.offset().left-119,e=u.offset().top-85):u.is(":checkbox")?(f=u.offset().left-121,e=u.offset().top-85):u.is(":text")?(f=u.offset().left,e=u.offset().top-84):(f=u.offset().left,e=u.offset().top-81):(u.is("input:text")||u.is("select"))&&u.width()<146?(f=u.offset().left-(125-u.width()/2),e=u.offset().top-83):u.is(":checkbox")||u.is(":radio")?(f=u.offset().left-125,e=u.offset().top-83):(f=u.offset().left,e=u.offset().top-81),$.browser.msie&&(s=t.getById(t.getValidationErrorIFrameId()),s.css("position","absolute"),s.width(l-35),s.height(a-155),s.css("left",f+16),s.css("top",e)),o.css("left",f),o.css("top",e),o.css("position","absolute"),o.css("width","auto"),o.show("slow"),!1},$(this.obj).is(":hidden")===!1&&$(this.obj).bind("focus",r,eventFunction)},t.addBlurEvent=function(i){var r={obj:this};eventFunction=null,eventFunction=function(r){var u=r.data.obj,e=new n.Validate(null,"","",null),h="",l=!1,o=!0,c="",f=null,s="",a=null;return e.validateSingleElement(this),h=e.errors,e.validationErrorArray.length>0&&e.validationErrorArray[0].isError===!1&&(l=!0),c=u.getValidationErrorListId(),f=t.getById(c).find("li").eq(i),s=u.getFixedClass(),a=function(){o===!0&&$(this).attr("class").indexOf("hidden")===-1&&$(this).attr("class").indexOf(s)===-1&&(o=!1)},l===!0?(u.hasBeenFixed=!0,f.addClass(s),o=!0,t.getById(c).find("li").each(a),o===!0&&t.hide()):(u.hasBeenFixed=!1,f.removeClass(s),f.removeClass("hidden"),u.isError=!0,u.errorMessage=h,f.text(h)),!1},$(this.obj).bind("blur",r,eventFunction)},t},n.errorsHeader="Please correct the following.\n\n",n.Validate=function(t,i,r,u){var o=new n.Class.SkySales,f=n.Util.extendObject(o),e=null;return r===undefined&&(r=n.errorsHeader),f.form=t,f.namespace=i,f.errors="",f.validationErrorArray=[],f.setfocus=null,f.clickedObj=null,f.errorDisplayMethod="read_along",f.errorsHeader=r,f.namedErrors=[],f.addErrorEvent=!0,f.mcDropdownContainerClass="mcContainer",f.dateRangeArray=[],u&&(f.regexElementIdFilter=u),f.requiredAttribute="required",f.requiredEmptyAttribute="requiredempty",f.validationTypeAttribute="validationtype",f.regexAttribute="regex",f.minLengthAttribute="minlength",f.numericMinLengthAttribute="numericminlength",f.maxLengthAttribute="maxlength",f.numericMaxLengthAttribute="numericmaxlength",f.minValueAttribute="minvalue",f.maxValueAttribute="maxvalue",f.equalsAttribute="equals",f.dateRangeAttribute="daterange",f.dateRange1HiddenIdAttribute="date1hiddenid",f.dateRange2HiddenIdAttribute="date2hiddenid",f.dateCheckAttribute="datecheck",f.contactCheckAttribute="checkcontact",f.checkINSAttribute="checkinsurance",f.checkWWFAttribute="checkwwfee",f.checkMERAttribute="checkmerchandise",f.checkEnableTxtBoxAttribute="enabletxtbox",f.checkFlightCombinationAttribute="checkflightcombination",f.checkFlightAvailabiltyAttribute="checkflightavailabilty",f.checkUMAttribute="checkum",f.checkPaxCountAttribute="checkpaxcount",f.checkDepartureDateAttribute="checkdeparturedate",f.checkReturnDateAttribute="checkreturndate",f.checkOriginStation2Attribute="checkoriginstation2",f.checkDestinationStation2Attribute="checkdestinationstation2",f.hotelStayWithinLimitAttribute="hotelstaylimit",f.defaultErrorAttribute="error",f.requiredErrorAttribute="requirederror",f.validationTypeErrorAttribute="validationtypeerror",f.regexErrorAttribute="regexerror",f.minLengthErrorAttribute="minlengtherror",f.maxLengthErrorAttribute="maxlengtherror",f.minValueErrorAttribute="minvalueerror",f.maxValueErrorAttribute="maxvalueerror",f.equalsErrorAttribute="equalserror",f.dateRangeErrorAttribute="daterangeerror",f.dateEqualErrorAttribute="dateequalerror",f.dateNoFlightsErrorAttribute="datenoflightserror",f.dateCheckErrorAttribute="datecheckerror",f.dateCheckInfantErrorAttribute="infantdateerror",f.dateChechInfantFutureDateErrorAttribute="infantfuturedateerror",f.dateCheckInfantReturnAsChildAttribute="infantreturnedaschilderror",f.nameCheckErrorAttribute="namecheckerror",f.dateValhoursErrorAttribute="valhours",f.checkUMErrorAttribute="checkumerror",f.validatecheckInpaxerror="validatecheckinpaxerror",f.validateSeatmaperror="validateseatmaperror",f.hotelStayWithinLimitErrorAttribute="hotelstaylimiterror",f.agreementRequired="true",f.agreementRequiredError="You must indicate that you agree to the Fare Rules, General Terms and Conditions, Travel Regulations and Website Terms of use by clicking the check box near the bottom of the page.",$("#validationLang input[id^=isInvalid]").attr("text")!=undefined?(f.defaultError="{label}"+$("#validationLang input[id^=isInvalid]").attr("text"),f.defaultRequiredError="{label}"+$("#validationLang input[id^=isRequired]").attr("text"),f.defaultValidationTypeError="{label}"+$("#validationLang input[id^=isInvalid]").attr("text"),f.defaultRegexError="{label}"+$("#validationLang input[id^=isInvalid]").attr("text"),f.defaultMinLengthError="{label}"+$("#validationLang input[id^=tooShort]").attr("text"),f.defaultMaxLengthError="{label}"+$("#validationLang input[id^=tooLong]").attr("text"),f.defaultMinValueError="{label}"+$("#validationLang input[id^=greatThan]").attr("text")+"{minValue}"+$("#validationLang input[id^=dot]").attr("text"),f.defaultMaxValueError="{label}"+$("#validationLang input[id^=lessThan]").attr("text")+"{maxValue}"+$("#validationLang input[id^=dot]").attr("text"),f.defaultEqualsError="{label}"+$("#validationLang input[id^=notEqual]").attr("text")+" {equals}",f.defaultNotEqualsError="{label}"+$("#validationLang input[id^=cannotEqual]").attr("text")+"{equals}",f.defaultSameNameError=$("#validationLang input[id^=duplicateGuest]").attr("text"),f.defaultInvalidFlightCombination=$("#validationLang input[id^=dateCombination]").attr("text"),f.defaultInvalidFlightFareClassCombination=$("#validationLang input[id^=SCOFW]").attr("text"),f.defaultNoFlightFoundError=$("#validationLang input[id^=anotherDateStation]").attr("text"),f.defaultcheckInpaxerror=$("#validationLang input[id^=atLeastOnePaxCheckin]").attr("text"),f.defaultSeatmaperror=$("#validationLang input[id^=mustSelectSeat]").attr("text")):(f.defaultError="{label} is invalid.",f.defaultRequiredError="{label} is required.",f.defaultValidationTypeError="{label} is invalid.",f.defaultRegexError="{label} is invalid.",f.defaultMinLengthError="{label} is too short in length.",f.defaultMaxLengthError="{label} is too long in length.",f.defaultMinValueError="{label} must be greater than {minValue}.",f.defaultMaxValueError="{label} must be no more than {maxValue}.",f.defaultEqualsError="{label} is not equal to {equals}",f.defaultNotEqualsError="{label} cannot equal {equals}",f.defaultSameNameError="Duplicate of another guest.",f.defaultInvalidFlightCombination="Flight dates you've chosen are invalid. Please select another date combination.",f.defaultInvalidFlightFareClassCombination="SC/OFW Fares can't be combined with Year-Round and Promo Fares.",f.defaultInvalidFlightFareClassCombinationSC="SC/Labor Fares can't be combined with Year-Round and Promo Fares.",f.defaultInvalidFlightFareClassCombinationOFW="Labor Fares can't be combined with Year-Round and Promo Fares.",f.defaultNoFlightFoundError="You must select another date or station.",f.defaultcheckInpaxerror="At least one passenger must be checked in.",f.defaultSeatmaperror="Passenger must select a seat."),f.defaultValidationErrorClass="validationError",f.defaultValidationErrorLabelClass="validationErrorLabel",f.run=function(){for(var r=$(":input",n.getSkySalesForm()).get(),t=null,i=0,u=r.length,i=0;i<u;i+=1)t=r[i],f.checkBirthdate(t),this.isExemptFromValidation(t)||f.validateSingleElement(t);return f.outputErrors()},f.runBySelector=function(n){var i=$(n).find("input").get(),r=null,t=0;for(t=0,nodeLen=i.length;t<nodeLen;t+=1)r=i[t],f.validateSingleElement(r);return!1},f.validateSingleElement=function(t){var r,u,i,e;$(t).removeClass(f.defaultValidationErrorClass),$(t).is("select")&&(r=$(t).next("div").find("div."+f.mcDropdownContainerClass),r.length==0?$(t).siblings("span").find("a").removeClass(this.defaultValidationErrorClass):r.removeClass(this.defaultValidationErrorClass)),u=$(t).attr("id"),u.indexOf("CheckinMonthYear")>-1?$(".hotelDatepicker.checkin").removeClass(f.defaultValidationErrorClass):u.indexOf("CheckoutMonthYear")>-1&&($(".hotelDatepicker.checkout").removeClass(f.defaultValidationErrorClass),$("#hotelStayLimitNote").hide()),$("label[for='"+t.id+"']").eq(0).removeClass(this.defaultValidationErrorLabelClass),i=new n.ValidationErrorReadAlong,i.objId=t.id,i.obj=t,this.validationErrorArray[f.validationErrorArray.length]=i,f.checkPaxCount(t),f.checkOriginStation2(t),f.checkDestinationStation2(t),f.checkDepartureDate(t),f.checkReturnDate(t),f.validateRequiredSeatMap(t),e=f.getValue(t),f.errors.length<1&&e!==null&&e!==""&&($("#"+t.id).attr(f.regexAttribute)!=undefined&&(n.Util.setAttribute($(t),f.regexAttribute,$("#"+t.id).attr(f.regexAttribute)),n.Util.setAttribute($(t),f.regexErrorAttribute,$("#"+t.id).attr(f.regexErrorAttribute))),f.validateType(t),f.validateRegex(t),f.validateMinLength(t),f.validateMaxLength(t),f.validateMinValue(t),f.validateMaxValue(t),f.validateEquals(t),f.validateInfant(t),f.validateName(t),f.validateDateRange(t),f.checkWWF(t),f.checkMER(t),f.validateContact(t),f.enablePassTxtBox(t),f.checkFlightAvailabilty(t),f.validateDepartureTime(t),f.checkAgreement(t),f.validateDangerousGoodsAgreement(t)),this.validateRequired(t)},f.enablePassTxtBox=function(n){var t=this.attributeValue(n,f.checkEnableTxtBoxAttribute);t&&(n.disabled=!1)},f.checkINS=function(n){var r=this.attributeValue(n,f.checkINSAttribute),t=!1,u=$("#objIns p#insCheckboxContainer:input"),i;return r&&($(u).each(function(){$(this).attr("checked")&&!$(this).attr("disabled")&&(t=!0)}),t==!0)?(i=$("#totalIns p").find("input"),$(i).attr("checked")?!0:(f.setError(n,f.requiredErrorAttribute,f.defaultRequiredError),!1)):!0},f.checkWWF=function(n){var r=this.attributeValue(n,f.checkWWFAttribute),t=!1,u=$("tr td[id^='wwfControlJourney1']").find("input"),e=$("tr td[id^='wwfControlJourney2']").find("input"),i;return r&&($(u).each(function(){$(this).attr("checked")&&!$(this).attr("disabled")&&(t=!0)}),$(e).each(function(){$(this).attr("checked")&&!$(this).attr("disabled")&&(t=!0)}),t==!0)?(i=$("#WWFagree").find("input"),$(i).attr("checked")?!0:(f.setError(n,f.requiredErrorAttribute,f.defaultRequiredError),!1)):!0},f.checkMER=function(n){var r=this.attributeValue(n,f.checkMERAttribute),t=!1,u=$("tr[id^='airbControl']").find("input"),e=$("tr[id^='ckitControl']").find("input"),i;return r&&($(u).each(function(){$(this).attr("checked")&&(t=!0)}),$(e).each(function(){$(this).attr("checked")&&(t=!0)}),t==!0)?(i=$("#MERagree p").find("input"),$(i).attr("checked")?!0:(f.setError(n,f.requiredErrorAttribute,f.defaultRequiredError),!1)):!0},f.checkPaxCount=function(n){var i=$(n).attr(f.checkPaxCountAttribute),t=n.id.split("_");return i&&$("#"+t[0]+"_"+t[1]+"_DropDownListPassengerType_ADT").val()==0&&$("#"+t[0]+"_"+t[1]+"_DropDownListPassengerType_CD").val()==0&&$("#"+t[0]+"_"+t[1]+"_DropDownListPassengerType_PWD").val()==0&&$("#"+t[0]+"_"+t[1]+"_DropDownListPassengerType_PVEX").val()==0&&$("#"+t[0]+"_"+t[1]+"_DropDownListPassengerType_TXEX").val()==0&&$("#"+t[0]+"_"+t[1]+"_DropDownListPassengerType_CHD").val()==0?(f.setError(n,f.requiredErrorAttribute,$(n).attr("requirederror")),!1):!0},f.checkDepartureDate=function(n){var t=$(n).attr(f.checkDepartureDateAttribute),i=$("#date_picker_display_1").val();return t&&isNaN(new Date(i))?(f.setError(n,f.requiredErrorAttribute,$(n).attr("requirederror")),$(n).parents("div#marketDate_1").children("div.marketDate").addClass("validationError"),!1):!0},f.checkReturnDate=function(n){var t=$(n).attr(f.checkReturnDateAttribute),i=$("#date_picker_display_2").val(),r=$("#date_picker_display_1").val();return t&&isNaN(new Date(i))?(f.setError(n,f.requiredErrorAttribute,$(n).attr("requirederror")),$(n).parents("div#marketDate_2").children("div.marketDate").addClass("validationError"),!1):!0},f.checkOriginStation2=function(n){var i=$(n).attr(f.checkOriginStation2Attribute),t=n.id.split("_");return i&&$("#"+t[0]+"_"+t[1]).val()==0?(f.setError(n,f.requiredErrorAttribute,$(n).attr("requirederror")),!1):!0},f.checkDestinationStation2=function(n){var i=$(n).attr(f.checkDestinationStation2Attribute),t=n.id.split("_");return i&&$("#"+t[0]+"_"+t[1]).val()==0?(f.setError(n,f.requiredErrorAttribute,$(n).attr("requirederror")),!1):!0},f.checkAgreement=function(n){var i=n.id.split("_"),r=n.id,t=i[0]+"_"+i[1]+"_CheckBoxAgreement";return r.match(t)!==null&&$("#"+t).prop("checked")!=!0?($("#"+t).attr("requiredError",f.agreementRequiredError),f.setError(n,f.requiredErrorAttribute,$(n).attr("requiredError")),!1):!0},f.checkSeatMap=function(n){var t=n.id.split("_"),i=n.id,r=t[0]+"_"+t[1]+"_CheckBoxSeatMapAgreement";if(i.match(r)!==null){if($("#"+r).prop("checked")!=!0)return f.setError(n,f.requiredErrorAttribute,$(n).attr("requiredError")),!1;$("#"+i).removeClass()}return!0},f.outputErrorsInterface=function(n,t){f.erroDisplayMethod=t,f.errors=n,f.outputErrors()},f.outputErrors=function(){var r=this.errorDisplayMethod.toString().toLowerCase(),t="",i=[],n=0,u=!0,e;if(this.errors){for(i=f.errors.split("\n"),t+='<div style="float:left;padding:5px;"><img src="images/CebuAir/error icon.gif"/><\/div><ul class="validationErrorList" >',n=0,errorlen=i.length;n<errorlen;n+=1)i[n]!==""&&(t+='<li class="validationErrorListItem" >'+i[n]+"<\/li>");return t+='<\/ul><br style="clear:both;"/><\/div>',r.indexOf("read_along")>-1&&(f.outputErrorsReadAlong(t),u=!1),r.indexOf("alert")>-1&&alert(f.errorsHeader+f.errors),u===!0&&alert(f.errorsHeader+f.errors),f.setfocus&&($(f.setfocus).is("select")?($(f.setfocus).focus(),$(f.setfocus).siblings("span").find("a").length==1&&$(f.setfocus).siblings("span").find("a").attr("onblur","hideErrorDiv(this);")):$(f.setfocus).is(":hidden")===!1&&(f.setfocus.blur(),f.setfocus.focus()),$("#errorDiv").show()),!1}return e=this.getById("errorDiv"),e.hide(),!0},f.outputErrorsReadAlong=function(){var r=0,u="",f=null,i=this,e=null;for(e=function(n){this.hasValidationEvents=!0,this.addFocusEvent(n),this.addBlurEvent(n)},i.validationErrorReadAlong=new n.ValidationErrorReadAlong,i.readAlongDivId=this.getById(this.validationErrorReadAlong.getValidationErrorDivId()).attr("id"),i.readAlongDivId===undefined&&(i.validationErrorReadAlong.addValidationErrorDiv(),i.validationErrorReadAlong.addCloseEvent()),u+='<div style="float:left;width:100%;padding:5px;background:red;"><ul class="validationErrorList" style="float:left;margin:0px;padding:5px 0px 5px 10px;width:90%;">',r=0,validationErrorArrayLen=i.validationErrorArray.length;r<validationErrorArrayLen;r+=1)f=this.validationErrorArray[r],u+=f.isError===!0?'<li class="validationErrorListItem">'+f.errorMessage+"<\/li>":'<li class="validationErrorListItem hidden" >'+f.errorMessage+"<\/li>";this.getById(i.validationErrorReadAlong.getValidationErrorListId()).html(u),this.addErrorEvent&&$(i.validationErrorArray).each(e)},f.checkFocus=function(n){f.setfocus||(f.setfocus=n)},f.setError=function(n,t,i){var o="",u="",l="",e=0,s=null,h,a="",c;if(n.type==="radio"&&(o=n.getAttribute("name"),o.length>0)){if(f.namedErrors[o]!==undefined)return;f.namedErrors[o]=o}if(u=this.attributeValue(n,t),u||(u=this.attributeValue(n,f.defaultErrorAttribute)?this.attributeValue(n,f.defaultErrorAttribute):i?i:f.defaultError),h=u.match(/\{\s*(\w+)\s*\}/g),h)for(e=0,resultlen=h.length;e<resultlen;e+=1)l=h[e].replace(/\{\s*(\w+)\s*\}/,"$1"),u=u.replace(/\{\s*\w+\s*\}/,f.cleanAttributeForErrorDisplay(n,l));for($(n).addClass(this.defaultValidationErrorClass),$(n).is("select")&&(c=$(n).next("div").find("div."+f.mcDropdownContainerClass),c.length==0?$(n).siblings("span").find("a").addClass(this.defaultValidationErrorClass):c.addClass(this.defaultValidationErrorClass)),$("label[for='"+n.id+"']").eq(0).addClass(f.defaultValidationErrorLabelClass),this.errors+=u+"\n",a=n.id,e=0,validationErrorArrayLength=f.validationErrorArray.length;e<validationErrorArrayLength;e+=1)if(s=f.validationErrorArray[e],s.objId===a){s.errorMessage=u,s.isError=!0;break}this.checkFocus(n)},f.cleanAttributeForErrorDisplay=function(t,i){var e="",s=n.Util.getRequiredFlag(),u="",h=/^(minvalue|maxvalue)$/i,c=new RegExp("[^\\d.,]","g"),f=$(t),r="",o;return i||(i=""),i=i.toLowerCase(),i==="label"&&(o=f.attr("id"),u=o.indexOf("CustomerAccount_CF_AMOUNT")?$("label[for='"+f.attr("name")+"']").text().split(":")[0]:$("label[for='"+f.attr("id")+"']").text(),e=s,r=n.Util.replace(u,e,"")),r||(r=this.attributeValue(t,i)),r?i.match(h)&&(r=n.Util.replace(r,c,"")):r=i,r},f.attributeValue=function(t,i){t=$(t);var r=n.Util.getAttributeValue(t,i);return typeof r!="string"&&(r=""),r},f.validateRequired=function(n){var h=f.requiredAttribute,c=f.requiredEmptyAttribute,i=this.attributeValue(n,h),u=this.attributeValue(n,c),t=null,r="",e=!1,l=$("input[id$='_OpenJaw']").get(0),o=$("select[id$='originStation2']").get(0),s=$("select[id$='destinationStation2']").get(0);f.radioGroupHash={},i!==undefined&&i!==""&&(i=i.toString().toLowerCase(),u&&(u=u.toString().toLowerCase()),i==="true"&&(t=f.getValue(n),n.type==="checkbox"&&n.checked===!1?t="":n.type==="radio"&&(r=n.getAttribute("name"),f.radioGroupHash[r]===undefined&&(f.radioGroupHash[r]=$("input[name='"+r+"']")),e=f.radioGroupHash[r].is(":checked"),e||(t="")),(t===undefined||t===null||t===""||t.toLowerCase()===u)&&(o!=null&&o.id==n.id||s!=null&&s.id==n.id?l.checked&&f.setError(n,f.requiredErrorAttribute,f.defaultRequiredError):f.setError(n,f.requiredErrorAttribute,f.defaultRequiredError))))},f.validateType=function(t){var i=this.attributeValue(t,this.validationTypeAttribute),r=this.getValue(t),u=$(t),e=n.Util.getAttributeValue(u,"validationfunction")||"",s=n.Util.getAttributeValue(u,"validationfunctionparams")||[],o=!0;i&&r!==null&&(i=i.toLowerCase(),i!=="address"||r.match(f.stringPattern)?i!=="alphanumeric"||r.match(f.alphaNumericPattern)?i!=="amount"||f.validateAmount(r)?i!=="country"||r.match(f.stringPattern)?i!=="email"||r.match(f.emailPattern)?i!=="mod10"||f.validateMod10(r)?i!=="name"||r.match(f.stringPattern)?i!=="numeric"||f.validateNumeric(r)?i.indexOf("date")!==0||f.validateDate(t,i,r)?i!=="state"||r.match(f.stringPattern)?i!=="string"||r.match(f.stringPattern)?i!=="uppercasestring"||r.match(f.upperCaseStringPattern)?i!=="zip"||r.match(f.stringPattern)?i==="function"&&($.isFunction(e)&&(o=e.apply(this,s)),o||f.setValidateTypeError(t)):f.setValidateTypeError(t):f.setValidateTypeError(t):f.setValidateTypeError(t):f.setValidateTypeError(t):f.setValidateTypeError(t):f.setValidateTypeError(t):f.setValidateTypeError(t):f.setValidateTypeError(t):f.setValidateTypeError(t):f.setValidateTypeError(t):u.attr("id").indexOf("CustomerAccount_CF_AMOUNT")==-1&&f.setValidateTypeError(t):f.setValidateTypeError(t):f.setValidateTypeError(t))},f.validateRegex=function(n){var t=this.attributeValue(n,f.regexAttribute),i=this.attributeValue(n,f.requiredEmptyAttribute);value=f.getValue(n),value!==null&&i!==value&&t&&!value.match(t)&&this.setError(n,f.regexErrorAttribute,f.defaultRegexError)},f.validateMinLength=function(n){var i=this.attributeValue(n,f.minLengthAttribute),r=this.attributeValue(n,f.numericMinLengthAttribute),t=this.getValue(n);0<i&&t!==null&&t.length<i?f.setError(n,f.minLengthErrorAttribute,f.defaultMinLengthError):0<r&&0<t.length&&t.replace(f.numericStripper,"").length<r&&f.setError(n,f.minLengthErrorAttribute,f.defaultMinLengthError)},f.validateMaxLength=function(n){var i=this.attributeValue(n,f.maxLengthAttribute),r=this.attributeValue(n,f.numericMaxLengthAttribute),t=this.getValue(n);0<i&&t!==null&&i<t.length?f.setError(n,f.maxLengthErrorAttribute,f.defaultMaxLengthError):0<r&&0<t.length&&r<t.replace(f.numericStripper,"").length&&f.setError(n,f.maxLengthErrorAttribute,f.defaultMaxLengthError)},f.validateMinValue=function(n){var r=$(n).attr("id"),u=$(n).parent().parent().is(":visible"),e,i;if(r.indexOf("CustomerAccount_CF_AMOUNT")>-1&&u)return e=$("input[name*='CustomerAccount_CF_AMOUNT']"),i=this.getValue(n),i=parseFloat(i.replace(/,/g,"")),i<=0?(f.setError(n,f.minValueErrorAttribute,f.defaultMinValueError),!1):!0;var t=this.attributeValue(n,f.minValueAttribute),i=f.getValue(n),i=parseFloat(i.replace(/,/g,""));i!==null&&t!==undefined&&0<t.length&&(5<t.length&&t.substring(0,5)==="&gt;="?i<parseFloat(t.substring(5,t.length))&&f.setError(n,f.minValueErrorAttribute,f.defaultMinValueError):4<t.length&&t.substring(0,4)==="&gt;"?i<=parseFloat(t.substring(4,t.length))&&f.setError(n,f.minValueErrorAttribute,f.defaultMinValueError):i<parseFloat(t)&&f.setError(n,f.minValueErrorAttribute,f.defaultMinValueError))},f.validateMaxValue=function(n){var r=$(n).attr("id"),u=$(n).parent().parent().is(":visible");if(r.indexOf("CustomerAccount_CF_AMOUNT")>-1&&u){var h=$("input[name*='CustomerAccount_CF_AMOUNT']"),e=$("#remainingCredit").text().split(" ")[1],o=Number(e.replace(/,/g,"")),s=Number($("#remainingAmtDue").text().replace(/,/g,"")),i=this.getValue(n);return i=parseFloat(i.replace(/,/g,"")),i>o||i>s?(f.setError(n,f.maxValueErrorAttribute,f.defaultMaxValueError),!1):!0}var t=this.attributeValue(n,this.maxValueAttribute),i=this.getValue(n),i=parseFloat(i.replace(/,/g,""));i!==null&&t!==undefined&&0<t.length&&(5<t.length&&t.substring(0,5)==="&lt;="?i>parseFloat(t.substring(5,t.length))&&f.setError(n,f.maxValueErrorAttribute,f.defaultMaxValueError):4<t.length&&t.substring(0,4)==="&lt;"?i>=parseFloat(t.substring(4,t.length))&&f.setError(n,f.maxValueErrorAttribute,f.defaultMaxValueError):parseFloat(i)>t&&f.setError(n,f.maxValueErrorAttribute,f.defaultMaxValueError))},f.validateRequiredSeatMap=function(t){var i=$(".passengerlist").find('input[type="text"][value!=""]');thisID=t.id,thisID.match("ControlGroupUnitMapView_UnitMapViewControl_CheckBoxSeatMapAgreement")!==null&&(i.length<1&&document.getElementById(thisID).checked==!1||document.getElementById(thisID).checked==!0)&&($("#"+thisID).removeClass(),n.Util.removeRequiredAttribute(t))},f.validateSeatMap=function(n){var t,i;if(thisID=n.id,thisID.match("ControlGroupUnitMapView_UnitMapViewControl_CheckBoxAgreement")!==null)for(aInput=document.getElementsByTagName("input"),t=0;input=aInput[t];t++)if(input.getAttribute("type")=="text"&&input.value.length>0&&(i="ControlGroupUnitMapView_UnitMapViewControl_CheckBoxAgreement",document.getElementById(i).checked==!1)){f.setError(n,f.requiredErrorAttribute,f.defaultRequiredError);break}},f.checkBirthdate=function(t){thisID=t.id,thisID.match("BirthDate")&&(this.attributeValue(t,"description").match("Senior")?n.Util.setRequiredAttribute($(t)):this.attributeValue(t,"description").match("Child")&&$("#marketCheck").find("li.marketJourney").text().match("HongKong")&&n.Util.setRequiredAttribute($(t)))},f.checkAsterisk=function(t){thisID=t.id,thisID.match("CONTROLGROUPGUEST")&&(this.attributeValue(t,"description").match("Senior")?n.Util.setRequiredAttribute(t):this.attributeValue(t,"description").match("Child")&&$("#marketCheck").find("li.marketJourney").text().match("HongKong")&&n.Util.setRequiredAttribute(t),this.attributeValue(t,"required").match("true")&&($("#requiredBirthdate").text()="XXXX"))},f.validateName=function(n){var w=this.attributeValue(n,f.nameCheckAttribute),b=f.getValue(n),a,v;if(isError=!1,thisID=n.id,thisID.match("CONTROLGROUPGUEST_PassengerInputViewGuestView_TextBoxFirstName")!==null){currentID=thisID.substr(thisID.lastIndexOf("_")+1),strfirstName="TextBoxFirstName_",strlastName="TextBoxLastName_";var t="CONTROLGROUPGUEST_PassengerInputViewGuestView_",y=t+strfirstName+currentID,p=t+strlastName+currentID,c=document.getElementById(y).value+" "+document.getElementById(p).value;counter=parseInt(currentID)+1;for(var i=t+strfirstName+counter,l=t+strlastName+counter,r=document.getElementById(i),u=document.getElementById(l);r!==null&&u!==null;)a=r.value+" "+u.value,counter!==currentID&&c==a&&(isError=!0),counter++,i=t+strfirstName+counter,l=t+strlastName+counter,r=document.getElementById(i),u=document.getElementById(i);infantCtr=0,counter=parseInt(currentID)+1;for(var e=t+strfirstName+infantCtr+"_"+infantCtr,o=t+strlastName+infantCtr+"_"+infantCtr,s=document.getElementById(e),h=document.getElementById(o);s!==null&&h!==null;)v=s.value+" "+h.value,c==v&&(isError=!0),infantCtr++,e=t+strfirstName+infantCtr+"_"+infantCtr,o=t+strlastName+infantCtr+"_"+infantCtr,s=document.getElementById(e),h=document.getElementById(o);isError&&f.setError(n,f.nameCheckErrorAttribute,f.defaultSameNameError)}},f.validateContact=function(n){var i=f.getValue(n),r=this.attributeValue(n,f.contactCheckAttribute),t;checkID=n.id,string1=checkID.substr(0,checkID.lastIndexOf("TextBox"))+"TextBox",r!==undefined&&checkID.match("Country")!==null&&(string2=checkID.substr(checkID.lastIndexOf("Country"),checkID.length),string2=string2.replace(/Country/,""),t=this.getById(string1+string2),t&&t.value&&(i==null||i=="")&&f.setError(n,f.requiredErrorAttribute,f.defaultRequiredError))},f.validateInfant=function(n){var s=this.attributeValue(n,f.dateCheckAttribute),y=f.getValue(n);if(thisID=n.id,thisID&&thisID.match("DropDownListBirthDateYear")&&s&&s=="true"){var h=$("#"+thisID).attr("description"),o=h.substr(0,h.indexOf(" ")),l=$("#"+thisID.replace(/DropDownListBirthDateYear/,"DropDownListBirthDateDay")).val(),a=$("#"+thisID.replace(/DropDownListBirthDateYear/,"DropDownListBirthDateMonth")).val(),v=$("#"+thisID).val(),i=new Date(Date.parse($("#deptBirthCompare").text().split(",")[0])),u=new Date(Date.parse($("#deptBirthCompare").text().split(",")[0])),t=new Date(Date.parse($("#deptRetBirthCompare").text().split(",")[0])),e=new Date(Date.parse($("#deptRetBirthCompare").text().split(",")[0])),r=new Date(v,a-1,l,0,0,0,0),c=new Date;if(c.setHours(0,0,0,0),o=="Infant"){if(i.setFullYear(i.getFullYear()-2),t.setFullYear(t.getFullYear()-2),u.setHours(u.getHours()-192),e.setHours(e.getHours()-192),r>c){f.setError(n,f.dateChechInfantFutureDateErrorAttribute,f.defaultEqualsError);return}if(r>u||r<i){f.setError(n,f.dateCheckInfantErrorAttribute,f.defaultEqualsError);return}if(!isNaN(t.getDate())&&r<=t){f.setError(n,f.dateCheckInfantReturnAsChildAttribute,f.defaultEqualsError);return}}else if(o=="Child"){if(i.setFullYear(i.getFullYear()-12),t.setFullYear(t.getFullYear()-12),e.setFullYear(e.getFullYear()-2),u.setFullYear(u.getFullYear()-2),!isNaN(t.getDate())&&(r>e||r<=t)){f.setError(n,f.dateCheckErrorAttribute,f.defaultEqualsError);return}(r>u||r<=i)&&f.setError(n,f.dateCheckErrorAttribute,f.defaultEqualsError)}else if(o=="Adult"){if(i.setFullYear(i.getFullYear()-12),t.setFullYear(t.getFullYear()-12),!isNaN(t.getDate())&&r>t){f.setError(n,f.dateCheckErrorAttribute,f.defaultEqualsError);return}r>i&&f.setError(n,f.dateCheckErrorAttribute,f.defaultEqualsError)}else if(o=="Senior"){if(i.setFullYear(i.getFullYear()-60),t.setFullYear(t.getFullYear()-60),!isNaN(t.getDate())&&r>t){f.setError(n,f.dateCheckErrorAttribute,f.defaultEqualsError);return}r>i&&f.setError(n,f.dateCheckErrorAttribute,f.defaultEqualsError)}}},f.validateEquals=function(n){var t=n[f.equalsAttribute],i=f.getValue(n);emailAdd=$("[id$='TextBoxEmailAddress']").get(0),n.id=="CONTROLGROUPGUEST_GuestContactInputView_TextBoxConfirmEmail"&&i!==emailAdd.value&&f.setError(n,f.equalsErrorAttribute,f.defaultEqualsError),i!==null&&t!==undefined&&0<t.length&&2<t.length&&t.substring(0,2)==="!="&&i===t.substring(2,t.length)&&f.setError(n,f.equalsErrorAttribute,f.defaultEqualsError)},f.validateDepartureTime=function(n){var tt=this.attributeValue(n,f.checkFlightCombinationAttribute),it=$("#TripType2"),r,u,b,h,y,k,c,w,l;if(tt=="true"){var rt=$("#selectMainBody table[id='availabilityTable']"),et=[],a=null,v=null;if($("#selectMainBody table[id='availabilityTable']").each(function(){rt.find("td[class^='fareCol']").each(function(){var t=$(this),n=t.find(":radio[name$='market1'][checked]").attr("id");n&&(a=n),n=t.find(":radio[name$='market2'][checked]").attr("id"),n&&(v=n)})}),r=null,u=null,a!=null&&a!=undefined&&(r=document.getElementById(a).value),v!=null&&v!=undefined&&(u=document.getElementById(v).value),r!=undefined&&r!=""&&r!=null&&u!=undefined&&u!=""&&u!=null){var i=r.indexOf("|")+1,t=r.substring(i).split("^"),p="",e="~LA~LB~LC~SA~SB~SC~LN~LO~LP~",o="~"+r.split("~")[1].toString()+"~",s="~"+u.split("~")[1].toString()+"~";if(t.length>1?(i=t[1].indexOf("~~")+2,p=t[1].substring(i)):(i=t[0].indexOf("~~")+2,p=t[0].substring(i)),b=p.split("~"),h=new Date(b[3]+" GMT"),t=null,i=u.indexOf("|")+1,t=u.substring(i).split("^"),y="",t.length>1?(i=t[1].indexOf("~~")+2,y=t[1].substring(i)):(i=t[0].indexOf("~~")+2,y=t[0].substring(i)),k=y.split("~"),c=new Date(k[1]+" GMT"),h.getUTCMonth()==c.getUTCMonth()&&h.getUTCDate()==c.getUTCDate()&&h.getUTCFullYear()==c.getUTCFullYear()){var d=h.getUTCHours(),ut=h.getUTCMinutes(),g=c.getUTCHours(),ft=c.getUTCMinutes(),nt=2;(g-d<nt||g-d==nt&&ut>ft)&&(f.setError(n,"",f.defaultInvalidFlightCombination,!1),scrollTo(0,0))}w="~SA~SB~SC~",l="~LA~LB~LC~LN~LO~LP~",(e.indexOf(o)!==-1&&e.indexOf(s)==-1||e.indexOf(o)==-1&&e.indexOf(s)!==-1)&&it.text()=="RoundTrip"?(l.indexOf(o)!==-1||l.indexOf(s)!==-1?f.setError(n,"",f.defaultInvalidFlightFareClassCombinationOFW,!1):f.setError(n,"",f.defaultInvalidFlightFareClassCombinationSC,!1),scrollTo(0,0)):e.indexOf(o)!==-1&&e.indexOf(s)!==-1&&(l.indexOf(o)!==-1&&l.indexOf(s)==-1&&(f.setError(n,"",f.defaultInvalidFlightFareClassCombinationOFW,!1),scrollTo(0,0)),w.indexOf(o)!==-1&&w.indexOf(s)==-1&&(f.setError(n,"",f.defaultInvalidFlightFareClassCombinationSC,!1),scrollTo(0,0)))}}},f.checkFlightAvailabilty=function(n){var u=this.attributeValue(n,f.checkFlightAvailabiltyAttribute);if(u=="true"){var t=$("#selectMainBody table[id='availabilityTable']"),i=null,r=null;t.each(function(){$(this).find("td[class^='fareCol']").each(function(){var t=$(this),n=t.find(":radio[name$='market1'][checked]").attr("id");n&&(i=n),n=t.find(":radio[name$='market2'][checked]").attr("id"),n&&(r=n)})}),t.length>=1&&i==null?f.setError(n,"",f.defaultNoFlightFoundError):t.length>1&&r==null&&f.setError(n,"",f.defaultNoFlightFoundError)}},e=function(n){var t=n.parent(),i=t.parent(),r=t.is(":hidden"),u=i.is(":hidden");return!(r||u)},f.checkIfValidateDateRangeNeeded=function(n){var u=this.attributeValue(n,f.dateRangeAttribute),l=this.attributeValue(n,f.dateRange1HiddenIdAttribute),a=this.attributeValue(n,f.dateRange2HiddenIdAttribute),t="",i="",o=n.id,s=!1,h=!1,c=null,r=null;return u!==undefined&&0<u.length&&(t=o.charAt(o.length-1),this.validateNumeric(t)&&(i=t),("1"===i||""===i)&&(r=this.getById(a),h=e(r),h&&(s=!0,c=this.getById(l),f.dateRangeArray[0]=c.val(),f.dateRangeArray[1]=r.val()))),s},f.checkIfHotelStayWithinLimit=function(n){var t=this.attributeValue(n,f.hotelStayWithinLimitAttribute),r=this.attributeValue(n,f.dateRange1HiddenIdAttribute),u=this.attributeValue(n,f.dateRange2HiddenIdAttribute),e="",o="",s=n.id,i=!1,h=!1,c=null,l=null;return t!==undefined&&0<t.length&&(i=!0),i},f.validateDateRange=function(t){var i=null,u=!1,o=!1,s=!1,e,r;if(startValidate=!1,hotelStayLimitValidate=!1,e=t.valhours,startValidate=f.checkIfValidateDateRangeNeeded(t),hotelStayLimitValidate=f.checkIfHotelStayWithinLimit(t),startValidate){if(i=new n.Class.MarketDate,r=$(t).attr("id"),this.dateRangeArray[1]!==undefined&&(u=i.datesInOrder(this.dateRangeArray),!u)){this.setError(t,this.dateRangeErrorAttribute,this.defaultError),r!=null&&r.indexOf("CheckinMonthYear")>-1&&($(".hotelDatepicker.checkin").addClass(f.defaultValidationErrorClass),$("#errorDiv").show());return}if(this.dateRangeArray[1]!==undefined&&(o=i.datesOnlyIsEqual(this.dateRangeArray),!o&&!f.isSearchPage)){this.setError(t,this.dateEqualErrorAttribute,this.defaultError),r!=null&&r.indexOf("CheckinMonthYear")>-1&&($(".hotelDatepicker.checkin").addClass(f.defaultValidationErrorClass),$("#errorDiv").show());return}if(e!=="0"&&(u=i.datesIsEqual(this.dateRangeArray,e),!u)){this.setError(t,this.dateEqualErrorAttribute,this.defaultError),r.indexOf("CheckinMonthYear")>-1&&($(".hotelDatepicker.checkin").addClass(f.defaultValidationErrorClass),$("#errorDiv").show());return}if(u=i.dateNoFlights(this.dateRangeArray),!u){this.setError(t,this.dateNoFlightsErrorAttribute,this.defaultError),r.indexOf("CheckinMonthYear")>-1&&($(".hotelDatepicker.checkin").addClass(f.defaultValidationErrorClass),$("#errorDiv").show());return}}else if(hotelStayLimitValidate&&(i=new n.Class.MarketDate,this.dateRangeArray.length>1&&(s=i.daysWithinHotelBookingLimit(this.dateRangeArray),!s))){this.setError(t,this.hotelStayWithinLimitErrorAttribute,this.defaultError),$(".hotelDatepicker.checkout").addClass(f.defaultValidationErrorClass),$("#hotelStayLimitNote").show();return}},f.isSearchPage=function(){var n=!1,t=window.location.href;return t.toLowerCase().indexOf("search.aspx")>0&&(n=!0),n},f.isExemptFromValidation=function(t){var i=n.Util.getAttributeValue($(t),"validate");return i&&i==="false"?!0:t.id.indexOf(this.namespace)!==0?!0:this.regexElementIdFilter&&!t.id.match(this.regexElementIdFilter)?!0:!1},f.setValidateTypeError=function(n){this.setError(n,this.validationTypeErrorAttribute,this.defaultValidationTypeError)},f.validateAmount=function(n){return!n.match(this.amountPattern)||n===0?!1:!0},f.validateDate=function(t,i,r){var u="",e=new Date,o,c,s,h,l;if(i&&(u=i.toLowerCase()),r=r||"",u==="dateyear"&&(r<e.getYear()||!r.match(f.dateYearPattern)))return!1;if(u!=="datemonth"||r.match(f.dateMonthPattern))if(u!=="dateday"||r.match(f.DateDayPattern)){if(u==="dateexpiration"&&(s=n.Util.parseIsoDate(r),o=s.getFullYear(),c=s.getMonth(),h=e.getFullYear(),l=e.getMonth(),o<h||o===h&&c<l))return!1}else return!1;else return!1;return!0},f.validateMod10=function(t){var h=/\D/,i=n.Util.replace(t,/ /g,""),u,e=0,f=0,r=0,o,s;if(!h.test(i)){while(i.length<16)i="0"+i;for(o=i.length,r=o-1;0<=r;r-=2)for(e+=parseInt(i.charAt(r),10),u=i.charAt(r-1)*2,u+="",s=u.length,f=0;f<s;f+=1)e+=parseInt(u.charAt(f),10);return e%10==0}return!1},f.validateNumeric=function(n){return n.match(f.numericPattern)?!0:!1},f.getValue=function(t){return n.Common.getValue(t)},f.stringPattern=new RegExp("^.+$"),f.upperCaseStringPattern=/^[A-Z]([A-Z|\s])*$/,f.numericPattern=/^\d+$/,f.numericStripper=/\D/g,f.alphaNumericPattern=/^\w+$/,f.amountPattern=/^(\d+((\.|,|\s|\xA0)\d+)*)$/,f.dateYearPattern=/^\d{4}$/,f.dateMonthPattern=/^\d{2}$/,f.dateDayPattern=/^\d{2}$/,f.emailPattern=/^\w+([\.\-\']?\w+)*@\w+([\.\-\']?\w+)*(\.\w{1,8})$/,f.validateDangerousGoodsAgreement=function(t){var i,r;t.id=="ControlGroupCheckInPageView_SecurityQuestionInputCheckInPageView_CheckBoxAgreement"&&(i=$("#dangerousGoodsAgreementText e")[0],i!=undefined&&($(i).removeClass(f.defaultValidationErrorClass),r=$("#SkySales").data()["SKYSALES.DangerousGoodsAgreement"],typeof r=="object"&&(r.clicked||($(i).addClass(f.defaultValidationErrorClass),n.Util.setAttribute($(t),"requiredClick",$(t).attr("requiredClick")),f.setError(t,"requiredClick")))))},f},n.Util.validateBySelector=function(t){var i=null,r=null;return t!==undefined?(i=new n.Validate(null,"",n.errorsHeader,null),i.clickedObj=r,i.runBySelector(t),i.outputErrors()):!0},n.Util.validate=function(t,i,r){var e=null,o="",u=null,f=null,s=$("fieldset#mealFieldset.special");return(s.hasClass("collapsed")&&$(".titlebar h3").eq(2).trigger("click"),document.getElementById&&document.createTextNode)?(t.getAttribute&&(o=t.getAttribute("id"),e=t,t=n.Util.replace(o,/_[a-zA-Z0-9]+$/,"")),u=new n.Validate(n.getSkySalesForm(),t+"_",n.errorsHeader,r),u.clickedObj=e,i)?(f=i,i.getAttribute||(f=document.getElementById(t+"_"+i)),u.validateSingleElement(f),u.outputErrors()):u.run():!0},u=!1,preventDoubleClick=function(){return u?!1:(u=!0,!0)},r=[],register=function(n,t){r[n]===undefined&&(r[n]=[]),r[n][r[n].length]=t},f=function(n){var i=0;if(r[n]!==undefined)for(i=0;i<r[n].length;i+=1)if(eval(r[n][i]+"(eventArgs)")===!1)return!1;return!0},n.Util.displayPopUpConverter=function(){var t="CurrencyConverter.aspx",n=window.converterWindow;!window.converterWindow||n.closed?n=window.open(t,"converter","width=360,height=220,toolbar=0,status=0,location=0,menubar=0,scrollbars=0,resizable=0"):(n.open(t,"converter","width=360,height=220,toolbar=0,status=0,location=0,menubar=0,scrollbars=0,resizable=0"),$(n).is(":hidden")===!1&&n.focus())},e=function(n,t){var i=n,r=t;document.getElementById&&document.getElementById(n)&&(document.getElementById(i).style.display=document.getElementById(r).checked===!0?"inline":"none")},o=!0,n.toggleAtAGlanceEvent=function(){$(this).next().toggle()},n.toggleAtAGlance=function(){$("div.atAGlanceDivHeader").click(n.toggleAtAGlanceEvent)},n.initializeTime=function(){for(var n=0,t="",n=0;n<23;n+=1)t+="<option value="+n+">"+n+"<\/option>";t!==""&&$("select.Time").append(t)},$("a.animateMe").animate({height:"toggle",opacity:"toggle"},"slow"),n.aosAvailabilityShow=function(){return $(this).parent().find("div.hideShow").show("slow"),!1},n.aosAvailabilityHide=function(){return $(this).parent().parent(".hideShow").hide("slow"),!1},n.dropDownMenuEvent=function(){return $("div.slideDownUp").toggle("fast"),!1},n.faqHideShow=function(){$(this).parent("dt").next(".accordianSlideContent").slideToggle("slow")},n.equipHideShow=function(){return $("div#moreSearchOptions").slideToggle("slow"),!1},n.initializeAosAvailability=function(){$(".hideShow").hide(),$("a.showContent").click(n.aosAvailabilityShow),$("a.hideContent").click(n.aosAvailabilityHide),$("a.toggleSlideContent").click(n.dropDownMenuEvent),$("a.accordian").click(n.faqHideShow),$("a.showEquipOpt").click(n.equipHideShow),$("a.hideEquipOpt").click(n.equipHideShow)},n.initializeMetaObjects=function(){$.metaobjects({clean:!1})},n.common=new n.Common,hideErrorDiv=function(){var t="#hotelStayLimitNote";$("#errorDiv").is(":visible")&&$("#validationErrorContainerReadAlong").remove(),$(t).length>0&&$(t).is(":hidden")==!1&&$(t).hide()},hideErrorDivCheckboxAgreement=function(n){var t=n.id,i;$("#validationErrorContainerReadAlong").is(":visible")&&(i=$("#"+t).attr("class"),$("#"+t).removeClass(),i.length!=0&&($("#validationErrorContainerReadAlong").remove(),$("#"+t).removeAttr("required"))),$("#"+t).blur(function(){$("#"+t).removeClass()})},hideErrorDivINSCheckbox=function(n){var t=n.id,i;$("#validationErrorContainerReadAlong").is(":visible")&&(i=$("#"+t).attr("class"),$("#"+t).removeClass(),$("label[for='"+t+"']").removeClass(),i.length!=0&&($("#validationErrorContainerReadAlong").remove(),$("#"+t).removeAttr("required"))),$("#"+t).blur(function(){$("#"+t).removeClass()})},SSRHandling=function(n){var t=n.id.split("_"),h=n.id,f=t[3].split("SSRSPECIALHANDLING")[1],o=t[3].split("SSRSPECIALHANDLING")[0].split("Passenger")[1].replace(",",""),c=f.split("")[0],r=f.split("")[1],u=t[0]+"_"+t[1]+"_"+t[2]+"_Passenger"+o+"SSRSPECIALHANDLING",e=$("#"+u+"0"+r).val(),s=$("#"+u+"1"+r).val(),i;e!=""&&e==s&&($("#SpecialHandlingModalDialogContent").dialog({width:400,height:200,closeText:"",draggable:!1,closeOnEscape:!0,modal:!0,buttons:{OK:function(){$(this).dialog("close")}}}),i="#"+u+"1"+r,$(i+"-button").find("span.ui-selectmenu-status").text("Select"),$(i).val($(i+"option:first").val()))},validateUM=function(t){var f=$("#mainContent1 p span[class='title'] select[id$='DropDownListPassengerType_ADT']"),e=$("#mainContent1 p span[class='title'] select[id$='DropDownListPassengerType_CHD']"),o=0,s=0,u=$('#errorDiv div[id="validationErrorContainerReadAlongList"] ul[class="validationErrorList"]'),v=null,l=!1,r;$(f).each(function(){o=$(this).val()}),$(e).each(function(){s=$(this).val()});var h=null,i=null,c=null,a=null;t.getAttribute&&(h=t,c=t.getAttribute("id").replace(/_\w+$/,"")),l&&(i=new n.Validate(n.getSkySalesForm(),c+"_",n.errorsHeader,a),i.clickedObj=h,s>0&&o==0?(r=new n.ValidationErrorReadAlong,r.objId=t.id,r.obj=t,r.isError=!0,i.validationErrorArray[i.validationErrorArray.length]=r,i.addErrorEvent=!1,i.setError(t,"checkumerror",i.defaultError,!1),i.outputErrors()):u&&u.length>0&&!u.is(":hidden")&&(u.addClass("fixedValidationError"),$(f).removeClass(i.defaultValidationErrorClass),$(e).removeClass(i.defaultValidationErrorClass)))},s=function(){var r=!1,u=!1,o=$("table[id='checkinPassengerTable']"),i=null,f=null,e=null;return $("table[id='checkinPassengerTable']").each(function(){var a=$(this),s;o.find("td").each(function(){e=$(this).siblings(".seatnum").find("a").text(),f=$(this).find(":checkbox[name*='CheckBoxPaxJourney'][checked]").attr("id"),i==null&&(i=$(this).find(":checkbox[name*='CheckBoxPaxJourney']").attr("id")),f&&(r=!0,e!=""&&(u=!0))});var h=null,t=null,c=null,l=null;t=new n.Validate(n.getSkySalesForm(),c+"_",n.errorsHeader,l),t.clickedObj=h,s=new n.ValidationErrorReadAlong,s.objId=i.id,s.obj=i,s.isError=!0,t.validationErrorArray[t.validationErrorArray.length]=s,t.setfocus=!1,(r==!1||u==!0)&&(r==!1?t.setError(i,t.validatecheckInpaxerror,t.defaultcheckInpaxerror,!1):t.setError(i,t.validateSeatmaperror,t.defaultSeatmaperror,!1),t.outputErrors())}),r&&!u},n.Util.sendAspFormFields=function(){window.onbeforeunload=null;var t=document.SkySales||document.forms.SkySales,i=null,r=window.document.getElementById("eventTarget"),u=window.document.getElementById("eventArgument"),f=window.document.getElementById("viewState");return t.onsubmit&&t.onsubmit()===!1||(r.name="__EVENTTARGET",u.name="__EVENTARGUMENT",f.name="__VIEWSTATE",t.checkValidity&&(i=function(){$(this).removeAttr("required")},n.common.getAllInputObjects().each(i))),!0},n.Util.initStripeTable=function(){$(".hotelResult").hide();var n=function(){$(".stripeMe tr").removeClass("over"),$(this).parent().parent().addClass("over")};$(".stripeMe input").click(n)},n.initTableSorter=function(){var n=$("table.sortMe");n.length&&$("table.sortMe").tablesorter({sortList:[[0,0]],widgets:["zebra"],headers:{5:{sorter:!1}}})},n.Util.initManageBookingMenu=function(){$(".mmbTooltipWhiteSpace").length>0&&$.browser.msie&&$.browser.version==8&&($(".mmbTooltipWhiteSpace").css("width","151px"),$(".mmbTooltipWhiteSpace").css("margin-left","110px"))},n.Util.ready=function(){var i,o,r,u,e,t,h;$("form").submit(n.Util.sendAspFormFields),n.Util.initManageBookingMenu(),i=$("fieldset#hotel-booking"),i.hasClass("expanded")?i.children(".hotelContainer").removeClass("hidden"):i.hasClass("collapsed")&&$("fieldset#hotel-booking").children(".hotelContainer").addClass("hidden"),$("fieldset#hotel-booking").bind("click",function(){$("fieldset#hotel-booking").hasClass("expanded")?$("fieldset#hotel-booking").children(".hotelContainer").removeClass("hidden"):$("fieldset#hotel-booking").hasClass("collapsed")&&$("fieldset#hotel-booking").children(".hotelContainer").addClass("hidden")}),$(".hotel-book-complete").length>0?$(".hotel-search").hide():$(".hotel-search").show(),o=function(){$(".remindersContents").tooltip({items:"h5",position:{my:"left top+10",at:"right center",using:function(n,t){$(this).css(n),$("div").tooltip({tooltipClass:"custom-tooltip-styling"}),$("<div>").addClass("arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}},content:function(){var t=$(this),n;if(t.is("h5"))return n=$(this).siblings("span").find("div"),$(n).html()}})},o(),r=$("#agreementInput").find("a#insuranceTermsLink"),r.length>0&&r.click(function(){n.Util.initDisplayDialogOpenExternal(700,700,"Travel Insurance",$("#insuranceTermsLinkHidden").text(),0)}),$(".remindermainpromo a").click(function(){var t=$(this).attr("class"),n=$("ul.remindercarousel li:visible"),i=$("ul.remindercarousel li").length-1;n.hide(),t=="back"?n.prev().length!=0?n.prev().show():$("ul.remindercarousel li").eq(i).show():t=="next"&&(n.next().length!=0?n.next().show():$("ul.remindercarousel li").eq(0).show())}),$(".titlebar").unbind("click"),$(".titlebar h3").unbind("click"),$(".titlebar p.ssrSelect").unbind("click"),u=document.getElementById("wwfpayment"),$(".titlebar h3").click(function(){var n=$(this).closest("fieldset");n.hasClass("expanded")?(n.removeClass("expanded"),n.addClass("collapsed")):n.hasClass("collapsed")&&(n.removeClass("collapsed"),n.addClass("expanded"))}),$(".titlebar h3.wwftitle").unbind("click"),u!=null&&(u.onclick=function(){var n=$(this).closest("fieldset");n.hasClass("expanded")?(n.removeClass("expanded"),n.addClass("collapsed")):n.hasClass("collapsed")&&(n.removeClass("collapsed"),n.addClass("expanded"))}),$(".titlebar p.ssrSelect").click(function(){var n=$(this).closest("fieldset");n.hasClass("expanded")?(n.removeClass("expanded"),n.addClass("collapsed")):n.hasClass("collapsed")&&(n.removeClass("collapsed"),n.addClass("expanded"))}),$(".titlebar p.passportSelect, .titlebar p.destAddressSelect").click(function(){var n=$(this).closest("fieldset");n.hasClass("expanded")?(n.removeClass("expanded"),n.addClass("collapsed")):n.hasClass("collapsed")&&(n.removeClass("collapsed"),n.addClass("expanded"))}),$(".titlebar").bind("click"),$(".titlebar a").click(function(n){n.stopPropagation()}),$(".sidebar div.collapsible").unbind("click"),$(".sidebar div.collapsible").click(function(){var n=$(this).text();$(this).hasClass("expanded")?($("div.section.summary").addClass("hidden"),$(".contents.notice.hidden").removeClass("hidden"),$(this).addClass("collapsed"),$(this).removeClass("expanded")):$(this).hasClass("collapsed")&&($("div.section.summary").removeClass("hidden"),$(".contents.notice").addClass("hidden"),$(this).addClass("expanded"),$(this).removeClass("collapsed"),($("#priceWAF").html()=="0.00"||$("#priceWAF").length<=0)&&$("#priceWAF").parent().hide(),($("#priceMAF").html()=="0.00"||$("#priceMAF").length<=0)&&$("#priceMAF").parent().hide(),($("#priceTAF").html()=="0.00"||$("#priceTAF").length<=0)&&$("#priceTAF").parent().hide())}),$(".sidebar div.collapsible").bind("click"),$("div#paymentInputContent").length>0&&$(".sidebar div.collapsible").hasClass("collapsed")&&$(".sidebar div.collapsible").trigger("click"),window.onbeforeunload=function(){var n=$("div#pageUnload");if(n.length>0)return showMsg=!0,n.text()},$("a").mousedown(function(){if(!$("a").hasClass("exemptResetSession")){var t=$("div#pageUnload"),i=t.length>0;isExitPromptDisabled=typeof $(this).attr("class")!="undefined"?$(this).attr("class").indexOf("noExitPrompt")!=-1:!1,n.sessionTracking&&(n.sessionTracking.sessionExpiry=0),window.onbeforeunload=!i||this.href.match(location.host)||this.href.match("javascript")?null:function(){return showMsg=!0,t.text()}}}),$("a.noExitPrompt").mousedown(function(){n.sessionTracking&&(n.sessionTracking.sessionExpiry=0),window.onbeforeunload=null});var s=$("#unitMapSubmit"),f=$("#dynamic-fees-container"),c=f.clone();s.length>0&&f.length>0&&(s.append(c),f.remove()),e=$("#paymentInputContent label:not([class~='retainedLabels'])"),e.length>0&&$.browser.msie&&e.remove(),t=$('input[name="TextBoxAMT_HOTEL"]').parent(),t.length>0&&$.browser.msie&&($(".customerWelcomeHeader").length>0?t.attr("style","margin-left:-160px; line-height:35px;"):$.browser.version==8?t.attr("style","margin-left:-144px; line-height:35px;"):$.browser.version>8?(h=t.parent(),h.each(function(){$(this).children().eq(0).css("float","none")}),t.attr("style","line-height:25px;top:-20px;"),t.parent().attr("style","height:auto;max-height:55px;")):t.attr("style","margin-left:-135px; line-height:35px;")),n.initializeMetaObjects(),n.Util.initObjects("ready"),n.initializeSkySalesForm(),n.initializeAosAvailability(),$(".ui-selectmenu").blur(function(){$(this).parent().siblings("select").trigger("blur")}),$("#thirtyDayDifference").length>0&&($("#hotelsearchbooking").find('input[type="submit"]').length>0&&$("#hotelsearchbooking").find('input[type="submit"]').is(":visible")?$("#hotelsearchbooking").find('input[type="submit"]').trigger("click"):($("#hotel-bookingsearch").show(),$("#hotelsearchbooking").find('input[type="submit"]').trigger("click"),$("#hotel-bookingsearch").hide()));$(document).on("keydown",".ui-selectmenu.ui-state-disabled",function(n){n.keyCode!=9&&n.preventDefault()})},n.Util.load=function(){n.Util.initObjects("load"),n.common.initializeCommon(),n.toggleAtAGlance(),n.initTableSorter()},n.Util.populateSelectOriDestSattion=function(t,i,r){var v=t.selectedItem||null,y=t.objectArray||null,a=t.selectBox||null,b=t.showCode||!1,w=t.clearOptions||!1,k="",d="",u=null,g=null,nt="",o,f,p,s,h;if(a&&(u=a.get(0),thisID=u.id,u&&u.options)){if(w)u.options.length=0;else{for(u.originalOptionLength||(u.originalOptionLength=u.options.length),o=document.getElementById(thisID);o.hasChildNodes();)o.removeChild(o.firstChild);for($("#"+thisID+" optgroup").remove(),f=0;f<document.getElementsByTagName("optgroup").length;f++)document.getElementsByTagName("optgroup")[f].parentNode.name==thisID&&(p=document.getElementsByTagName("optgroup")[f],o.removeChild(p),f=0)}if(y){var c=thisID.substring(thisID.length,thisID.length-14),l=thisID.substring(thisID.length,thisID.length-19),e=document.getElementById("ControlGroupSearchView_AvailabilitySearchInputSearchView_OpenJaw");c=="originStation1"||c=="originStation2"&&e!==null?(u.options[0]=new window.Option(i,"",!0,!1),c=="originStation1"?($(u).data("required.validation","true"),$(u).data("requirederror.validation",$("div[id *= originEmptyError]")[0].innerHTML)):e.checked==!0&&($(u).data("required.validation","true"),$(u).data("requirederror.validation","return Origin is a required field."))):c=="originStation2"&&e===null?u.options[0]=new window.Option(i,"",!0,!1):l=="destinationStation1"||l=="destinationStation2"&&e!==null?(u.options[0]=new window.Option(r,"",!0,!1),l=="destinationStation1"?($(u).data("required.validation","true"),$(u).data("requirederror.validation",$("div[id *= destinationEmptyError]")[0].innerHTML)):e.checked==!0&&($(u).data("required.validation","true"),$(u).data("requirederror.validation","return Destination is a required field."))):l=="destinationStation2"&&e===null&&(u.options[0]=new window.Option(r,"",!0,!1)),s=[],h=[],n.Util.ParseCitiesAndCountries(y,h,s),h=h.sort(),s=s.sort(),n.Util.ConstructDropDown(s,u,h),v!==null&&a.val(v)}}},n.Util.ParseCitiesAndCountries=function(t,i,r){var f;for(prop in t)if(t.hasOwnProperty(prop)){obj=t[prop];var e=obj.name,u=obj.countryCode,o=obj.code;u=="PH"?u="Philippines":u=="BN"?u="Brunei Darussalam":u=="CN"?u="China":u=="HK"?u="Hongkong":u=="ID"?u="Indonesia":u=="JP"?u="Japan":u=="MO"?u="Macau":u=="MY"?u="Malaysia":u=="AE"?u="United Arab Emirates":u=="SG"?u="Singapore":u=="KR"?u="South Korea":u=="TW"?u="Taiwan":u=="TH"?u="Thailand":u=="VN"?u="Vietnam":u=="KH"&&(u="Cambodia"),f=n.Util.IndexOfItem(r,u),f==-1&&(f=r.length,r[r.length]=[u,r.length]),n.Util.IndexOfItem(i,e)==-1&&(i[i.length]=[e,f,o])}},n.Util.IndexOfItem=function(n,t){var r,i;if(!n||n.length==0)return-1;for(r=!1,n[0][0]!=null&&(r=!0),i=0;i<n.length;i++)if(r&&n[i][0]==t||n[i]==t)return i;return-1},n.Util.ConstructDropDown=function(n,t,i){for(var u,f,e,o,r=0;r<n.length;r++){for(u=document.createElement("optgroup"),u.label=n[r][0],u.className="countryGroup",f=0;f<i.length;f++)n[r][1]==i[f][1]&&(e=document.createElement("option"),document.getElementById(t.id).options.add(e),e.value=i[f][2],e.innerHTML=i[f][0],e.className="cities",u.appendChild(e));o=null,n[r][0]==o&&r!=0?t.insertBefore(u,t.childNodes[2]):t.appendChild(u)}},n.Util.populateSelectByOject=function(n,t){var l=n.selectedItem||null,u=n.objectArray||null,o=t||null,h=n.showCode||!1,c=n.clearOptions||!1,f="",s="",i=null,r=null,e="";if(o&&(i=o,i&&i.options&&(c?i.options.length=0:(i.originalOptionLength||(i.originalOptionLength=i.options.length),i.options.length=i.originalOptionLength),u)))for(e in u)u.hasOwnProperty(e)&&(r=u[e],f=h?r.name+" ("+r.code+")":r.name,s=r.code,i.options[i.options.length]=new window.Option(f,s,!1,!1))},displayPopup=function(n,t,i,r){!window.popupWindow||popupWindow.closed?popupWindow=window.open(n,t,"width="+i+", height="+r+",toolbar=0,status=0,location=0,menubar=0,scrollbars=1,resizable=1"):(popupWindow.open(n,t,"width="+i+", height="+r+",toolbar=0,status=0,location=0,menubar=0,scrollbars=1,resizable=1"),popupWindow.focus())},n.taxAndFeeInclusiveDisplayDataRequestHandler=function(i,r,u){var f=",",c={flightKeys:i.join(f),numberOfMarkets:r,keyDelimeter:f},e=null,o=null,s=null,h=null;e=function(){n.common&&n.common.stripeTables(),o=new n.Class.ToggleView,s={elementId:"allUpPricing",hideId:"closeTotalPrice",showId:"taxAndFeeInclusiveTotal"},o.init(s)},updateFareRulesBody=function(){var h="table#availabilityTable",c=":radio[checked='checked']",l="td[class*='FBAG']",a="td[class*='FBAGMEAL']",v="td[class*='SBM'],td[class*='OBM']",f="div.specific-rule-depart",e="div.specific-rule-arrive",o="div.specific-rule-items.depart",s="div.specific-rule-items.arrive",t="div.row[class*='Meals']",i="div.row[class*='Baggage Allowance']",r="div.row[class*='<i>Pagkain<\/i>']",u="div.row[class*='<i>Libreng Bagahe<\/i>']",y=".depart",p=".return";$(h).find(c).each(function(h){$(this).closest(a).length>0||$(this).closest(v).length>0?h==0?(n.Util.hideOrDisplayRule(f,t,null),n.Util.hideOrDisplayRule(f,i,null),n.Util.hideOrDisplayRule(o,r,null),n.Util.hideOrDisplayRule(o,u,null)):h==1&&(n.Util.hideOrDisplayRule(e,t,null),n.Util.hideOrDisplayRule(e,i,null),n.Util.hideOrDisplayRule(s,r,null),n.Util.hideOrDisplayRule(s,u,null)):$(this).closest(l).length>0?h==0?(n.Util.hideOrDisplayRule(f,i,t),n.Util.hideOrDisplayRule(o,u,r)):h==1&&(n.Util.hideOrDisplayRule(e,i,t),n.Util.hideOrDisplayRule(s,u,r)):(h==0&&(n.Util.hideOrDisplayRule(f,null,t),n.Util.hideOrDisplayRule(f,null,r),n.Util.hideOrDisplayRule(o,null,i),n.Util.hideOrDisplayRule(o,null,u)),h==1&&(n.Util.hideOrDisplayRule(e,null,t),n.Util.hideOrDisplayRule(e,null,r),n.Util.hideOrDisplayRule(s,null,i),n.Util.hideOrDisplayRule(s,null,u)))})},h=function(i){var c;if(i="<div>"+i+"<\/div>",window.$){$("#taxAndFeeInclusiveDivHeader").remove(),$("#taxAndFeeInclusiveDivBody").remove(),$("#fareRulesDisplayBody").remove(),$(".collapsible").html($(i).find("#taxAndFeeInclusiveDivHeader")),$(".collapsible").after($(i).find("#taxAndFeeInclusiveDivBody")),$("#dynamic-fees-container").before($(i).find("#fareRulesDisplayBody")),$("#fareRulesDisplayBody").removeClass("hidden").addClass("fareRulesBody"),$(".collapsible").hasClass("expanded")&&($("div.section.summary").removeClass("hidden"),$(".contents.notice").addClass("hidden"),$(this).addClass("expanded"),$(this).removeClass("collapsed")),$("#dynamicSubTotal").text($("#overallTotalCurrencyCode").text()+$("#overallTotal").text()),$("#bookingSummaryTotal").text($("#overallTotal").text());var s=$("#departAmount"),h=$("#returnAmount"),f=$("#departAllInAmount"),o=$("#returnAllInAmount");s&&f&&s.text(f.val()),h&&o&&h.text(o.val()),$(".fareTypeItineraryDisplay").each(function(n){var i=$(u[n]).closest("td"),r=$.grep($(i).attr("class").split(" "),function(n){return n.indexOf("fareBundle")===0}).join(),t=r.split("_");t.length==2&&$(this).text($("#"+t[t.length-1]).text())}),$("#bundleInfo").children().length==0&&$(".summaryLabel").hide(),c=!1,$(u).each(function(i){var ft=$(u[i]).closest("td"),et=$.grep($(ft).attr("class").split(" "),function(n){return n.indexOf("fareBundle")===0}).join(),d=et.split("_"),ot=$("#firstJourneyFlown").length>0&&$("#firstJourneyFlown").text()=="True",it=i,e,g,y,p,r,w;if(ot&&(it=1),e=$(this).closest("#availabilityTable"),d.length==2&&e.length>0&&e.attr("journey")!=undefined&&!isNaN(parseInt(e.attr("journey")))&&$("#overlappingFlightInput").length==0&&(g=parseInt(e.attr("journey")),y=$($("#bundleJourney_"+it).find("#ssr_"+d[d.length-1])),y.length!=0)){p=0,p=g==0?parseFloat(f.val().replace(/,/g,"")):parseFloat(o.val().replace(/,/g,"")),r=y.text(),$(u[i]).parent().hasClass("connectingFlight")&&(w=$(y).attr("data-ssr-total-with-domestic-meal"),w!=undefined&&w!=""&&(r=w));var st=$("#specialPax_"+i),ht=st.find(".specialPaxType"),b=0;ht.each(function(){var u=$($(this).find(".baseFarePrice")).text().replace(/,/g,""),f=$($(this).find(".paxCount")).text().replace(/,/g,""),e=$($(this).find(".baseFareTotalPrice")).text().replace(/,/g,""),o=(parseFloat(r)+parseFloat(u)).toFixed(2),n=parseFloat(r)*parseFloat(f),i;b+=n,i=(parseFloat(e)+n).toFixed(2),$(this).find(".baseFarePrice").text(t(o)),$(this).find(".baseFareTotalPrice").text(t(i))});var l=$("#journeyBaseFare_"+i),ct=$(l.find(".baseFarePrice")).text().replace(/,/g,""),rt=(parseFloat(r)+parseFloat(ct)).toFixed(2),lt=(rt*parseFloat($(l.find(".paxCount")).text())).toFixed(2),nt=parseFloat(r)*parseFloat($(l.find(".paxCount")).text()),k=(p+parseFloat(nt)+b).toFixed(2),at=n.Util.removeComma($("#bookingSummaryTotal").text()),tt=(parseFloat(at)+nt+b).toFixed(2),vt=$("#faresSubTotal").text().replace(/,/g,""),yt=(parseFloat(vt)+nt+b).toFixed(2),a=$(".flights.depart").find(":radio:checked").parent().next(".farePrices").find(".ADTprice").text(),v=$(".flights.return").find(":radio:checked").parent().next(".farePrices").find(".ADTprice").text(),ut=$("#summaryCurrencyCode").text();a=a.replace(" ",""),a=a.replace(ut,""),v=v.replace(" ",""),v=v.replace(ut,""),$(l.find(".baseFarePrice")).text(t(rt)),$(l.find(".baseFareTotalPrice")).text(t(lt)),$("#bookingSummaryTotal").text(t(tt)),$("#overallTotal").text(t(tt)),$("#faresSubTotal").text(t(yt)),g==0?(f.val(t(k)),s.text(t(k)),$(".fareRulesFlightDetailsDepart").find(".fare-amount").text(a)):(o.val(t(k)),h.text(t(k)),$(".fareRulesFlightDetailsReturn").find(".fare-amount").text(v)),$("#dynamicSubTotal").text(t(tt)),c=!0}}),c&&$("#dynamicSubTotal").text($("#overallTotalCurrencyCode").text()+$("#dynamicSubTotal").text()),$("#priceDetails").each(function(){$(this).find("#TaxesAndFeesLink").each(function(){var n=$(this);n.hover(function(){$(this).siblings("#showTax").css({display:"block"})},function(){$(this).siblings("#showTax").css({display:"none"})})})}),r===1&&$("table#taxesAndFeesInclusiveDisplay_2").hide()}e(),updateFareRulesBody()},n.TaxAndFeeAjaxCall(c,h)},n.TaxAndFeeAjaxCall=function(n,t){$.get("TaxAndFeeInclusiveDisplayAjax-resource.aspx",n,t)},n.Class.AvailabilityInputBase=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.journeyInfoArray=[],t.journeyInfoList=[],t.init=function(n){this.setSettingsByObject(n),this.initJourneyInfoContainers()},t.initJourneyInfoContainers=function(){for(var t=0,r=this.journeyInfoList||[],i={},t=0;t<r.length;t+=1)i=new n.Class.JourneyInfo,i.init(r[t]),this.journeyInfoArray.push(i)},t};
/*!
    This file is part of the Navitaire NewSkies application.
    Copyright (C) Navitaire.  All rights reserved.
    */
n.Class.AvailabilityInput=function(){var i=new n.Class.AvailabilityInputBase,t=n.Util.extendObject(i);return t.detailsLinks=null,t.journeyInfoArray=[],t.journeyInfo=new n.Class.JourneyInfo,t.bookingSummary={},t.clientId="",t.submitButton=null,t.invalidDateErrorMessage="",t.incompleteFareSelection="",t.isFareBundlingEnabled="",t.origYearRoundHeader="",t.combinedFareColumnHeader="",t.ssrCountOnBundles=null,t.hasInfantWithSeat="",t.priceDisplayCulture={},t.isLoyalty=$(".main.loyalty").length>0,t.getPriceItineraryInfo=function(){if(n.taxAndFeeInclusiveDisplayDataRequestHandler){var t=$("#selectMainBody #availabilityTable tr td[class^='fareCol'] :radio[checked][disabled!='disabled']"),i=[];$(t).each(function(n){i[n]=$(this).val()}),n.taxAndFeeInclusiveDisplayDataRequestHandler(i,t.length,t)}},t.showPreselectedFares=function(n){for(var t=0,t=0;t<n.length;t+=1)n[t]!==null&&$("#"+n[t]).click()},t.addCommas=function(n){var i,r,t;for(n+="",x=n.split("."),x1=x[0],x2=x.length>1?x[1]+"00":"0000",i=x2.substr(0,2),r=x2.substr(2,x2.length),x2=String(Math.round(i+"."+r)),x2=x2.length>1?"."+x2:".0"+x2,t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},t.updateBookingSummary=function(n,i){var e=$(".sidebar .contents .section ul"),l,s,h,c,tt,p;e.children().remove(),t.bookingSummary.marketCount>1?t.bookingSummary.arrvStation==t.bookingSummary.deptStationReturn?t.bookingSummary.deptStation!=t.bookingSummary.arrvStationReturn?(e.append("<li>"+t.priceDisplayCulture.openJaw+"<\/li>"),e.append("<br/><li>"+t.bookingSummary.deptStation+" - "+t.bookingSummary.arrvStation+" - "+t.bookingSummary.deptStationReturn+" - "+t.bookingSummary.arrvStationReturn+"<\/li>")):(e.append("<li>"+t.priceDisplayCulture.roundTrip+"<\/li>"),e.append("<br/><li>"+t.bookingSummary.deptStation+" - "+t.bookingSummary.arrvStation+" - "+t.bookingSummary.deptStation+"<\/li>")):t.bookingSummary.deptStation==t.bookingSummary.arrvStationReturn&&(t.bookingSummary.arrvStation!=t.bookingSummary.deptStationReturn?(e.append("<li>"+t.priceDisplayCulture.roundTrip+"<\/li>"),e.append("<br/><li>"+t.bookingSummary.deptStation+" - "+t.bookingSummary.arrvStation+" - "+t.bookingSummary.deptStationReturn+" - "+t.bookingSummary.arrvStationReturn+"<\/li>")):(e.append("<li>"+t.priceDisplayCulture.roundTrip+"<\/li>"),e.append("<br/><li>"+t.bookingSummary.deptStation+" - "+t.bookingSummary.arrvStation+" - "+t.bookingSummary.deptStation+"<\/li>"))):(e.append("<li>"+t.priceDisplayCulture.oneWay+"<\/li>"),e.append("<br/><li>"+t.bookingSummary.deptStation+t.priceDisplayCulture.to+" to "+t.bookingSummary.arrvStation+"<\/li>")),e.append("<br/><li>"+t.bookingSummary.adultPaxCount+t.priceDisplayCulture.adult+" / "+t.bookingSummary.childPaxCount+t.priceDisplayCulture.child+" / "+t.bookingSummary.infantPaxCount+t.priceDisplayCulture.infant+" <\/li>"),t.bookingSummary.isAnonymous=="False"&&(t.bookingSummary.vatExPaxCount!=0||t.bookingSummary.pwdPaxCount!=0||t.bookingSummary.txExPaxCount!=0||t.bookingSummary.seniorPaxCount!=0)&&(l="<br/><li>",t.bookingSummary.pwdPaxCount!=0&&(l+=t.bookingSummary.pwdPaxCount+t.priceDisplayCulture.pwd+" / "),t.bookingSummary.seniorPaxCount!=0&&(l+=t.bookingSummary.seniorPaxCount+t.priceDisplayCulture.senior+" / "),t.bookingSummary.txExPaxCount!=0&&(l+=t.bookingSummary.txExPaxCount+t.priceDisplayCulture.txex+" / "),e.append(l.substr(0,l.length-2)),e.append("<\/li>"));var a=null,v=null,it=$(".flights.depart"),rt=$(".flights.return"),u=0,wt=0,w=0,b=0,k=0,f=0,bt=0,d=0,g=0,nt=0,ut=$("#depart-dynamic.hidden").length>0?$("#depart-dynamic.hidden"):$("#depart-dynamic"),ft=$("#return-dynamic.hidden").length>0?$("#return-dynamic.hidden"):$("#return-dynamic"),et=$("#departAmount"),ot=$("#returnAmount"),kt=$("#dynamicSubTotal"),st=$("#summaryFareDetailDepart"),ht=$("#summaryFareDetailReturn"),ct=$("#summaryFareDetailDepartSenior"),lt=$("#summaryFareDetailReturnSenior"),at=$("#summaryFareDetailDepartPWD"),vt=$("#summaryFareDetailReturnPWD"),yt=$("#summaryFareDetailDepartTXEX"),pt=$("#summaryFareDetailReturnTXEX"),r=0,o=0,y=0;for(s=0;s<n.length;s+=1)n[s]!==null&&n[s]!==""&&(a=$("#"+n[s]+":checked"),v=$("#"+n[s]).parent(),h=v.siblings(".farePrices").find("span[class^='ADT']").text(),c=v.siblings(".farePrices").find("span[class^='INF']").text(),h!=undefined&&h!=null&&h!=""&&(h=h.replace(/[^0-9.]/gi,""),r=parseFloat(h)),f=0,f=f+r*parseInt(t.bookingSummary.adultPaxCount),f=f+r*parseInt(t.bookingSummary.childPaxCount),f=f+r*parseInt(t.bookingSummary.infantWithSeatPaxCount),d=f,f=f+r*parseInt(t.bookingSummary.seniorPaxCount),g=r*parseInt(t.bookingSummary.seniorPaxCount),f=f+r*parseInt(t.bookingSummary.pwdPaxCount),nt=r*parseInt(t.bookingSummary.pwdPaxCount),f=f+r*parseInt(t.bookingSummary.vatExPaxCount),f=f+r*parseInt(t.bookingSummary.txExPaxCount),fareAmountTXEX=r*parseInt(t.bookingSummary.txExPaxCount),f=t.getTotalAmountDiscounted(n[s],r,f),u=u+r*parseInt(t.bookingSummary.adultPaxCount),u=u+r*parseInt(t.bookingSummary.childPaxCount),u=u+r*parseInt(t.bookingSummary.infantWithSeatPaxCount),w=u,u=u+r*parseInt(t.bookingSummary.seniorPaxCount),b=r*parseInt(t.bookingSummary.seniorPaxCount),u=u+r*parseInt(t.bookingSummary.pwdPaxCount),k=r*parseInt(t.bookingSummary.pwdPaxCount),u=u+r*parseInt(t.bookingSummary.vatExPaxCount),u=u+r*parseInt(t.bookingSummary.txExPaxCount),totalTXEX=r*parseInt(t.bookingSummary.txExPaxCount),u=t.getTotalAmountDiscounted(n[s],r,u),o=r,y=parseInt(t.bookingSummary.adultPaxCount)+parseInt(t.bookingSummary.childPaxCount)+parseInt(t.bookingSummary.infantWithSeatPaxCount),c!=undefined&&c!=null&&c!=""&&(c=c.replace(/[^0-9.]/gi,""),r=parseFloat(c),u=u+r*parseInt(t.bookingSummary.infantPaxCount),f=f+r*parseInt(t.bookingSummary.infantPaxCount),infantBaseAmount=r),a.is(":checked")&&a.closest(it).length>0?(ut.removeClass("hidden"),$("#taxAndFeeInclusiveDivHeader").length==0&&(et.text(t.addCommas(u).toString()),st.text(t.addCommas(o).toString()+" x "+y+" = "+t.addCommas(w).toString()),ct.text(t.addCommas(o).toString()+" x "+parseInt(t.bookingSummary.seniorPaxCount)+" = "+t.addCommas(b).toString()),at.text(t.addCommas(o).toString()+" x "+parseInt(t.bookingSummary.pwdPaxCount)+" = "+t.addCommas(k).toString()),yt.text(t.addCommas(o).toString()+" x "+parseInt(t.bookingSummary.txExPaxCount)+" = "+t.addCommas(totalTXEX).toString()))):a.is(":checked")&&a.closest(rt).length>0&&(ft.removeClass("hidden"),$("#taxAndFeeInclusiveDivHeader").length==0&&(ot.text(t.addCommas(f).toString()),ht.text(t.addCommas(o).toString()+" x "+y+" = "+t.addCommas(d).toString()),lt.text(t.addCommas(o).toString()+" x "+parseInt(t.bookingSummary.seniorPaxCount)+" = "+t.addCommas(g).toString()),vt.text(t.addCommas(o).toString()+" x "+parseInt(t.bookingSummary.pwdPaxCount)+" = "+t.addCommas(nt).toString()),pt.text(t.addCommas(o).toString()+" x "+parseInt(t.bookingSummary.txExPaxCount)+" = "+t.addCommas(fareAmountTXEX).toString()))));tt=$("#totalBGAmount"),tt!==undefined&&(u+=parseFloat(t.addCommas($("#totalBGAmount").text()))),i&&($("span#faresSubTotal").text(t.addCommas(u).toString()),$("#taxAndFeeInclusiveDivHeader").length==0&&($("span#overallTotal").text(t.addCommas(u).toString()),$("span#bookingSummaryTotal").text(t.addCommas(u).toString()),$("#dynamicSubTotal").text($("#overallTotalCurrencyCode").text()+$("#overallTotal").text())),$("#wafeeAmountHidden").length>0&&(p=parseFloat($("#wafeeAmountHidden").val())*$(".selected").closest("tr").length,$("#priceWAF").text(t.addCommas(p).toString()),$("#addOnsSubTotal").text(t.addCommas(p).toString())))},t.getTotalAmountDiscounted=function(n,i,r){var u=0,paxCount=0,f=document.getElementById(n),e=f?f.value.split("~",3):["",""];if(t.bookingSummary.isPaxDiscounted=="True"&&e[1]=="T"){with(t.bookingSummary)paxCount=parseInt(adultPaxCount)+parseInt(childPaxCount)+parseInt(infantWithSeatPaxCount)+parseInt(seniorPaxCount)+parseInt(pwdPaxCount)+parseInt(txExPaxCount)+parseInt(vatExPaxCount),paxCount=parseInt(paxCount/2);return u=r-paxCount*i}return r},t.Open=function(t){var i=n.Util.getAttributeValue($(t),"showcheckinreminder"),r=n.Util.getAttributeValue($(t),"showcagayanreminder");r=="true"&&cgyShowLogIn.init(),i=="True"&&($("#noteMidnight").css("display","block"),$("#fade").css("display","block"))},t.Close=function(){$("#noteMidnightClose").click(function(){$("#noteMidnight").css("display","none"),$("#fade").css("display","none")})},t.onRadioButtonFareSelect=function(){var u=$("#selectMainBody table[id='availabilityTable']");"tr td[class^='fareCol']";var n=[],i=null,r=null;$("#selectMainBody table[id='availabilityTable']").each(function(){u.find("td[class^='fareCol']").each(function(){var t=$(this),n=t.find(":radio[name$='market1'][checked]").attr("id");n&&(i=n,$("#"+n).closest("td").parent().siblings().find("td.selected").removeClass("selected"),$(this).closest("tr").children().addClass("selected")),n=t.find(":radio[name$='market2'][checked]").attr("id"),n&&(r=n,$("#"+n).closest("td").parent().siblings().find("td.selected").removeClass("selected"),$(this).closest("tr").children().addClass("selected"))})}),n[0]=i,n[1]=r,t.updateBookingSummary(n,!0)},t.updateFareSelectedHandler=function(){var n=this.id||"";t.updateFareSelected(n)},t.updateFareSelected=function(n){this.getPriceItineraryInfo(),this.updateFareRules(n)},t.updateFareRuleSelected=function(n){this.updateFareRules(n)},t.updateFareRules=function(t){var v=/(RadioButtonMkt[0-9]+Fare[0-9]+)$/,u=[],h="",f="",c=this.journeyInfoArray||[],i=0,y=c.length,e=null,o=null,r=0,l=0,s=null,a=n.Util.getFareRuleContainer();if(a&&t&&(u=v.exec(t)||[],u.length>1)){h=u[1];n:for(i=0;i<y;i+=1)for(e=c[i],o=e.fareArray||[],l=o.length,r=0;r<l;r+=1)if(s=o[r],h===s.fareId){f=s.fareRuleKey,f&&a.updateFareRule(e.marketIndex,f);break n}}},t.updateBookingSummaryHandler=function(){t.onRadioButtonFareSelect(),$("#selectMainBody tr td[class^='fareCol'] :radio:checked").each(function(t){var r,i;if(t=t+1,r=$(this).parent().parent(),classOfTd=r.attr("class").split(" "),classOfTd.length>0)for(i=0;i<classOfTd.length;i++)if(classOfTd[i].indexOf("fareBundle")>-1){classOfTd=classOfTd[i];break}(classOfTd!=""||classOfTd!=null)&&(classOfTd=n.Util.replace(classOfTd,"fareBundle_",""),$("input[id*='hiddenFieldForBundle"+t+"']").val(classOfTd))})},t.addUpdateBookingSummaryEvent=function(){$("#selectMainBody tr td[class^='fareCol'] :radio").click(this.updateBookingSummaryHandler)},t.showLowestFare=function(i){for(var h,c,l,a,u,f=0;f<i.length;f+=1)if(i[f]!==null){selectedFareDiv=t.getById(i[f]).parent();var r=t.getById(i[f]).closest("table"),e=selectedFareDiv.siblings(".farePrices").find("span[class^='ADT']"),o="N/A",s=0;$(e).length>0&&(h=$(e).map(function(){var t=$(this).html().trim()!=""?$(this).html().split(" ")[1]:0;return parseFloat(n.Util.removeComma(t)).toFixed(2)}).get(),s=parseFloat(Math.min.apply(Math,h)).toFixed(2),c=$(e).first().html().split(" ")[0],o=c+" "+n.Util.addCommas(s)),t.isLoyalty||(l=o.toString(),r.parent().find($("div.dayHeaderTodayImage")).find($("span.weeklyDisplayPriceDisplay")).text(l+"+"),a=r.find("span[class^='ADT']").filter(function(){var t=$(this).html().trim();return t==o}).first(),u=$($(a).first()).parent().closest(".farePrices").prev("div.radioButtonFareContainer").attr("faretype"),u!==null&&u&&(u==="tourfare"?r.parent().find("span#headerTBFareSmall").show():u==="labor"?r.parent().find("span#headerOFWFares").show():u==="gp"?r.parent().find("span#headerGPFares").show():u==="itfare"?r.parent().find("span#headerItFareSmall").show():u==="promo"?r.parent().find("span#headerPromoFaresSmall").show():r.parent().find("span#headerYearRoundSmall").show()))}},t.setPreselectedFares=function(){var r=$("#selectMainBody #availabilityTable tr td[class^='fareCol']"),i=r.find(":radio[checked]").length,u=r.find(":radio[checked]"),n;i===0?$("#taxAndFeeInclusiveDivBody").remove():i===1&&$("#taxesAndFeesInclusiveDisplay_2").hide(),i>0&&$("#overallTotal").text()==""&&u.attr("disabled","disabled"),n=[],$("#selectMainBody table[id='availabilityTable']").each(function(t){var i=-1;$(this).find("td[class^='fareCol']").each(function(){$(this).find(":radio").each(function(){var r=$.trim($(this).parent().closest("div").next("div.farePrices").find("span[class^='ADT']").text());r=parseFloat(r.replace(/[^0-9.]/gi,"")),isNaN(r)||(i==-1||r<i)&&(i=r,n[t]=$(this).attr("id"))})})}),t.updateBookingSummary(n,!1),t.showLowestFare(n)},t.addGetPriceItineraryInfoEvents=function(){var n=$("#selectMainBody tr td[class^='fareCol'] :radio");n.unbind("click"),n.click(this.updateFareSelectedHandler)},t.ajaxEquipmentProperties=function(){},t.addEquipmentPropertiesAjaxEvent=function(){$(this).click(t.ajaxEquipmentProperties)},t.addEquipmentPropertiesAjaxEvents=function(){t.detailsLinks.each(t.addEquipmentPropertiesAjaxEvent)},t.showFareByTypeEvents=function(){$("select[id^='fareType']").each(function(){$(this).change(function(){var u=this,e=u.id.match(/\d+/),i=$(u).val(),r=$("table[journey]")[e-1],o=$(r).find("tbody tr"),f;$(o).each(function(){var f=$(this).find("div[fareType]"),r=0;$(f).each(function(){var f=$(this).find("input"),c=n.Util.getAttributeValue($(f),"farebasis"),a=n.Util.getAttributeValue($(f),"fareclass"),h=$("option[value='gpfare']",u).attr("basis"),o,s,e,l;h=h?h.trim().split(","):null,o=$("option[value='laborfare']",u).attr("basis"),o=o?o.trim().split(","):null,s=$("option[value='tourfare']",u).attr("basis"),s=s?s.trim().split(","):null,e=$(this).attr("faretype"),l=t.getLowestFareTypePerCell($(this)),i=="tourfare"&&$.inArray(c,s)>-1?(t.showFareDisplay($(this),!0),n.Util.setAttribute($(f),"required","true"),r++):e=="corpfare"?(t.showFareDisplay($(this),!0),n.Util.setAttribute($(f),"required","true"),r++):i=="laborfare"&&$.inArray(c,o)>-1?(t.showFareDisplay($(this),!0),n.Util.setAttribute($(f),"required","true"),r++):i=="gpfare"&&$.inArray(c,h)>-1?(t.showFareDisplay($(this),!0),n.Util.setAttribute($(f),"required","true"),r++):(i=="laborfare"||i=="gpfare")&&e==l?(t.showFareDisplay($(this),!0),n.Util.setAttribute($(f),"required","true"),r++):i==e||(e=="labor"||e=="gp")&&i!=="laborfare"&&i!=="gpfare"||e=="itfare"?((i==e||e=="itfare")&&(t.showFareDisplay($(this),!0),n.Util.setAttribute($(f),"required","true")),r++):(t.showFareDisplay($(this),!1),n.Util.setAttribute($(f),"required","false"))})}),f=$(r).find("tbody tr:visible"),$(f).length<=0?$(r).find("thead tr").hide():($(r).find("thead tr").show(),$(f).each(function(n){$(this).removeClass("even"),n%2!=0&&$(this).addClass("even")})),$("#bookingSummaryTotal").html("0.00"),$("#fareRulesDisplayBody").html(""),$("#taxAndFeeInclusiveDivBody").html(""),$(r).find("input:checked").parent().closest("tr").find("td").removeClass("selected"),$(r).find("input:checked").attr("checked",!1)})})},t.getLowestFareTypePerCell=function(n){var i="N/A",r=$(n).parent().closest("td"),u=$(r).find("div[fareType ='promo'],div[fareType ='regular']"),t=-1;return $(u).each(function(){var r=$(this).next("div.farePrices").find("span[class^='ADT']"),n;$(r).length>0&&(n=$(r).map(function(){var n=$(this).html().trim()!==""?$(this).html().split(" ")[1]:0;return parseFloat(n.replace(/,/g,"")).toFixed(2)}).get(),t==-1&&(t=Math.min.apply(Math,n),i=$(this).attr("faretype")),t>Math.min.apply(Math,n)&&(t=Math.min.apply(Math,n),i=$(this).attr("faretype")))}),i},t.showFareDisplay=function(n,t){t==!0?($(n).show(),$(n).nextAll().show()):($(n).hide(),$(n).nextAll().hide())},t.setDefaultFareTypeDropdownValue=function(){$(document).ready(function(){$("select[id^='fareType']").each(function(){var i=$(this).closest("div.flightInfoHeader").nextAll("div#selectMainBody:first"),r=$(i).find("div[faretype ='promo'],div[faretype ='regular']"),n=-1,t="",u=$(':radio[name*="RadioButtonFareType"]'),f;u.length>0&&(f=u.filter(":checked").val(),f=="TB"&&(r=$(i).find("div[faretype ='tourfare']"))),$(r).each(function(){var u=$(this).next("div.farePrices").find("span[class^='ADT']"),r,i;$(u).length>0&&(r=$(this).attr("faretype"),i=$(u).map(function(){var n=$(this).html().trim()!==""?$(this).html().split(" ")[1]:0;return parseFloat(n.replace(/,/g,"")).toFixed(2)}).get(),n==-1?(n=Math.min.apply(Math,i),t=r):n>Math.min.apply(Math,i)?(n=Math.min.apply(Math,i),t=r):n==Math.min.apply(Math,i)&&r=="promo"&&(n=Math.min.apply(Math,i),t=r))}),$(this).val(t).selectmenu().trigger("change")})})},t.validateEvent=function(){var u=$("input[id*='RadioButtonMkt1']:checked"),i=$("input[id*='RadioButtonMkt2']:checked"),f=u.val().split("~")[12],r=i?i.val().split("~")[12]:"";if(r&&new Date(r)<new Date(f))return n.RemoveLoadingBar(),alert(t.invalidDateErrorMessage),!1},t.addEvents=function(){t.showFareByTypeEvents(),t.addGetPriceItineraryInfoEvents(),t.addEquipmentPropertiesAjaxEvents(),t.submitButton&&t.submitButton.length>0&&t.invalidDateErrorMessage&&(t.submitButton.unbind("click"),t.submitButton.click(this.validateEvent))},t.setVars=function(){t.detailsLinks=$(".showContent"),t.submitButton=$(".submitcontinue").find($('a[id*="LinkButtonSubmit"]'))},t.initFlightInfoDisplay=function(){$("#selectMainBody table[id='availabilityTable'] span.flightInfoLink").tooltip({items:"span",position:{my:"center top+10",at:"center bottom",using:function(n,t){$(this).css(n),$("div").tooltip({tooltipClass:"custom-tooltip-styling"}),$("<div>").addClass("arrow").addClass(t.vertical).addClass(t.horizontal).css("width","50px").appendTo(this)}},content:function(){var t=$(this),n;if(t.hasClass("flightInfoLink"))return n=$(this).siblings("div.flightDetails"),$(n).html()}})},t.initHelpInfoDisplay=function(){$("#selectMainBody table[id='availabilityTable']").tooltip({items:"img",position:{my:"center top+10",at:"center bottom",using:function(n,t){$(this).css(n),$("div").tooltip({tooltipClass:"custom-tooltip-styling"}),$("<div>").addClass("arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}},content:function(){var t=$(this),n;if(t.is("img"))return n=$(this).siblings("span.tooltipHidden").find("div"),$(n).html()}}),$("#selectMainBody table[id='availabilityTable'] input[type='radio']").each(function(){$(this).qtip({show:{event:"click",solo:!0},hide:"click",style:{classes:"qtip-light qtip-shadow"},position:{my:"top center",at:"bottom center"},content:{text:function(n){var i=$(this),t,r;if(i.is("input[type='radio']")&&n.type!="mouseover")return t=i.parent("div").next("div").find("span.tooltipHidden").find("div"),t.find("ul[isInterline=True]").find("li:even").addClass("column-left"),t.find("ul[isInterline=False]").find("li:odd").addClass("column-right"),r=t.html()+'<span style="position:absolute;top:0;right:0;"><\/span>'},button:!0}})})},t.removeComma=function(n){return n.replace(/,/g,"")},t.showLowestFarePerCell=function(){var r=t.isFareBundlingEnabled!=null?t.isFareBundlingEnabled:null,c=t.hasInfantWithSeat!=null?t.hasInfantWithSeat:null,l=$(".limitedSeats"),h=t.ssrCountOnBundles,n,s;if(r!=null&&r!=""&&r=="True")if($('td.sclabor, td[class*="fareBundle"]').each(function(){var r=$(this).find(".farePrices span[class^='ADT']"),u=0,i=null,f=$(this).find("input[type='radio']");$(r).length>0&&($(this).children().hide(),$(r).each(function(n){var r=$(this).text().split(" ")[1]!=null?$(this).text().split(" ")[1]:"0";r=parseFloat(t.removeComma(r)),(n==0||u>r)&&(u=r,i=$(this).parent().closest(".farePrices"))}),$(i).show(),$(f).length>0?($(i).prev(".radioButtonFareContainer").show(),$(i).nextUntil(".radioButtonFareContainer").show()):$(i).nextUntil(".farePrices").show())}),h!=null&&h.length>0)if(n=$("#checkMarketHeaderIndex"),n!=null&&n.length>0&&n.text().length>0){var i=n.text(),u=$("th.promo_Journey"+i),f=$("th.yearRound_Journey"+i+" > span"),e=$("th.forFareBundle_Journey"+i),o=$("th.HeaderOfjourney_"+i);t.removeNonBundleHeader(u,f,e,o)}else u=null,f=null,e=null,o=null,t.removeNonBundleHeader(u,f,e,o);else s=$("th[class*='yearRound_Journey']"),s.length>0&&s.addClass("revertPaddingforYRFares")},t.removeNonBundleHeader=function(n,i,r,u){for(var c=t.origYearRoundHeader!=null?t.origYearRoundHeader:null,l=t.combinedFareColumnHeader!=null?t.combinedFareColumnHeader:null,b=$(".limitedSeats"),y=$(".new-corp-fare").length>0||$(".new-it-fare").length>0?!0:!1,a=t.ssrCountOnBundles,e,s,h,f=0;f<a.length;f++){var p=n!=null&&n.length>0?n:$("th.promo_Journey"+f),o=i!=null&&i.length>0?i:$("th.yearRound_Journey"+f+" > span"),w=r!=null&&r.length>0?r:$("th.forFareBundle_Journey"+f),v=u!=null&&u.length>0?u:$("th.HeaderOfjourney_"+f);a[f]!=null?(p.remove(),o.text()==c&&(o.text(l),o.before("<span class='soloFlightImage'><img src='images/CebuAirRevamp/Airfare_Bundle_Flight.png'/><\/span>"),v.addClass("classPadding"),e=$("#unavailableMarketIndex"),e!=null&&e.length>0&&e.text().length>0&&(s=e.text(),h=$("th.yearRound_Journey"+s+" > span"),$("th.promo_Journey"+s).remove(),h.text()==c&&(h.text(l),h.before("<span class='soloFlightImage'><img src='images/CebuAirRevamp/Airfare_Bundle_Flight.png'/><\/span>"),$("th.HeaderOfjourney_"+s).addClass("classPadding")))),y&&($(".fareCol4").css("width","25%"),$(".fareCol5").css("width","18%"),$("th.new-go-fare").css({padding:"0px",width:"21%"}),$(".new-corp-fare").css("padding","3%  0 0 0"),$(".new-it-fare").css("padding","3%  0 0 0"),$(".new-it-fare").css("width","21%"),$("span.soloFlightImage").css({"margin-left":"40%","padding-left":"0px"}),$("span.imagesforFareBundles span.flightImage").css("margin-left","15px"),$("div.radioButtonFareContainer").css("margin-left","19%"))):(w.remove(),o.addClass("revertPaddingforYRFares"),v.removeClass("classPadding"))}},t.removeFLYBAGMEALFares=function(){$("table#availabilityTable").each(function(n){var t=!1;$("div#checkedMarkets").each(function(i){i==n&&$(this).text()=="True"&&(t=!0)}),t&&$(this).find('td[class*="FBAGMEAL"]').children("div").addClass("hidden")})},t.initTourBasingDialog=function(){$("#tourBasingDialog").dialog({autoOpen:!1,modal:!0,closeOnEscape:!1,buttons:{OK:{text:"OK",style:"padding:7px 10px 7px 10px; font-size:12px;",click:function(){$(this).dialog("close")}}},open:function(){$(this).parent().find(".ui-dialog-titlebar").hide()}})},t.init=function(r){i.init.call(this,r),this.setSettingsByObject(r),n.taxAndFeeInclusiveDisplayDataRequestHandler&&(t.setPreselectedFares(),t.setVars(),t.addEvents()),t.showLowestFarePerCell(),t.Close(),t.initFlightInfoDisplay(),t.initHelpInfoDisplay(),t.setPreselectedFares(),t.setDefaultFareTypeDropdownValue(),t.addUpdateBookingSummaryEvent(),$("table.flights").find("tbody").find("tr:odd").addClass("even")},t},n.Class.LowestFareInfo=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.tripMarketIndex="",t.marketIndex="",t.dateMarketIndex="",t.lowestFareControlId="",t.lowestFareControl=null,t.lowestFareSellKey="",t.lowestJourneySellKey="",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.selectDateMarketLowestFare()},t.setVars=function(){i.setVars.call(this);var n=this.lowestFareSellKey+"|"+this.lowestJourneySellKey;t.lowestFareControl=$("input[value ="+n+"]",this.container)},t.selectDateMarketLowestFare=function(){var n=this.lowestFareControl||{};n&&n.attr("checked","checked")},t},n.Class.JourneyInfo=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.equipmentInfoUri="EquipmentPropertiesDisplayAjax-resource.aspx",t.key="",t.journeyContainerId="",t.activateJourneyId="",t.activateJourney=null,t.deactivateJourneyId="",t.deactivateJourney=null,t.journeyContainer=null,t.legInfoArray=[],t.clientName="EquipmentPropertiesDisplayControlAjax",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setVars=function(){t.journeyContainer=this.getById(t.journeyContainerId),t.activateJourney=this.getById(t.activateJourneyId),t.deactivateJourney=this.getById(t.deactivateJourneyId)},t.addEvents=function(){t.activateJourney.click(t.show),t.deactivateJourney.click(t.hide)},t.setSettingsByObject=function(n){var i="";for(i in n)t.hasOwnProperty(i)&&(t[i]=n[i])},t.showWithData=function(i){var l=$(i).html(),a=n.Json.parse(l),u=a.legInfo,f=null,e="",c=null,o="",s=null,r=0,h=null;for(e in u)if(u.hasOwnProperty(e)&&(o="",f=u[e],f.legIndex!==undefined)){for(c=$("#propertyContainer_"+t.key),s=f.equipmentPropertyArray,r=0;r<s.length;r+=1)h=s[r],o+="<div>"+h.name+": "+h.value+"<\/div>";c.html(o)}t.journeyContainer.show("slow")},t.show=function(){for(var u=t.legInfoArray,i=null,f={},r="",n=0,e=t.clientName,n=0;n<u.length;n+=1){i=u[n];for(r in i)i.hasOwnProperty(r)&&(f[e+"$legInfo_"+r+"_"+n]=i[r])}$.post(t.equipmentInfoUri,f,t.showWithData)},t.hide=function(){t.journeyContainer.hide()},t},n.Util.getFareRuleContainer=function(){return n.common.fareRuleContainer},n.Class.FareRule=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.name=null,t.data=null,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.addEvents=function(){},t.setSettingsByObject=function(n){i.setSettingsByObject.call(this,n)},t},n.Class.FareRule.createObject=function(t){n.Util.createObject("fareRule","FareRule",t)},n.Class.FareDisplay=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.fareDisplayInputId="",t.fareDisplayInput=null,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.addEvents=function(){},t.setVars=function(){t.fareDisplayInput=document.getElementById(t.fareDisplayInputId)},t.setSettingsByObject=function(n){i.setSettingsByObject.call(this,n)},t},n.Class.FareDisplay.createObject=function(t){n.Util.createObject("fareDisplay","FareDisplay",t)},n.Class.AvailabilityFareRulesDisplay=function(){var r=n.Class.SkySales(),t=n.Util.extendObject(r);return t.commonFareName="",t.flightFareList=null,t.fareRulesList=null,t.fareDisplayList=null,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.test(),this.updateFareRulesDisplayBody()},t.updateFareRulesDisplayBody=function(){var f="div.specific-rule-depart",e="div.specific-rule-arrive",o="div.specific-rule-native.depart",s="div.specific-rule-native.arrive",t="div.row[class*='Meals']",i="div.row[class*='Baggage Allowance']",r="div.row[class*='<i>Pagkain<\/i>']",u="div.row[class*='<i>Libreng Bagahe<\/i>']";$(".bundleTypeDiv").each(function(h){$(this).text()=="FLY + BAG + MEAL"?h==0?(n.Util.hideOrDisplayRule(f,t,null),n.Util.hideOrDisplayRule(f,i,null),n.Util.hideOrDisplayRule(o,r,null),n.Util.hideOrDisplayRule(o,u,null)):h==1&&(n.Util.hideOrDisplayRule(e,t,null),n.Util.hideOrDisplayRule(e,i,null),n.Util.hideOrDisplayRule(s,r,null),n.Util.hideOrDisplayRule(s,u,null)):$(this).text()=="FLY + BAG"?h==0?(n.Util.hideOrDisplayRule(f,i,t),n.Util.hideOrDisplayRule(o,u,r)):h==1&&(n.Util.hideOrDisplayRule(e,i,t),n.Util.hideOrDisplayRule(s,u,r)):$(this).text()=="FLY"&&(h==0?(n.Util.hideOrDisplayRule(f,null,t),n.Util.hideOrDisplayRule(o,null,r),n.Util.hideOrDisplayRule(f,null,i),n.Util.hideOrDisplayRule(o,null,u)):h==1&&(n.Util.hideOrDisplayRule(e,null,t),n.Util.hideOrDisplayRule(s,null,r),n.Util.hideOrDisplayRule(e,null,i),n.Util.hideOrDisplayRule(s,null,u)))})},t.test=function(){var r=t.fareRulesList.length>0?t.fareRulesList[0].data:"",i,n;if(r.length>0){while(r.indexOf("<br /><br /><br />")>-1)r=r.replace("<br /><br /><br />","<br /><br />");for(i=r.split("<br />"),n=0;n<i.length;n++)i[n].length<1||(i[n].indexOf("<span>")>-1&&(i[n]=i[n].replace("<span>","")),i[n]==i[n].toUpperCase()&&(r=r.replace(i[n],"<strong>"+i[n]+"<\/strong>")))}},t.addEvents=function(){var i=$("#selectMainBody > table[id='availabilityTable']"),n=null;$(i).each(function(){n=$(" tr td[class^='fareCol'] :radio"),$(n).each(function(){$(this).click(t.updateFareDisplay)})})},t.updateFareDisplay=function(){var n=this.value.split("~"),i=this.name,r=i.slice(i.length-1,i.length);r=r-1,n.length>2&&n[1]!==""&&t.populateFareDisplay(r,n[1])},t.getFareData=function(n){var r=t.fareRulesList;for(i=0;i<r.length;i++)if(r[i].name===n)return"<span>Class "+n+"<\/span><br/><br/>"+r[i].data;return"<span>Class "+n+"<\/span><br/><br/>"+r[0].data},t.populateFareDisplay=function(n,i){var r=t.fareDisplayList;r.length>n&&(r[n].fareDisplayInput.innerHTML="<p>"+t.getFareData(i)+"<\/p>")},t.setSettingsByObject=function(i){r.setSettingsByObject.call(this,i);for(var u=0,f=this.fareRulesList||[],o=null,e=this.fareDisplayList||[],s=null,u=0;u<f.length;u+=1)o=new n.Class.FareRule,o.init(f[u]),f[u]=o;for(t.fareRulesList=f,u=0;u<e.length;u+=1)s=new n.Class.FareDisplay,s.init(e[u]),e[u]=s;t.fareDisplayList=e},t},n.Class.AvailabilityFareRulesDisplay.createObject=function(t){n.Util.createObject("availabilityFareRulesDisplay","AvailabilityFareRulesDisplay",t)},n.Class.ParticipantMapping=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.containerId="PassengerToParticipant",t.container=null,t.participantInputHash={},t.dropDownInputArray=[],t.yearStart=1900,t.dayCount=31,t.birthDateId="",t.birthDate=null,t.birthDateYearId="",t.birthDateYear=null,t.birthDateMonthId="",t.birthDateMonth=null,t.birthDateDayId="",t.birthDateDay=null,t.disableFields=!1,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.initDropDowns(),this.disableFields?this.disableFormFields():this.addEvents(),this.updateBirthDateDropDown()},t.disableFormFields=function(){this.container.find(":input").attr("disabled","disabled")},t.setVars=function(){this.container=this.getById(this.containerId),this.birthDate=this.getById(this.birthDateId),this.birthDateYear=this.getById(this.birthDateYearId),this.birthDateMonth=this.getById(this.birthDateMonthId),this.birthDateDay=this.getById(this.birthDateDayId)},t.addEvents=function(){this.container.change(this.mapPassengerHandler),this.birthDate.change(this.updateBirthDateDropDownHandler),this.birthDateYear.change(this.updateBirthDateHandler),this.birthDateMonth.change(this.updateBirthDateHandler),this.birthDateDay.change(this.updateBirthDateHandler)},t.getDataTypeHash=function(){for(var i=n.Util.getResource()||{},a=i.countryInfo.CountryList||[],u=i.provinceStateInfo.ProvinceStateList||[],v=i.titleInfo.TitleList||[],o=i.dateCultureInfo.monthNamesShort||[],f="",s={},h=[],c=[],l=[],r=0,t=0,y=this.dayCount,p=this.yearStart,w=new Date,b=w.getFullYear(),e={},t=1;t<=y;t+=1)h.push({name:t,code:t});for(r=o.length,t=0;t<r;t+=1)f=o[t],f&&c.push({name:f,code:t});for(t=b;t>=p;t-=1)l.push({name:t,code:t});for(r=u.length,t=0;t<r;t+=1)e=u[t]||{},e.code=e.scode;return s={country:a,provinceState:u,title:v,dateDay:h,dateMonth:c,dateYear:l}},t.initDropDowns=function(){for(var i=0,f=this.dropDownInputArray||[],l=f.length,t=null,e="",r="",o="",s=[],h=this.getDataTypeHash()||{},u=null,c={},i=0;i<l;i+=1)t=f[i],e=t.id||"",r=t.dataType||"",o=t.value||"",u=this.getById(e),u.length&&h[r]&&(s=h[r],c={objectArray:s,input:u,showCode:!1,clearOptions:!1,selectedItem:o},n.Util.populate(c))},t.mapPassengerHandler=function(){t.mapPassenger()},t.updateBirthDateHandler=function(){t.updateBirthDate()},t.updateBirthDate=function(){var u="",f=null,t=0,i=0,r=0;t=this.birthDateYear.val(),i=this.birthDateMonth.val(),r=this.birthDateDay.val(),t&&i&&r&&(t=parseInt(t,10),i=parseInt(i,10),r=parseInt(r,10),f=new Date(t,i,r),u=n.Util.dateToIsoString(f)),this.birthDate.val(u)},t.updateBirthDateDropDownHandler=function(){t.updateBirthDateDropDown()},t.updateBirthDateDropDown=function(){var r="",t=null,i=0,u=0,f=0;r=this.birthDate.val(),t=n.Util.parseIsoDate(r),t&&(i=t.getFullYear(),u=t.getMonth(),f=t.getDate(),i!==9999&&(this.birthDateYear.val(i),this.birthDateMonth.val(u),this.birthDateDay.val(f)))},t.getParticipantToPassengerMap=function(t,i){var e="",o="",s="",h="",r="",u={},f={},c={};return i?(t.Infant.Name=t.Infant.Name||{},e=t.Infant.Name.Title||"",o=t.Infant.Name.FirstName||"",s=t.Infant.Name.MiddleName||"",h=t.Infant.Name.LastName||"",r=t.Infant.Dob||""):(t.Name=t.Name||{},e=t.Name.Title||"",o=t.Name.FirstName||"",s=t.Name.MiddleName||"",h=t.Name.LastName||"",r=t.PassengerTypeInfo.Dob||"",u=t.PassengerAddresses[0]||{},f=t.PassengerTravelDocuments[0]||{}),r.Year&&(r=new Date(r.Year,r.Month-1,r.Day),r=n.Util.dateToIsoString(r)),c={title:e,firstName:o,middleName:s,lastName:h,birthDate:r,address1:u.AddressLine1,address2:u.AddressLine2,city:u.City,stateCode:u.ProvinceState,zipCode:u.PostalCode,countryCode:u.CountryCode,county:"",phoneHome:u.Phone,phoneWork:"",phoneFax:"",emailAddress:"",companyName:u.CompanyName,busOrRes:"",docIssuedBy:f.IssuedByCode,docNumber:f.DocNumber,docTypeCode:f.DocTypeCode,itemSequence:"",participantTypeCode:""}},t.mapPassenger=function(){var a=n.Util.getResource()||{},v=a.passengerHash||{},u={},o={},t="",f=this.participantInputHash||{},s="",h=null,c="",e=[],i=-1,r=-1,l=!1;if(c=this.container.val()||"",e=c.split("_"),i=e[0]||-1,r=e[1]||-1,i=parseInt(i,10),r=parseInt(r,10),u=v[i],r===0&&(l=!0),u){o=this.getParticipantToPassengerMap(u,l);for(t in f)f.hasOwnProperty(t)&&(s=o[t]||"",h=this.getById(f[t]),h.val(s))}this.updateBirthDateDropDown()},t},n.Class.PassThroughPayment=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.noOfOrderItems=0,t.noOfYearsFromPresent=7,t.orderItemsListJson=[],t.orderItemsArray=[],t.orderPaymentTypesHash={},t.vendorsHash={},t.passThroughPaymentJson={},t.paymentInputContentIds={},t.paymentInputContent={},t.passThroughPaymentFields={},t.creditCardPaymentFields={},t.passThroughPaymentContentArray=[],t.init=function(n){this.setSettingsByObject(n),this.initPropertiesFromData(),this.initVendorsHash(),this.initOrderItemsArray(),this.initPaymentInputContentArray(),this.initPassThroughPaymentContentArray()},t.initPropertiesFromData=function(){var n=this.passThroughPaymentJson||{};t.noOfOrderItems=n.noOfOrderItems||"",t.noOfYearsFromPresent=n.noOfYearsFromPresent||7,t.orderItemsListJson=n.orderItemsListJson||[],t.orderPaymentTypesHash=n.orderPaymentTypesHash||[]},t.initVendorsHash=function(){for(var r=0,i={},u=this.orderPaymentTypesHash,f=u.length,r=0;r<f;r+=1)i=new n.Class.Vendor,i.init(u[r]),t.vendorsHash[i.vendorCode]=i},t.initOrderItemsArray=function(){for(var t=0,i={},r=this.orderItemsListJson||[],u=this.noOfOrderItems,t=0;t<u;t+=1)i=new n.Class.OrderItem,i.init(r[t]),this.orderItemsArray.push(i)},t.initPaymentInputContentArray=function(){var i=new n.Class.PaymentInputBase,r=this.paymentInputContentIds||{};i.init(r),t.paymentInputContent=i,this.paymentInputContent=i},t.initPassThroughPaymentContentArray=function(){for(var t=0,u=this.noOfOrderItems,i={},r={},f=this.passThroughPaymentFields||{},e=this.creditCardPaymentFields||{},o=this.orderItemsArray||[],t=0;t<u;t+=1)i=new n.Class.PaymentPassThroughContent,r={index:t,vendor:this.vendorsHash[o[t].vendorCode],passThroughPaymentFields:f,creditCardPaymentFields:e,paymentInput:this.paymentInputContent,noOfYearsToAdd:this.noOfYearsFromPresent},i.init(r),this.passThroughPaymentContentArray[t]=i},t},n.Class.PaymentPassThroughContent=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.noOfYearsToAdd=7,t.index={},t.vendor={},t.passThroughPaymentFields={},t.paymentInput={},t.creditCardPaymentFields={},t.useSameCardCheckId="",t.useSameCardCheck={},t.ccTypeId="",t.ccType={},t.ccNumberId="",t.ccNumber={},t.ccExpirationMonthId="",t.ccExpirationMonth={},t.ccExpirationYearId="",t.ccExpirationYear={},t.ccExpirationDateId="",t.ccExpirationDate={},t.ccHolderNameId="",t.ccHolderName={},t.ccCvvId="",t.ccCvv={},t.ccIssueNumberId="",t.ccIssueNumber={},t.requiredNameErrorText="",t.requiredCvvErrorText="",t.requiredExpMonthErrorText="",t.requiredExpYearErrorText="",t.requiredCCNumErrorText="",t.buttonSubmitId="CONTROLGROUPPAYMENTBOTTOM_ButtonSubmit",t.buttonSubmit=null,t.firstNameId="",t.paymentCreditCardTypeClass="",t.paymentCreditCardNoClass="",t.paymentCreditCardVerificationCodeClass="",t.paymentCreditCardExpirationMonthClass="",t.paymentCreditCardExpirationYearClass="",t.paymentCreditCardFirstNameClass="",t.paymentCreditCardAccountHolderNameClass="",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.populateCreditCardTypes(),this.populateExpirationMonthYear(),this.updateIssueNumberVisibility(),this.addEvents(),this.bindPaymentFieldEvents()},t.setVars=function(){var r=this.index,i=this.passThroughPaymentFields||{},u=this.creditCardPaymentFields||{};t.ccCvvId=n.Util.replace(i.ccCvvId,/\[index\]/g,r),t.ccExpirationDateId=n.Util.replace(i.ccExpirationDateId,/\[index\]/g,r),t.ccExpirationMonthId=n.Util.replace(i.ccExpirationMonthId,/\[index\]/g,r),t.ccExpirationYearId=n.Util.replace(i.ccExpirationYearId,/\[index\]/g,r),t.ccHolderNameId=n.Util.replace(i.ccHolderNameId,/\[index\]/g,r),t.ccNumberId=n.Util.replace(i.ccNumberId,/\[index\]/g,r),t.ccTypeId=n.Util.replace(i.ccTypeId,/\[index\]/g,r),t.ccIssueNumberId=n.Util.replace(i.ccIssueNumberId,/\[index\]/g,r),t.useSameCardCheckId=n.Util.replace(i.useSameCardCheckId,/\[index\]/g,r),t.requiredCvvErrorText=i.requiredCvvErrorText,t.requiredNameErrorText=i.requiredNameErrorText,t.requiredExpMonthErrorText=i.requiredExpMonthErrorText,t.requiredExpYearErrorText=i.requiredExpYearErrorText,t.requiredCCNumErrorText=i.requiredCCNumErrorText,t.firstNameId=i.firstNameId,t.paymentCreditCardTypeClass=u.paymentCreditCardTypeClass,t.paymentCreditCardNoClass=u.paymentCreditCardNoClass,t.paymentCreditCardVerificationCodeClass=u.paymentCreditCardVerificationCodeClass,t.paymentCreditCardExpirationMonthClass=u.paymentCreditCardExpirationMonthClass,t.paymentCreditCardExpirationYearClass=u.paymentCreditCardExpirationYearClass,t.paymentCreditCardFirstNameClass=u.paymentCreditCardFirstNameClass,t.paymentCreditCardAccountHolderNameClass=u.paymentCreditCardAccountHolderNameClass,t.ccCvv=this.getById(this.ccCvvId),t.ccExpirationDate=this.getById(this.ccExpirationDateId),t.ccExpirationMonth=this.getById(this.ccExpirationMonthId),t.ccExpirationYear=this.getById(this.ccExpirationYearId),t.ccHolderName=this.getById(this.ccHolderNameId),t.ccNumber=this.getById(this.ccNumberId),t.ccType=this.getById(this.ccTypeId),t.ccIssueNumber=this.getById(this.ccIssueNumberId),t.useSameCardCheck=this.getById(this.useSameCardCheckId),t.buttonSubmit=this.getById(this.buttonSubmitId),this.updateUseSameCardVisibility()},t.updateUseSameCardVisibility=function(){var i=this.getTrimmedPaymentInputCardType(),r=this.vendor||{},u=r.acceptedPaymentTypesHash||{},n=this.useSameCardCheck||{},f=this.useSameCardCheckId||"",t=$('label[for="'+f+'"]');u[i]?(n.show(),t.show()):(n.hide(),t.hide())},t.populateCreditCardTypes=function(){var t=this.vendor||{},i={input:this.ccType,objectArray:t.acceptedPaymentTypes};n.Util.populate(i)},t.populateExpirationMonthYear=function(){for(var t=0,s=new Date,r=s.getFullYear(),i=1,h=this.noOfYearsToAdd||7,f={},e=[],o={},u=[],t=0;t<=h;t+=1)e[t]={code:r,name:r},r+=1;for(f={input:this.ccExpirationYear,objectArray:e},n.Util.populate(f),t=0;t<9;t+=1)u[t]={code:"0"+i,name:"0"+i},i+=1;for(t=i-1;t<12;t+=1)u[t]={code:i,name:i},i+=1;o={input:this.ccExpirationMonth,objectArray:u},n.Util.populate(o)},t.updatePaymentPassThroughExpirationDateHandler=function(){t.updatePaymentPassThroughExpirationDate()},t.updatePaymentPassThroughExpirationDate=function(){var n="",t="";n=this.ccExpirationMonth.val(),t=this.ccExpirationYear.val(),n&&t&&this.ccExpirationDate.val(n+"/"+t)},t.autoPopulateFieldsFromPaymentInputHandler=function(){this.checked&&t.populateFieldsFromPaymentInput(),t.updatePaymentPassThroughExpirationDate(),t.updateIssueNumberVisibility()},t.getTrimmedPaymentInputCardType=function(){var t=this.paymentInput.paymentInputCreditCardType.val()||"";return n.Util.replace(t,/ExternalAccount:/,"")},t.populateFieldsFromPaymentInput=function(){var i=this.getTrimmedPaymentInputCardType(),n=this.paymentInput||{},r=$('input[id*="'+t.firstNameId+'"]').filter(":visible").val(),u=this.vendor||{},f=u.acceptedPaymentTypesHash||{},e=f[i]||{};i&&(this.ccType.val(i),this.ccNumber.val(n.paymentInputCreditCardNumber.val()),this.ccExpirationYear.val(n.paymentInputCreditCardExpirationYear.val()),this.ccExpirationMonth.val(n.paymentInputCreditCardExpirationMonth.val()),this.ccHolderName.val(r+" "+n.paymentInputCreditCardHolderName.val()),this.ccCvv.val(n.paymentInputCreditCardCvv.val()),e.supportsIssueNumber?this.ccIssueNumber.val(n.paymentInputCreditCardIssueNumber.val()):this.ccIssueNumber.val(""))},t.setPaymentPassThroughValidationFieldsHandler=function(){t.setPaymentPassThroughValidationFields()},t.setPaymentPassThroughValidationFields=function(){var f=this.ccType,l=f.val()||"",e=this.ccNumber,o=this.ccHolderName,s=this.ccCvv,h=this.ccExpirationYear,c=this.ccExpirationMonth,a=this.vendor||{},v=a.acceptedPaymentTypesHash||{},i=v[l]||{requiresCCType:!0},r=n.Util.setRequiredAttribute,u=n.Util.removeRequiredAttribute,t="";u(f),i.requiresCCType&&(t=this.requiredCCTypeErrorText,r(f,t)),u(e),i.requiresCCNum&&(t=this.requiredCCNumErrorText,r(e,t)),u(o),i.requiresCcName&&(t=this.requiredNameErrorText,r(o,t)),u(s),i.requiresCvv&&(t=this.requiredCvvErrorText,r(s,t)),u(c),i.requiresDate&&(t=this.requiredExpMonthErrorText,r(c,t)),u(h),i.requiresDate&&(t=this.requiredExpYearErrorText,r(h,t))},t.updateIssueNumberVisibilityHandler=function(){t.updateIssueNumberVisibility()},t.updateIssueNumberVisibility=function(){var i=this.ccType.val()||"",r=this.vendor||{},u=r.acceptedPaymentTypesHash||{},f=u[i]||{},n=this.ccIssueNumber||{},e=this.ccIssueNumberId||"",t=$('label[for="'+e+'"]');f.supportsIssueNumber?(t.show(),n.show()):(n.hide(),t.hide(),n.val(""))},t.triggerUseSameCardCheckHandler=function(){t.populateFieldsFromPaymentInput(),t.updatePaymentPassThroughExpirationDate()},t.addEvents=function(){this.ccExpirationMonth.change(this.updatePaymentPassThroughExpirationDateHandler),this.ccExpirationYear.change(this.updatePaymentPassThroughExpirationDateHandler),this.ccType.change(this.updateIssueNumberVisibilityHandler),this.useSameCardCheck.click(this.autoPopulateFieldsFromPaymentInputHandler),this.buttonSubmit.click(this.triggerUseSameCardCheckHandler)},t.bindPaymentFieldEvents=function(){var n=this.paymentInput||{},i=t.getTrimmedPaymentInputCardType();i&&t.ccType.val(i),$(t.paymentCreditCardTypeClass).bind("change",function(){var n=t.getTrimmedPaymentInputCardType();n&&t.ccType.val(n)}),$(t.paymentCreditCardNoClass).bind("change",function(){t.ccNumber.val(n.paymentInputCreditCardNumber.val())}),$(t.paymentCreditCardVerificationCodeClass).bind("change",function(){t.ccCvv.val(n.paymentInputCreditCardCvv.val())}),$(t.paymentCreditCardExpirationMonthClass).bind("change",function(){t.ccExpirationMonth.val(n.paymentInputCreditCardExpirationMonth.val()),t.updatePaymentPassThroughExpirationDate()}),$(t.paymentCreditCardExpirationYearClass).bind("change",function(){t.ccExpirationYear.val(n.paymentInputCreditCardExpirationYear.val()),t.updatePaymentPassThroughExpirationDate()}),$(t.paymentCreditCardFirstNameClass).bind("change",function(){var i=$('input[id*="'+t.firstNameId+'"]').filter(":visible").val();t.ccHolderName.val(i+" "+n.paymentInputCreditCardHolderName.val())}),$(t.paymentCreditCardAccountHolderNameClass).bind("change",function(){var i=$('input[id*="'+t.firstNameId+'"]').filter(":visible").val();t.ccHolderName.val(i+" "+n.paymentInputCreditCardHolderName.val())})},t},n.Class.OrderItem=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.vendorCode="",t.init=function(n){this.setSettingsByObject(n)},t},n.Class.Vendor=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.vendorCode="",t.acceptedPaymentTypes=[],t.acceptedPaymentTypesHash={},t.init=function(n){this.setSettingsByObject(n),this.initAcceptedPaymentTypesHash()},t.initAcceptedPaymentTypesHash=function(){for(var r=0,u=this.acceptedPaymentTypes||[],f=u.length,i={},r=0;r<f;r+=1)i=new n.Class.VendorPaymentType,i.init(u[r]),t.acceptedPaymentTypesHash[i.code]=i},t},n.Class.VendorPaymentType=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.code="",t.name="",t.requiresCvv=!1,t.requiresDate=!1,t.requiresCcName=!1,t.requiresCCNum=!0,t.supportsIssueNumber=!1,t.init=function(n){this.setSettingsByObject(n)},t},n.Class.Property=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.propertyFieldHash={},t.init=function(n){this.setSettingsByObject(n),this.setVars()},t.setVars=function(){var i=n.Class.Property.validationHash||{},e="",t=null,o=this.propertyFieldHash,s="",r=null,h=[],u=0,v=0,c=null,f="",l="",y={},a={},p="";for(s in o)if(o.hasOwnProperty(s))for(h=o[s]||[],v=h.length,u=0;u<v;u+=1)if(r={},c=h[u],e=c.id||"",r.id=e,t=r.input,t=this.getById(e),t=t[0],r.propertyHash={},i=c.propertyHash||{},t)for(f in i)i.hasOwnProperty(f)&&(l=f.toLowerCase(),y=i[f],a=$(t),p=l+".validation",a.data(p,y),l==="required"&&n.Util.formatInputLabel(a))},t},n.Class.Property.validationHash={},n.Class.InsuranceTermsBase=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.containerId="",t.container=null,t.parentContainerId="",t.parentContainer=null,t.url="InsuranceTermsViewAjax-resource.aspx",t.termsInfo="",t.participantBaseId="",t.participant="",t.keyId="",t.key="",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setVars=function(){var n={};t.container=this.getById(this.containerId),t.participant=this.getById(this.participantBaseId),n=this.getById(this.keyId),t.key=n,this.parentContainerId!==""&&(t.parentContainer=this.getById(this.parentContainerId))},t.addEvents=function(){this.parentContainer!==null&&this.parentContainer.click(this.parentContainerClickHandler)},t.parentContainerClickHandler=function(){t.parentContainerClick()},t.parentContainerClick=function(){var n=this.key.val();this.ajax(n)},t.updateTermsHandler=function(n){t.updateTerms(n)},t.updateTerms=function(n){this.container.html(n)},t.ajax=function(n){n!==undefined&&n!==""&&(t.termsInfo="?key="+n,$.post(this.url+this.termsInfo,this.updateTermsHandler))},t},n.Class.SingleInsuranceTerms=function(){var i=new n.Class.InsuranceTermsBase,t=n.Util.extendObject(i);return t.establishmentIds=[],t.establishments=[],t.setVars=function(){var n=0,r=this.establishmentIds,e=r.length,u="",f={};for(i.setVars.call(this),n=0;n<e;n+=1)u=r[n],f=this.getById(u),t.establishments[n]=f},t.parentContainerClickHandler=function(){t.parentContainerClick()},t.parentContainerClick=function(){for(var t=this.key.val(),r=this.establishments,u={},f=r.length,n=0,n=0;n<f;n+=1)if(u=r[n],t=u.val(),t)break;i.ajax(t)},t.addEvents=function(){this.parentContainer!==null&&this.parentContainer.click(this.parentContainerClickHandler)},t.init=function(n){i.setSettingsByObject.call(this,n),this.setVars(),this.addEvents()},t},n.Class.InsuranceTerms=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.singleTermsInsuranceBaseId="",t.singleTermsInsuranceArray=[],t.groupTermsInsuranceBaseId="",t.groupTermsInsuranceArray=[],t.parentSingleBaseId="",t.parentGroupBaseId="",t.participantSingleBaseId="",t.participantGroupBaseId="",t.singleCoverageKey="",t.groupCoverageKey="",t.establishmentIdsByProduct=[],t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.initSingleTermsInsuranceArray(),this.initGroupTermsInsuranceArray()},t.setVars=function(){this.singleTermsInsuranceArray=$("[id^='"+this.singleTermsInsuranceBaseId+"']"),this.groupTermsInsuranceArray=$("[id^='"+this.groupTermsInsuranceBaseId+"']")},t.initSingleTermsInsuranceArray=function(){for(var t=0,r=this.singleTermsInsuranceArray||[],f=r.length,i=null,u={},t=0;t<f;t+=1)u=this.getById(r[t].id),i=new n.Class.SingleInsuranceTerms,i.containerId=this.singleTermsInsuranceBaseId+t,i.parentContainerId=this.parentSingleBaseId+t,i.participantBaseId=this.participantSingleBaseId+t,i.establishmentIds=this.establishmentIdsByProduct[t],i.init(u),r[t]=i},t.initGroupTermsInsuranceArray=function(){for(var t=0,u=this.groupTermsInsuranceArray||[],f=u.length,r=null,i={},t=0;t<f;t+=1)i={},r=new n.Class.InsuranceTermsBase,i.containerId=this.groupTermsInsuranceBaseId+t,i.parentContainerId=this.parentGroupBaseId+t,i.participantBaseId=this.participantGroupBaseId+t,i.keyId=this.groupCoverageKey+t,r.init(i),u[t]=r},t},n.Class.MCCInput=function(){var r=n.Class.SkySales(),t=n.Util.extendObject(r),i=n.Util.getResource();return t.bookingCurrencyCode="",t.externalRateId="",t.defaultCurrencyValue="",t.dropDownListCurrencyId="",t.dropDownListCurrency=null,t.externalRateInfo=i.externalRateInfo,t.currencyHash=i.currencyHash,t.setVars=function(){t.dropDownListCurrency=this.getById(this.dropDownListCurrencyId)},t.populateCurrency=function(){var u=this.externalRateInfo.ExternalRateList,f="",r=[],t=null,i=null,o={},e="",s={};if(this.bookingCurrencyCode&&this.dropDownListCurrency){for(f in u)u.hasOwnProperty(f)&&(t=u[f],t.quotedCurrency===this.bookingCurrencyCode&&(i=this.currencyHash[t.collectedCurrency],t.name=i?i.name:t.collectedCurrency,r[r.length]=t));i=this.currencyHash[this.bookingCurrencyCode],e=i?i.name:this.bookingCurrencyCode,o={code:this.defaultCurrencyValue,name:e},r[r.length]=o,s={objectArray:r,selectBox:this.dropDownListCurrency,selectedItem:this.externalRateId,showCode:!1},n.Util.populateSelect(s)}},t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.populateCurrency()},t},n.Class.SFPDPassengerInput=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.passengerGenderIdArray=[],t.infantGenderIdArray=[],t.init=function(n){this.setSettingsByObject(n),this.setGenderFieldsToEmpty(this.passengerGenderIdArray),this.setGenderFieldsToEmpty(this.infantGenderIdArray)},t.setGenderFieldsToEmpty=function(n){n=n||[];for(var i="",r=null,t=0,u=n.length,t=0;t<u;t+=1)i=n[t],r=this.getById(i),r.val("")},t},n.Class.StoredPayment=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.url="",t.key="",t.deleteButtonId="",t.deleteButton=null,t.deleteInputId="",t.deleteInput=null,t.defaultInputId="",t.defaultInput=null,t.submitName="",t.message="",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setVars=function(){this.deleteButton=this.getById(this.deleteButtonId),this.deleteInput=this.getById(this.deleteInputId),this.defaultInput=this.getById(this.defaultInputId)},t.addEvents=function(){this.deleteButton.click(this.updateDeleteInputHandler),this.defaultInput.click(this.updateDefaultInputHandler)},t.updateDeleteInputHandler=function(n){var i=t.updateDeleteInput();return i||n.preventDefault(),i},t.updateDeleteInput=function(){var t=this.message,n=window.confirm(t);return n&&this.deleteInput.val(this.key),n},t.updateDefaultInputHandler=function(){t.updateDefaultInput()},t.updateDefaultInput=function(){var i=this.submitName,t=this.defaultInput,r=t.attr("name"),u=t.val(),n={},f="__EVENTTARGET";n[r]=u,n[f]="",n[i]="SetDefault",$.post(this.url,n,this.updatePrimaryHandler)},t.updatePrimaryHandler=function(){},t},n.Class.StoredPayment.validate=function(t){t=t||"";var e=!1,o=new Date,r=null,u,s,f,h,i="";return i=$("#"+t).val(),i=i||"",i&&(r=n.Util.parseIsoDate(i),u=r.getFullYear(),s=r.getMonth(),f=o.getFullYear(),h=o.getMonth(),(u>f||u===f&&s>=h)&&(e=!0)),e},n.Class.PaymentTab=function(){var r=n.Class.SkySales(),t=n.Util.extendObject(r);return t.payTabId="",t.payTab={},t.paymentTypes={},t.paymentMethodContainer={},t.selectBar={},t.selectIndex="60",t.externalPaymentDropDownHolder={},t.externalPayments={},t.externalPaymentsCloneId="",t.paymentCentersArray=[],t.paymentTabs=[],t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setVars=function(){this.payTab=this.getById(this.payTabId)},t.addEvents=function(){this.payTab.click(this.updatePaymentTabsHandler)},t.updatePaymentTabsHandler=function(){t.updatePaymentTabs(),t.updatePaymentBar()},t.updatePaymentTabs=function(){var ft=this.externalPayments,n=null,et={},h,d,y,nt,tt,it,rt,a,ut,k,e,v,s,c,f,t;if(i=0,j=0,paymentCenter="",externalPayment={},externalPaymentClone={},this.setPaymentTabsClass("here"),this.payTabId==="Bancnet_tab"){for(t=this.paymentTypes.paymentTypeArray.length,i=0;i<t;i++)n=this.paymentTypes.paymentTypeArray[i],n.actionId!=="ExternalAccount_tab"&&(n=this.paymentTypes.paymentTypeArray[i],n.deactivate());this.paymentMethodContainer.hide(),this.paymentTypes.paymentTypeArray[0].updatePaymentMethod("ExternalAccount:BC"),this.externalPayments.val("ExternalAccount:BC")}else if(this.payTabId==="Alipay_tab"){for(t=this.paymentTypes.paymentTypeArray.length,i=0;i<t;i++)n=this.paymentTypes.paymentTypeArray[i],n.actionId!=="ExternalAccount_tab"?(n=this.paymentTypes.paymentTypeArray[i],n.deactivate()):this.paymentTypes.paymentTypeArray[i].updatePaymentMethod("ExternalAccount:BA");this.paymentMethodContainer.hide(),this.externalPayments.val("ExternalAccount:BA")}else if(this.payTabId==="Paypal_tab"){for(t=this.paymentTypes.paymentTypeArray.length,i=0;i<t;i++)n=this.paymentTypes.paymentTypeArray[i],n.actionId!=="ExternalAccount_tab"?(n=this.paymentTypes.paymentTypeArray[i],n.deactivate()):this.paymentTypes.paymentTypeArray[i].updatePaymentMethod("ExternalAccount:PP");this.paymentMethodContainer.hide(),this.externalPayments.val("ExternalAccount:PP")}else if(this.payTabId==="24hold_tab"){for(t=this.paymentTypes.paymentTypeArray.length,i=0;i<t;i++)n=this.paymentTypes.paymentTypeArray[i],n.actionId!=="ExternalAccount_tab"?(n=this.paymentTypes.paymentTypeArray[i],n.deactivate()):(h=this.getById("ExternalAccount_tab"),this.paymentTypes.paymentTypeArray[i].updatePaymentType(),this.paymentTypes.paymentTypeArray[i].updatePaymentMethod("ExternalAccount:PQ"),h.removeClass("here"));this.paymentMethodContainer.hide(),this.externalPayments.val("ExternalAccount:PQ")}else if(this.payTabId==="PaymentCenters_tab"&&this.paymentCentersArray.length>0){for(h=this.getById("ExternalAccount_tab"),d=this.getById("PaymentCenters_tab"),h.trigger("click"),h.removeClass("here"),d.addClass("here"),paymentCenter="ExternalAccount:"+this.paymentCentersArray[0],t=this.paymentTypes.paymentTypeArray.length,i=0;i<t;i++)n=this.paymentTypes.paymentTypeArray[i],n.actionId!=="ExternalAccount_tab"&&(n=this.paymentTypes.paymentTypeArray[i],n.deactivate());for(this.paymentMethodContainer.hide(""),this.paymentTypes.paymentTypeArray[0].updatePaymentMethod(paymentCenter),y=this.paymentCentersArray.length,i=0;i<y;i++)for(paymentCenter="ExternalAccount:"+this.paymentCentersArray[i],externalPaymentsClone=this.getById(this.externalPaymentsCloneId+this.paymentCentersArray[i]),externalPaymentsClone.html(""),j=0;j<y;j++)paymentCenter="ExternalAccount:"+this.paymentCentersArray[j],externalPayment=this.externalPayments.find('option[value="'+paymentCenter+'"]'),this.externalPayments.find('option[value="'+paymentCenter+'"]').length>0&&externalPaymentsClone.append('<option value="'+externalPayment.val()+'">'+externalPayment.text()+"<\/option>");$("option",externalPaymentsClone)[0].selected=!0,externalPaymentsClone.change()}else this.payTabId==="ExternalAccount_tab"?(this.paymentMethodContainer.show(),this.removeBancnetOption(ft,et),this.paymentTypes.paymentTypeArray[0].updatePaymentMethod(this.externalPayments.val())):this.payTabId==="HOLD_tab"&&this.paymentTypes.paymentTypeArray[0].updatePaymentMethod("PrePaid:HOLD");this.payTabId==="Voucher_tab"&&$(".retrieveTextBox").length==0?$(".continueClass :submit").length>0&&($(".continueClass :submit").addClass("continueButton"),$(".continueButton").attr("disabled","disabled"),$(".continueButton").addClass("buttonN-disabled"),$(".buttonN-disabled").removeClass("continueButton")):$(".buttonN-disabled").length>0&&($(".buttonN-disabled").removeAttr("disabled"),$(".buttonN-disabled").addClass("continueButton"),$(".continueButton").removeClass("buttonN-disabled"));var r=Number($("#totalNCFeePrice").text().replace(/,/g,"")),p=Number($("#oldNCFeeTotal").text().replace(/,/g,"")),u=Number($("#totalNCFeeTax").text().replace(/,/g,"")),w=Number($("#oldNCFeeTaxTotal").text().replace(/,/g,"")),b=p==0,l=$("#priceNameChange").parent().is(":visible"),o=Number($("#priceNameChange").text().replace(/,/g,"")),c=p+w,ot=o>c,st=$(".voucher:last").children().eq(3).text()=="Pending"?Number($(".voucher:last").children().eq(2).text().replace(/,/g,"")):0,g=$("#ExternalAccount_tab").text()=="CREDIT CARD"&&$(".addons-table").length>0&&st!=0&&$('#redeemTVTransaction:contains("-")').length!=0,ht=this.payTabId==="CustomerAccount_tab"&&!l,ct=b&&l&&!$("#CustomerAccount_tab").hasClass("here")&&!$("#TravelVoucher_tab").hasClass("here"),lt=this.payTabId==="CustomerAccount_tab"&&!b&&l&&$('#existingNCFeeToggle:contains("+")').length!=0,at=!b&&l&&!$("#CustomerAccount_tab").hasClass("here")&&!$("#TravelVoucher_tab").hasClass("here")&&$('#existingNCFeeToggle:contains("-")').length!=0&&!ot,vt=$(".main.loyalty").length>0,yt=$("input[name*='TextBoxAMT']").val();if($("#CustomerAccount_tab").hasClass("here")&&$('#redeemTVTransaction:contains("-")').length!=0&&$("#redeemTVTransaction").text("+"),!ht||vt||g&&$('#redeemTVTransaction:contains("+")').length==0?ct&&(!g||$('#redeemTVTransaction:contains("+")').length!=0)?(a=o-(r+u),$("#priceNameChange").text(parseFloat(a,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()).trigger("change"),e=Number($("#addOnsSubTotal").text().replace(/,/g,"")),f=e-(r+u),$("#addOnsSubTotal").text(parseFloat(f,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString())):lt?(it=o==c,it?(a=c+(r+u),$("#priceNameChange").text(parseFloat(a,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()).trigger("change")):(rt=o+w,$("#priceNameChange").text(parseFloat(rt,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()).trigger("change")),ut=Number($("#remainingAmtDue").text().replace(/,/g,"")),k=ut+(r+u),$("#totalAmountDue").text(parseFloat(k,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()),$("#remainingAmtDue").text(parseFloat(k,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()),e=Number($("#addOnsSubTotal").text().replace(/,/g,"")),f=e+(r+u),$("#addOnsSubTotal").text(parseFloat(f,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()),v=Number($("#overallTotal").text().replace(/,/g,"")),s=v+(r+u),$("#overallTotal").text(parseFloat(s,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()),$("#bookingSummaryTotal").text(parseFloat(s,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()),$("#existingNCFeeToggle").text("-")):at&&(c=p+w,$("#priceNameChange").text(parseFloat(c,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()).trigger("change"),$("#totalAmountDue").text($("input[name*='TextBoxAMT']").val()),$("#remainingAmtDue").text($("input[name*='TextBoxAMT']").val()),f=e-(r+u),$("#addOnsSubTotal").text(parseFloat(f,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()),$("#existingNCFeeToggle").text("-")):(o>0?$("#priceNameChange").text(parseFloat(o,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()).trigger("change"):$("#priceNameChange").text(parseFloat(r+u,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()).trigger("change"),e=Number($("#addOnsSubTotal").text().replace(/,/g,"")),f=e+(r+u),$("#addOnsSubTotal").text(parseFloat(f,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()),v=Number($("#overallTotal").text().replace(/,/g,"")),s=v+(r+u),$("#overallTotal").text(parseFloat(s,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()),$("#bookingSummaryTotal").text(parseFloat(s,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()),nt=Number($("#totalAmountDue").text().replace(/,/g,"")),tt=nt+(r+u),$("#totalAmountDue").text(parseFloat(tt,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString())),this.payTabId==="TravelVoucher_tab"){for(t=this.paymentTypes.paymentTypeArray.length,i=0;i<t;i++)n=this.paymentTypes.paymentTypeArray[i],n.actionId!=="Voucher_tab"?(n=this.paymentTypes.paymentTypeArray[i],n.deactivate()):this.paymentTypes.paymentTypeArray[i].updatePaymentMethod("Voucher:VO");this.paymentMethodContainer.hide(),this.externalPayments.val("Voucher:VO")}},t.setPaymentTabsClass=function(n){var t=0;for(tab in this.paymentTabs)this.paymentTabs.hasOwnProperty(tab)&&this.paymentTabs[tab].payTab.removeClass(n);this.payTab.addClass(n)},t.removeBancnetOption=function(n,t){var r,i,u;if(n!==null&&n.length>0)for(t=n[0],r=t.length,i=0;i<r;i++)if(u=t[i].value.split(":"),$.inArray(u[1],this.paymentCentersArray)===-1){t[i].selected=!0;break}},t.updatePaymentBar=function(){var n=this.payTab[0].clientWidth/2,t=this.payTab[0].offsetLeft+n;this.selectBar.css("background-position",t+"px")},t},n.Class.CustomPayment=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.externalPayments={},t.externalPaymentsId="",t.externalPaymentsCloneId="",t.payTabs=[],t.paymentTypes={},t.bancnetValue="ExternalAccount:BC",t.paymentMethodContainerId="",t.paymentMethodContainer={},t.selectBarId="",t.selectBar={},t.externalPaymentDropDownId="",t.externalPaymentDropDown={},t.externalPaymentDropDownHoldersId="",t.externalPaymentDropDownHolders={},t.paymentCentersArray=[],t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.initPaymentTabs()},t.setSettingsByObject=function(t){i.setSettingsByObject.call(this,t);var r=new n.Class.PaymentTypes,u={},f=0;r.init(this.paymentTypes),this.paymentTypes=r},t.setVars=function(){var n=0;for(this.externalPayments=this.getById(this.externalPaymentsId),this.paymentMethodContainer=this.getById(this.paymentMethodContainerId),this.selectBar=this.getById(this.selectBarId),this.externalPaymentDropDown=this.getById(this.externalPaymentDropDownId),n=0;n<this.externalPaymentDropDownHoldersId;n++)this.externalPaymentDropDownHolders[n]=this.getById(this.externalPaymentDropDownHoldersId[n])},t.addEvents=function(){},t.showExternalPaymentDropDownHandler=function(){},t.initPaymentTabs=function(){for(var f=this.externalPayments,e={},t=0,r=0,i={},u=this.payTabs.length,t=0;t<u;t++)i[t]=new n.Class.PaymentTab,i[t].init(this.payTabs[t]),i[t].paymentTypes=this.paymentTypes,i[t].paymentMethodContainer=this.paymentMethodContainer,i[t].selectBar=this.selectBar,r=i[t].clientWidth/2,i[t].selectIndex=i[t].offsetLeft+r,i[t].externalPayments=this.externalPayments,i[t].paymentCentersArray=this.paymentCentersArray,i[t].externalPaymentsCloneId=this.externalPaymentsCloneId,i[t].paymentTabs=i;this.payTabs=i},t},n.Class.BaggageAllowance=function(){var r=new n.Class.SkySales,t=n.Util.extendObject(r);return t.bagWeightTotalId="#totalBGWeight",t.bagAmountTotalId="#totalBGAmount",t.bookingSummaryTotalId="#bookingSummaryTotal",t.bagINSAmountTotalId="#totalBagINS",t.isLaborAgent="False",t.scFares=[],t.baggageListID="",t.isLoyalty=$(".main.loyalty").length>0,t.init=function(n){this.setSettingsByObject(n),this.setVars(),t.addEvents(),t.calculateTotal(),t.disableDpBaggageOptionForSCFareType(),$(document).ready(t.changeWidth(t.baggageListID)),$(document).ready(function(){$(this).find(".bgControl").each(function(){$(this).find("a").attr("style","width:380px;")})}),$(window).load(function(){if($("#Text1").text()!=""){var n=$("#totalBGAmount").text();$("#pricePEB").text($("#totalBGAmount").text())}$("#bgTable_1 .bgControl").length<=0&&$("#bgOldTotalView").css("margin-left","425px")}),$(window).load(function(){var n=$(".bgTable");$(n).each(function(){$(this).find("select:first").trigger("change")})})},t.addEvents=function(){$(".bgTable").find("select").change(function(){t.removeBaggageFromTotal(),t.calculateTotal(),t.updateBookingSummary(),t.setBaggageAmount(),t.updatePriceDetails();var n=$(this).find("option");for(i=0;i<n.length;i++)$(n[i]).attr("preselected")||$(n[i]).val()!=$(this).val()||($(this).parent().siblings(".bagPreselected").hide(),$(this).parent().siblings(".baggageNoThanks").hide(),$(this).find("option").filter(function(){return $(this).attr("preselected")}).removeAttr("preselected"))}),$(".bgTable").find(".baggageNoThanks").click(function(){if(t.isLoyalty){var n=$(this).parents("table"),i=$(this).parent().find("option").first().text();n.each(function(){var n=$(this).find(".bgControl");n.each(function(){$(this).find(".ui-selectmenu-status").text(i)})})}select=$(this).parent().find("select"),select.prop("selectedIndex",0).trigger("change").selectmenu(),$(this).hide().closest("tbody").find(".bagPreselected").hide(),$(this).closest("tbody").find(".tooltipMessage").filter(function(){return $(this).closest("td").find("select").val()==""}).show()}),$(".bgTable").find(".baggageCopyToAll").click(function(){var t=$(this).attr("id").split("_")[1],i=$("table#bgTable_"+t),n=i.find("select"),r=n.eq(0).val().split("_")[2];n.filter(":gt(0)").val(function(){return $(this).find("option").filter(function(){var n=$(this).val().split("_")[2];return n==r}).val()}).selectmenu().change()}),$(".baggagePerGuest").click(t.changeWidth(t.baggageListID))},t.HideBP=function(){$("#objIns ul li").each(function(){var n=$(this).find("input:checkbox:not(:checked)");if($(n).is(":disabled")){var t=$(n).attr("id"),i=t.split("Passenger").pop(),r="#bgProtect_"+(parseInt(i)+1)+"_2";$(r).hide()}})},t.removeBaggageFromTotal=function(){var r=$(t.bagAmountTotalId),u=t.removeComma(r.text()),i=$(t.bookingSummaryTotalId),n=t.removeComma(i.text());n=parseFloat(n)-parseFloat(u),i.text(t.addCommas(n))},t.removeComma=function(n){return n.text().replace(/,/g,"")},t.disableDpBaggageOptionForSCFareType=function(){isSCFare=t.scFares,$("#bgDiv").find("table").each(function(n){var t=n;isSCFare[t]==="True"&&($(this).find(".baggagePerGuest:first").trigger("click"),$(this).find(".baggageAllGuest:first").css("display","none"),$(this).find(".bgControl select").each(function(){$(this).find("option[value='']").remove(),$(this).selectmenu()}))})},t.changeWidth=function(n){$('ul[id^="'+n+'"]').attr("style","width: 380px; height: auto;")},t.addCommas=function(n){n+="",x=n.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},t.clearCheckBox=function(n){var f=$("#totalBagINS"),e=$("#pricePEBINS"),y=$(f).text().replace(",",""),i=$(e).text().replace(",",""),o=$(n).attr("id"),p=o.match("Passenger(.*)SSRBAG"),h=parseInt(p[1])+1,w=parseInt(o.substr(o.length-1))+1,c="#bgProtect_"+h+"_"+w,r=0,l=!1,a=0,d=0,s=!0,u=!1,b=$(c).closest("table.bgTable"),k=$(b).find("input:checkbox"),v=!1;$(k).each(function(){$(this).hasClass("allBaggage")&&(v=!0)}),$(c).each(function(){$(this).find("div").each(function(){$(this).find("div").each(function(){var d=!1,n=$(this).find("input:checkbox:not(.unchecked)"),g=$(this).find("input:checkbox:not(.unchecked)"),nt=$(this).closest(".bgContainer").find("input:checkbox").filter(":not(.unchecked)"),b=$(n).closest('table[id*="bgTable_"]'),a,p,o,c;if($(n).length){a=$(this).closest(".bgContainer").find("input:checkbox").filter(":not(.unchecked)").length,p=b.find(".bgControl").length,u=$(n).is(":checked"),a==p&&v?(s=a==p&&h==1,o=0,price=0,$(this).closest(".bgContainer").find("input:checkbox").filter(":not(.unchecked)").each(function(){a==p&&(b.hasClass("allBaggageChecked")||b.hasClass("clicked")||$(this).addClass("unchecked")),price=$(this).parent("span").attr("price").replace(",",""),o=parseFloat(price)+parseFloat(o)})):(o=$(this).find("span[price]").attr("price"),$(n).hasClass("allBaggage")&&(u=!0));var w=o,k=o,w=k;$(n).is(":enabled")?(($(n).closest("div[id^='BAGPROTECT_Passenger']").is(":hidden")&&u&&s||$(n).hasClass("allBaggage")&&u&&s&&!$(n).is(":checked"))&&($(n).removeAttr("checked").trigger("change"),c=parseFloat(i)-parseFloat(w)+parseFloat(r),i=c,f.text(t.addCommas(c.toFixed(2))),e.text(t.addCommas(c.toFixed(2))).trigger("change"),$(n).addClass("unchecked")),parseFloat(y)>=parseFloat(w)&&(c=parseFloat(i)-parseFloat(w)+parseFloat(r))):(r=w,l=!0)}});var c=$(this).find("input:checkbox").filter(function(){return $(this).css("display")=="block"}),n="",b=$(this).find("span[price]").filter(function(){if($(this).is(":visible")){n=$(this).attr("price");var t=0}});if($(c).length&&l==!0&&a==0&&n!=""){$(c).prop("checked",!0);var p=n,w=p,o=parseFloat(i)-parseFloat(r)+parseFloat(w);i=o,f.text(t.addCommas(o.toFixed(2))),e.text(t.addCommas(o.toFixed(2))).trigger("change"),a++}})})},t.calculateTotal=function(){var n=0,i=0;totalPrice=0,$(".bgTable").find(".bgContainer").find("tr").each(function(){bgControl=$(this).find("td.bgControl"),bgControl.find("select").each(function(){var e=0,o=0,u=$(this).attr("id"),f=document.getElementById(u),r,h,c,l,s;f.selectedIndex!=-1&&(r=f.options[f.selectedIndex].value.split("_"),h=r[0].substring(2),e=r.length==4?t.removeComma(r[1]):0,o=r.length==4?r[0].replace(/\D/g,""):0,c=parseInt(u.split("_")[u.split("_").length-1].split("SSRBAG")[0].substring(9))+1,l=parseInt(u.split("_")[u.split("_").length-1].split("SSRBAG")[1])+1),i+=parseInt(o),n+=parseFloat(e),s=$(this).find("option:selected"),s.attr("preselected")||($(this).parent().siblings(".bagPreselected").hide(),$(this).parent().siblings(".baggageNoThanks").hide(),$(this).find("option").filter(function(){return $(this).attr("preselected")}).removeAttr("preselected"))}),bgControl.find("#bagExisting").each(function(){var r=0,u=0,f=$(this).text().split(" ");r=t.removeComma(f[4]),u=f[5],i+=parseInt(u),n+=parseFloat(r)})}),$(t.bagAmountTotalId).text(t.addCommas(n)),$(t.bagWeightTotalId).text(i)},t.updateBookingSummary=function(){var r=$(t.bagAmountTotalId),u=t.removeComma(r.text()),i=$(t.bookingSummaryTotalId),n=t.removeComma(i.text());n=parseFloat(n)+parseFloat(u),i.text(t.addCommas(n))},t.removeComma=function(n){return n.replace(/,/g,"")},t.addCommas=function(n){var i,r,t;for(n+="",x=n.split("."),x1=x[0],x2=x.length>1?x[1]+"00":"0000",i=x2.substr(0,2),r=x2.substr(2,x2.length),x2=String(Math.round(i+"."+r)),x2=x2.length>1?"."+x2:".0"+x2,t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},t.setBaggageAmount=function(){var i=$(t.bagAmountTotalId),r=$("#pricePEB"),h=$("#baggageDynamicAmount"),c=$("#baggage-dynamic"),l=$("#pebDynamicAmount"),u=$("#pebDepartQuantity"),f=$("#pebReturnQuantity"),a="",v="",e,o,s;r!==undefined&&(r.text(i.text()),h.text(i.text()),e=parseFloat(t.removeComma(r.text())),$("#baggageSubtotal").text($("#baggageSubTotalCurrency").text()+t.addCommas(e.toFixed(2))),n.Util.updateDynamicPriceControl(l,i.text(),"",""),u&&(o=$("#bgTable_1").find(".bgControl").find("select").filter(function(){return $(this).val()!=""}).length,u.text(o.toString())),f&&(s=$("#bgTable_2").find(".bgControl").find("select").filter(function(){return $(this).val()!=""}).length,f.text(s.toString())),c.removeClass("hidden"))},t.setBaggageINSAmount=function(){var i=$(t.bagINSAmountTotalId),n=$("#pricePEBINS");n!==undefined&&i.text(n.text())},t.updatePriceDetails=function(){var ht=$("#priceDetails"),u,st;if(ht!==undefined){var s=$("#flownBAG")!=""?t.removeComma($("#flownBAG").text()):0,p=$("#pricePEB"),h=t.removeComma(p.text());h=parseFloat(h)+parseFloat(s),p.text(t.addCommas(h.toFixed(2)));var f=t.removeComma($("#priceWWF").text()),e=t.removeComma($("#priceSEF").text()),o=t.removeComma($("#priceINS").text()),n=t.removeComma($("#pricePEB").text()),i=t.removeComma($("#pricePEBINS").text()),c=t.removeComma($("#hotelAmount").text()),l=t.removeComma($("#priceSEAT").text()),a=t.removeComma($("#priceWAF").text()),w=t.removeComma($("#pricePCF").text()),b=t.removeComma($("#pricePF").text()),k=t.removeComma($("#priceSMS").text()),v=t.removeComma($("#priceUMNR").text()),wt=t.removeComma($("#priceSF").text()),d=t.removeComma($("#priceNameChange").text()),g=t.removeComma($("#airbTotal").text()),nt=t.removeComma($("#ckitTotal").text()),ct=$("#addOnsSubTotal"),tt=0,lt=$("#overallTotal"),y=$("#priceNBAG").text(),at=t.removeComma($("#taxesFaresTotal").text()),vt=t.removeComma($("#faresSubTotal").text()),bt=t.removeComma($("#priceYPRO").text()),kt=t.removeComma($("#priceFMNX").text()),r,yt=0,it=n,pt=i,rt=$("span#currentBaggageTotal").text(),ut=$("span#currentInsuranceTotal").text(),ft=$("span#currentSEFTotal").text(),et=$("span#currentWWFTotal").text(),ot=$("span#currentBagProtectTotal").text();rt!=""&&ut!=""&&ft!=""&&et!=""&&ot!=""&&(n=parseFloat(n-parseFloat(t.removeComma(rt))),o=parseFloat(o-parseFloat(t.removeComma(ut))),e=parseFloat(e-parseFloat(t.removeComma(ft))),f=parseFloat(f-parseFloat(t.removeComma(et))),i=parseFloat(i-parseFloat(t.removeComma(ot)))),r=w!=""?parseFloat(f)+parseFloat(e)+parseFloat(o)+parseFloat(n)+parseFloat(i)+parseFloat(l)+parseFloat(a)+parseFloat(w)+parseFloat(y)+parseFloat(v)+parseFloat(k)+parseFloat(d)+parseFloat(g)+parseFloat(nt)+parseFloat(FlyMeNext)+parseFloat(BGProtect):parseFloat(f)+parseFloat(e)+parseFloat(o)+parseFloat(n)+parseFloat(i)+parseFloat(l)+parseFloat(a)+parseFloat(y)+parseFloat(v)+parseFloat(k)+parseFloat(d)+parseFloat(g)+parseFloat(nt)+parseFloat(y)+parseFloat(FlyMeNext)+parseFloat(BGProtect),tt=parseFloat(n)+parseFloat(i)-parseFloat(s),addOnsTotal=r-parseFloat(a)-parseFloat(v)-parseFloat(l),u=parseFloat(vt)+parseFloat(r)+parseFloat(at),c!=""&&(addOnsTotal+=parseFloat(c.replace(",","")),u+=parseFloat(c.replace(",",""))),b!=""&&(u=u+parseFloat(b)),yt=parseFloat(it)+parseFloat(pt),ct.text(t.addCommas(r.toFixed(2))),$("#dynamicSubTotal").text(t.addCommas(addOnsTotal.toFixed(2))),$("#pebDynamicAmount").text(t.addCommas(tt.toFixed(2))),st=parseFloat(it)-parseFloat(s),$("#baggageSubtotal").text($("#baggageSubTotalCurrency").text()+t.addCommas(st.toFixed(2))),lt.text(t.addCommas(u.toFixed(2)))}},t},n.Class.PassengerList=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.checkboxContactDetailsId="",t.checkboxContactDetails=null,t.passengerList={},t.isLoyalty=$(".main.loyalty").length>0,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.addEvents=function(){var n=0,i=this.passengerList.length;$(".tooltipclosebutton").click(function(){var n=$(".tooltipclosebutton").index(this);return!1}),$.browser.msie?$.browser.version=="8.0"?$(".downloadnowlink").tooltip({offset:[175,37]}):($(".downloadnowlink").tooltip({offset:[176,43]}),$(".tooltipWhiteSpace").css("width","164px")):$.browser.mozilla?$(".downloadnowlink").tooltip({offset:[175,44]}):$(".downloadnowlink").tooltip({offset:[175,42]}),$(".tooltipcontainer").find("input:radio").click(function(){var n=$(this).parents().filter("div.tooltipcontainer"),i=n.attr("id"),r=i.split("_");t.showToolTipHandler($(this),r[1])}),t.isLoyalty&&($("select.loyalty-selectmenu-disabled").selectmenu("disable"),$("a.ui-selectmenu-disabled").off())},t.setVars=function(){t.checkboxContactDetails=this.getById(this.checkboxContactDetailsId)},t.showToolTipHandler=function(n,i){t.showToolTip(n,i)},t.showToolTip=function(n,t){if(n){var i=n.val().split(",");$("#"+this.passengerList[t].dropDownListTitleId).val(i[0]).trigger("change"),$("#"+this.passengerList[t].textBoxFirstNameId).val(i[1]),$("#"+this.passengerList[t].textBoxMiddleNameId).val(i[2]),$("#"+this.passengerList[t].textBoxLastNameId).val(i[3]),$("#"+this.passengerList[t].dropDownListBirthDateDayId).val(i[5]),$("#"+this.passengerList[t].dropDownListBirthDateMonthId).val(i[4]),$("#"+this.passengerList[t].dropDownListBirthDateYearId).val(i[6]),$("#"+this.passengerList[t].dropDownListNationalityId).val(i[7]),$("#"+this.passengerList[t].dropDownListTitleId).selectmenu(),$("#"+this.passengerList[t].dropDownListBirthDateDayId).selectmenu(),$("#"+this.passengerList[t].dropDownListBirthDateMonthId).selectmenu(),$("#"+this.passengerList[t].dropDownListBirthDateYearId).selectmenu(),$("#"+this.passengerList[t].dropDownListNationalityId).selectmenu(),($(".childPaxCode").val()==i[14]||$(".infantPaxCode").val()==i[14])&&($("#"+this.passengerList[t].dropDownListBirthDateYearId).selectmenu("disable"),$("#"+this.passengerList[t].dropDownListBirthDateMonthId).selectmenu("disable"),$("#"+this.passengerList[t].dropDownListBirthDateDayId).selectmenu("disable")),$($(".passengerform")[t]).find(".hidden").removeClass("hidden"),$($(".passengerform")[t]).find(".special").removeClass("collapsed").removeClass("hidden").addClass("expanded"),t=="0"&&$(this.checkboxContactDetails).removeAttr("checked"),$("#"+this.passengerList[t].textBoxFirstNameId).trigger("blur"),$("#"+this.passengerList[t].textBoxLastNameId).trigger("blur")}},t.hideToolTipHandler=function(n){t.hideToolTip(n)},t.hideToolTip=function(n){$("#"+n).hide().css({opacity:1})},t},n.Class.ChangeEmail=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.init=function(){t.createChangeEmailPanel()},t.createChangeEmailPanel=function(){var n={appendTo:$("#changeEmailHandler"),autoOpen:!1,height:320,width:400,modal:!0,closeText:"",dialogClass:"no-close",closeOnEscape:!1,buttons:[{text:"CHANGE EMAIL",click:function(){$("#ChangeEmailUpdateProfileView_ButtonChangeEmail").trigger("click");return}},{text:"CANCEL",click:function(){$(this).dialog("close")}}],create:function(){$(this).closest(".ui-dialog").find("button.ui-button").eq(1).removeAttr("class").css({width:"135px",height:"35px",background:"#eeeeee","border-style":"solid",color:"#2574bb","border-width":"1px","border-color":"#C0C0C0","font-weight":"bold"}),$(this).closest(".ui-dialog").find("button.ui-button").eq(1).removeAttr("class").css({border:"white",background:"white",color:"#2574bb","font-weight":"bold",padding:"0px 20px 0px 20px"}),$(".ui-dialog-buttonset").css("float","left")}};$("#changeEmailContainer").dialog(n)},t},n.Util.CreditCards=function(){$("#dimmerGuest").hide(),$("#CreditCardInput").hide()},n.Util.CreditCardsSubmit=function(){$("#dimmerGuest").hide(),$("#CreditCardInput").hide(),a=$("#LinkButtonSubmit").find("a").eq(0).attr("href"),a=a.replace("javascript:",""),eval(a)},n.Class.MealAllowance=function(){function i(n){var o=0,i=1,r=0,f="",e="",y=n.find("tr[class*=paxContainer]").length,c=0,v=0,s=0,p=0,l="",h,a;n.find("tr[class*=paxContainer]").each(function(){var y=!1,nt=$("#isInitial").html(),a=$(this),p=a.find("select[id*='DropDownListSsrMeal']").filter(function(){return parseInt($(this).find("option:selected").text())>0}),k=a.attr("class"),n=k.split("_"),w=$("#totalperpax_"+n[3]+"_"+n[1]+"_"+n[2]+"_"+n[4]),u=$("#paxBundleContainer_"+n[3]+"_"+n[1]+"_"+n[2]+"_"+n[4]),h;if(w.text("0"),i=n[3],r=n[1],f=n[4],e+="<li class='mealList' style='list-style:none'><span paxnum='"+n[2]+"' class='name paxName_"+n[2]+"'>"+a.find("span.mealPaxName").text()+"<\/span>",e+="<ul>",u.length>0&&u.find("input:checked").length>0){y=!0;var d=u.find("input:checked"),g=u.find("input:checked").closest("div").find("span").text(),b=d.val().split("_");e+="<li selectedMeal=true>"+g+" "+b[2]+" "+b[1]+" (1) <a href='#' class='mealControlButton changeMeal' onclick='SKYSALES.onChangeMeal(this); return false;'>"+t.changeMealLink+"<\/a> <\/li>",o++,s++}p.length>0?(h=0,p.each(function(){selectbox=$(this),selectbox.attr("predefinedMeal")&&v++,c+=parseInt(selectbox.find("option:selected").text()),o+=parseInt(selectbox.find("option:selected").text()),selected=selectbox.val(),arrSelected=selected.split("_"),mealPrice=parseFloat(arrSelected[1].replace(",","")),h=mealPrice+h,l=selectbox.closest("td").find(".meallabel").text(),t.isLoyalty&&(l=selectbox.closest("td").find(".meallabel span").html().replace("<br>","")),e+="<li selectedMeal=true>"+l+" ("+selectbox.find("option:selected").text()+") <a href='#' class='mealControlButton changeMeal' onclick='SKYSALES.onChangeMeal(this); return false;'>"+t.changeMealLink+"<\/a> <\/li>",selectbox.attr("preselected")&&selectbox.val()!=selectbox.find("option[preselected='True']").val()&&(selectbox.removeAttr("preselected"),selectbox.find("option[preselected='True']").removeAttr("preselected"),selectbox.find('option[value="'+selectbox.val()+'"]').attr("selected","selected"),selectbox.trigger("change").selectmenu())}),w.text(h)):y||(e+=$("#isInitial").html()=="False"?"<li>"+$("#noAddedMeals").text()+"<\/li>":"<li>"+$("#noHotMeals").text()+"<\/li>"),e+=" <\/ul><\/li>"}),$.trim(e)!=""&&(h=$(".mealselected_"+r+"_"+i+"_"+f),h.html("<ol class='mealselected'><\/ol>"),h.find("ol.mealselected").html(e),h.find("li.mealList").each(function(n){$(this).prepend('<span class="bold">'+(n+1)+". <\/span>");var i=$(this).find("span.name").attr("paxnum"),r=$('li[selectedmeal="true"]'),t=$("#isInitial").length>0&&$("#isInitial").text()=="True";t||$(this).find("span.name").after("<br/> <span style='font-size:13px;font-style: italic;'> Existing Meals: <\/span>")})),s>0&&$(".segmentHasBundle_"+i+"_"+r+"_"+f).text("true"),o>0?$(".segmentMealCount_"+i+"_"+r+"_"+f).text(o):($(".segmentMealCount_"+i+"_"+r+"_"+f).text("0"),$(".mealselected_"+r+"_"+i+"_"+f).html("")),c+=s>0?s:0,c==y*2?($(".mealselected_"+r+"_"+i+"_"+f).closest(".mealControl").find(".mealOpen").hide(),$(".mealselected_"+r+"_"+i+"_"+f).closest(".mealControl").find('[class^="addedDiv"]').hide()):($(".mealselected_"+r+"_"+i+"_"+f).closest(".mealControl").find(".mealOpen").show(),$(".mealselected_"+r+"_"+i+"_"+f).closest(".mealControl").find('[class^="addedDiv"]').hide()),a=$(".mealselected_"+r+"_"+i+"_"+f).closest(".mealControl"),v==0&&(a.find("#noThanksLink_"+i).hide(),a.find("#noThanksLink_"+i).siblings(".preSelectedMealText").each(function(){$(this).hide()})),u(i,r,f,p),t.isLoyalty&&LoyaltyGuest.updatePoints()}function u(n,i,r,u){var s=0,o=0,b=0,l,k,y,p,w;$("span[id*=totalperpax_"+n+"]").each(function(){var n=$(this);$.trim(n.text())!=""&&(s+=parseFloat(n.text()))}),l="",k=$("span.segmentHasBundle_"+n+"_"+i+"_"+r),$("tr[id*=paxBundleContainer_"+n+"]").each(function(){var n=$(this).find("input:checked"),t;n.length>0&&(t=n.val().split("_"),l="true",s+=parseFloat(t[1]))}),$("span[class*=segmentMealCount_"+n+"]").each(function(){var n=$(this);$.trim(n.text())!=""&&(o+=parseFloat(n.text()))});var h=n==1?$("span[id='journeyMealCountDepart']").text():$("span[id='journeyMealCountReturn']").text(),g=n==1?$("span[id='journeyMealPriceDepart']").text():$("span[id='journeyMealPriceReturn']").text(),d=n==1?$("span[id='journeyMealPriceDepart']").text():$("span[id='journeyMealPriceReturn']").text(),c=o;o=h?o+parseInt(h):o;var a=parseFloat(t.removeComma($("#priceMEAL").text())),nt=$("#isInitial").html()=="True",v=parseFloat(d);o>0?(v+=s,l=="true"&&(v+=u),b=h==""||parseFloat(h)==0?parseFloat(s/o).toFixed(2):parseFloat(a/o).toFixed(2),s!=0&&parseFloat(h)==0?(y=f(s),$(".mealTotal_"+n).html(" "+o+" MEAL(S)  = <span class='totalMealFee'>"+y+"<\/span>").closest("tr").show(),c>0&&$("#mealsAddedLabel").show().css("display","block"),p=null,w=$("#mealDynamicAmount"),$(".maxMealReachedDiv").hide(),$(".maxMealNotReachedDiv").hide()):(a!=0||l=="true")&&($(".mealTotal_"+n).html(" "+c+" MEAL(S)  = <span class='totalMealFee'>"+t.currency+" "+t.addCommas(s.toFixed(2))+"<\/span>").closest("tr").show(),$(".maxMealReachedDiv").hide(),$(".maxMealNotReachedDiv").hide(),c>0&&$("#mealsAddedLabel").show().css("display","block"),p=null,w=$("#mealDynamicAmount")),parseFloat(c)==0&&$("#mealsAddedLabel").hide()):($(".mealTotal_"+n).empty(),$(".mealTotal_"+n).html(" "+o+" MEAL(S)  = <span class='totalMealFee'>"+t.currency+" "+t.addCommas(s.toFixed(2))+"<\/span>"),$(".mealTotal_"+n).closest("tr").hide(),$("#mealsAddedLabel").hide()),e(n,c)}function f(n){var i=t.currency+" "+t.addCommas(n.toFixed(2));return t.isLoyalty&&(i="<span class='loyalty-amount'>"+t.addCommas(n).split(".")[0]+"<\/span>"),i}function e(i,r){var o=$("#preAvailedMeal"),h=$("#mealsTable_"+i).length>0?$("#mealsTable_"+i).find("span.name").length:0,u=null,s=$("#mealDynamicAmount"),f,e;i=="1"?u=$("#mealDepartQuantity"):i=="2"&&(u=$("#mealReturnQuantity")),f=parseFloat(parseFloat(t.removeComma($("span#priceMEAL").text()))-parseFloat(t.removeComma(o.text()))).toFixed(2),e=t.addCommas(f),n.Util.updateDynamicPriceControl(s,e,u,r)}function o(n,t){var f=$(t.get(0)).closest("tr").attr("class"),r=f.split("_"),e=$("#paxBundleContainer_"+r[3]+"_"+r[1]+"_"+r[2]+"_"+r[4]),u=2,i;e.length>0&&(u=1),i=t.filter(function(){return parseInt($(this).find("option:selected").text())==0}).selectmenu(),n==u?(i.prop("disabled","disabled"),i.attr("class","ui-selectmenu ui-widget ui-state-default ui-corner-all ui-selectmenu-dropdown ui-selectmenu-disabled ui-state-disabled")):(i.prop("disabled",!1),i.attr("class","ui-selectmenu ui-widget ui-state-default ui-corner-all ui-selectmenu-dropdown"))}function s(n){var t=0;return $(n).each(function(){var n=$(this).find("option:selected");n.length>0&&(t+=parseInt(n.text(),10))}),t}var r=new n.Class.SkySales,t=n.Util.extendObject(r);return t.changeMealLink="",t.mealCountTotalId="#totalMEALCount",t.mealAmountTotalId="#totalMEALAmount",t.bookingSummaryTotalId="#bookingSummaryTotal",t.currentMealCountId="#currentMealCount",t.currentMealAmountId="#currentMealAmount",t.mealPanelClass=".mealPanel",t.mealTriggerClass=".mealOpen",t.currencyContainer="#mealBookingCurrency",t.currency="",t.isLoyalty=$(".main.loyalty").length>0,t.init=function(n){this.setSettingsByObject(n),t.setVars(),t.calculateTotal(),t.createMealPanel(),t.addEvents(),t.initView()},t.initView=function(){$(".showAddMeals").each(function(){var t=$(this).parent().find(".mealPanelControl"),n=$(this).find(".notificationArrow"),i=$(this).closest(".mealPanel");t.hide(),n.removeClass("arrow-down"),n.addClass("arrow-right"),i.css("overflow","hidden"),$("tr[class*=paxContainer]").find("select[id*=SsrMeal]").trigger("change")}),$(".mealPanelControl ").each(function(){var n=$(this).parent();n.find(".showAddMeals").length==0&&n.find(".mealBundlePanelControl").length>0&&$(this).hide()})},t.setVars=function(){t.currency=$(t.currencyContainer).text(),t.continueText=$("#btnContinue").text(),t.cancelText=$("#btnCancel").text()},t.createMealPanel=function(){var n={appendTo:$("#mealsHandler"),autoOpen:!1,height:540,width:720,modal:!0,closeText:"",dialogClass:"no-close",closeOnEscape:!1,buttons:{Continue:function(){$(this).dialog("close"),i($(this))},Cancel:function(){$(this).dialog("close"),$(this).find("select[id*='DropDownListSsrMeal']").each(function(){$(this).attr("prevSelected")&&$(this).prop("selectedIndex",parseFloat($(this).attr("prevSelected"))).trigger("change").selectmenu()})}},create:function(){$(this).closest(".ui-dialog").find("button.ui-button").eq(1).removeAttr("class").addClass("button96x30").addClass("saveMeals").find("span.ui-button-text").text(t.continueText),$(this).closest(".ui-dialog").find("button.ui-button").eq(1).removeAttr("class").addClass("button96x30Hyperlink").addClass("cancelMeals").css({border:"none",background:"none",cursor:"hand",color:"#2574bb","font-weight":"bold",padding:"0","margin-left":"30px"}).find("span.ui-button-text").text(t.cancelText)}};$(t.mealPanelClass).each(function(){var u=$(this),f=$(this).closest(".mealControl").attr("id");$(this).addClass(f),$(this).add,u.siblings(t.mealTriggerClass).click(function(){return u.dialog("open"),u.find("select[id*='DropDownListSsrMeal']").each(function(){$(this).attr("prevSelected",$(this).prop("selectedIndex"))}),$(u).parent().children().eq(u.index()+1).show(),$("div#"+f).find("span.preSelectedMealText").hide(),$("div#"+f).find("a.noThanksLink").hide(),!1}),u.dialog(n),i(u)})},t.addEvents=function(){$("tr[class*=paxContainer]").each(function(){var r=$(this),u=r.attr("class"),e=u.split("_"),n=r.find("select[id*='DropDownListSsrMeal']"),i=0,f=$("#btnOK").text();$(n).each(function(){var r=$(this).attr("selectedIndex");$(this).change(function(){if(i=s(n),i>2){var u="#"+$(this).attr("id")+"-menu > li > a";$("#MealsModalDialogContent").dialog({width:400,height:200,closeText:"",draggable:!1,closeOnEscape:!0,modal:!0,buttons:{OK:function(){$(this).dialog("close")}},create:function(){$(this).closest(".ui-dialog").find("button.ui-button").eq(1).find("span.ui-button-text").text(f)}}),$(this).attr("selectedIndex",r),$(this).find("option").removeAttr("selected").eq(0).attr("selected"),$(u).filter(function(){return $(this).text()=="0"}).closest("li").trigger("mouseup.selectmenu")}else t.removeMealFromTotal(),t.calculateTotal(),t.updateBookingSummary(),t.setMealAmount(),t.updatePriceDetails();o(i,$(n)),$("#priceMEAL").trigger("change")})})}),$(".showAddMeals").each(function(){var r=$(this).parent().find(".mealPanelControl"),n=$(this).find(".notificationArrow"),t=$(this).closest(".mealPanel"),i=t.find("div.overflow-auto");$(this).click(function(){r.toggle(),r.is(":hidden")?(t.scrollLeft(0),n.removeClass("arrow-down"),n.addClass("arrow-right"),t.css("overflow","hidden"),i.length>0&&i.addClass("overflow-auto")):(n.removeClass("arrow-right"),n.addClass("arrow-down"),t.css("overflow","auto"),i.length>0&&i.removeClass("overflow-auto"))})})},t.removeMealFromTotal=function(){var r=$(t.mealAmountTotalId),u=t.removeComma(r.text()),i=$(t.bookingSummaryTotalId),n=t.removeComma(i.text());n=parseFloat(n)-parseFloat(u),i.text(t.addCommas(n))},t.calculateTotal=function(){var r=0,u=0,i,f;$("table.mealPanelControl").each(function(){$(this).find("select[id*='DropDownListSsrMeal']").each(function(){var f=0,e=0,o=$(this).attr("id"),i=document.getElementById(o),n;i.selectedIndex!=-1&&(n=i.options[i.selectedIndex].value.split("_"),f=n.length==5?t.removeComma(n[1]):0,e=n.length==5?n[2].replace(/\D/g,""):0),r+=parseFloat(f),u+=parseInt(e)}),$(this).find(".meallabel").each(function(){$(this).attr("style","text-transform: uppercase;")})}),$("table.mealBundlePanelControl").each(function(){$(this).find("input[checked]").each(function(){var n=0,u=0,f=$(this).attr("id"),i=$(this).attr("value").split("_");n=i.length>1?t.removeComma(i[1]):0,r+=parseFloat(n)})});var l=$("span[id*='currentMealTotal']").text(),e=t.addCommas(r),o=t.addCommas(e);$(t.mealAmountTotalId).text(t.addCommas(o));var s=$("span[id*='currentMealCount']").text(),h=parseInt(u),c=parseInt(h)+parseInt(s);$(t.mealCountTotalId).text(c),i=$(":input[id*= 'CheckBoxMealsAgreement' ]"),f=$(":input[id*= 'DropDownListSsrMeal' ]"),i&&f.find("option:selected").index()>0?n.Util.setRequiredAttribute(i):n.Util.removeRequiredAttribute(i)},t.updateBookingSummary=function(){var r=$(t.mealAmountTotalId),u=t.removeComma(r.text()),i=$(t.bookingSummaryTotalId),n=t.removeComma(i.text());n=parseFloat(n)+parseFloat(u),i.text(t.addCommas(n)),$(this).find("span[@id^='overallTotal']").each(function(){$("#bookingSummaryTotal").text($("#overallTotal").text())})},t.removeComma=function(n){return n.replace(/,/g,"")},t.addCommas=function(n){var i,r,t;for(n+="",x=n.split("."),x1=x[0],x2=x.length>1?x[1]+"00":"0000",i=x2.substr(0,2),r=x2.substr(2,x2.length),x2=String(Math.round(i+"."+r)),x2=x2.length>1?"."+x2:".0"+x2,t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},t.setMealAmount=function(){var i=$(t.mealAmountTotalId),n=$("#priceMEAL");n!==undefined&&n.text(i.text())},t.updatePriceDetails=function(){var ot=$("#priceDetails"),i;if(ot!==undefined){var r=t.removeComma($("#priceWWF").text()),u=t.removeComma($("#priceSEF").text()),f=t.removeComma($("#priceINS").text()),e=t.removeComma($("#pricePEB").text()),y=t.removeComma($("#pricePEBINS").text()),o=t.removeComma($("#priceMEAL").text()),s=t.removeComma($("#priceSEAT").text()),h=t.removeComma($("#hotelAmount").text()),c=t.removeComma($("#priceWAF").text()),p=t.removeComma($("#pricePCF").text()),w=t.removeComma($("#pricePF").text()),b=t.removeComma($("#priceSMS").text()),l=t.removeComma($("#priceUMNR").text()),at=t.removeComma($("#priceSF").text()),k=t.removeComma($("#priceYPRO").text()),d=t.removeComma($("#priceFMNX").text()),g=t.removeComma($("#priceNameChange").text()),nt=t.removeComma($("#airbTotal").text()),tt=t.removeComma($("#ckitTotal").text()),st=$("#addOnsSubTotal"),ht=$("#overallTotal"),a=$("#priceNBAG").text(),ct=t.removeComma($("#taxesFaresTotal").text()),lt=t.removeComma($("#faresSubTotal").text()),n,v;BGProtect=k!=""?parseFloat(k).toFixed(2):"0.00",FlyMeNext=d!=""?parseFloat(d).toFixed(2):"0.00";var it=$("span#currentMealTotal").text(),rt=$("span#currentBaggageTotal").text(),ut=$("span#currentInsuranceTotal").text(),ft=$("span#currentSEFTotal").text(),vt=$("span#currentWWFTotal").text(),et=$("span#currentBagProtectTotal").text();it!=""&&rt!=""&&ut!=""&&ft!=""&&et!=""&&(o=parseFloat(o-parseFloat(t.removeComma(it))),e=parseFloat(e-parseFloat(t.removeComma(rt))),f=parseFloat(f-parseFloat(t.removeComma(ut))),u=parseFloat(u-parseFloat(t.removeComma(ft))),r=parseFloat(r-parseFloat(0)),y=parseFloat(y-parseFloat(t.removeComma(et)))),n=p!=""?parseFloat(r)+parseFloat(u)+parseFloat(f)+parseFloat(e)+parseFloat(s)+parseFloat(c)+parseFloat(p)+parseFloat(a)+parseFloat(l)+parseFloat(b)+parseFloat(g)+parseFloat(nt)+parseFloat(tt)+parseFloat(o)+parseFloat(FlyMeNext)+parseFloat(BGProtect):parseFloat(r)+parseFloat(u)+parseFloat(f)+parseFloat(e)+parseFloat(s)+parseFloat(c)+parseFloat(a)+parseFloat(l)+parseFloat(b)+parseFloat(g)+parseFloat(nt)+parseFloat(tt)+parseFloat(a)+parseFloat(o)+parseFloat(FlyMeNext)+parseFloat(BGProtect),v=n-parseFloat(c)-parseFloat(l)-parseFloat(s),i=parseFloat(lt)+parseFloat(n)+parseFloat(ct),h!=""&&(v+=parseFloat(h.replace(",","")),i+=parseFloat(h.replace(",",""))),w!=""&&(i=i+parseFloat(w)),st.text(t.addCommas(n.toFixed(2))),$("#dynamicSubTotal").text(t.addCommas(v.toFixed(2))),ht.text(t.addCommas(i.toFixed(2))),$(this).find("span[@id^='overallTotal']").each(function(){$("#bookingSummaryTotal").text($("#overallTotal").text())})}},t},n.Class.SpecialHandling=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.specialHandlingJourneysId="",t.specialHandlingContainerId="",t.specialHandlingAvailablesId="",t.specialHandlingJourneys=null,t.specialHandlingListPassengerInput=null,t.specialHandlingAvailables=null,t.selectedSameSpecialRequest="",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setSettingsByObject=function(n){i.setSettingsByObject.call(this,n),t.specialHandlingJourneys=$('span[id^="'+t.specialHandlingJourneysId+'"]'),t.specialHandlingListPassengerInput=$('span[id^="'+t.specialHandlingContainerId+'"]'),t.specialHandlingAvailables=$('div[id^="'+t.specialHandlingAvailablesId+'"]')},t.addEvents=function(){t.specialHandlingListPassengerInput.each(function(){$(this).find("select").each(function(){$(this).focusout(function(){t.checkDuplicate($(this))})})})},t.checkDuplicate=function(n){for(var i,u,r=0;r<2;r++)i=[],u=!0,t.specialHandlingJourneys.each(function(){var f=$(this).find('span[id^="'+t.specialHandlingContainerId+'"]'),u=$(f[r]).find("select");u[0].selectedIndex!=0&&u[1].selectedIndex!=0&&u[0].options[u[0].selectedIndex].value==u[1].options[u[1].selectedIndex].value?(alert(t.selectedSameSpecialRequest),$(u[1]).val(""),$(u[1]).focus()):(i.push(u[0]),i.push(u[1]))}),$(t.specialHandlingAvailables[r]).find("input[type=hidden]").each(function(){for(var f=0,e=this.id.split("_"),r,t=0;t<i.length;t++)if(r=i[t].options[i[t].selectedIndex].value.split("_"),e[e.length-1]==r[r.length-1]&&(f++,$(this).val()<f)){u=!1;break}}),u||(alert("Sorry, your chosen Special Service Request (SSR) has already reached the maximum limit set per flight."),n.val(""),n.focus())},t},n.Class.SpecialHandling.createObject=function(t){n.Util.createObject("specialHandling","SpecialHandling",t)},n.Class.PEB=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.bagList=null,t.bagListPassengerInput=null,t.totalWeight=0,t.totalAmount=0,t.totalTax=0,t.pebContainerId="",t.totalWeightContainerId="",t.totalAmountContainerId="",t.totalTaxContainerId="",t.pebBaseAmountId="",t.pebTaxAmountId="",t.pebTotalAmountId="",t.totalBGAmountContainerId="",t.totalWeightContainer=null,t.totalAmountContainer=null,t.totalTaxContainer=null,t.pebBaseAmount=null,t.pebTaxAmount=null,t.pebTotalAmount=null,t.totalBGAmountContainer=null,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),t.updatePEBTotal()},t.addEvents=function(){t.bagList.each(function(){$(this).change(t.pebTotalHandler)}),t.bagListPassengerInput.each(function(){$(this).change(t.pebTotalHandler)})},t.setSettingsByObject=function(n){i.setSettingsByObject.call(this,n),t.bagList=this.getById(t.pebContainerId).find("tr td select"),t.bagListPassengerInput=this.getById(t.pebContainerId).find('ul[id^="pebList1"] li select'),t.totalWeightContainer=this.getById(t.totalWeightContainerId),t.totalAmountContainer=this.getById(t.totalAmountContainerId),t.totalTaxContainer=this.getById(t.totalTaxContainerId),t.pebBaseAmount=this.getById(t.pebBaseAmountId),t.pebTaxAmount=this.getById(t.pebTaxAmountId),t.pebTotalAmount=this.getById(t.pebTotalAmountId),t.totalBGAmountContainer=this.getById(t.totalBGAmountContainerId)},t.pebTotalHandler=function(){t.updatePEBTotal()},t.getValue=function(n,t){var u=t.val(),i=u.split("_"),r=0;return i.length>n&&(r=i[n]),r},t.getTaxAmount=function(n,i){tax=t.getValue(3,i),t.totalTax=parseFloat(t.totalTax)+parseFloat(tax)},t.getTotalWeight=function(n,i){weight=t.getValue(2,i),t.totalWeight=parseFloat(t.totalWeight)+parseFloat(weight)},t.getTotalAmount=function(n,i){amount=t.getValue(1,i),amount==0&&(amount="0"),amount=t.removeComma(amount),t.totalAmount=(parseFloat(t.totalAmount)+parseFloat(amount)).toFixed(2)},t.resetStoredTotals=function(){t.totalWeight=$("#pebManageWeight").text(),t.totalAmount=$("#pebManageTotal").text(),t.totalTax=0},t.removeComma=function(n){return n.replace(/,/g,"")},t.addCommas=function(n){n+="",x=n.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},t.updatePEBTotal=function(){t.resetStoredTotals(),t.bagList.each(function(n){t.getTotalWeight(n,$(this)),t.getTotalAmount(n,$(this)),t.getTaxAmount(n,$(this))}),t.bagListPassengerInput.each(function(n){t.getTotalWeight(n,$(this)),t.getTotalAmount(n,$(this)),t.getTaxAmount(n,$(this))});var n=t.addCommas(t.totalAmount);t.totalAmountContainer.text(n),t.totalWeightContainer.text(t.totalWeight),t.totalTaxContainer.text(t.totalTax),t.pebBaseAmount.text(t.totalAmount)},t},n.Class.PEB.createObject=function(t){n.Util.createObject("peb","PEB",t)},n.Class.MEAL=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.mealList=null,t.mealListPassengerInput=null,t.totalCount=0,t.totalAmount=0,t.totalTax=0,t.mealContainerId="",t.totalAmountContainerId="",t.totalCountContainerId="",t.totalTaxContainerId="",t.mealBaseAmountId="",t.mealTaxAmountId="",t.mealTotalAmountId="",t.totalMealAmountContainerId="",t.totalCountContainer=null,t.totalAmountContainer=null,t.totalTaxContainer=null,t.mealBaseAmount=null,t.mealTaxAmount=null,t.mealTotalAmount=null,t.totalMealAmount=null,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),t.updateMEALTotal()},t.addEvents=function(){t.mealList.each(function(){$(this).change(t.mealTotalHandler)}),t.mealListPassengerInput.each(function(){$(this).change(t.mealTotalHandler)})},t.setSettingsByObject=function(n){i.setSettingsByObject.call(this,n),t.mealList=this.getById(t.mealContainerId+" tr td").find("select"),t.mealListPassengerInput=$('span[id^="'+t.mealContainerId+'"] ul[id^="mealList1"] li[id^="mealList2"]').find("select"),t.totalCountContainer=this.getById(t.totalCountContainerId),t.totalAmountContainer=this.getById(t.totalAmountContainerId),t.totalTaxContainer=this.getById(t.totalTaxContainerId),t.mealBaseAmount=this.getById(t.mealBaseAmountId),t.mealTaxAmount=this.getById(t.mealTaxAmountId),t.mealTotalAmount=this.getById(t.mealTotalAmountId),t.totalMealAmount=this.getById(t.totalMealAmountContainerId)},t.mealTotalHandler=function(){t.updateMEALTotal()},t.getValue=function(n,t){var u=t.val(),i=u.split("_"),r=0;return i.length>n&&(r=i[n]),r},t.getTaxAmount=function(n,i){tax=t.getValue(2,i),t.totalTax=parseFloat(t.totalTax)+parseFloat(tax)},t.getTotalWeight=function(n,i){weight=t.getValue(2,i),t.totalCount=parseFloat(t.totalCount)+parseFloat(weight)},t.getTotalAmount=function(n,i){amount=t.getValue(1,i),amount==0&&(amount="0"),amount=t.removeComma(amount),t.totalAmount=(parseFloat(t.totalAmount)+parseFloat(amount)).toFixed(2)},t.resetStoredTotals=function(){t.totalAmount=$("#mealManageTotal").text(),t.totalTax=0},t.removeComma=function(n){return n.replace(/,/g,"")},t.addCommas=function(n){n+="",x=n.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},t.updateMEALTotal=function(){t.resetStoredTotals(),t.mealList.each(function(n){t.getTotalAmount(n,$(this)),t.getTaxAmount(n,$(this))}),t.mealListPassengerInput.each(function(n){t.getTotalAmount(n,$(this)),t.getTaxAmount(n,$(this))});var n=t.addCommas(t.totalAmount);t.totalAmountContainer.text(n),t.totalTaxContainer.text(0),t.mealBaseAmount.text(t.totalAmount)},t},n.DisplayIframeLoadingBar=function(){var n=window.parent;return $(n.loadingDimmer).show(),$(n.loadingBarBox).show(),window.focus(),$(n.loadingImage).focus(),!0},n.DisplayLoadingBar=function(){return $("#loadingDimmer").show(),$("#loadingBarBox").show(),window.focus(),$("#loadingImage").focus(),$("#dimmerDialogPlaceHolder").hide(),$("#dimmerDialogContent").hide(),!0},n.RemoveLoadingBar=function(){$("#loadingDimmer").length>0&&($("#loadingDimmer").hide(),$("#loadingBarBox").hide())},n.ReDisplayLoadingBar=function(){$("#loadingImage").length>0&&document.getElementById("loadingBarBox").style.display!="none"&&setTimeout("SKYSALES.DisplayLoadingBar();",10)},n.Class.MEAL.createObject=function(t){n.Util.createObject("meal","MEAL",t)},n.Class.AddOns=function(){var t=this;t.isLoyalty=$(".main.loyalty").length>0,t.init=function(){function p(n){var t=0;return $(n).each(function(){t+=parseInt($(this).find("option:selected").text(),10)}),t}function w(n){$(n).each(function(){var i=$(this).prop("selectedIndex");$(this).change(function(){var r=p(n);r>2?(alert($("div[id *= maxMealAlert]")[0].innerHTML),$(this).prop("selectedIndex",i)):(t.mealOn2(this),t.total())})})}var n=$(".bgTable .bgContainer tr td.bgControl :input"),i=$("#objIns p[id='insCheckboxContainer'] :input"),b=$("#sefDiv #sefTable tr td.sefControlJourney1 :input"),k=$("#sefDiv #sefTable tr td.sefControlJourney2 :input"),r=$("#wwfDiv #wwfTable tr td[id^='wwfControlJourney1'] :input"),u=$("#wwfDiv #wwfTable tr td[id^='wwfControlJourney2'] :input"),f=$("#cebExpressDiv #cebExpressTable tr td[id^='cebExpressControlJourney1'] :input"),e=$("#cebExpressDiv #cebExpressTable tr td[id^='cebExpressControlJourney2'] :input"),o=$("#pebContainer tr td").find("select"),s=$("#pebContainer ul[id^='pebList1'] li").find("select"),h=$("div[id^='mealGroup']"),c=$("#smsFlightReminder :input"),l=$("#merDiv #merTable tr[id^='airbControl'] :input"),a=$("#merDiv #merTable tr[id^='ckitControl'] :input"),v=$(".saveMeals,.cancelMeals"),y=$(".mealPanel select"),d=$("#cebConDiv #cebConTable tr td[id^='cebConnectControlJourney1'] :input"),g=$("#cebConDiv #cebConTable tr td[id^='cebConnectControlJourney2'] :input");$("#WWFagree div").find("input").attr("disabled",!0),t.addBaggageProtect(),t.addInsurance(),t.InitializeSEF(),t.addWWF(r,u),t.addCEBEX(f,e),t.addHotel(),t.initInfoTooltip(),t.initHelpInfoDisplay(),t.recalculateAddOnsPriceDetailsTotal(),$(a).each(function(){$(this).click(function(){t.merchandise2(this),t.total()})}),$(l).each(function(){$(this).click(function(){t.merchandise1(this),t.total()})}),$(c).each(function(){$(this).click(function(){t.smsReminder(this),t.total()})}),$(i).each(function(){$(this).change(function(){t.travelInsurance(this),t.total()})}),$(y).change(function(){t.updateBaggage(),t.total()}),$(v).click(function(){t.updateBaggage(),t.total()}),$(n).each(function(){$(this).change(function(){$(this).attr("id").match("Passenger(.*)BAGPROTECT")!=null&&t.baggageProtect(this),t.total($(this).attr("id"))}),$(this).click(function(){$(this).attr("id").match("Passenger(.*)BAGPROTECT")!=null&&($(this).is(":checked")?$(this).removeClass("unchecked"):$(this).addClass("unchecked"))})}),$("#sfDiv").find(".sfTable").each(function(n){var i=n;$(this).find("select").each(function(){var n=$(this),r=n.find("option:selected").attr("preselected");n.data("prevSEF",t.createSEFValues(n.val(),r)),n.change(function(){var r=n.find("option:selected").attr("preselected"),u=t.createSEFValues(n.val(),r),f=n.data("prevSEF");n.data("prevSEF",u),t.sefOn(u,f,i,r),t.updateBaggage(),t.total()})})}),$("#wwfDiv").find("#wwfTable").find("tr").find("#wwfControlJourney1").each(function(){$(this).find("input").change(function(){t.wwfOn(this),t.total(),$("#priceWWF").trigger("change")})}),$("#wwfDiv").find("#wwfTable").find("tr").find("#wwfControlJourney2").each(function(){$(this).find("input").each(function(){$(this).change(function(){t.wwfOn2(this),t.total(),$("#priceWWF").trigger("change")})})}),$("#cebExpressDiv").find("#cebExpressTable").find("tr").find("#cebExpressControlJourney1").each(function(){$(this).find("input").change(function(){t.cebexOn(this),t.total(),$("#priceCEBEX").trigger("change")})}),$("#cebExpressDiv").find("#cebExpressTable").find("tr").find("#cebExpressControlJourney2").each(function(){$(this).find("input").each(function(){$(this).change(function(){t.cebexOn2(this),t.total(),$("#priceCEBEX").trigger("change")})})}),$("#cebConDiv").find("#cebConTable").find("tr").find("#cebConnectControlJourney1").each(function(){$(this).find("input").each(function(){t.cebConnectOn(this),t.total()})}),$("#cebConDiv").find("#cebConTable").find("tr").find("#cebConnectControlJourney2").each(function(){$(this).find("input").each(function(){t.cebConnectOn2(this),t.total()})}),$(o).each(function(){$(this).change(function(){t.pebOn(this),t.total()})}),$(s).each(function(){$(this).change(function(){t.pebOn(this),t.total()})}),$(h).each(function(){var n=$(this).find("select");w(n)}),t.total(),t.InitializeMeals(),t.HideCebExpress(),t.HideCebConnect(),t.KnowMoreShowHide()},t.KnowMoreShowHide=function(){$("#cebExpressTable").each(function(){$(this).find("#knowMorelink1").each(function(){var n=$(this);n.hover(function(){$("#knowMore1").css({display:"block"})},function(){$("#knowMore1").css({display:"none"})})}),$(this).find("#knowMorelink2").each(function(){var n=$(this);n.hover(function(){$("#knowMore2").css({display:"block"})},function(){$("#knowMore2").css({display:"none"})})})})},t.HideCebExpress=function(){$("div#HiddenStationCode").each(function(){var i=$(this),n;if(i){var r=$(this).text(),t=["MPH","KLO"],u=t.length;for(n=0;n<u;n++)r.indexOf(t[n])>=0&&$("#CebTransferLink").show()}})},t.HideCebConnect=function(){$("div#HiddenCarrierCode").each(function(){var i=$(this),n;if(i){var r=$(this).text(),t=["TR"],u=t.length;for(n=0;n<u;n++)r.indexOf(t[n])>=0&&($("#CebConnectLink").show(),$("#SefLink").hide())}})},t.InitializeSEF=function(){var r=$("#priceSEF"),u=$("#availedSEFTotal"),i=$("#currentSEFTotal"),f=$("#sefDynamicAmount");$("#sfDiv").find(".sfTable").each(function(e){var s=$("#avaidedSEFPerJourneyCount"+e),o=$("#currentSEFCountJourneyCount"+e),h=e==0?$("#sefDepartQuantity"):$("#sefReturnQuantity");$(this).find("select").each(function(){var a=$(this).find("option:selected").attr("preselected"),c=t.createSEFValues($(this).val(),a),l=parseInt(o.html()),e=parseFloat(t.removeComma(i));!c.preselected&&parseFloat(c.price)>0&&(e=e+parseFloat(c.price),l++),i.text(t.addCommas(e.toFixed(2))),r.text(t.addCommas(e.toFixed(2))).trigger("change"),o.text(l);var v=parseFloat(parseFloat(t.removeComma(i))-parseFloat(t.removeComma(u))).toFixed(2),y=t.addCommas(v),p=l-parseInt(t.removeComma(s));n.Util.updateDynamicPriceControl(f,y,h,p)})})},t.InitializeMeals=function(){$("#mealFieldset").hasClass("expanded")&&$(".mealPanelControl").find("select").first().trigger("change");var n=$("#mealDynamicAmount"),r=$("#preAvailedMeal"),i=parseFloat(parseFloat(t.removeComma($("span#priceMEAL")))-parseFloat(t.removeComma(r))).toFixed(2),u=t.addCommas(i);n.html(u),parseFloat(i)>0&&n.parent().show()},t.updateBaggage=function(){var t=new n.Class.BaggageAllowance;t.removeBaggageFromTotal(),t.calculateTotal(),t.updateBookingSummary(),t.setBaggageAmount(),t.updatePriceDetails()},t.initInfoTooltip=function(){$("#insContainer").tooltip({items:"img.insuranceInfoImage",position:{my:"center top+10",at:"center bottom",using:function(n,t){$(this).css(n),$("div").tooltip({tooltipClass:"custom-tooltip-styling"}),$("<div>").addClass("arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}},content:function(){var t=$(this),n;if(t.is("img"))return n=$(this).siblings("span.tooltip").find("div"),$(n).html()}})},t.initHelpInfoDisplay=function(){$(".helpInfoTooltip").each(function(){$(this).tooltip({items:"img",position:{my:"center top+10",at:"center bottom",using:function(n,t){$(this).css(n),$("div").tooltip({tooltipClass:"custom-tooltip-styling"}),$("<div>").addClass("arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}},content:function(){var t=$(this),n;if(t.is("img"))return n=$(this).parent().children("span.tooltipHidden").find("div"),$(n).html()}})})},t.addWWF=function(n,i){var r=$("#flownWWF")!=""?t.removeComma($("#flownWWF")):0,u=parseInt(r)+parseInt(t.removeComma($("#currentWWFTotal")));$("#currentWWFTotal").html(t.addCommas(parseFloat(u).toFixed(2))),$(n).each(function(){$(this).is(":checked")&&(t.wwfOn(this),t.total())}),$(i).each(function(){$(this).is(":checked")&&(t.wwfOn2(this),t.total())})},t.addCEBEX=function(n,i){$("#priceCEBEX").html("0.00"),$(n).each(function(){$(this).is(":checked")&&(t.cebexOn(this),t.total())}),$(i).each(function(){$(this).is(":checked")&&(t.cebexOn2(this),t.total())})},t.addBaggageProtect=function(){$("#objIns ul li").each(function(){var n=$(this).find("input:checkbox:not(:checked)");if($(n).is(":disabled")){var t=$(n).attr("id"),i=t.split("Passenger").pop(),r="#bgProtect_"+(parseInt(i)+1)+"_2";$(r).hide()}})},t.addHotel=function(){$(".hotel-chosen")&&$("#hotel-dynamic.dynamicFee").show()},t.addInsurance=function(){var v=$("#priceINS"),nt=$("#hiddenDGINSTotal"),i=$("#travelSureTotal"),bt=$("#manageTotalInsurance"),kt=$("#insQuantity"),dt=$("#insDynamicAmount"),gt=$("#noInsPassenger"),ni=$("#addOnsSubTotal"),tt=$("#priceNBAG").text(),ti=$("#priceWWF"),it=$("#nfsTAx"),ii=$("#travelSureTaxTotal"),e=t.removeComma(ii),y=t.removeComma(it),s=$("#wwfTotal"),u=$("#taxesFaresTotal"),r=t.removeComma(u),p=0,rt=0,ri=t.removeComma(i),tr=parseFloat(ri)+parseFloat(e),et,ot,st,ht,o,pt,a,bi,g;$(".insCheckBox").find("input:checkbox").change(function(){var n=!1;$(this).attr("id").indexOf("CheckBoxFlyMeNext")>=0&&$(this).is(":checked")&&!n?($("#totalFlyMeNext").show(),n=!0):$(this).attr("id").indexOf("CheckBoxFlyMeNext")>=0&&$("#objIns").find("input[id*='CheckBoxFlyMeNext']").filter(":checked").length==0&&!n&&($("#totalFlyMeNext").hide(),n=!0),$(this).attr("id").indexOf("CheckBoxBagProtectOpt")>=0&&$(this).is(":checked")&&!n?($("#totalBaggageProtect").show(),n=!0):$(this).attr("id").indexOf("CheckBoxBagProtectOpt")>=0&&$("#objIns").find("input[id*='CheckBoxBagProtectOpt']").filter(":checked").length==0&&!n&&($("#totalBaggageProtect").hide(),n=!0),$(this).attr("id").indexOf("CheckBoxYearRoundProtect")>=0&&$(this).is(":checked")&&!n?($("#totalYearRoundProtect").show(),n=!0):$(this).attr("id").indexOf("CheckBoxYearRoundProtect")>=0&&$("#objIns").find("input[id*='CheckBoxYearRoundProtect']").filter(":checked").length==0&&!n&&($("#totalYearRoundProtect").hide(),n=!0)});var ut=$(".insSingle"),ft=$(".insGroup"),h="",w=$(".fareRulesMainBody").find("div#dimmerGuest"),b=$("div#insConfirmBox");if($("p#insCheckboxContainer").find(':input[checked="checked"]').length>0){$(".insurancePriceDetail").show(),this.isLoyalty?$("#insPriceDetailAmount").html(i.html()):$("#insPriceDetailAmount").html(i.html());var ui=parseFloat(t.removeComma(i)),k=parseFloat(t.removeComma($("#subtotalAmount"))),fi=ui+k,f=0;k=t.addCommas(fi.toFixed(2)),$("#subtotalAmount").html(k),$.each($("div#priceDetailsContents").find($(".subtotalAmount")),function(){if($(this).is(":visible")){var n=parseFloat(t.removeComma($(this)));f+=n}}),f=t.addCommas(f.toFixed(2)),$(".totalAmount").html($('input[id="bookingCurrencyHidden"]').val()+" "+f),$("#totalFee").html($('input[id="bookingCurrencyHidden"]').val()+" "+f),prevtotalPBR=$(".previousTotalPBR").length>0&&$(".previousTotalPBR").html().split(" ")[1]!=0?parseFloat($(".previousTotalPBR").html().split(" ")[1].replace(",","")):0,et=f.replace(",",""),previousTotalPBR=prevtotalPBR,ot=t.addCommas((et-previousTotalPBR).toFixed(2)),$(".totalAmountDuePBR").html($('input[id="bookingCurrencyHidden"]').val()+" "+ot)}else $(".insurancePriceDetail").hide();$(".managePerGuest").click(function(){ut.show(),ft.hide()}),$(".manageAllGuest").click(function(){$("div.insRiderNote").find("input").filter(":checked").removeAttr("checked").trigger("change"),insCheckBoxes=$("p#insCheckboxContainer").find("input"),h=$("p#insCheckboxContainer").find("input").filter(":checked"),h.length>0?($("a#insuranceAdd").hide(),$("a#insuranceRemoved").show(),$("#insNoThanks").show(),$("div#insRiderNoteContainer").show()):h.length===0&&($("a#insuranceAdd").show(),$("a#insuranceRemoved").hide(),$("div#insRiderNoteContainer").hide(),$("#insNoThanks").hide()),insCheckBoxes.length>h.length&&$("span#insuranceSelected").hide(),ft.show(),ut.hide()}),$("#insNoThanks").click(function(){w.show(),b.show()}),$("#insConfirmButton").click(function(){w.hide(),b.hide()}),$("#insCancelButton").click(function(){$("div.insRiderNote").find("input").filter(":checked").removeAttr("checked").trigger("change");var n=$("p#insCheckboxContainer").find("input").filter(":checked");w.hide(),b.hide(),n.removeAttr("checked").trigger("change"),$("span#insuranceSelected").hide(),$("a#insuranceRemoved").hide(),$("div#insRiderNoteContainer").hide(),$("#insNoThanks").hide(),$("a#insuranceAdd").show()}),$("a#insuranceAdd").click(function(){var n=$("p#insCheckboxContainer").find("input");n.attr("checked","checked").trigger("change"),$("#insNoThanks").show(),$(this).hide(),$("a#insuranceRemoved").show(),$("div#insRiderNoteContainer").show()}),$("#groupBagProtectCheckbox").change(function(){var n=$("div#insuranceBagProtectContainer").find("input");$(this).is(":checked")?n.attr("checked","checked").trigger("change"):n.removeAttr("checked").trigger("change")}),$("#groupFlyMeNextCheckbox").change(function(){var n=$("div#insuranceFlyMeNextContainer").find("input");$(this).is(":checked")?n.attr("checked","checked").trigger("change"):n.removeAttr("checked").trigger("change")}),$("#groupYearRoundProtectCheckbox").change(function(){var n=$("div#annualInsuranceContainer").find("input");$(this).is(":checked")?n.attr("checked","checked").trigger("change"):n.removeAttr("checked").trigger("change")}),$("p#insCheckboxContainer").find("input").change(function(){var n=$(this).parent().siblings(".insuranceRider");$(this).is(":checked")?n.show():(n.find("input").filter(":checked").removeAttr("checked").not(":disabled").trigger("change"),n.hide())}),$("div#insuranceBagProtectContainer").find("input").change(function(){var i=parseFloat(t.removeComma($(this).siblings(".bpAmount"))),n=$("#bagProtectAmount"),r;$(this).is(":checked")?n.text(parseFloat(t.removeComma(n))+i):n.text(parseFloat(t.removeComma(n))-i),$("div#insuranceBagProtectContainer").find("input").filter(":checked").length>0?$(".bagProtectPriceDetail").show():$(".bagProtectPriceDetail").hide(),r=parseFloat(n.text()),n.text(t.addCommas(r.toFixed(2))),$("#bagProtectPriceDetailAmount").html(n.text()),t.recalculateAddOnsPriceDetailsTotal()}),$("div#annualInsuranceContainer").find("input").change(function(){var n=$("#yearRoundProtectPax"),i=$("#yearRoundAmount"),r;$(this).is(":checked")?n.text(parseInt(n.text())+1):n.text(parseInt(n.text())-1),$("div#annualInsuranceContainer").find("input").filter(":checked").length>0?$(".yearRoundProtectPriceDetail").show():$(".yearRoundProtectPriceDetail").hide(),r=parseFloat(n.text())*parseFloat(t.removeComma($("#yearRoundProtectAmountHidden"))),i.text(t.addCommas(r.toFixed(2))),$("#yearRoundProtectPriceDetailAmount").html(i.text()),t.recalculateAddOnsPriceDetailsTotal()}),$("div#insuranceFlyMeNextContainer").find("input").change(function(){var r=parseFloat(t.removeComma($(this).siblings(".fmnxtAmount"))),i=$("#flyMeNextPax"),n=$("#flyMeNextAmount"),u;$(this).is(":checked")?(i.text(parseInt(i.text())+1),n.text(parseFloat(t.removeComma(n))+r)):(i.text(parseInt(i.text())-1),n.text(parseFloat(t.removeComma(n))-r)),$("div#insuranceFlyMeNextContainer").find("input").filter(":checked").length>0?$(".flyMeNextPriceDetail").show():$(".flyMeNextPriceDetail").hide(),u=parseFloat(n.text()),n.text(t.addCommas(u.toFixed(2))),$("#flyMeNextPriceDetailAmount").html(n.text()),t.recalculateAddOnsPriceDetailsTotal()}),this.isLoyalty||window.LoyaltyPriceDisplay!=undefined||$("div.insuranceRider").find("input").filter(":checked").trigger("change"),isNaN(parseFloat(e))&&(e=0),y=parseFloat(y)+parseFloat(e),it.text(y.toFixed(2)),r=parseFloat(r)+parseFloat(e),u.text(r.toFixed(2)),i.text()==""?bt.text()==""&&(p=tt+parseFloat(s.text()),v.text("0.00").trigger("change")):(p=parseFloat(i.text())+tt+parseFloat(s.text()),rt=$("#insContainer").css("display")=="none"?parseFloat(t.removeComma(nt)):parseFloat(t.removeComma(i))+parseFloat(t.removeComma(nt)),v.text(t.addCommas(parseFloat(rt).toFixed(2))).trigger("change"),st=parseFloat(parseFloat(t.removeComma(v))-parseFloat(t.removeComma($("span#currentInsuranceTotal")))).toFixed(2),ht=t.addCommas(st),n.Util.updateDynamicPriceControl(dt,ht,kt,parseInt(gt.text()))),ni.text(p),s.text()==""||ti.text(s.text());var ct=$("#flownBAG")!=""?t.removeComma($("#flownBAG")):0,c=$("#pricePEB"),ir=t.removeComma(c),u=$("#taxesFaresTotal");r=t.removeComma(u),pebBaseAmount=$("#pebBaseAmount");var l=$("#totalPEBTax"),ei=$("#totalPEBLessTax"),lt=$("#addonsTax"),oi=$("#addOnsVAT"),at=t.removeComma(oi),si=$("#totalBGAmount"),hi=t.removeComma(si),ci=document.getElementById("pebFieldset"),vt=$("#pebDepartQuantity"),yt=$("#pebReturnQuantity"),li=$("#bgTable_1").find($(".bgControl")).find('select[name*="BaggageAllowance"][value!=""]').length,ai=$("#bgTable_2").find($(".bgControl")).find('select[name*="BaggageAllowance"][value!=""]').length,vi=$("#baggageDynamicAmount"),yi=$("#baggage-dynamic"),pi=$("#pebDynamicAmount"),wi=$("span#currentBaggageTotal");pebBaseAmount.length!=0&&(ei.text(l.text()),c.text(t.addCommas(parseFloat(pebBaseAmount.text()).toFixed(2))).trigger("change"),u.text(t.addCommas((parseFloat(l.text())+parseFloat(r)).toFixed(2))),lt.text(t.addCommas((parseFloat(l.text())+parseFloat(at)).toFixed(2)))),ci!=null&&(c.text(t.addCommas((parseFloat(hi)+parseFloat(ct)).toFixed(2))).trigger("change"),o=t.addCommas(parseFloat(parseFloat(t.removeComma(c))-parseFloat(t.removeComma(wi))).toFixed(2)),o<0&&(o=0),vi.text(t.addCommas(parseFloat(o).toFixed(2))),pt=parseFloat(t.removeComma($("#pricePEB")))+parseFloat(t.removeComma($("#pricePEBINS")))-parseFloat(ct),$("#baggageSubtotal").text($("#baggageSubTotalCurrency").text()+t.addCommas(pt.toFixed(2))),n.Util.updateDynamicPriceControl(pi,t.addCommas(parseFloat(o).toFixed(2)),"",""),yi.removeClass("hidden"),vt&&vt.text(li.toString()),yt&&yt.text(ai.toString())),a=$("#priceMEAL"),bi=t.removeComma(a),u=$("#taxesFaresTotal"),r=t.removeComma(u);var wt=$("#mealBaseAmount"),d=$("#totalMEALTax"),ki=$("#totalMEALLess"),di=$("#totalMEALAmount"),rr=t.removeComma(di),gi=document.getElementById("mealFieldset"),ur=$("#currentMealTotal"),nr=$("#preAvailedMeal"),fr=$("#mealDynamicAmount"),er=0;wt.length!=0&&(ki.text(d.text()),a.text(t.addCommas(parseFloat(wt.text()).toFixed(2))).trigger("change"),u.text(t.addCommas((parseFloat(d.text())+parseFloat(r)).toFixed(2))),lt.text(t.addCommas((parseFloat(l.text())+parseFloat(d.text())+parseFloat(at)).toFixed(2)))),gi!=null&&(g=t.addCommas(parseFloat(parseFloat(t.removeComma(a))-parseFloat(t.removeComma(nr))).toFixed(2)),parseFloat(g)>0?($("#mealDynamicAmount").text(g),$("#meals.dynamicFee").show()):$("#meals.dynamicFee").hide())},t.merchandise2=function(n){var s=$("#ckitTotalAmount"),e=$("#ckitTotal"),o=$("#ckitTotal"),i=$("#ckitNoPassenger"),r=t.removeComma(e),u=t.removeComma(o),f=t.removeComma(s),h;$(n).is(":checked")?(r=parseFloat(r)+parseFloat(f),u=parseFloat(u)+parseFloat(f),h=parseInt(i.text()),i.text(parseInt(i.text())+1)):(r=parseFloat(r)-parseFloat(f),u=parseFloat(u)-parseFloat(f),i.text(parseInt(i.text())*1-1)),e.text(t.addCommas(r.toFixed(2))),o.text(t.addCommas(u.toFixed(2))).trigger("change")},t.merchandise1=function(n){var s=$("#airbTotalAmount"),e=$("#airbTotal"),o=$("#airbTotal"),i=$("#airbNoPassenger"),r=t.removeComma(e),u=t.removeComma(o),f=t.removeComma(s),h;$(n).is(":checked")?(r=parseFloat(r)+parseFloat(f),u=parseFloat(u)+parseFloat(f),h=parseInt(i.text()),i.text(parseInt(i.text())+1)):(r=parseFloat(r)-parseFloat(f),u=parseFloat(u)-parseFloat(f),i.text(parseInt(i.text())*1-1)),e.text(t.addCommas(r.toFixed(2))),o.text(t.addCommas(u.toFixed(2))).trigger("change")},t.mealOn2=function(){var f=$("#priceMEAL"),e=$("#mealBaseAmount"),o=t.removeComma(e);f.text(t.addCommas(o)).trigger("change");var i=$("#taxesFaresTotal"),s=t.removeComma(i),r=$("#totalMEALTax"),u=$("#totalMEALLessTax");i.text(t.addCommas((parseFloat(r.text())+parseFloat(s)-parseFloat(u.text())).toFixed(2))),u.text(r.text())},t.smsReminder=function(n){var u=$("#priceSMS"),s=$("#smsReminder"+n.id.substr(n.id.lastIndexOf("y")+1)),f=t.removeComma(s),i=t.removeComma(u),e=$("#taxesFaresTotal"),h=$("#smsReminderTax"+n.id.substr(n.id.lastIndexOf("y")+1)),o=t.removeComma(h),r=t.removeComma(e);$(n).is(":checked")?(i=parseFloat(i)+parseFloat(f),r=parseFloat(r)+parseFloat(o)):(i=parseFloat(i)-parseFloat(f),r=parseFloat(r)-parseFloat(o)),u.text(t.addCommas(i.toFixed(2))).trigger("change"),e.text(t.addCommas(r.toFixed(2)))},t.baggageProtect=function(n){var c=$(n).attr("id"),b=c.match("Passenger(.*)BAGPROTECT"),k=c.split("BAGPROTECT").pop(),l=b[1],nt=!0,s=[],u=$(n).closest('table[id*="bgTable_"]'),tt=u.find(".bgControl").length,o=0,a=$("#totalBagINS"),v=$("#pricePEBINS"),y=$("#baggage-dynamic").find("span#pebWithIns"),r=0,d="#bgProtect_"+(parseInt(l)+1)+"_"+(parseInt(k)+1),f=0,it=$("#objIns").find("div.insCheckBox").find("input:checkbox"),p,w;$(d).each(function(){if(paxCount=0,$(this).closest(".bgContainer").find(".baggagePerGuest").is(":hidden"))$(this).find("div:visible").each(function(){u.hasClass("allBaggageUpdating")?(r=$(this).find("span[price]").attr("price"),o=parseFloat($(this).find("span[price]").attr("price"))):(r=$(this).find("span[price]").attr("price"),o=parseFloat(r))});else if(parseInt(l)==0)u.hasClass("clicked")||u.addClass("allBaggageUpdating"),parentDiv=$(this).find("div[id^=BAGPROTECT]:visible").attr("id")||"",arrID=parentDiv.split("_"),price=0,$(this).closest(".bgContainer").find("div[id$="+arrID[2]+"]").each(function(n){n==0&&(o=parseFloat($(this).find("span[price]").attr("price").replace(",",""))),price=$(this).find("span[price]").attr("price").replace(",",""),r=parseFloat(price)+parseFloat(r)});else{var n=$(this).find("div[id^=BAGPROTECT] input:checkbox:checked").closest("div[id^=BAGPROTECT]").find("div").find("span[price]");n.length!=0&&(o=parseFloat($(n).attr("price").replace(",","")))}$(this).find("div").each(function(){$(this).find("div").each(function(){var i=!1,n=$(this).find("input:checkbox").filter(":checked"),t;$(n).length&&$(n).is(":disabled")&&(t=$(this).find("span[price]").attr("price"),f=t)})})});var g=r,e=g,h=t.removeComma(a),i=t.removeComma(v);$(n).is(":checked")?(totalINS=parseFloat(h)+parseFloat(e),i=parseFloat(i)+parseFloat(e),f>0&&(i=parseFloat(i)-parseFloat(f))):parseFloat(h)>=parseFloat(e)&&(totalINS=parseFloat(h)-parseFloat(e),i=parseFloat(i)-parseFloat(e),f>0&&(i=parseFloat(i)+parseFloat(f))),s.length>0&&s.is(":checked")==!0&&(p=$(s).closest("div.insCheckBox"),w=p.find("#insuranceTooltip"),w.text("")),u.hasClass("clicked")||(a.text(t.addCommas(parseFloat(i).toFixed(2))),v.text(t.addCommas(parseFloat(i).toFixed(2))).trigger("change")),parseFloat(i)>0?(y.removeClass("hidden"),$("#baggage-dynamic").find("span.dynamicFeeInfo").css({"font-size":"0.8em"})):(y.addClass("hidden"),$("#baggage-dynamic").find("span.dynamicFeeInfo").css({"font-size":"1em"}))},t.recalculateAddOnsPriceDetailsTotal=function(){var r,u;t.isLoyalty||t.updateTaxesFeesAmount();var i=0,n=0,f=0,e=$("#amountdue");if($("#wwfPriceAmount").length==0&&$("#wafPriceDetail").length==0)return!1;$("div#addOnsPriceDetails").find(".priceDetailsRight").filter(":visible").each(function(){var n=parseFloat(t.removeComma($(this)));i+=n}),$("div#OtherPriceDetails").find(".priceDetailsRight").filter(":visible").each(function(){var n=parseFloat(t.removeComma($(this)));i+=n}),i=t.addCommas(i.toFixed(2)),$("#subtotalAmount").html(i),$.each($("div#priceDetailsContents").find($(".subtotalAmount")),function(){if($(this).is(":visible")){var i=parseFloat(t.removeComma($(this)));n+=i}}),n=t.addCommas(n.toFixed(2)),$(".totalAmount").html($("#bookingCurrencyHidden").val()+" "+n),$("#totalFee").html($("#bookingCurrencyHidden").val()+" "+n),prevtotalPBR=$(".previousTotalPBR").length>0&&$(".previousTotalPBR").html().split(" ")[1]!=0?parseFloat($(".previousTotalPBR").html().split(" ")[1].replace(",","")):0,r=n.replace(",",""),previousTotalPBR=prevtotalPBR,u=t.addCommas(parseFloat(r-previousTotalPBR).toFixed(2)),$(".totalAmountDuePBR").html($('input[id="bookingCurrencyHidden"]').val()+" "+u)},t.updateTaxesFeesAmount=function(){var l=.12,i=$("#TaxesAndFeesLink > .subtotalAmount"),s,n,h,r,u,f,e,o,c;(i.data("originalTaxAmount")==undefined&&i.data("originalTaxAmount",parseFloat(t.removeComma(i))),s=i.data("originalTaxAmount"),!$("#valueAddedTaxTotal").length>0)||(n=$("#valueAddedTaxTotal"),n.data("originalTaxAmount")==undefined&&n.data("originalTaxAmount",parseFloat(t.removeComma(n))),h=n.data("originalTaxAmount"),r=parseFloat(t.removeComma($("#insPriceDetailAmount").filter(":visible"))),r=isNaN(r)?0:r,u=parseFloat(t.removeComma($("#flyMeNextPriceDetailAmount").filter(":visible"))),u=isNaN(u)?0:u,f=parseFloat(t.removeComma($("#yearRoundProtectPriceDetailAmount").filter(":visible"))),f=isNaN(f)?0:f,e=parseFloat(t.removeComma($("#bagProtectPriceDetailAmount").filter(":visible"))),e=isNaN(e)?0:e,o=(r+u+f+e)*l,c=s+o,n.text(t.addCommas((h+o).toFixed(2))),i.text(t.addCommas(c.toFixed(2))))},t.travelInsurance=function(i){var a=!1,b=$(i).attr("id"),p,w;$(".bgTable .bgContainer tr").each(function(){$(this).find("td.bgControl select").each(function(){var r=$(this).attr("id"),u=b.split("Passenger").pop(),f=parseInt(r.split("_")[r.split("_").length-1].split("SSRBAG")[1]),e="#bgProtect_"+(parseInt(u)+1)+"_"+(f+1);u.indexOf("_")==-1&&$(e).each(function(){$(this).find("div").each(function(){$(this).find("div").each(function(){var k=!1,e=$(this).find("input:checkbox:checked"),y,o,w,h;if($(e).length)if(y=$(this).closest("table[id*=bgTable]").siblings().andSelf().length,o=$(this).closest("div[id*=bgProtect]").attr("id").split("_")[2],o==1&&(a=confirm(document.getElementById("baggageInsurePopOut").innerHTML)),a==!0)$(i).prop("checked",!0),tt.text("");else{var d=$("a.baggagePerGuest"),r=$("table#bgTable_"+o),p=$(r);r.find(".baggageAllGuest").show(),r.find(".baggagePerGuest").hide(),r.find(".paxName").show(),r.find("td.bgControl:hidden").show(),r.find("select").eq(0).off("change",n.Util.ApplyToAllSelect),r.find(".baggageINS").eq(0).find("input:checkbox").off("change",n.Util.ApplyToAllCheckBox),r.find(".baggageINS").eq(0).find("input:checkbox").removeClass("allBaggage"),w=$("#bgTable_"+o+" input:checkbox")[0],$(e).prop("checked",!1),$(e).addClass("unchecked");var c=$("#totalBagINS"),l=$("#pricePEBINS"),v=$(this).find("span[price]").attr("price"),g=v,b=v,u=b,f=t.removeComma(c),s=t.removeComma(l);parseFloat(f)>=parseFloat(u)&&(totalINS=parseFloat(f)-parseFloat(u),s=parseFloat(s)-parseFloat(u)),h=0,p.hasClass("clicked")||($(e).hasClass("allBaggageChecked")&&$(e).hasClass("allBaggage")&&parseInt(f)!=u&&parseInt(f)!=0&&parseInt(f)>u&&(h=parseInt(f)-u),c.text(t.addCommas(parseFloat(s-parseFloat(h)).toFixed(2))),l.text(t.addCommas(parseFloat(s-parseFloat(h)).toFixed(2))).trigger("change"))}})})})})});var k=$("#insAmount"),h=$("#travelSureTotal"),d=$("#insQuantity"),g=$("#insDynamicAmount"),v=$("#nfsTAx"),y=$("#taxesFaresTotal"),c=$("#priceINS"),u=t.removeComma(k),l=t.removeComma(h),f=t.removeComma(c),r=$("#noInsPassenger"),s=$("#insTaxAmountHidden").val(),e=t.removeComma(v),o=t.removeComma(y),nt=$(".main.loyalty").length>0;nt||(l=parseFloat(u*r.text())),$(i).is(":checked")?(r.text(parseInt(r.text())+1),totalINS=parseFloat(l)+parseFloat(u),f=parseFloat(f)+parseFloat(u),e=parseFloat(e)+parseFloat(s),o=parseFloat(o)+parseFloat(s)):(r.text(r.text()-1),totalINS=parseFloat(l)-parseFloat(u),f=parseFloat(f)-parseFloat(u),e=parseFloat(e)-parseFloat(s),o=parseFloat(o)-parseFloat(s)),v.text(e.toFixed(2)),y.text(o.toFixed(2));var it=$("#labelTemp"),rt=$("#totalPassenger"),tt=$(i).closest("div").find($("span#insuranceTooltip")),ut=null;this.isLoyalty&&window.LoyaltyPriceDisplay!=undefined?LoyaltyTravelInsurance.format(totalINS):(h.text(t.addCommas(totalINS.toFixed(2))),$("p#insCheckboxContainer").find("input").filter(":checked").length>0?($(".insurancePriceDetail").show(),$("#insPriceDetailAmount").html(h.text()),t.recalculateAddOnsPriceDetailsTotal()):($(".insurancePriceDetail").hide(),t.recalculateAddOnsPriceDetailsTotal())),c.text(t.addCommas(f.toFixed(2))).trigger("change"),p=parseFloat(parseFloat(t.removeComma(c))-parseFloat(t.removeComma($("span#currentInsuranceTotal")))).toFixed(2),w=t.addCommas(p),n.Util.updateDynamicPriceControl(g,w,d,parseInt(r.text()))},t.sefOn=function(i,r,u){var v=$("#availedSEFTotal"),s=$("#currentSEFTotal"),y=$("#avaidedSEFPerJourneyCount"+u),h=$("#currentSEFCountJourneyCount"+u),l=$("#priceSEF"),a=$("#taxesFaresTotal"),p=$("#sefDynamicAmount"),w=u==0?$("#sefDepartQuantity"):$("#sefReturnQuantity"),f=t.removeComma(s),e=t.removeComma(l),o=t.removeComma(a),c=t.removeComma(h);f=parseFloat(f)-parseFloat(r.price),e=parseFloat(e)-parseFloat(r.price),o=parseFloat(o),(i.price=="0.00"||i.preselected)&&c--,f=parseFloat(f)+parseFloat(i.price),e=parseFloat(e)+parseFloat(i.price),o=parseFloat(o),(r.preselected||r.price=="0.00")&&c++,s.text(t.addCommas(f.toFixed(2))),l.text(t.addCommas(e.toFixed(2))).trigger("change"),a.text(t.addCommas(o.toFixed(2))),h.text(c);var b=parseFloat(parseFloat(t.removeComma(s))-parseFloat(t.removeComma(v))).toFixed(2),k=t.addCommas(b),d=parseFloat(parseFloat(t.removeComma(h))-parseFloat(t.removeComma(y)));return n.Util.updateDynamicPriceControl(p,k,w,d),!1},t.wwfOn=function(i){var k=$("#wwfTotalAmountJourney1"),c=$("#wwfTotal"),s=$("#priceWWF"),f=$("#wwfNoPassenger"),tt=0,r=t.removeComma(c),e=t.removeComma(s),o=t.removeComma(k),l=$("#wwfCheckedCount1"),u=isNaN($("#wwfCheckedCount1").text())?0:parseInt($("#wwfCheckedCount1").text()),d=isNaN($("#wwfCheckedCount2").text())?0:parseInt($("#wwfCheckedCount2").text()),a=$("#wwfJourney1Total"),it=$("#wwfGuestSuffix1"),h=0,v=$(".totalWWFrow"),y=$("#wwfJourney1Span"),g=$("#wwfDynamicAmount"),nt=$("#wwfDepartQuantity"),rt=$("#wwfControlJourney1").find("input:checkbox:checked").filter(":disabled").length,p,w,b;$(i).is(":checked")?(r=parseFloat(r)+parseFloat(o),e=parseFloat(e)+parseFloat(o),p=isNaN(parseInt(f.text()))?0:parseInt(f.text()),f.text(p+1),u++):(r=parseFloat(r)-parseFloat(o),f.text(parseInt(f.text())*1-1),e=parseFloat(e)-parseFloat(o),u--),u==0&&d==0?$("#WWFagree div").find("input").attr("disabled",!0):$("#WWFagree div").find("input").removeAttr("disabled"),c.text(t.addCommas(r.toFixed(2))),s.text(t.addCommas(e.toFixed(2))),h=parseFloat(u)*parseFloat(o),this.isLoyalty&&window.LoyaltyWWF!=undefined?LoyaltyWWF.displayTotalFeeRows(l,a,h,u,v,y):t.displayTotalFeeRows(l,a,h,u,v,y),w=parseFloat(parseFloat(t.removeComma(s))-parseFloat(t.removeComma($("span#currentWWFTotal")))).toFixed(2),b=t.addCommas(w),r>0?($("#wwfPriceTitle").show(),this.isLoyalty&&window.LoyaltyWWF!=undefined?LoyaltyWWF.displaySummaryAmount(r):$("#wwfPriceAmount").html(t.addCommas(r.toFixed(2))).show()):($("#wwfPriceTitle").hide(),$("#wwfPriceAmount").hide()),n.Util.updateDynamicPriceControl(g,b,nt,u),t.recalculateAddOnsPriceDetailsTotal()},t.wwfOn2=function(i){var c=$("#wwfTotalAmountJourney2"),l=$("#wwfTotal"),s=$("#priceWWF"),e=$("#wwfNoPassenger"),d=0,r=t.removeComma(l),o=t.removeComma(s),u,w,b,k;u=c==null?t.removeComma(d):t.removeComma(c);var a=$("#wwfCheckedCount2"),f=isNaN($("#wwfCheckedCount2").text())?0:parseInt($("#wwfCheckedCount2").text()),g=isNaN($("#wwfCheckedCount1").text())?0:parseInt($("#wwfCheckedCount1").text()),v=$("#wwfJourney2Total"),it=$("#wwfGuestSuffix2"),h=0,y=$(".totalWWFrow"),p=$("#wwfJourney2Span"),nt=$("#wwfDynamicAmount"),tt=$("#wwfReturnQuantity"),rt=$("#wwfControlJourney1").find("input:checkbox:checked").filter(":disabled").length;$(i).is(":checked")?(r=parseFloat(r)+parseFloat(u),o=parseFloat(o)+parseFloat(u),w=isNaN(parseInt(e.text()))?0:parseInt(e.text()),e.text(w+1),f++):(r=parseFloat(r)-parseFloat(u),e.text(parseInt(e.text())*1-1),o=parseFloat(o)-parseFloat(u),f--),f==0&&g==0?$("#WWFagree div").find("input").attr("disabled",!0):$("#WWFagree div").find("input").removeAttr("disabled"),l.text(t.addCommas(r.toFixed(2))),s.text(t.addCommas(o.toFixed(2))),h=parseFloat(f)*parseFloat(u),this.isLoyalty&&window.LoyaltyWWF!=undefined?LoyaltyWWF.displayTotalFeeRows(a,v,h,f,y,p):t.displayTotalFeeRows(a,v,h,f,y,p),b=parseFloat(parseFloat(t.removeComma(s))-parseFloat(t.removeComma($("span#currentWWFTotal")))).toFixed(2),k=t.addCommas(b),r>0?($("#wwfPriceTitle").show(),this.isLoyalty&&window.LoyaltyWWF!=undefined?LoyaltyWWF.displaySummaryAmount(r):$("#wwfPriceAmount").html(t.addCommas(r.toFixed(2))).show()):($("#wwfPriceTitle").hide(),$("#wwfPriceAmount").hide()),n.Util.updateDynamicPriceControl(nt,k,tt,f),t.recalculateAddOnsPriceDetailsTotal()},t.cebexOn=function(i){var y=$("#preAvailedCEBEXTotalAmount"),p=$("#cebExpressTotalAmountJourney1"),h=$("#cebExpressTotal"),s=$("#priceCEBEX"),r=$("#cebExpressNoPassenger"),tt=0,u=t.removeComma(h),f=t.removeComma(s),e=t.removeComma(p),w=$("#cebExpressCheckedCount1"),o=isNaN($("#cebExpressCheckedCount1").text())?0:parseInt($("#cebExpressCheckedCount1").text()),it=isNaN($("#cebExpressCheckedCount2").text())?0:parseInt($("#cebExpressCheckedCount2").text()),b=$("#cebExpressJourney1Total"),rt=$("#cebExpressGuestSuffix1"),c=0,k=$(".totalcebExpressrow"),d=$("#cebExpressJourney1Span"),g=$("#cebexDynamicAmount"),nt=$("#cebexDepartQuantity"),ut=$("#cebExpressControlJourney1").find("input:checkbox:checked").filter(":disabled").length,l,a,v;$(i).is(":checked")?(u=parseFloat(u)+parseFloat(e),f=parseFloat(f)+parseFloat(e),l=isNaN(parseInt(r.text()))?0:parseInt(r.text()),r.text(l+1),o++):(u=parseFloat(u)-parseFloat(e),r.text(parseInt(r.text())*1-1),f=parseFloat(f)-parseFloat(e),o--),h.text(t.addCommas(u.toFixed(2))),s.text(t.addCommas(f.toFixed(2))),c=parseFloat(o)*parseFloat(e),t.displayTotalFeeRows(w,b,c,o,k,d),a=parseFloat(parseFloat(t.removeComma(s))-parseFloat(t.removeComma(y))).toFixed(2),v=t.addCommas(a),n.Util.updateDynamicPriceControl(g,v,nt,o),t.recalculateAddOnsPriceDetailsTotal()},t.cebexOn2=function(i){var p=$("#preAvailedCEBEXTotalAmount"),h=$("#cebExpressTotalAmountJourney2"),c=$("#cebExpressTotal"),s=$("#priceCEBEX"),u=$("#cebExpressNoPassenger"),w=0,f=t.removeComma(c),e=t.removeComma(s),r,a,v,y;r=h==null?t.removeComma(w):t.removeComma(h);var b=$("#cebExpressCheckedCount2"),o=isNaN($("#cebExpressCheckedCount2").text())?0:parseInt($("#cebExpressCheckedCount2").text()),it=isNaN($("#cebExpressCheckedCount1").text())?0:parseInt($("#cebExpressCheckedCount1").text()),k=$("#cebExpressJourney2Total"),rt=$("#cebExpressGuestSuffix2"),l=0,d=$(".totalcebExpressrow"),g=$("#cebExpressJourney2Span"),nt=$("#cebexDynamicAmount"),tt=$("#cebexReturnQuantity"),ut=$("#cebExpressControlJourney1").find("input:checkbox:checked").filter(":disabled").length;$(i).is(":checked")?(f=parseFloat(f)+parseFloat(r),e=parseFloat(e)+parseFloat(r),a=isNaN(parseInt(u.text()))?0:parseInt(u.text()),u.text(a+1),o++):(f=parseFloat(f)-parseFloat(r),u.text(parseInt(u.text())*1-1),e=parseFloat(e)-parseFloat(r),o--),c.text(t.addCommas(f.toFixed(2))),s.text(t.addCommas(e.toFixed(2))),l=parseFloat(o)*parseFloat(r),t.displayTotalFeeRows(b,k,l,o,d,g),v=parseFloat(parseFloat(t.removeComma(s))-parseFloat(t.removeComma(p))).toFixed(2),y=t.addCommas(v),n.Util.updateDynamicPriceControl(nt,y,tt,o),t.recalculateAddOnsPriceDetailsTotal()},t.cebConnectOn=function(i){var y=$("#cebConnectTotalAmountJourney1"),h=$("#cebConnectTotal"),p=$("#cebConnectTotalAmount"),s=$("#priceCEBCONN"),u=$("#cebConnectNoPassenger"),tt=0,r=t.removeComma(h),f=t.removeComma(s),e=t.removeComma(y),w=$("#cebConnectCheckedCount1"),o=isNaN($("#cebConnectCheckedCount1").text())?0:parseInt($("#cebConnectCheckedCount1").text()),it=isNaN($("#cebConnectCheckedCount2").text())?0:parseInt($("#cebConnectCheckedCount2").text()),b=$("#cebConnectJourney1Total"),rt=$("#cebConnectGuestSuffix1"),c=0,k=$(".totalcebConnectrow"),d=$("#cebConnectJourney1Span"),g=$("#cebConDynamicAmount"),nt=$("#cebConDepartQuantity"),l,a,v;$(i).is(":checked")?(r=parseFloat(r)+parseFloat(e),f=parseFloat(f)+parseFloat(e),l=isNaN(parseInt(u.text()))?0:parseInt(u.text()),u.text(l+1),o++):(r=parseFloat(r)-parseFloat(e),u.text(parseInt(u.text())*1-1),f=parseFloat(f)-parseFloat(e),o--),h.text(t.addCommas(r.toFixed(2))),p.text(t.addCommas(r.toFixed(2))),s.text(t.addCommas(f.toFixed(2))),c=parseFloat(o)*parseFloat(e),t.displayTotalFeeRows(w,b,c,o,k,d),a=parseFloat(parseFloat(t.removeComma(s))).toFixed(2),v=t.addCommas(a),n.Util.updateDynamicPriceControl(g,v,nt,o),t.recalculateAddOnsPriceDetailsTotal()},t.cebConnectOn2=function(i){var h=$("#cebConnectTotalAmountJourney2"),c=$("#cebConnectTotal"),p=$("#cebConnectTotalAmount"),s=$("#priceCEBCONN"),f=$("#cebConnectNoPassenger"),w=0,u=t.removeComma(c),e=t.removeComma(s),r,a,v,y;r=h==null?t.removeComma(w):t.removeComma(h);var b=$("#cebConnectCheckedCount2"),o=isNaN($("#cebConnectCheckedCount2").text())?0:parseInt($("#cebConnectCheckedCount2").text()),it=isNaN($("#cebConnectCheckedCount1").text())?0:parseInt($("#cebConnectCheckedCount1").text()),k=$("#cebConnectJourney2Total"),rt=$("#cebConnectGuestSuffix2"),l=0,d=$(".totalcebConnectrow"),g=$("#cebConnectJourney2Span"),nt=$("#cebConDynamicAmount"),tt=$("#cebConReturnQuantity");$(i).is(":checked")?(u=parseFloat(u)+parseFloat(r),e=parseFloat(e)+parseFloat(r),a=isNaN(parseInt(f.text()))?0:parseInt(f.text()),f.text(a+1),o++):(u=parseFloat(u)-parseFloat(r),f.text(parseInt(f.text())*1-1),e=parseFloat(e)-parseFloat(r),o--),c.text(t.addCommas(u.toFixed(2))),p.text(t.addCommas(u.toFixed(2))),s.text(t.addCommas(e.toFixed(2))),l=parseFloat(o)*parseFloat(r),t.displayTotalFeeRows(b,k,l,o,d,g),v=parseFloat(parseFloat(t.removeComma(s))).toFixed(2),y=t.addCommas(v),n.Util.updateDynamicPriceControl(nt,y,tt,o),t.recalculateAddOnsPriceDetailsTotal()},t.displayTotalFeeRows=function(n,t,i,r,u,f){n.text(r),t.text(i.toFixed(2)),r>0&&u.css("display")=="none"?(u.show(),f.show()):r==0?f.hide():r>0&&f.show()},t.pebOn=function(){var f=$("#pricePEB"),e=$("#pebBaseAmount"),o=t.removeComma(e);f.text(t.addCommas(o)).trigger("change");var r=$("#taxesFaresTotal"),s=t.removeComma(r),i=$("#totalPEBTax"),u=$("#totalPEBLessTax"),h=$("#addonsTax"),c=$("#addOnsVAT"),l=t.removeComma(c),a=$("#pebDynamicAmount");r.text(t.addCommas((parseFloat(i.text())+parseFloat(s)-parseFloat(u.text())).toFixed(2))),u.text(i.text()),h.text(t.addCommas((parseFloat(i.text())+parseFloat(l)).toFixed(2)))},t.total=function(i){var bi=i,nt=$("#flownBAG")!=""?t.removeComma($("#flownBAG")):0,b=$(":input[id*= 'CheckBoxMealsAgreement' ]"),kt=$(":input[id*= 'DropDownListSsrMeal' ]"),dt=t.removeComma($("#ckitTotal")),gt=t.removeComma($("#airbTotal")),c=t.removeComma($("#priceWWF")),l=t.removeComma($("#priceCEBEX")),a=t.removeComma($("#priceSEF")),v=t.removeComma($("#priceINS")),e=t.removeComma($("#pricePEB")),o=t.removeComma($("#pricePEBINS")),y=t.removeComma($("#priceMEAL")),tt=t.removeComma($("#priceSEAT")),ni=t.removeComma($("#priceWAF")),ti=t.removeComma($("#priceMAF")),ii=t.removeComma($("#priceTAF")),it=t.removeComma($("#pricePCF")),p=t.removeComma($("#pricePHA")),k=t.removeComma($("#pricePHC")),d=t.removeComma($("#pricePHW")),rt=t.removeComma($("#hotelAmount")),ut=t.removeComma($("#priceYPRO")),ft=t.removeComma($("#priceFMNX")),et=t.removeComma($("#pricePF")),ri=t.removeComma($("#priceSMS")),ki=t.removeComma($("#priceUMNR")),ui=t.removeComma($("#priceGETGO")),ot=t.removeComma($("#priceSF")),fi=$("#preAvailedMeal"),ei=$("#addOnsSubTotal"),st=0,oi=$("#overallTotal"),si=$("#bookingSummaryTotal"),hi=$("#priceNBAG").text(),di=$("#priceYPRO"),ht=t.removeComma($("#priceNameChange")),ci=t.removeComma($("#taxesFaresTotal")),li=t.removeComma($("#faresSubTotal")),f=0,r=0,ai=$("span#currentMealTotal"),ct=$("span#currentBaggageTotal"),lt=$("span#currentInsuranceTotal"),at=$("span#availedSEFTotal"),vt=$("span#currentWWFTotal"),yt=$("span#currentCEBEXTotal"),vi=$("span#currentBagProtectTotal"),yi=$("span#preAvailedBaggageProtectTotal"),w=t.removeComma($("#priceCEBCONN")),pt=$("span#currentCEBCONNTotal"),s=t.removeComma($("#previousTotal")),pi=$("#totalAmountDue"),wi=$("#dynamicAmountDue"),u,g,wt,bt,h;BGProtect=ut!=""?parseFloat(ut):"0.00",FlyMeNext=ft!=""?parseFloat(ft):"0.00",r=parseFloat(y)+parseFloat(e)+parseFloat(v)+parseFloat(a)+parseFloat(c)+parseFloat(o)+parseFloat(l)+parseFloat(w)+parseFloat(BGProtect)+parseFloat(FlyMeNext)+parseFloat(ui),y=ai.text()!=""?parseFloat(y-parseFloat(t.removeComma(fi))):"0.00",e=ct.text()!=""?parseFloat(e-parseFloat(t.removeComma(ct))-parseFloat(nt)):"0.00",v=lt.text()!=""?parseFloat(v-parseFloat(t.removeComma(lt))):"0.00",a=at.text()!=""?parseFloat(a-parseFloat(t.removeComma(at))):"0.00",c=vt.text()!=""?parseFloat(c-parseFloat(t.removeComma(vt))):"0.00",l=yt.text()!=""?parseFloat(l-parseFloat(t.removeComma(yt))):"0.00",o=vi.text()!=""?parseFloat(o-parseFloat(t.removeComma(yi))):"0.00",w=pt.text()!=""?parseFloat(w-parseFloat(t.removeComma(pt))):"0.00",f=parseFloat(w)+parseFloat(l)+parseFloat(c)+parseFloat(dt)+parseFloat(gt)+parseFloat(a)+parseFloat(v)+parseFloat(e)+parseFloat(o)+parseFloat(hi)+parseFloat(ri)+parseFloat(y),rt!=""&&(f+=parseFloat(rt.replace(",",""))),st=parseFloat(e)+parseFloat(o),r+=parseFloat(ni),r+=parseFloat(ti),r+=parseFloat(ii),tt!=""&&(r+=parseFloat(tt)),it!=""&&(f+=parseFloat(it),r+=parseFloat(p)),p!=""&&(f+=parseFloat(p),r+=parseFloat(p)),k!=""&&(f+=parseFloat(k),r+=parseFloat(k)),d!=""&&(f+=parseFloat(d),r+=parseFloat(d)),u=parseFloat(li)+parseFloat(r)+parseFloat(ci),et!=""&&(u=u+parseFloat(et)),ot!=""&&(u=u+parseFloat(ot)),ht!=""&&(u=u+parseFloat(ht)),g=$("#summaryCurrencyCode").text(),ei.text(t.addCommas(r.toFixed(2))),$("#dynamicSubTotal").text(g+" "+t.addCommas(f.toFixed(2))),$("#pebDynamicAmount").text(t.addCommas(st.toFixed(2))),wt=parseFloat(t.removeComma($("#pricePEB")))+parseFloat(t.removeComma($("#pricePEBINS"))),$("#baggageSubtotal").text($("#baggageSubTotalCurrency").text()+t.addCommas(wt.toFixed(2))),oi.text(t.addCommas(u.toFixed(2))),si.text(t.addCommas(u.toFixed(2))),amountDue=u.toFixed(2)-parseFloat(s)-parseFloat(nt),pi.text(t.addCommas(amountDue.toFixed(2))),wi.text(g+" "+t.addCommas(amountDue.toFixed(2))),s=$(".previousTotalPBR").html(),s!=null&&$(".totalAmount").html()!=null&&(prevtotalPBR=s.split(" ")[1]!=0?parseFloat(s.split(" ")[1].replace(",","")):0,totalAmount=parseFloat($(".totalAmount").html().split(" ")[1].replace(",","")),previousTotalPBR=prevtotalPBR,bt=t.addCommas((totalAmount-previousTotalPBR).toFixed(2)),$(".totalAmountDuePBR").html($('input[id="bookingCurrencyHidden"]').val()+" "+bt)),b&&kt.find("option:selected").index()>0?n.Util.setRequiredAttribute(b):n.Util.removeRequiredAttribute(b),$("#pebDynamicAmount").html()=="0.00"&&$("#baggage-dynamic").hide(),$("#mealDynamicAmount").html()=="0.00"&&$("#mealDynamicAmount").parent().hide(),h=$("#dynamicSubTotal"),h.length>0&&(h=h.html().split(" ")[1],h=="0.00"?$(".dynamic-fees-content").hide():$(".dynamic-fees-content").show()),$("#pricePEB").trigger("change"),window.LoyaltyPriceDisplay!=undefined&&LoyaltyPriceDisplay.update()},t.removeComma=function(n){return n.text().replace(/,/g,"")},t.addCommas=function(n){n+="",x=n.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},t.createSEFValues=function(n,t){var i=null;return n?(price=n.split("_")[1].replace(/,/g,""),tax=n.split("_")[3].replace(/,/g,""),i={price:price,tax:tax,preselected:t?!0:!1}):i={price:"0.00",tax:"0.00",preselected:t?!0:!1},i}},n.Class.NationalityMcDropdown=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i),r=n.Util.getResource()||{};return t.countryHash=r.countryInfo.CountryList||[],t.valueAttr="val",t.maxRows=35,t.selectedValue="",t.nationalityId="",t.nationality=null,t.nationalityMcDropdownId="",t.nationalityMcDropdown=null,t.nationalityMcDropdownName="",t.noCountrySearchResult="",t.countryInitialLabel="",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.initMcDropdown(),this.checkForPreSelectedValue()},t.setVars=function(){t.nationality=this.getById(this.nationalityId),t.nationalityMcDropdown=this.getById(this.nationalityMcDropdownId)},t.addEvents=function(){this.nationality.change(this.nationalityChangeEventHandler)},t.nationalityChangeEventHandler=function(){var i=t.getById(t.nationalityMcDropdownId),n=i.mcDropdown();n&&n.setDisplayValue(this.value,!0)},t.initMcDropdown=function(){var n=this.countryHash,t={select:this.updateNationalityInput,afterOpen:this.mcDropdownAfterShowHandler,blur:this.nationalityMcDropdownBlurHandler,valueAttr:this.valueAttr,maxRows:this.maxRows,noSearchResultLabel:this.noCountrySearchResult,defaultInitLabel:this.countryInitialLabel,displayCode:!0,subStringEnabled:!0,listInOptGroups:!1,linkClicked:this.mcDropdownShowHandler,inputClass:"nationalityMcdropdown",animate:!0,showSeparator:!0,keyPressSelect:!0};this.nationalityMcDropdown.mcDropdown(this.nationality,t,n,null)},t.mcDropdownShowHandler=function(n){var u=t.getById(t.nationalityMcDropdownId);mcDropdown=u.mcDropdown(),mcDropdown.isListVisible()?mcDropdown.closeMenu():mcDropdown.openHandler(n)},t.mcDropdownAfterShowHandler=function(n){if($.browser.msie){var t=$(n).is(":focus");t||setTimeout(function(){$(n).select()},0)}},t.nationalityMcDropdownBlurHandler=function(){var i=t.getById(t.nationalityMcDropdownId),n=i.mcDropdown();n&&!n.getValue()[0]&&t.nationality.val(""),t.nationality.blur()},t.updateNationalityInput=function(n){var u=t.getById(t.nationalityMcDropdownId),f=u.mcDropdown();t.nationality.val(n),f.closeMenu(),t.nationality.change()},t.checkForPreSelectedValue=function(){var n=this.selectedValue?this.selectedValue:this.nationality.val(),i=this.getById(this.nationalityMcDropdownId),t=i.mcDropdown();t&&n&&t.setValue(n)},t},n.Class.SsrPassengerInput=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.ssrFormArray=null,t.ssrFeeArray=null,t.errorMsgOverMaxPerPassenger="There has been an error",t.ssrButtonIdArray=null,t.ssrButtonArray=null,t.buttonTrackId="",t.buttonTrack=null,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),$("table.ssrSoldContainer :input",this.container).attr("disabled","disabled")},t.setVars=function(){t.buttonTrack=this.getById(this.buttonTrackId),t.ssrButtonIdArray=this.ssrButtonIdArray||[];for(var i=[],n=0,r=null,u="",n=0;n<this.ssrButtonIdArray.length;n+=1)u=this.ssrButtonIdArray[n],r=$("#"+u),r.length>0&&(i[i.length]=r);t.ssrButtonArray=i},t.addEvents=function(){this.addButtonClickedEvents()},t.addButtonClickedEvents=function(){for(var n=0,t=null,n=0;n<this.ssrButtonArray.length;n+=1)t=this.ssrButtonArray[n],t.click(this.updateButtonTrackHandler)},t.updateButtonTrackHandler=function(){t.buttonTrack.val(this.id)},t.setSettingsByObject=function(t){var e,u;i.setSettingsByObject.call(this,t);for(var r=0,o=this.ssrFormArray||[],f=null,r=0;r<o.length;r+=1)f=new n.Class.SsrForm,f.index=r,f.ssrPassengerInput=this,f.init(o[r]),o[r]=f;for(e=this.ssrFeeArray||[],u=null,r=0;r<e.length;r+=1)u=new n.Class.SsrFormFee,u.index=r,u.ssrPassengerInput=this,u.init(e[r]),e[r]=u},t.deactivateSsrFormNotes=function(){for(var n=0,t=this.ssrFormArray,i=null,n=0;n<t.length;n+=1)i=t[n],i.deactivateNoteDiv()},t},n.Class.SsrPassengerInput.createObject=function(t){n.Util.createObject("ssrPassengerInput","SsrPassengerInput",t)},n.Class.SsrForm=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.maximumDropDownLimit=0,t.ssrPassengerId="",t.ssrPassenger=null,t.ssrCodeId="",t.ssrCode=null,t.ssrQuantityId="",t.ssrQuantity=null,t.ssrNoteId="",t.ssrNote=null,t.ssrNoteIframeId="",t.ssrNoteIframe=null,t.ssrNoteCloseId="",t.ssrNoteClose=null,t.ssrNoteDivId="",t.ssrNoteDiv=null,t.ssrNoteImageId="",t.ssrNoteImage=null,t.ssrNoteCancelId="",t.ssrNoteCancel=null,t.ssrFlightId="",t.ssrFlight=null,t.ssrAmountId="",t.ssrAmount=null,t.ssrCurrencyId="",t.ssrCurrency=null,t.index=-1,t.ssrPassengerInput=null,t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.updateSsrAmount()},t.setVars=function(){t.ssrNote=this.getById(this.ssrNoteId),t.ssrNoteDiv=this.getById(this.ssrNoteDivId),t.ssrNoteClose=this.getById(this.ssrNoteCloseId),t.ssrNoteCancel=this.getById(this.ssrNoteCancelId),t.ssrNoteImage=this.getById(this.ssrNoteImageId),t.ssrNoteIframe=this.getById(this.ssrNoteIframeId),t.ssrQuantity=this.getById(this.ssrQuantityId),t.ssrPassenger=this.getById(this.ssrPassengerId),t.ssrCode=this.getById(this.ssrCodeId),t.ssrCurrency=this.getById(this.ssrCurrencyId),t.ssrFlight=this.getById(this.ssrFlightId),t.ssrAmount=this.getById(this.ssrAmountId)},t.addEvents=function(){this.addNoteEvents(),this.addQuantityEvents(),this.addSSRCodeEvents(),this.addFlightEvents()},t.addFlightEvents=function(){this.ssrFlight.change(this.updateSsrAmountHandler)},t.updateSsrQuantityHandler=function(){t.updateSsrQuantity()},t.updateSsrAmountHandler=function(){t.updateSsrAmount()},t.addSSRCodeEvents=function(){this.ssrCode.change(this.updateSsrQuantityHandler),this.ssrCode.change(this.updateSsrAmountHandler)},t.addQuantityEvents=function(){this.ssrQuantity.change(this.updateSsrAmountHandler),this.ssrQuantity.blur(this.updateSsrAmountHandler)},t.updateSsrAmount=function(){var e=this.ssrAmount,u=n.Util.convertToLocaleCurrency("0.00");e.val(u);var h=this.ssrPassenger.val(),c=this.ssrCode.val(),i=this.ssrQuantity.val();i=$.trim(i);var l=/^[0-9]+$/,r=0,a=this.ssrPassengerInput,o=a.ssrFeeArray,t=null,f="",s=0;if(l.test(i)){for(f=this.ssrFlight.val(),r=0;r<o.length;r+=1)t=o[r],(f==="all"||f===t.segmentKey)&&h===t.passengerNumber&&c===t.ssrCode&&(s+=t.amount*i);u=n.Util.convertToLocaleCurrency(s),e.val(u)}else this.ssrQuantity.val(0)},t.updateSsrQuantity=function(){var e=this.maximumDropDownLimit;e=window.parseInt(e,10);var c=this.ssrPassenger.val(),l=this.ssrCode.val(),o=this.ssrFlight.val(),u=0,t=0,a=this.ssrPassengerInput,s=a.ssrFeeArray,r=null,i=this.ssrQuantity.val();i=parseInt(i,10);var n=0,h=null,f=this.ssrQuantity.get(0);for(u=0;u<s.length;u+=1)if(r=s[u],(o==="all"||o===r.segmentKey)&&c===r.passengerNumber&&l===r.ssrCode){if(n=parseInt(r.maxPerPassenger,10),n===0&&(n=e,n=parseInt(n,10),i>=n&&(n=i,n=n+1)),f.options){while(f.options.length>0)f.options[0]=null;for(t=0;t<=n;t+=1)h=new window.Option(t,t),f.options[t]=h,i===t&&this.ssrQuantity.val(t)}i>n?(this.ssrQuantity.val(n),alert(this.getErrorMsgOverMaxPerPassenger())):this.ssrQuantity.val(i)}},t.getErrorMsgOverMaxPerPassenger=function(){var n="";return n=this.ssrPassengerInput.errorMsgOverMaxPerPassenger},t.clearAndDeactivateNoteDiv=function(){var n=this.ssrNote,t=n.is(":disabled");t===!1&&n.val(""),this.deactivateNoteDiv()},t.deactivateNoteDiv=function(){this.ssrNoteDiv.hide(),this.ssrNoteIframe.hide()},t.activateNoteDiv=function(){var f;this.ssrPassengerInput.deactivateSsrFormNotes();var t=this.ssrNoteImage.get(0),i=n.Dhtml(),r=i.getX(t),u=i.getY(t);this.ssrNoteDiv.css("left",r+"px"),this.ssrNoteDiv.css("top",u+"px"),this.ssrNoteDiv.show(),this.ssrNoteIframe.css("left",r+"px"),this.ssrNoteIframe.css("top",u+"px"),this.ssrNoteIframe.show(),f=this.ssrNote.is(":disabled"),f===!1&&this.ssrNote.click()},t.ssrNoteCancelHandler=function(){t.clearAndDeactivateNoteDiv()},t.ssrNoteCloseHandler=function(){t.deactivateNoteDiv()},t.ssrNoteImageHandler=function(){t.activateNoteDiv()},t.addNoteEvents=function(){this.ssrNoteCancel.mouseup(this.ssrNoteCancelHandler),this.ssrNoteClose.mouseup(this.ssrNoteCloseHandler),this.ssrNoteImage.mouseup(this.ssrNoteImageHandler)},t},n.Class.MiddleNameInput=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i),r=n.Util.getResource();return t.paxCount="",t.infantPaxCount="",t.middleNameTextBoxId="",t.initRemoveRequiredAttribute=function(){for(var r,n,u,i=0;i<t.paxCount;i++)r=$("#"+this.middleNameTextBoxId+i),r.get(0).attributes.required.value=="false"&&r.removeAttr("required");for(n=0;n<t.infantPaxCount;n++)u=$("#"+this.middleNameTextBoxId+n+"_"+n),u.get(0).attributes.required.value=="false"&&u.removeAttr("required")},t.init=function(n){this.setSettingsByObject(n)},t},n.Class.SsrFormFee=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.journeyIndex=-1,t.segmentIndex=-1,t.segmentKey="",t.passengerNumber=-1,t.ssrCode="",t.feeCode="",t.amount=0,t.currencyCode="",t.maxPerPassenger=0,t.index=-1,t.ssrPassengerInput=null,t},n.Class.BaggageFeeGrouping=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.currency="",t.hasBag="",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.addEvents=function(){$(document).ready(function(){t.hasBag=="true"?(hasBagOnload(1),$("table#bgTable_2").length>0&&hasBagOnload(2)):(ApplyToAll(1),$("table#bgTable_2").length>0&&ApplyToAll(2));var n=$("[id ^= 'bgTable_']"),i=n.find("td.bgControl .bagPreselected");i.each(function(){var n=$(this).next().find("select option").filter(function(){return $(this).attr("preselected")}),t="";n.length>0&&(t=n.val().split("_")[2]),$(this).find(".baggageWeight").text(t)})}),$(".baggageAllGuest").click(function(){var i=$(this).attr("id").split("_"),r=$("table#bgTable_"+i[1]),n=r.find("td.bgControl").filter('[id!="hasTR"]').find("select"),t=r.find("td.bgControl").filter('[id="hasTR"]').find("select"),u=0,f="",c=0,e,h;n.each(function(){value=$(this).val(),$.trim(value)!=""&&(arrVal=value.split("_"),price=arrVal[1],price=price.replace(/,/g,""),parseFloat(price)>=u&&(u=parseFloat(price),f=value))}),e=n.eq(0).find('option[value="'+f+'"]').text(),n.eq(0).next("span").find("span.ui-selectmenu-status").text(e);var o=0,s="",l=0;return t.each(function(){value=$(this).val(),$.trim(value)!=""&&(arrVal=value.split("_"),price=arrVal[1],price=price.replace(/,/g,""),parseFloat(price)>=o&&(o=parseFloat(price),s=value))}),h=t.eq(0).find('option[value="'+s+'"]').text(),t.eq(0).next("span").find("span.ui-selectmenu-status").text(h),ApplyToAll(i[1])}),$(".baggagePerGuest").click(function(){var t=$(this).attr("id").split("_"),n=$(this).closest("tbody"),i=n.find(".isSCFare");return n.find(".baggageNoThanks").hide(),n.find(".bagPreselected").hide(),i.text()!="True"&&n.find(".baggageCopyToAll").show(),ChoosePerPax(t[1])}),ChoosePerPax=function(i){var u=$("table#bgTable_"+i),h=u.find("td.bgControl").length,r,s,o,f,e;if(u.find(".baggageAllGuest").show(),u.find(".baggagePerGuest").hide(),u.find(".paxName").show(),u.find("td.bgControl:hidden").show(),r=u.find("select"),s=u.find("td.bgControl#hasTR").length,s>0){r.eq(0).off("change",n.Util.ApplyToAllSelect),r.eq(1).off("change",n.Util.ApplyToAllSelect);r.filter(":gt(0)").off("change",t.forceDisplayBaggageAmount).on("change",function(){t.forceDisplayBaggageAmount($(this),i-1)})}else{r.eq(0).off("change",n.Util.ApplyToAllSelect);r.filter(":gt(0)").off("change",t.forceDisplayBaggageAmount).on("change",function(){t.forceDisplayBaggageAmount($(this),i-1)})}for(o=!0,f=0;f<r.length;f++)for(e=0;e<r.length;e++)f!=e&&r.eq(f).val()!=r.eq(e).val()&&(o=!1);return o&&r.filter(":gt(0)").val(r.eq(0).val()),r.selectmenu(),!1},ApplyToAll=function(i){var r=$("table#bgTable_"+i),e=r.find("td.bgControl").length,u,f;return r.find(".baggagePerGuest").show(),r.find(".baggageAllGuest").hide(),r.find(".baggageCopyToAll").hide(),r.find(".paxName").hide(),r.find("td.bgControl").not("#hasTR").filter(":gt(0)").hide(),r.find("td#hasTR").filter(":gt(0)").hide(),u=r.find("td.bgControl#hasTR").length,f=r.find("select[id$='SEG1']").length,u>0?(r.find("select").eq(0).on("change",{journeyindex:i,selectControl:r.find("select").eq(0)},n.Util.ApplyToAllSelect).bind("change",function(){t.forceDisplayBaggageAmount($(this),i-1)}),r.find("select").eq(1).on("change",{journeyindex:i,selectControl:r.find("select").eq(1)},n.Util.ApplyToAllSelect).bind("change",function(){t.forceDisplayBaggageAmount($(this),i-1)})):r.find("select").eq(0).on("change",{journeyindex:i,selectControl:r.find("select").eq(0)},n.Util.ApplyToAllSelect).bind("change",function(){t.forceDisplayBaggageAmount($(this),i-1)}),!1},t.removeComma=function(n){return n.text().replace(/,/g,"")},t.addCommas=function(n){n+="",x=n.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},hasBagOnload=function(i){var r=$("table#bgTable_"+i),e=r.find("td.bgControl").length,u=r.find("#Text1"),f=$("#isInitial");u.length==0&&f.html()=="True"?(r.find(".baggageAllGuest").show(),r.find(".baggagePerGuest").hide()):(r.find(".baggageAllGuest").hide(),r.find(".baggagePerGuest").hide()),r.find(".paxName").show(),r.find("td.bgControl:hidden").show(),r.find("select").eq(0).off("change",n.Util.ApplyToAllSelect),r.find("select").bind("change",function(){t.forceDisplayBaggageAmount($(this),i-1)}),t.forceDisplayBaggageAmount(r.eq(0).find("select").eq(0),i-1)}},t.forceDisplayBaggageAmount=function(n,i){for(var nt=i+1,s=$("table#bgTable_"+nt),p=s.find(".bgControl"),tt=p.filter(":visible"),e=s.find("tr.totalJourneyFee"),d=e.find(".amountperpax").eq(0).attr("currency"),u=0,h=null,c="",f=0,r=s.find("select"),a,y,k,w,o,g,l=0;l<r.length;l++)for(a=0;a<r.length;a++)l!=a&&r.eq(l).val()!=r.eq(a).val()&&(tt=p);e.filter(":gt(0)").remove();var b=[],it=p.length,r=null;for(ctr=0;ctr<it;ctr++)v=p.eq(ctr),r=v.find("select"),maxBagPrice=v.find("#maxBagAmount"),r.length!=0?(c=r.val(),splitValue=c.split("_")):r.length==0&&maxBagPrice.length!=0&&(c=maxBagPrice.text(),splitValue=c.split(" ")),c!=""?(f=splitValue[1],items={},items.baggagePrice=f,r.attr("isfarebundle")=="True"&&(items.bundledPrice=f),b.push(items),v.find(".tooltipMessage").hide(),e.eq(0).show()):(v.find(".tooltipMessage").show(),e.eq(0).hide(),e.eq(0).find("span.baggageJourneyAmount").text("0.00"));for(y={},k={},w=0;w<b.length;w++)bag=b[w],y[bag.baggagePrice]=1+(y[bag.baggagePrice]||0),bag.bundledPrice&&(k[bag.bundledPrice]=y[bag.bundledPrice]||0);o=0,$.each(k,function(n,t){var r=t*n.replace(/,/g,""),i;o=o+parseFloat(r),i=$(".baggageBundledAmount").text(),i&&(o=o+parseFloat(i)),$(".baggageBundledAmount").text(o.toFixed(2))}),$.each(y,function(n,i){u=0,h=e.eq(0).clone().show().appendTo(s),e.eq(0).remove(),currentPrice=i*n.replace(/,/g,""),u=u+currentPrice,h.find(".baggageCurrency").text(d+" "),h.find(".baggageJourneyAmount").text(t.addCommas(u.toFixed(2))),h.find(".amountperpax").html(i+" GUEST(s) x "+d+" "+n+" ="),h.removeClass("zeroTotalForBundle"),s.find(".zeroTotalForBundle").remove()}),u=0,$(".baggageJourneyAmount").each(function(){f=$(this).text(),f!=""&&(f=f.replace(/,/g,""),u=u+parseFloat(f))}),g=u,$("#pricePEB").text(t.addCommas(g.toFixed(2))),LoyaltyGuestDisplayTotal()},t},n.Class.SefFeeGrouping=function(){var i=n.Class.SkySales(),t=n.Util.extendObject(i);return t.currency="",t.hasSef="",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.addEvents=function(){$(document).ready(function(){t.hasSef=="true"?(hasSefOnload(1),$("table#sfTable_2").length>0&&hasSefOnload(2)):(ApplyToAllSF(1),$("table#sfTable_2").length>0&&ApplyToAllSF(2))}),$(".sefAllGuest").click(function(){var t=$(this).attr("id").split("_"),f=$("table#sfTable_"+t[1]),n=f.find("select"),i=0,r="",u;return n.each(function(){value=$(this).val(),$.trim(value)!=""&&(arrVal=value.split("_"),price=arrVal[1],price=price.replace(/,/g,""),parseFloat(price)>i&&(i=parseFloat(price),r=value))}),u=n.eq(0).find('option[value="'+r+'"]').text(),n.eq(0).next("span").find("span.ui-selectmenu-status").text(u),ApplyToAllSF(t[1])}),$(".sefPerGuest").click(function(){var t=$(this).attr("id").split("_"),n=$(this).closest("tbody");return n.find(".sefNoThanks").hide(),n.find(".sefPreselected").hide(),n.find(".sefCopyToAll").show(),ChoosePerPaxSF(t[1])}),$(".sfTable").find(".sefCopyToAll").click(function(){var t=$(this).attr("id").split("_")[1],i=$("table#sfTable_"+t),n=i.find("select");n.filter(":gt(0)").val(n.eq(0).val()).selectmenu().change()}),ChoosePerPaxSF=function(i){var u=$("table#sfTable_"+i),s=u.find("td.sfControl").length,r,o,f,e;u.find(".sefAllGuest").show(),u.find(".sefPerGuest").hide(),u.find(".paxNameSF").show(),u.find("td.sfControl:hidden").show(),r=u.find("select"),r.eq(0).off("change",n.Util.ApplyToAllSelectSF);r.filter(":gt(0)").off("change",t.forceDisplaySefAmount).on("change",function(){t.forceDisplaySefAmount($(this),i-1)});for(o=!0,f=0;f<r.length;f++)for(e=0;e<r.length;e++)f!=e&&r.eq(f).val()!=r.eq(e).val()&&(o=!1);return o&&r.filter(":gt(0)").val(r.eq(0).val()),r.selectmenu(),!1},ApplyToAllSF=function(i){var r=$("table#sfTable_"+i),u=r.find("td.sfControl").length;return r.find(".sefPerGuest").show(),r.find(".sefAllGuest").hide(),r.find(".sefCopyToAll").hide(),r.find(".paxNameSF").hide(),r.find("td.sfControl").filter(":gt(0)").hide(),t.forceDisplaySefAmount(r.eq(0).find("select").eq(0),i-1),r.find("select").eq(0).on("change",{journeyindex:i,selectControl:r.find("select").eq(0)},n.Util.ApplyToAllSelectSF).bind("change",function(){t.forceDisplaySefAmount($(this),i-1)}),!1},t.removeComma=function(n){return n.text().replace(/,/g,"")},t.addCommas=function(n){n+="",x=n.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},hasSefOnload=function(i){var r=$("table#sfTable_"+i),e=r.find("td.sfControl").length,u=r.find("#Text1"),f=$("#isInitial");u.length==0&&f.html()=="True"?(r.find(".sefAllGuest").show(),r.find(".sefPerGuest").hide()):(r.find(".sefAllGuest").hide(),r.find(".sefPerGuest").hide()),r.find(".paxNameSF").show(),r.find("td.sfControl:hidden").show(),r.find("select").eq(0).off("change",n.Util.ApplyToAllSelectSF),r.find("select").bind("change",function(){t.forceDisplaySefAmount($(this),i-1)}),t.forceDisplaySefAmount(r.eq(0).find("select").eq(0),i-1)}},t.forceDisplaySefAmount=function(n,i){for(var g=i+1,o=$("table#sfTable_"+g),a=o.find(".sfControl"),s=a.filter(":visible"),y=o.find("tr.totalJourneyFeeSF"),p=y.find(".amountperpaxSF").eq(0).attr("currency"),e=0,u=null,r="",h=0,f=o.find("select"),l,w,b,k,c=0;c<f.length;c++)for(l=0;l<f.length;l++)c!=l&&f.eq(c).val()!=f.eq(l).val()&&(s=a);if(y.filter(":gt(0)").remove(),s.length==1)n!=null&&(r=n.val(),w=s.find("#maxSefAmount"),n.length==0&&w!=null&&(r=w.text()),$.trim(r)!=""&&(splitValue=n.length==0&&w!=null?r.split(" "):r.split("_"),h=splitValue[1],e=a.length*h.replace(/,/g,""),u=y.eq(0).clone().show().appendTo(o),u.find(".sefCurrency").text(p+" "),u.find(".sefJourneyAmount").text(t.addCommas(e.toFixed(2))),u.find(".amountperpaxSF").html(a.length+" GUEST(s) x "+p+" "+t.addCommas(h)+" ="),n.closest(".sfControl").find(".tooltipMessageSF").hide()));else{var d=[],nt=s.length,f=null;for(ctr=0;ctr<nt;ctr++)v=s.eq(ctr),f=v.find("select"),maxSefPrice=v.find("#maxSefAmount"),f.length!=0?(r=f.val(),splitValue=r.split("_")):f.length==0&&maxSefPrice.length!=0&&(r=maxSefPrice.text(),splitValue=r.split(" ")),r!=""?(h=splitValue[1],items={},items.sefPrice=h,d.push(items),v.find(".tooltipMessageSF").hide()):v.find(".tooltipMessageSF").hide();for(b={},k=0;k<d.length;k++)sef=d[k],b[sef.sefPrice]=1+(b[sef.sefPrice]||0);$.each(b,function(n,i){e=0,u=y.eq(0).clone().show().appendTo(o),currentPrice=i*n.replace(/,/g,""),e=e+currentPrice,u.find(".sefCurrency").text(p+" "),u.find(".sefJourneyAmount").text(t.addCommas(e.toFixed(2))),u.find(".amountperpaxSF").html(i+" GUEST(s) x "+p+" "+n+" =")})}LoyaltyGuestDisplayTotal()},t},n.Class.ContactNumberAssembler=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.completeNumberId="",t.completeNumber=null,t.digitNumberIdCollection=null,t.separator="-",t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents()},t.setVars=function(){t.completeNumber=this.getById(this.completeNumberId)},t.addEvents=function(){for(var r=this.digitNumberIdCollection.length,t,i,n=0;n<r;n++)t=this.digitNumberIdCollection[n],t&&(i=this.getById(t),i.blur(this.mergeNumbers))},t.mergeNumbers=function(){for(var e=t.digitNumberIdCollection.length,u="",o,f,i,s,r=0;r<e;r++)o=t.digitNumberIdCollection[r],f=t.getById(o),f.length&&(i=f.val(),s=n.Util.getAttributeValue(f,"requiredempty"),i&&i!=s&&(r+1!=e&&(i=i.indexOf("-")>0?i.split("-")[0]+t.separator:i+t.separator),u=u+i));u&&t.completeNumber.val(u)},t},n.Util.mergePhoneNumber=function(){},n.Util.removeUpdateDialog=function(){$("#dimmerGuest").hide(),$("#popupDialogGuest").remove(),$("#errorDiv").remove()},n.Util.updateDynamicPriceControl=function(n,t,i,r){var u=$("#dynamicSubTotal"),f=0;controlAmount=0,n.text(t),i&&i.length>0&&i.text(r),n.text()!=""&&n.text()!="0.00"?n.parent().show():n.parent().hide()},n.Util.getMonthChangeMarketIndex=function(n){window.onbeforeunload=null,n=$(n);var t=$('input[id*="HiddenFieldMarketIndex"]');t.val(n.attr("marketIndex"))},n.Util.updateDccInput=function(n){n=$(n);var t=$("#dccHiddenInput").find($('input[id*="radioButtonInlineDccStatusOfferAccept"]')),i=$("#dccHiddenInput").find($('input[id*="radioButtonInlineDccStatusOfferReject"]'));n.is(":checked")?(i.val("true"),t.val("true"),t.attr("checked","checked")):(t.val("false"),i.val("false"),i.attr("checked","checked"))},n.CheckIfNotEmptyField=function(n){for(var t=0,t=0;t<n.length;t++)if($.trim($(n[t]).val())==""||$(n[t]).attr("requiredempty")!=null&&$(n[t]).attr("requiredempty")==$.trim($(n[t]).val()))return!1;return!0},n.Util.DisplayGetGoEmails=function(t,i){if(t!=undefined&&i!=undefined){var r=$("#"+t+"_TextBoxGetGoEmail_"+(i-1)),u=$("#"+t+"_TxtGetGoEmailChecker_"+(i-1));u.val("true"),$("#ggEmail_"+i).show(),$("#ggRegister_"+i).text("We will send your account setup information through this email address."),setAttribute=n.Util.setAttribute,r.attr("placeholder","EMAIL*"),setAttribute(r,"required","true"),setAttribute(r,"requirederror","Email address is required."),setAttribute(r,"validationtype","Email"),setAttribute(r,"validationtypeerror","Email address is not in the correct format")}else t==undefined&&i==undefined&&$("div#additionalFields").find(".getGoEmailBox").each(function(){var t=$(this),i;this.value!=""&&(i=parseInt(this.id.substr(-1))+1,$("#ggEmail_"+i).show(),$("#ggRegister_"+i).text("We will send your account setup information through this email address."),setAttribute=n.Util.setAttribute,t.attr("placeholder","EMAIL*"),setAttribute(t,"required","true"),setAttribute(t,"requirederror","Email address is required."),setAttribute(t,"validationtype","Email"),setAttribute(t,"validationtypeerror","Email address is not in the correct format"))})},n.DisplayPassengerInputFields=function(t){var a=$(t).siblings(":input"),e=$(t).attr("id"),v=$("select[id$='DropDownListTitle_0_0']"),y=$(v).attr("id"),u=$(t).attr("description"),o,l;u=u!=undefined?u.split(" "):undefined;var s=u!=undefined&&u.length<=2?u[0]:"",r=e.split("_"),h=s=="Infant"?"_"+r[r.length-1]:"";r=s=="Infant"?r[r.length-2]:r[r.length-1];var c=$(t).closest("div.row").nextAll("div.row"),i=$(t).closest("fieldset").nextAll("fieldset"),p=$(t).closest("div.row").siblings("div.hidden"),f=$(t).is("select.passengertitle")?$.trim($("#"+e).val()):undefined;return n.CheckIfNotEmptyField(a)&&$.trim($("#"+e).val())!=""||e.indexOf("MiddleName")>=0?($(c).removeClass("hidden"),$(i).removeClass("hidden"),i.length>1?s!="Infant"?(i.eq(0).addClass("expanded"),i.eq(1).addClass("collapsed")):(i.eq(0).addClass("expanded"),i.eq(1).addClass("collapsed"),i.eq(2).addClass("expanded")):i.length==1&&$(i).find("p.passportSelect").length!=0?$(i).addClass("expanded"):$(i).addClass("collapsed"),f!=undefined&&(o="",f=="MR"||f=="MSTR"?o="male":(f=="MISS"||f=="MS")&&(o="female"),l=$("#gender_"+$.trim(r+h+"_"+o)).attr("checked","").val(),$("select[id$='DropDownListGender_"+$.trim(r+h)+"']").val(l))):($(c).addClass("hidden"),$(i).addClass("hidden")),$("div[usbooking='False']").hide(),!0},n.ExpandPassengerFieldsOnValidate=function(){return $("div.passengerform").find(".hidden").each(function(){$(this).removeClass("hidden")}),!0},$(document).ready(function(){n.startSessionTracking(),$("select[data-exempt!='true']").selectmenu()}),window.onbeforeunload=function(){n.sessionTracking&&(n.sessionTracking.sessionExpiry=0),n.ReDisplayLoadingBar()},n.startSessionTracking=function(){n.sessionTracking&&parseInt(n.sessionTracking.sessionExpiry)>0&&setTimeout("SKYSALES.launchSessionNotice();",(parseInt(n.sessionTracking.sessionExpiry)*60-30-n.sessionTracking.sessionExpiryCountdown)*1e3)},$(window).resize(function(){$("#dimmer").length>0&&$("#dimmer").css({width:"100%",height:"100%"})}),n.launchSessionNotice=function(){if($("*").attr("tabindex",-1),n.sessionTracking&&parseInt(n.sessionTracking.sessionExpiry)>0){$("#dimmer").length>0&&($("#dimmer").remove(),$("#sessionNoticeBox").remove());var t='<div id="dimmer" style="display: block; position: fixed;"><\/div>';t+='<div id="sessionNoticeBox" role="alertdialog">',t+='<p aria-label="beginning of session notice dialog"><\/p>',t+='<button id="sessionNoticeCloseButton" accesskey="c" aria-label="close">X<\/button>',t+='<span id="sessionNoticeTitle">'+n.sessionTracking.title+"<\/span>",t+="<br/><br/>",t+='<span id="sessionNoticeText">'+n.sessionTracking.noticeText1,t+='<span id="sessionNoticeCount">'+n.sessionTracking.sessionExpiryCountdown+"<\/span>",t+='<span id="sessionNoticeTextBold">'+n.sessionTracking.noticeText2+'<\/span><\/span><br/><br/><span id="sessionNoticeConfirm">'+n.sessionTracking.noticeText3+"<\/span>",t+='<br/><br/><input id="sessionNoticeOK" aria-label="warning your session will expire in'+n.sessionTracking.sessionExpiryCountdown+'seconds activate the ok button by pressing the enter key  to continue with your session" class="button103x30" type="button" value="'+n.sessionTracking.noticeContinue+'"/><p aria-label="end of session notice dialog"><\/p><\/div>',$("body").append(t),$("#sessionNoticeCloseButton").css("margin-right","20px"),$("#sessionNoticeCloseButton").click(function(){$("#sessionNoticeBox").remove(),window.location="Search.aspx"}),$("#dimmer").show().css({width:"100%",height:"100%"}),$("#sessionNoticeBox").show(),$("#sessionNoticeOK").focus(),$("#sessionNoticeText").blur(function(){$(this).css("outline","none")}),n.sessionNoticeCountdownTick(),n.windowTitle=document.title,document.title=" ",$("#sessionNoticeOK").click(function(){sCount=0,$("#sessionNoticeCount").length>0&&(sCount=parseInt($("#sessionNoticeCount").html())),$("#dimmer").remove(),$("#sessionNoticeBox").remove(),$("*").removeAttr("tabindex"),document.title=n.windowTitle,sCount>0?($.post("SessionRefresh.aspx"),n.startSessionTracking()):(showMsg=!1,window.onbeforeunload=null,n.sessionTracking.isLoggedIn=="member"?$.post("LoginClear.aspx",function(){window.location="Login.aspx"}):n.sessionTracking.isLoggedIn=="agent"?$.post("LoginClear.aspx",function(){window.location="LoginAgent.aspx"}):n.sessionTracking.isLoggedIn=="loyalty"?$.post("LoginClear.aspx",function(){window.location="LoyaltySearch.aspx"}):window.location="Search.aspx")})}},n.sessionNoticeCountdown=function(){sCount=0,$("#sessionNoticeCount").length>0&&(sCount=parseInt($("#sessionNoticeCount").html())),sCount>0&&(sCount=sCount-1,$("#sessionNoticeCount").html(sCount),sCount>0&&(n.sessionNoticeCountdownTick(),document.title=n.windowTitle,window.focus(),$("#sessionNoticeOK").focus())),sCount==0&&$("#sessionNoticeText").length>0&&($("span#sessionNoticeTitle").text(n.sessionTracking.expiredTitle),$("span#sessionNoticeText").text(n.sessionTracking.expiredText),$("span#sessionNoticeConfirm").text(n.sessionTracking.expiredConfirm))},n.sessionNoticeCountdownTick=function(){setTimeout("SKYSALES.sessionNoticeCountdown();",1e3)},n.onChangeMeal=function(n){$(n).closest("div.mealControl").find("a.mealOpen").trigger("click")},$(document).ready(n.Util.ready),$(window).load(n.Util.load),n.Class.PopulateWCIAddressInfo=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.init=function(n){$(document).ready(function(){var t=$(n.Street.controlID),i=$(n.City.controlID),f=$(n.CountryCode.controlID),r=$(n.ProvStateCode.controlID),u=$(n.ZipCode.controlID);t.val(n.Street.value),i.val(n.City.value),r.val(n.ProvStateCode.value).selectmenu(),u.val(n.ZipCode.value)})},t},n.Class.BookingRetrieveNoReloc=function(){var i=new n.Class.SkySales,t=n.Util.extendObject(i);return t.clientID="",t.validationMsgs=[],t.init=function(n){this.setSettingsByObject(n),this.setVars(),this.addEvents(),this.populatePassengerNameInput(),this.initRadioButton(),this.initMarketMegaDropDownInput(),this.initMarketDateInput(),this.initRadioButton(),$(".noRelocOverlay > div").each(function(){var n=this;$(this).css({left:($(window).width()-$(n).outerWidth())/2,top:($(window).height()-$(n).outerHeight())/2})}),t.toggleProperty({"class":this,activated:!1})},t.setVars=function(){t.jsonData=""},t.toggleProperty=function(n){var t=$("#SkySales").data("SKYSALES.BookingRetrieveNoReloc"),i,r;t==undefined&&(t={}),i=Object.keys(n);for(r in i)t[i[r]]=n[i[r]];$(document.SkySales).data("SKYSALES.BookingRetrieveNoReloc",t)},t.getProperty=function(n){return $(document.SkySales).data("SKYSALES.BookingRetrieveNoReloc")[n]},t.addEvents=function(){$(".previous").click(function(){var n=$(this).closest("fieldset"),t=$(this).closest("fieldset").prev();$("#progressbar li").eq($("fieldset").index(n)).removeClass("active"),t.show(),n.hide()});$("#noRelocOptionNote").find("e").on("click",function(){$("#noRelocOptionNote").hide(),$("#noRelocForm, #noRelocHeaderLabel").show(),$(".retrieveHeaderCollapsed:visible")[0].click();var n=$("#noRelocForm").parent().find(".retrieveHeaderNote"),i=$("#noRelocForm").parent().find("table.manageBooking");n.find(".retrieveTextCollapsed").prop("class","retrieveTextExpanded"),n.find(".retrieveHeaderCollapsed").prop("class","retrieveHeaderExpanded"),i.hide(),t.toggleProperty({activated:!0})});$("#noRelocForm input[name='close']").on("click",function(){$("#noRelocOptionNote").show(),$("#noRelocForm, #noRelocHeaderLabel").hide(),$(".retrieveHeaderExpanded:visible")[0].click();var n=$("#noRelocForm").parent().find(".retrieveHeaderNote"),i=$("#noRelocForm").parent().find("table.manageBooking");n.find(".retrieveTextExpanded").prop("class","retrieveTextCollapsed"),n.find(".retrieveHeaderExpanded").prop("class","retrieveHeaderCollapsed"),i.show(),t.toggleProperty({activated:!1})});$("#noRelocForm fieldset input[type='button'][name='next']").each(function(n,i){var r=t;$(i).on("click",function(){var f=r.validateStep(n+1),u,i;f&&(u=$(this).closest("fieldset"),i=$(this).closest("fieldset").next(),$("#progressbar li").eq($("fieldset").index(i)).addClass("active"),i.show(),u.hide(),r.removeValidationTooltips())})});$("#btnSubmitRetrieveBooking").on("click",function(){var i=t,r=i.validateStep(6);r&&$("#ControlGroupViewItineraryRetrievalView_BookingRetrieveInputNoRelocViewItineraryRetrievalView_LinkButtonRetrieveNoReloc")[0].click()});$("#SkySales").on("submit",function(n){t.getProperty("isValid")==!1&&n.preventDefault()});$("#noRelocForm fieldset input[type='button'][name='previous']").on("click",function(){t.removeValidationTooltips()});$(".carrierCode").change(function(){$("#flightCarrierCode").val($(this).val())})},t.populatePassengerNameInput=function(n){var t=n==undefined?1:parseInt($(n).val());$("#noRelocForm table[data-id='passengerNameInput']").find("tr[data-label]").show().filter(function(n){return n>=t}).each(function(){$(this).hide()})},t.initRadioButton=function(){var n=$("#"+this.clientID+"_SECURITYANS4CC");n.prop("checked",!0)},t.initMarketMegaDropDownInput=function(){var i=new n.Class.MarketMegaDropDownInput,t={originTextBoxContainerId:this.clientID+"_originStationContainerCategoryHidden1",destinationTextBoxContainerId:this.clientID+"_destinationStationContainerCategoryHidden1",originStationInputId:this.clientID+"_originStationContainerCategory1",destinationStationInputId:this.clientID+"_destinationStationContainerCategory1",originStationSelectId:this.clientID+"_ORIGINCITY1",destinationStationSelectId:this.clientID+"_DESTINATIONCITY1",flightTypeDivContainerId:"",initialFromSearchLabel:"From",initialToSearchLabel:"To",isBookingRetrieve:"true",noSearchResultLabel:"No destination match your search. Please try again.",dateDisplayId:""};i.init(t);$("#"+t.originTextBoxContainerId).on("change",function(){var n=$("#"+t.originStationSelectId);n.find("option[value='"+$(this).val()+"']").length==0&&n.append("<option value='"+$(this).val()+"' />"),n.val($(this).val())});$("#"+t.destinationTextBoxContainerId).on("change",function(){var n=$("#"+t.destinationStationSelectId);n.find("option[value='"+$(this).val()+"']").length==0&&n.append("<option value='"+$(this).val()+"' />"),n.val($(this).val())})},t.initMarketDateInput=function(){var i=new n.Class.MarketDate,r={dateDisplayFormat:"dd M yy",flightTypeDivContainerId:"",hasFlightSearchSession:"",marketDateDisplayId:this.clientID+"_date_picker_display1",marketDateId:this.clientID+"_date_picker_id1",marketDayId:this.clientID+"_DropDownListMarketDay1",marketMonthYearId:this.clientID+"_DropDownListMarketMonth1",originStationInputId:this.clientID+"_originStationContainerCategory1"},t;i.init(r),t=$("#"+this.clientID+"_date_picker_id1").datepicker("option","onSelect"),$("#"+this.clientID+"_date_picker_id1").datepicker("option","onSelect",function(n,i){try{t(n,i)}catch(r){}DP_jQuery.datepicker._hideDatepicker()})},t.showValidationTooltip=function(n,t,i){var r=$(n).data("tooltipWidget");(r==undefined||r==null)&&(r=$("<div/>").attr({style:"position:absolute;padding:0;margin:0;z-index:9999"}).append($("<div/>").attr({"class":"msgContent",style:"padding:5px;color:#fff;font-size:15px;width: 250px;height: 62px;background: red;overflow-y: auto;overflow-x: hidden;-moz-box-shadow: 3px 3px 6px #6C7280;-webkit-box-shadow: 3px 3px 6px #6C7280;box-shadow: 3px 3px 6px #6C7280;word-wrap: break-word;border-radius: 4px;"})).append($("<div/>").attr({"class":"validationArrow",style:"top:72px;left:125px;"})).appendTo(i==undefined?$(n).parent():$(i)),r.css({top:$(n).position().top-$(r).outerHeight()-10+"px",left:$(n).position().left+($(n).outerWidth()-$(r).outerWidth())/2+"px"}),r.destroy=function(){$(n).removeData("tooltipWidget"),r.remove()}),r.find(".msgContent").text(t),$(n).data("tooltipWidget",r)},t.removeValidationTooltips=function(){$("#noRelocForm fieldset:nth-of-type(2)").find("input[type='text'][id^='"+this.clientID+"']").each(function(){$(this).css({border:"1px solid #D3D3D3"}),($(this).data("tooltipWidget")!=undefined||$(this).data("tooltipWidget")!=null)&&$(this).data("tooltipWidget").destroy()})},t.validateStep=function(n,t){var i=this,r=this.validationMsgs,f=this.clientID,e,u;if(n==2)if(t==undefined){if(u=!1,$("#noRelocForm fieldset:nth-of-type(2)").find("input[type='text'][id^='"+f+"']:visible").each(function(){if($(this).val().trim().length==0){u||(i.showValidationTooltip(this,r[0]),u=!0),$(this).css({border:"2px solid red"}),$(this).off("keyup.skysales.bookingretrievenoreloc");$(this).on("keyup.skysales.bookingretrievenoreloc",function(){i.validateStep(n,this)})}else if(!/^[A-z']+$/.test($(this).val().trim())){u||(i.showValidationTooltip(this,r[1]),u=!0),$(this).css({border:"2px solid red"}),$(this).off("keyup.skysales.bookingretrievenoreloc");$(this).on("keyup.skysales.bookingretrievenoreloc",function(){i.validateStep(n,this)})}}),u)return!1}else{if($(t).val().trim().length==0)return i.showValidationTooltip(t,r[0]),$(t).css({border:"2px solid red"}),!1;if(/^[A-z']+$/.test($(t).val().trim()))$(t).css({border:"1px solid #D3D3D3"}),($(t).data("tooltipWidget")!=undefined||$(t).data("tooltipWidget")!=null)&&$(t).data("tooltipWidget").destroy();else return i.showValidationTooltip(t,r[1]),$(t).css({border:"2px solid red"}),!1}else if(n==3){var l=$("#"+f+"_originStationContainerCategory1"),it=$("#input_"+f+"_originStationContainerCategory1"),o=it.parent(),g=$("#"+f+"_originStationContainerCategory1_List.mcdropdown_menu"),a=$("#"+f+"_destinationStationContainerCategory1"),rt=$("#input_"+f+"_destinationStationContainerCategory1"),s=rt.parent(),nt=$("#"+f+"_destinationStationContainerCategory1_List.mcdropdown_menu");if(t==undefined){if(u=!1,l.val().trim().length==0){i.showValidationTooltip(o,r[2],o.parent()),$(o).css({border:"2px solid red"}),$(g).off("mouseup.skysales.bookingretrievenoreloc");$(g).on("mouseup.skysales.bookingretrievenoreloc",function(){setTimeout(function(){i.validateStep(n,l)},300)});u=!0}if(a.val().trim().length==0){i.showValidationTooltip(s,r[3],s.parent()),$(s).css({border:"2px solid red"}),$(nt).off("mouseup.skysales.bookingretrievenoreloc");$(nt).on("mouseup.skysales.bookingretrievenoreloc",function(){setTimeout(function(){i.validateStep(n,a)},300)});u=!0}if(u)return!1}else{if($(t).val().trim().length==0){switch($(t).prop("id")){case l.prop("id"):i.showValidationTooltip(o,r[2],o.parent()),$(o).css({border:"2px solid red"});break;case a.prop("id"):i.showValidationTooltip(s,r[3],s.parent()),$(s).css({border:"2px solid red"})}return!1}switch($(t).prop("id")){case l.prop("id"):$(o).css({border:"1px solid #D3D3D3"}),($(o).data("tooltipWidget")!=undefined||$(o).data("tooltipWidget")!=null)&&$(o).data("tooltipWidget").destroy();break;case a.prop("id"):$(s).css({border:"1px solid #D3D3D3"}),($(s).data("tooltipWidget")!=undefined||$(s).data("tooltipWidget")!=null)&&$(s).data("tooltipWidget").destroy()}}}else if(n==4){var k=$("#"+f+"_marketDate1 input[id^='"+f+"_date_picker_display']"),h=k.parent(),tt=$("#"+f+"_date_picker_id1").datepicker("option","onSelect");if(t==undefined){if(isNaN(Date.parse(k.val())))return i.showValidationTooltip(h,r[4],h.parent()),$(h).css({border:"2px solid red"}),$("#"+f+"_date_picker_id1").datepicker("option","onSelect",function(t,r){try{tt(t,r)}catch(u){}i.validateStep(n,k)}),!1}else{if(isNaN(Date.parse($(t).val())))return i.showValidationTooltip(h,r[4],h.parent()),$(h).css({border:"2px solid red"}),!1;$(h).css({border:"1px solid #D3D3D3"}),($(h).data("tooltipWidget")!=undefined||$(h).data("tooltipWidget")!=null)&&$(h).data("tooltipWidget").destroy(),$("#"+f+"_date_picker_id1").datepicker("option","onSelect",function(n,t){try{tt(n,t)}catch(i){}})}}else if(n==5)if(t==undefined){if(u=!1,e=$("#"+f+"_FLIGHTNUMBER"),e.val().trim().length==0){u||(i.showValidationTooltip(e,r[5]),u=!0),e.css({border:"2px solid red"}),e.off("keyup.skysales.bookingretrievenoreloc");e.on("keyup.skysales.bookingretrievenoreloc",function(){i.validateStep(n,e)})}else if(!/^[A-z0-9]+$/.test(e.val().trim())){u||(i.showValidationTooltip(e,r[6]),u=!0),e.css({border:"2px solid red"}),e.off("keyup.skysales.bookingretrievenoreloc");e.on("keyup.skysales.bookingretrievenoreloc",function(){i.validateStep(n,e)})}if(u)return!1}else{if($(t).val().trim().length==0)return i.showValidationTooltip(t,r[5]),$(t).css({border:"2px solid red"}),!1;if(/^[0-9A-z']+$/.test($(t).val().trim()))$(t).css({border:"1px solid #D3D3D3"}),($(t).data("tooltipWidget")!=undefined||$(t).data("tooltipWidget")!=null)&&$(t).data("tooltipWidget").destroy();else return i.showValidationTooltip(t,r[6]),$(t).css({border:"2px solid red"}),!1}else if(n==6){var d=$("#"+f+"_SECURITYANS1COUNTRYCODE"),c=$("#"+f+"_SECURITYANS1AREACODE"),v=$("#"+f+"_SECURITYANS1PHONENUMBER"),y=$("#"+f+"_SECURITYANS2EMAIL"),p=$("#"+f+"_SECURITYANS3MONTH"),w=$("#"+f+"_SECURITYANS3DAY"),b=$("#"+f+"_SECURITYANS3YEAR");if(t==undefined){if(u=!1,$("#noRelocForm fieldset").find("input[type='text'][id^='"+f+"']:visible").each(function(){if($(this).val().trim().length==0){if(!u){switch($(this).prop("id")){case d.prop("id"):i.showValidationTooltip(this,r[20]);break;case c.prop("id"):i.showValidationTooltip(this,r[7]);break;case v.prop("id"):i.showValidationTooltip(this,r[8]);break;case y.prop("id"):i.showValidationTooltip(this,r[9]);break;case p.prop("id"):i.showValidationTooltip(this,r[10]);break;case w.prop("id"):i.showValidationTooltip(this,r[11]);break;case b.prop("id"):i.showValidationTooltip(this,r[12])}u=!0}$(this).css({border:"2px solid red"}),$(this).off("keyup.skysales.bookingretrievenoreloc");$(this).on("keyup.skysales.bookingretrievenoreloc",function(){i.validateStep(n,this)});$(this).off("change.skysales.bookingretrievenoreloc");$(this).on("change.skysales.bookingretrievenoreloc",function(){i.validateStep(n,this)})}else{if(!u)switch($(this).prop("id")){case d.prop("id"):/(^\+?)\d+$/.test($(this).val().trim())||t(this,r[19]);break;case c.prop("id"):/(^\+?)\d+$/.test($(this).val().trim())||t(this,r[13]);break;case v.prop("id"):/(^\+?)[0-9-]+$/.test($(this).val().trim())||t(this,r[14]);break;case y.prop("id"):/^\w+([\.\-\']?\w+)*@\w+([\.\-\']?\w+)*(\.\w{1,8})$/.test($(this).val().trim())||t(this,r[15]);break;case p.prop("id"):/^(0?[1-9]|1[012])$/.test($(this).val().trim())||t(this,r[16]);break;case w.prop("id"):/^(0?[0-9]|[1-2][0-9]|3[0-1])$/.test($(this).val().trim())||t(this,r[17]);break;case b.prop("id"):/^(19|20)\d{2}$/.test($(this).val().trim())||t(this,r[18])}function t(t,r){i.showValidationTooltip(t,r),$(t).css({border:"2px solid red"}),$(t).off("keyup.skysales.bookingretrievenoreloc");$(t).on("keyup.skysales.bookingretrievenoreloc",function(){i.validateStep(n,t)});$(t).off("change.skysales.bookingretrievenoreloc");$(t).on("change.skysales.bookingretrievenoreloc",function(){i.validateStep(n,t)});u=!0}}}),u)return!1}else{if($(t).val().trim().length==0){switch($(t).prop("id")){case c.prop("id"):i.showValidationTooltip(t,r[20]);break;case c.prop("id"):i.showValidationTooltip(t,r[7]);break;case v.prop("id"):i.showValidationTooltip(t,r[8]);break;case y.prop("id"):i.showValidationTooltip(t,r[9]);break;case p.prop("id"):i.showValidationTooltip(t,r[10]);break;case w.prop("id"):i.showValidationTooltip(t,r[11]);break;case b.prop("id"):i.showValidationTooltip(t,r[12])}return $(t).css({border:"2px solid red"}),!1}if($(t).val().trim().length>0){i.removeValidation=function(){$(t).css({border:"1px solid #D3D3D3"}),($(t).data("tooltipWidget")!=undefined||$(t).data("tooltipWidget")!=null)&&$(t).data("tooltipWidget").destroy()};switch($(t).prop("id")){case d.prop("id"):if(/(^\+?)\d+$/.test($(t).val().trim()))i.removeValidation();else return i.showValidationTooltip(t,r[19]),$(t).css({border:"2px solid red"}),!1;break;case c.prop("id"):if(/(^\+?)\d+$/.test($(t).val().trim()))i.removeValidation();else return i.showValidationTooltip(t,r[13]),$(t).css({border:"2px solid red"}),!1;break;case v.prop("id"):if(/(^\+?)\d+$/.test($(t).val().trim()))i.removeValidation();else return i.showValidationTooltip(t,r[14]),$(t).css({border:"2px solid red"}),!1;break;case y.prop("id"):if(/^\w+([\.\-\']?\w+)*@\w+([\.\-\']?\w+)*(\.\w{1,8})$/.test($(t).val().trim()))i.removeValidation();else return i.showValidationTooltip(t,r[15]),$(t).css({border:"2px solid red"}),!1;break;case p.prop("id"):if(/^(0?[1-9]|1[012])$/.test($(t).val().trim()))i.removeValidation();else return i.showValidationTooltip(t,r[16]),$(t).css({border:"2px solid red"}),!1;break;case w.prop("id"):if(/^(0?[0-9]|[1-2][0-9]|3[0-1])$/.test($(t).val().trim()))i.removeValidation();else return i.showValidationTooltip(t,r[17]),$(t).css({border:"2px solid red"}),!1;break;case b.prop("id"):if(/^(19|20)\d{2}$/.test($(t).val().trim()))i.removeValidation();else return i.showValidationTooltip(t,r[18]),$(t).css({border:"2px solid red"}),!1}}}}return!0},t},n.Util.CheckUMNRNotification=function(){var o=!0,t=$("#SkySales").data("SKYSALES.UMNRPOPUPNOTIFICATION"),i,f,e,h;if(typeof t=="object")try{if(!t.isActivated){var r=[],c=t.paxCount,l=t.minAge,a=t.maxAge,u="#"+t.clientID;for(i=0;i<c;i++){var v=$(u+"_DropDownListBirthDateMonth_"+i).val(),y=$(u+"_DropDownListBirthDateDay_"+i).val(),p=$(u+"_DropDownListBirthDateYear_"+i).val(),w=moment(v+"/"+y+"/"+p),s=t.departDate,b=moment(s==undefined?new Date:s).diff(w,"years");r.push(b)}f=!1,e=!1;for(i in r)r[i]>=l&&r[i]<=a&&(f=!0),r[i]>=18&&(e=!0);f&&!e&&(h=t.reminderHeader==undefined?"Unaccompanied Minor":t.reminderHeader.toString(),n.Util.initDisplayDialogOpen(180,400,h,"UMNRPopUpNotificationContent","OK"),$("#dimmerDialogContent").dialog("option","buttons",{OK:function(){$(this).dialog("close"),$("#CONTROLGROUPGUEST_LinkButtonSubmit")[0]!=undefined?$("#CONTROLGROUPGUEST_LinkButtonSubmit")[0].click():$("#CONTROLGROUPAGENTGUEST_LinkButtonSubmit")[0]!=undefined?$("#CONTROLGROUPAGENTGUEST_LinkButtonSubmit")[0].click():$("#CONTROLGROUPAGENTGUEST_ButtonSubmit")[0]!=undefined&&$("#CONTROLGROUPAGENTGUEST_ButtonSubmit")[0].click()}}).css("height","auto"),$("#dimmerDialogContentBody").css("height","auto"),t.isActivated=!0,$("#SkySales").data("SKYSALES.UMNRPOPUPNOTIFICATION",t),o=!1)}}catch(k){console.log(k)}return o}}()